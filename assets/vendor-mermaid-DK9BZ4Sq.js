const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-katex-C66qTcOd.js","assets/vendor-katex-aXPCCxD8.css"])))=>i.map(i=>d[i]);
import{bD as ct,bE as Bt,bF as Gt,bG as Mt,bH as bs,bI as js,bJ as ro,bK as qp,bL as dn,bM as g2,bN as y2,bO as ck,bP as hk,bQ as uk,bR as dk,bS as fk,bT as Pt,bU as pk,bV as gk,bW as yk,bX as K1,bY as mk,bZ as xk,b_ as bk,b$ as fn,c0 as pn,c1 as Ir,c2 as gn,c3 as yn,c4 as vk}from"./vendor-BQXXivym.js";import{a0 as Q1,X as Nc,a1 as $c,a2 as Fo,a3 as Yp,a4 as Dn,a5 as Wi,a6 as yt,a7 as Me,a8 as _k,a9 as Xi,aa as Rl,ab as Bl,Z as ze,ac as io,ad as Z1,ae as sl,af as tn,ag as m2,ah as J1,ai as kk,aj as tf,ak as wk,al as Il,am as Mc,an as Fc,ao as Tk,ap as Mh,aq as Sk,ar as Ck,as as Ek,at as x2}from"./vendor-utils-CNk0EeOP.js";import{c as Fh,a as Ak,f as Lk}from"./vendor-cytoscape-9LwgsINy.js";import{d as rr,b as Dk,c as Rk,e as Bk,g as Ik}from"./vendor-collab-zeKlvpyG.js";import{E as Nk}from"./vendor-elk-BK_qgtfq.js";const $k=(function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"})(),Mk=function(e){return"/yiitap/"+e},Gp={},ue=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){let a=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),h=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=a(r.map(l=>{if(l=Mk(l),l in Gp)return;Gp[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":$k,u||(p.as="script"),p.crossOrigin="",p.href=l,h&&p.setAttribute("nonce",h),document.head.appendChild(p),u)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return t().catch(n)})};var dd={name:"mermaid",version:"11.12.3",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.23",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},b2=Object.defineProperty,d=(e,t)=>b2(e,"name",{value:t,configurable:!0}),Ph=(e,t)=>{for(var r in t)b2(e,r,{get:t[r],enumerable:!0})},Ii={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},P={trace:d((...e)=>{},"trace"),debug:d((...e)=>{},"debug"),info:d((...e)=>{},"info"),warn:d((...e)=>{},"warn"),error:d((...e)=>{},"error"),fatal:d((...e)=>{},"fatal")},ef=d(function(e="fatal"){let t=Ii.fatal;typeof e=="string"?e.toLowerCase()in Ii&&(t=Ii[e]):typeof e=="number"&&(t=e),P.trace=()=>{},P.debug=()=>{},P.info=()=>{},P.warn=()=>{},P.error=()=>{},P.fatal=()=>{},t<=Ii.fatal&&(P.fatal=console.error?console.error.bind(console,Hr("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Hr("FATAL"))),t<=Ii.error&&(P.error=console.error?console.error.bind(console,Hr("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Hr("ERROR"))),t<=Ii.warn&&(P.warn=console.warn?console.warn.bind(console,Hr("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Hr("WARN"))),t<=Ii.info&&(P.info=console.info?console.info.bind(console,Hr("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Hr("INFO"))),t<=Ii.debug&&(P.debug=console.debug?console.debug.bind(console,Hr("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Hr("DEBUG"))),t<=Ii.trace&&(P.trace=console.debug?console.debug.bind(console,Hr("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Hr("TRACE")))},"setLogLevel"),Hr=d(e=>`%c${rr().format("ss.SSS")} : ${e} : `,"format"),v2=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Jo=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Fk=/\s*%%.*\n/gm,sa,_2=(sa=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},d(sa,"UnknownDiagramError"),sa),en={},rf=d(function(e,t){e=e.replace(v2,"").replace(Jo,"").replace(Fk,`
`);for(const[r,{detector:i}]of Object.entries(en))if(i(e,t))return r;throw new _2(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),fd=d((...e)=>{for(const{id:t,detector:r,loader:i}of e)k2(t,r,i)},"registerLazyLoadedDiagrams"),k2=d((e,t,r)=>{en[e]&&P.warn(`Detector with key ${e} already exists. Overwriting.`),en[e]={detector:t,loader:r},P.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),Pk=d(e=>en[e].loader,"getDiagramLoader"),pd=d((e,t,{depth:r=2,clobber:i=!1}={})=>{const s={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(n=>pd(e,n,s)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(n=>{e.includes(n)||e.push(n)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(n=>{typeof t[n]=="object"&&(e[n]===void 0||typeof e[n]=="object")?(e[n]===void 0&&(e[n]=Array.isArray(t[n])?[]:{}),e[n]=pd(e[n],t[n],{depth:r-1,clobber:i})):(i||typeof e[n]!="object"&&typeof t[n]!="object")&&(e[n]=t[n])}),e)},"assignWithDepth"),Fe=pd,Oh="#ffffff",Vh="#f2f2f2",kr=d((e,t)=>t?ct(e,{s:-40,l:10}):ct(e,{s:-40,l:-10}),"mkBorder"),na,Ok=(na=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S,C,k,v;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||ct(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||ct(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||kr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||kr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||kr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||kr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Bt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Bt(this.tertiaryColor),this.lineColor=this.lineColor||Bt(this.background),this.arrowheadColor=this.arrowheadColor||Bt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Gt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Bt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Mt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Gt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Gt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Mt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Mt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ct(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ct(this.primaryColor,{h:330}),this.darkMode)for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Gt(this["cScale"+A],75);else for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScale"+A]=Gt(this["cScale"+A],25);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleInv"+A]=this["cScaleInv"+A]||Bt(this["cScale"+A]);for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this.darkMode?this["cScalePeer"+A]=this["cScalePeer"+A]||Mt(this["cScale"+A],10):this["cScalePeer"+A]=this["cScalePeer"+A]||Gt(this["cScale"+A],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let A=0;A<this.THEME_COLOR_LIMIT;A++)this["cScaleLabel"+A]=this["cScaleLabel"+A]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let A=0;A<5;A++)this["surface"+A]=this["surface"+A]||ct(this.mainBkg,{h:180,s:-15,l:t*(5+A*3)}),this["surfacePeer"+A]=this["surfacePeer"+A]||ct(this.mainBkg,{h:180,s:-15,l:t*(8+A*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||ct(this.primaryColor,{h:64}),this.fillType3=this.fillType3||ct(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||ct(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||ct(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||ct(this.primaryColor,{h:128}),this.fillType7=this.fillType7||ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ct(this.primaryColor,{l:-10}),this.pie5=this.pie5||ct(this.secondaryColor,{l:-10}),this.pie6=this.pie6||ct(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||ct(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ct(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ct(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ct(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||ct(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||ct(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((i=this.radar)==null?void 0:i.axisStrokeWidth)||2,axisLabelFontSize:((s=this.radar)==null?void 0:s.axisLabelFontSize)||12,curveOpacity:((n=this.radar)==null?void 0:n.curveOpacity)||.5,curveStrokeWidth:((a=this.radar)==null?void 0:a.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((h=this.radar)==null?void 0:h.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((u=this.radar)==null?void 0:u.legendBoxSize)||12,legendFontSize:((f=this.radar)==null?void 0:f.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||bs(this.quadrant1Fill)?Mt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((p=this.xyChart)==null?void 0:p.backgroundColor)||this.background,titleColor:((g=this.xyChart)==null?void 0:g.titleColor)||this.primaryTextColor,xAxisTitleColor:((y=this.xyChart)==null?void 0:y.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((x=this.xyChart)==null?void 0:x.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((b=this.xyChart)==null?void 0:b.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((_=this.xyChart)==null?void 0:_.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((S=this.xyChart)==null?void 0:S.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((k=this.xyChart)==null?void 0:k.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((v=this.xyChart)==null?void 0:v.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ct(this.primaryColor,{h:-30}),this.git4=this.git4||ct(this.primaryColor,{h:-60}),this.git5=this.git5||ct(this.primaryColor,{h:-90}),this.git6=this.git6||ct(this.primaryColor,{h:60}),this.git7=this.git7||ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=Mt(this.git0,25),this.git1=Mt(this.git1,25),this.git2=Mt(this.git2,25),this.git3=Mt(this.git3,25),this.git4=Mt(this.git4,25),this.git5=Mt(this.git5,25),this.git6=Mt(this.git6,25),this.git7=Mt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Bt(this.git0),this.gitInv1=this.gitInv1||Bt(this.git1),this.gitInv2=this.gitInv2||Bt(this.git2),this.gitInv3=this.gitInv3||Bt(this.git3),this.gitInv4=this.gitInv4||Bt(this.git4),this.gitInv5=this.gitInv5||Bt(this.git5),this.gitInv6=this.gitInv6||Bt(this.git6),this.gitInv7=this.gitInv7||Bt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Oh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Vh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},d(na,"Theme"),na),Vk=d(e=>{const t=new Ok;return t.calculate(e),t},"getThemeVariables"),aa,zk=(aa=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Mt(this.primaryColor,16),this.tertiaryColor=ct(this.primaryColor,{h:-160}),this.primaryBorderColor=Bt(this.background),this.secondaryBorderColor=kr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Bt(this.primaryColor),this.secondaryTextColor=Bt(this.secondaryColor),this.tertiaryTextColor=Bt(this.tertiaryColor),this.lineColor=Bt(this.background),this.textColor=Bt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Mt(Bt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=js(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Gt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Gt(this.sectionBkgColor,10),this.taskBorderColor=js(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=js(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Mt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Gt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S,C,k;this.secondBkg=Mt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Mt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Mt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ct(this.primaryColor,{h:64}),this.fillType3=ct(this.secondaryColor,{h:64}),this.fillType4=ct(this.primaryColor,{h:-64}),this.fillType5=ct(this.secondaryColor,{h:-64}),this.fillType6=ct(this.primaryColor,{h:128}),this.fillType7=ct(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ct(this.primaryColor,{h:330});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||Bt(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScalePeer"+v]=this["cScalePeer"+v]||Mt(this["cScale"+v],10);for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||ct(this.mainBkg,{h:30,s:-30,l:-(-10+v*4)}),this["surfacePeer"+v]=this["surfacePeer"+v]||ct(this.mainBkg,{h:30,s:-30,l:-(-7+v*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||bs(this.quadrant1Fill)?Mt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((l=this.xyChart)==null?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((g=this.radar)==null?void 0:g.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((x=this.radar)==null?void 0:x.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((_=this.radar)==null?void 0:_.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Mt(this.secondaryColor,20),this.git1=Mt(this.pie2||this.secondaryColor,20),this.git2=Mt(this.pie3||this.tertiaryColor,20),this.git3=Mt(this.pie4||ct(this.primaryColor,{h:-30}),20),this.git4=Mt(this.pie5||ct(this.primaryColor,{h:-60}),20),this.git5=Mt(this.pie6||ct(this.primaryColor,{h:-90}),10),this.git6=Mt(this.pie7||ct(this.primaryColor,{h:60}),10),this.git7=Mt(this.pie8||ct(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Bt(this.git0),this.gitInv1=this.gitInv1||Bt(this.git1),this.gitInv2=this.gitInv2||Bt(this.git2),this.gitInv3=this.gitInv3||Bt(this.git3),this.gitInv4=this.gitInv4||Bt(this.git4),this.gitInv5=this.gitInv5||Bt(this.git5),this.gitInv6=this.gitInv6||Bt(this.git6),this.gitInv7=this.gitInv7||Bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Mt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Mt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},d(aa,"Theme"),aa),Wk=d(e=>{const t=new zk;return t.calculate(e),t},"getThemeVariables"),oa,qk=(oa=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=ct(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=ct(this.primaryColor,{h:-160}),this.primaryBorderColor=kr(this.primaryColor,this.darkMode),this.secondaryBorderColor=kr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Bt(this.primaryColor),this.secondaryTextColor=Bt(this.secondaryColor),this.tertiaryTextColor=Bt(this.tertiaryColor),this.lineColor=Bt(this.background),this.textColor=Bt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=js(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S,C,k;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ct(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Gt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Gt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=Gt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||Gt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||ct(this["cScale"+v],{h:180});for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||ct(this.mainBkg,{h:30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||ct(this.mainBkg,{h:30,l:-(7+v*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Bt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Bt(this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Mt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Mt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Mt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ct(this.primaryColor,{h:64}),this.fillType3=ct(this.secondaryColor,{h:64}),this.fillType4=ct(this.primaryColor,{h:-64}),this.fillType5=ct(this.secondaryColor,{h:-64}),this.fillType6=ct(this.primaryColor,{h:128}),this.fillType7=ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||ct(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||ct(this.primaryColor,{l:-10}),this.pie5=this.pie5||ct(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ct(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||ct(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||ct(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||ct(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||ct(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||ct(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||ct(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||bs(this.quadrant1Fill)?Mt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((h=this.radar)==null?void 0:h.graticuleOpacity)||.3,legendBoxSize:((l=this.radar)==null?void 0:l.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((g=this.xyChart)==null?void 0:g.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((_=this.xyChart)==null?void 0:_.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ct(this.primaryColor,{h:-30}),this.git4=this.git4||ct(this.primaryColor,{h:-60}),this.git5=this.git5||ct(this.primaryColor,{h:-90}),this.git6=this.git6||ct(this.primaryColor,{h:60}),this.git7=this.git7||ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=Mt(this.git0,25),this.git1=Mt(this.git1,25),this.git2=Mt(this.git2,25),this.git3=Mt(this.git3,25),this.git4=Mt(this.git4,25),this.git5=Mt(this.git5,25),this.git6=Mt(this.git6,25),this.git7=Mt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Gt(Bt(this.git0),25),this.gitInv1=this.gitInv1||Bt(this.git1),this.gitInv2=this.gitInv2||Bt(this.git2),this.gitInv3=this.gitInv3||Bt(this.git3),this.gitInv4=this.gitInv4||Bt(this.git4),this.gitInv5=this.gitInv5||Bt(this.git5),this.gitInv6=this.gitInv6||Bt(this.git6),this.gitInv7=this.gitInv7||Bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Oh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Vh}calculate(t){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},d(oa,"Theme"),oa),zh=d(e=>{const t=new qk;return t.calculate(e),t},"getThemeVariables"),la,Yk=(la=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Mt("#cde498",10),this.primaryBorderColor=kr(this.primaryColor,this.darkMode),this.secondaryBorderColor=kr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Bt(this.primaryColor),this.secondaryTextColor=Bt(this.secondaryColor),this.tertiaryTextColor=Bt(this.primaryColor),this.lineColor=Bt(this.background),this.textColor=Bt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S,C,k;this.actorBorder=Gt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||ct(this.primaryColor,{h:30}),this.cScale4=this.cScale4||ct(this.primaryColor,{h:60}),this.cScale5=this.cScale5||ct(this.primaryColor,{h:90}),this.cScale6=this.cScale6||ct(this.primaryColor,{h:120}),this.cScale7=this.cScale7||ct(this.primaryColor,{h:150}),this.cScale8=this.cScale8||ct(this.primaryColor,{h:210}),this.cScale9=this.cScale9||ct(this.primaryColor,{h:270}),this.cScale10=this.cScale10||ct(this.primaryColor,{h:300}),this.cScale11=this.cScale11||ct(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Gt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Gt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=Gt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||Gt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||ct(this["cScale"+v],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||ct(this.mainBkg,{h:30,s:-30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||ct(this.mainBkg,{h:30,s:-30,l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Mt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Mt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ct(this.primaryColor,{h:64}),this.fillType3=ct(this.secondaryColor,{h:64}),this.fillType4=ct(this.primaryColor,{h:-64}),this.fillType5=ct(this.secondaryColor,{h:-64}),this.fillType6=ct(this.primaryColor,{h:128}),this.fillType7=ct(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||ct(this.primaryColor,{l:-30}),this.pie5=this.pie5||ct(this.secondaryColor,{l:-30}),this.pie6=this.pie6||ct(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||ct(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||ct(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||ct(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||ct(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||ct(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||ct(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||bs(this.quadrant1Fill)?Mt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((n=this.radar)==null?void 0:n.curveStrokeWidth)||2,graticuleColor:((a=this.radar)==null?void 0:a.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((o=this.radar)==null?void 0:o.graticuleStrokeWidth)||1,graticuleOpacity:((h=this.radar)==null?void 0:h.graticuleOpacity)||.3,legendBoxSize:((l=this.radar)==null?void 0:l.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.xyChart={backgroundColor:((f=this.xyChart)==null?void 0:f.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((g=this.xyChart)==null?void 0:g.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((y=this.xyChart)==null?void 0:y.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((m=this.xyChart)==null?void 0:m.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((x=this.xyChart)==null?void 0:x.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((_=this.xyChart)==null?void 0:_.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((S=this.xyChart)==null?void 0:S.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((k=this.xyChart)==null?void 0:k.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||ct(this.primaryColor,{h:-30}),this.git4=this.git4||ct(this.primaryColor,{h:-60}),this.git5=this.git5||ct(this.primaryColor,{h:-90}),this.git6=this.git6||ct(this.primaryColor,{h:60}),this.git7=this.git7||ct(this.primaryColor,{h:120}),this.darkMode?(this.git0=Mt(this.git0,25),this.git1=Mt(this.git1,25),this.git2=Mt(this.git2,25),this.git3=Mt(this.git3,25),this.git4=Mt(this.git4,25),this.git5=Mt(this.git5,25),this.git6=Mt(this.git6,25),this.git7=Mt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Bt(this.git0),this.gitInv1=this.gitInv1||Bt(this.git1),this.gitInv2=this.gitInv2||Bt(this.git2),this.gitInv3=this.gitInv3||Bt(this.git3),this.gitInv4=this.gitInv4||Bt(this.git4),this.gitInv5=this.gitInv5||Bt(this.git5),this.gitInv6=this.gitInv6||Bt(this.git6),this.gitInv7=this.gitInv7||Bt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Bt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Bt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Oh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Vh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},d(la,"Theme"),la),Gk=d(e=>{const t=new Yk;return t.calculate(e),t},"getThemeVariables"),ca,Hk=(ca=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Mt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=ct(this.primaryColor,{h:-160}),this.primaryBorderColor=kr(this.primaryColor,this.darkMode),this.secondaryBorderColor=kr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=kr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Bt(this.primaryColor),this.secondaryTextColor=Bt(this.secondaryColor),this.tertiaryTextColor=Bt(this.tertiaryColor),this.lineColor=Bt(this.background),this.textColor=Bt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Mt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S,C,k;this.secondBkg=Mt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Mt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||Bt(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this.darkMode?this["cScalePeer"+v]=this["cScalePeer"+v]||Mt(this["cScale"+v],10):this["cScalePeer"+v]=this["cScalePeer"+v]||Gt(this["cScale"+v],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||ct(this.mainBkg,{l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||ct(this.mainBkg,{l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Mt(this.contrast,30),this.sectionBkgColor2=Mt(this.contrast,30),this.taskBorderColor=Gt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Mt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Gt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=ct(this.primaryColor,{h:64}),this.fillType3=ct(this.secondaryColor,{h:64}),this.fillType4=ct(this.primaryColor,{h:-64}),this.fillType5=ct(this.secondaryColor,{h:-64}),this.fillType6=ct(this.primaryColor,{h:128}),this.fillType7=ct(this.secondaryColor,{h:128});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||ct(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||ct(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||ct(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||ct(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||ct(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||ct(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||bs(this.quadrant1Fill)?Mt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((l=this.xyChart)==null?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((g=this.radar)==null?void 0:g.axisStrokeWidth)||2,axisLabelFontSize:((y=this.radar)==null?void 0:y.axisLabelFontSize)||12,curveOpacity:((m=this.radar)==null?void 0:m.curveOpacity)||.5,curveStrokeWidth:((x=this.radar)==null?void 0:x.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((_=this.radar)==null?void 0:_.graticuleStrokeWidth)||1,graticuleOpacity:((S=this.radar)==null?void 0:S.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((k=this.radar)==null?void 0:k.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Gt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||ct(this.primaryColor,{h:-30}),this.git4=this.pie5||ct(this.primaryColor,{h:-60}),this.git5=this.pie6||ct(this.primaryColor,{h:-90}),this.git6=this.pie7||ct(this.primaryColor,{h:60}),this.git7=this.pie8||ct(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Bt(this.git0),this.gitInv1=this.gitInv1||Bt(this.git1),this.gitInv2=this.gitInv2||Bt(this.git2),this.gitInv3=this.gitInv3||Bt(this.git3),this.gitInv4=this.gitInv4||Bt(this.git4),this.gitInv5=this.gitInv5||Bt(this.git5),this.gitInv6=this.gitInv6||Bt(this.git6),this.gitInv7=this.gitInv7||Bt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Oh,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Vh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},d(ca,"Theme"),ca),Uk=d(e=>{const t=new Hk;return t.calculate(e),t},"getThemeVariables"),Ki={base:{getThemeVariables:Vk},dark:{getThemeVariables:Wk},default:{getThemeVariables:zh},forest:{getThemeVariables:Gk},neutral:{getThemeVariables:Uk}},ui={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},w2={...ui,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:Ki.default.getThemeVariables(),sequence:{...ui.sequence,messageFont:d(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:d(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:d(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...ui.gantt,tickInterval:void 0,useWidth:void 0},c4:{...ui.c4,useWidth:void 0,personFont:d(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...ui.flowchart,inheritDir:!1},external_personFont:d(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:d(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:d(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:d(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:d(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:d(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:d(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:d(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:d(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:d(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:d(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:d(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:d(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:d(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:d(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:d(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:d(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:d(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:d(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:d(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:d(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...ui.pie,useWidth:984},xyChart:{...ui.xyChart,useWidth:void 0},requirement:{...ui.requirement,useWidth:void 0},packet:{...ui.packet},radar:{...ui.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},T2=d((e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...T2(e[i],"")]:[...r,t+i],[]),"keyify"),jk=new Set(T2(w2,"")),ge=w2,Pc=d(e=>{if(P.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Pc(t));return}for(const t of Object.keys(e)){if(P.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!jk.has(t)||e[t]==null){P.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){P.debug("sanitizing object",t),Pc(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)t.includes(i)&&(P.debug("sanitizing css option",t),e[t]=Xk(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}P.debug("After sanitization",e)}},"sanitizeDirective"),Xk=d(e=>{let t=0,r=0;for(const i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),so=Object.freeze(ge),Lr=Fe({},so),Oc,rn=[],tl=Fe({},so),Wh=d((e,t)=>{let r=Fe({},e),i={};for(const s of t)E2(s),i=Fe(i,s);if(r=Fe(r,i),i.theme&&i.theme in Ki){const s=Fe({},Oc),n=Fe(s.themeVariables||{},i.themeVariables);r.theme&&r.theme in Ki&&(r.themeVariables=Ki[r.theme].getThemeVariables(n))}return tl=r,A2(tl),tl},"updateCurrentConfig"),Kk=d(e=>(Lr=Fe({},so),Lr=Fe(Lr,e),e.theme&&Ki[e.theme]&&(Lr.themeVariables=Ki[e.theme].getThemeVariables(e.themeVariables)),Wh(Lr,rn),Lr),"setSiteConfig"),Qk=d(e=>{Oc=Fe({},e)},"saveConfigFromInitialize"),Zk=d(e=>(Lr=Fe(Lr,e),Wh(Lr,rn),Lr),"updateSiteConfig"),S2=d(()=>Fe({},Lr),"getSiteConfig"),C2=d(e=>(A2(e),Fe(tl,e),xe()),"setConfig"),xe=d(()=>Fe({},tl),"getConfig"),E2=d(e=>{e&&(["secure",...Lr.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(P.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&E2(e[t])}))},"sanitize"),Jk=d(e=>{var t;Pc(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),rn.push(e),Wh(Lr,rn)},"addDirective"),Vc=d((e=Lr)=>{rn=[],Wh(e,rn)},"reset"),tw={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Hp={},ew=d(e=>{Hp[e]||(P.warn(tw[e]),Hp[e]=!0)},"issueWarning"),A2=d(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&ew("LAZY_LOAD_DEPRECATED")},"checkConfig"),rw=d(()=>{let e={};Oc&&(e=Fe(e,Oc));for(const t of rn)e=Fe(e,t);return e},"getUserDefinedConfig"),vo=/<br\s*\/?>/gi,iw=d(e=>e?R2(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),sw=(()=>{let e=!1;return()=>{e||(L2(),e=!0)}})();function L2(){const e="data-temp-href-target";ro.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),ro.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}d(L2,"setupDompurifyHooks");var D2=d(e=>(sw(),ro.sanitize(e)),"removeScript"),Up=d((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=D2(e):i!=="loose"&&(e=R2(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=lw(e))}return e},"sanitizeMore"),me=d((e,t)=>e&&(t.dompurifyConfig?e=ro.sanitize(Up(e,t),t.dompurifyConfig).toString():e=ro.sanitize(Up(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),nw=d((e,t)=>typeof e=="string"?me(e,t):e.flat().map(r=>me(r,t)),"sanitizeTextOrArray"),aw=d(e=>vo.test(e),"hasBreaks"),ow=d(e=>e.split(vo),"splitBreaks"),lw=d(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),R2=d(e=>e.replace(vo,"#br#"),"breakToPlaceholder"),qh=d(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=CSS.escape(t)),t},"getUrl"),Te=d(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),cw=d(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),hw=d(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),ss=d(function(e){const t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let s=t[i];if(s===","&&i>0&&i+1<t.length){const n=t[i-1],a=t[i+1];uw(n,a)&&(s=n+","+a,i++,r.pop())}r.push(dw(s))}return r.join("")},"parseGenericTypes"),gd=d((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),uw=d((e,t)=>{const r=gd(e,"~"),i=gd(t,"~");return r===1&&i===1},"shouldCombineSets"),dw=d(e=>{const t=gd(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const i=[...e];let s=i.indexOf("~"),n=i.lastIndexOf("~");for(;s!==-1&&n!==-1&&s!==n;)i[s]="<",i[n]=">",s=i.indexOf("~"),n=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),jp=d(()=>window.MathMLElement!==void 0,"isMathMLSupported"),yd=/\$\$(.*)\$\$/g,Re=d(e=>{var t;return(((t=e.match(yd))==null?void 0:t.length)??0)>0},"hasKatex"),Nl=d(async(e,t)=>{const r=document.createElement("div");r.innerHTML=await $l(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const i=document.querySelector("body");i==null||i.insertAdjacentElement("beforeend",r);const s={width:r.clientWidth,height:r.clientHeight};return r.remove(),s},"calculateMathMLDimensions"),fw=d(async(e,t)=>{if(!Re(e))return e;if(!(jp()||t.legacyMathML||t.forceLegacyMathML))return e.replace(yd,"MathML is unsupported in this environment.");{const{default:r}=await ue(async()=>{const{default:s}=await import("./vendor-katex-C66qTcOd.js");return{default:s}},__vite__mapDeps([0,1])),i=t.forceLegacyMathML||!jp()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(vo).map(s=>Re(s)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${s}</div>`:`<div>${s}</div>`).join("").replace(yd,(s,n)=>r.renderToString(n,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),$l=d(async(e,t)=>me(await fw(e,t),t),"renderKatexSanitized"),Ct={getRows:iw,sanitizeText:me,sanitizeTextOrArray:nw,hasBreaks:aw,splitBreaks:ow,lineBreakRegex:vo,removeScript:D2,getUrl:qh,evaluate:Te,getMax:cw,getMin:hw},pw=d(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),gw=d(function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},"calculateSvgSizeAttrs"),Er=d(function(e,t,r,i){const s=gw(t,r,i);pw(e,s)},"configureSvgSize"),Ml=d(function(e,t,r,i){const s=t.node().getBBox(),n=s.width,a=s.height;P.info(`SVG bounds: ${n}x${a}`,s);let o=0,h=0;P.info(`Graph bounds: ${o}x${h}`,e),o=n+r*2,h=a+r*2,P.info(`Calculated bounds: ${o}x${h}`),Er(t,h,o,i);const l=`${s.x-r} ${s.y-r} ${s.width+2*r} ${s.height+2*r}`;t.attr("viewBox",l)},"setupGraphViewbox"),yc={},yw=d((e,t,r)=>{let i="";return e in yc&&yc[e]?i=yc[e](r):P.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${t}
`},"getStyles"),mw=d((e,t)=>{t!==void 0&&(yc[e]=t)},"addStylesForDiagram"),xw=yw,sf={};Ph(sf,{clear:()=>qe,getAccDescription:()=>Ze,getAccTitle:()=>Ke,getDiagramTitle:()=>Ye,setAccDescription:()=>Qe,setAccTitle:()=>We,setDiagramTitle:()=>ir});var nf="",af="",of="",lf=d(e=>me(e,xe()),"sanitizeText"),qe=d(()=>{nf="",of="",af=""},"clear"),We=d(e=>{nf=lf(e).replace(/^\s+/g,"")},"setAccTitle"),Ke=d(()=>nf,"getAccTitle"),Qe=d(e=>{of=lf(e).replace(/\n\s+/g,`
`)},"setAccDescription"),Ze=d(()=>of,"getAccDescription"),ir=d(e=>{af=lf(e)},"setDiagramTitle"),Ye=d(()=>af,"getDiagramTitle"),Xp=P,bw=ef,it=xe,md=C2,B2=so,cf=d(e=>me(e,it()),"sanitizeText"),I2=Ml,vw=d(()=>sf,"getCommonDb"),zc={},Wc=d((e,t,r)=>{var i;zc[e]&&Xp.warn(`Diagram with id ${e} already registered. Overwriting.`),zc[e]=t,r&&k2(e,r),mw(e,t.styles),(i=t.injectUtils)==null||i.call(t,Xp,bw,it,cf,I2,vw(),()=>{})},"registerDiagram"),xd=d(e=>{if(e in zc)return zc[e];throw new _w(e)},"getDiagram"),ha,_w=(ha=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},d(ha,"DiagramNotFoundError"),ha);function mc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kw(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hf(e){let t,r,i;e.length!==2?(t=mc,r=(o,h)=>mc(e(o),h),i=(o,h)=>e(o)-h):(t=e===mc||e===kw?e:ww,r=e,i=e);function s(o,h,l=0,u=o.length){if(l<u){if(t(h,h)!==0)return u;do{const f=l+u>>>1;r(o[f],h)<0?l=f+1:u=f}while(l<u)}return l}function n(o,h,l=0,u=o.length){if(l<u){if(t(h,h)!==0)return u;do{const f=l+u>>>1;r(o[f],h)<=0?l=f+1:u=f}while(l<u)}return l}function a(o,h,l=0,u=o.length){const f=s(o,h,l,u-1);return f>l&&i(o[f-1],h)>-i(o[f],h)?f-1:f}return{left:s,center:a,right:n}}function ww(){return 0}function Tw(e){return e===null?NaN:+e}const Sw=hf(mc),Cw=Sw.right;hf(Tw).center;const Ew=Math.sqrt(50),Aw=Math.sqrt(10),Lw=Math.sqrt(2);function qc(e,t,r){const i=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(i)),n=i/Math.pow(10,s),a=n>=Ew?10:n>=Aw?5:n>=Lw?2:1;let o,h,l;return s<0?(l=Math.pow(10,-s)/a,o=Math.round(e*l),h=Math.round(t*l),o/l<e&&++o,h/l>t&&--h,l=-l):(l=Math.pow(10,s)*a,o=Math.round(e/l),h=Math.round(t/l),o*l<e&&++o,h*l>t&&--h),h<o&&.5<=r&&r<2?qc(e,t,r*2):[o,h,l]}function Dw(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[s,n,a]=i?qc(t,e,r):qc(e,t,r);if(!(n>=s))return[];const o=n-s+1,h=new Array(o);if(i)if(a<0)for(let l=0;l<o;++l)h[l]=(n-l)/-a;else for(let l=0;l<o;++l)h[l]=(n-l)*a;else if(a<0)for(let l=0;l<o;++l)h[l]=(s+l)/-a;else for(let l=0;l<o;++l)h[l]=(s+l)*a;return h}function bd(e,t,r){return t=+t,e=+e,r=+r,qc(e,t,r)[2]}function vd(e,t,r){t=+t,e=+e,r=+r;const i=t<e,s=i?bd(t,e,r):bd(e,t,r);return(i?-1:1)*(s<0?1/-s:s)}function Rw(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function Bw(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function Iw(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var i=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,n=new Array(s);++i<s;)n[i]=e+i*r;return n}function Nw(e){return e}var xc=1,Lu=2,_d=3,Ql=4,Kp=1e-6;function $w(e){return"translate("+e+",0)"}function Mw(e){return"translate(0,"+e+")"}function Fw(e){return t=>+e(t)}function Pw(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function Ow(){return!this.__axis}function N2(e,t){var r=[],i=null,s=null,n=6,a=6,o=3,h=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===xc||e===Ql?-1:1,u=e===Ql||e===Lu?"x":"y",f=e===xc||e===_d?$w:Mw;function p(g){var y=i??(t.ticks?t.ticks.apply(t,r):t.domain()),m=s??(t.tickFormat?t.tickFormat.apply(t,r):Nw),x=Math.max(n,0)+o,b=t.range(),_=+b[0]+h,S=+b[b.length-1]+h,C=(t.bandwidth?Pw:Fw)(t.copy(),h),k=g.selection?g.selection():g,v=k.selectAll(".domain").data([null]),A=k.selectAll(".tick").data(y,t).order(),L=A.exit(),w=A.enter().append("g").attr("class","tick"),R=A.select("line"),T=A.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(w),R=R.merge(w.append("line").attr("stroke","currentColor").attr(u+"2",l*n)),T=T.merge(w.append("text").attr("fill","currentColor").attr(u,l*x).attr("dy",e===xc?"0em":e===_d?"0.71em":"0.32em")),g!==k&&(v=v.transition(g),A=A.transition(g),R=R.transition(g),T=T.transition(g),L=L.transition(g).attr("opacity",Kp).attr("transform",function(V){return isFinite(V=C(V))?f(V+h):this.getAttribute("transform")}),w.attr("opacity",Kp).attr("transform",function(V){var N=this.parentNode.__axis;return f((N&&isFinite(N=N(V))?N:C(V))+h)})),L.remove(),v.attr("d",e===Ql||e===Lu?a?"M"+l*a+","+_+"H"+h+"V"+S+"H"+l*a:"M"+h+","+_+"V"+S:a?"M"+_+","+l*a+"V"+h+"H"+S+"V"+l*a:"M"+_+","+h+"H"+S),A.attr("opacity",1).attr("transform",function(V){return f(C(V)+h)}),R.attr(u+"2",l*n),T.attr(u,l*x).text(m),k.filter(Ow).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Lu?"start":e===Ql?"end":"middle"),k.each(function(){this.__axis=C})}return p.scale=function(g){return arguments.length?(t=g,p):t},p.ticks=function(){return r=Array.from(arguments),p},p.tickArguments=function(g){return arguments.length?(r=g==null?[]:Array.from(g),p):r.slice()},p.tickValues=function(g){return arguments.length?(i=g==null?null:Array.from(g),p):i&&i.slice()},p.tickFormat=function(g){return arguments.length?(s=g,p):s},p.tickSize=function(g){return arguments.length?(n=a=+g,p):n},p.tickSizeInner=function(g){return arguments.length?(n=+g,p):n},p.tickSizeOuter=function(g){return arguments.length?(a=+g,p):a},p.tickPadding=function(g){return arguments.length?(o=+g,p):o},p.offset=function(g){return arguments.length?(h=+g,p):h},p}function Vw(e){return N2(xc,e)}function zw(e){return N2(_d,e)}var Ww={value:()=>{}};function $2(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new bc(r)}function bc(e){this._=e}function qw(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}bc.prototype=$2.prototype={constructor:bc,on:function(e,t){var r=this._,i=qw(e+"",r),s,n=-1,a=i.length;if(arguments.length<2){for(;++n<a;)if((s=(e=i[n]).type)&&(s=Yw(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++n<a;)if(s=(e=i[n]).type)r[s]=Qp(r[s],e.name,t);else if(t==null)for(s in r)r[s]=Qp(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new bc(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,n;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],s=0,n=i.length;s<n;++s)i[s].value.apply(t,r)}};function Yw(e,t){for(var r=0,i=e.length,s;r<i;++r)if((s=e[r]).name===t)return s.value}function Qp(e,t,r){for(var i=0,s=e.length;i<s;++i)if(e[i].name===t){e[i]=Ww,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var kd="http://www.w3.org/1999/xhtml";const Zp={svg:"http://www.w3.org/2000/svg",xhtml:kd,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yh(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Zp.hasOwnProperty(t)?{space:Zp[t],local:e}:e}function Gw(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===kd&&t.documentElement.namespaceURI===kd?t.createElement(e):t.createElementNS(r,e)}}function Hw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function M2(e){var t=Yh(e);return(t.local?Hw:Gw)(t)}function Uw(){}function uf(e){return e==null?Uw:function(){return this.querySelector(e)}}function jw(e){typeof e!="function"&&(e=uf(e));for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s)for(var n=t[s],a=n.length,o=i[s]=new Array(a),h,l,u=0;u<a;++u)(h=n[u])&&(l=e.call(h,h.__data__,u,n))&&("__data__"in h&&(l.__data__=h.__data__),o[u]=l);return new zr(i,this._parents)}function Xw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Kw(){return[]}function F2(e){return e==null?Kw:function(){return this.querySelectorAll(e)}}function Qw(e){return function(){return Xw(e.apply(this,arguments))}}function Zw(e){typeof e=="function"?e=Qw(e):e=F2(e);for(var t=this._groups,r=t.length,i=[],s=[],n=0;n<r;++n)for(var a=t[n],o=a.length,h,l=0;l<o;++l)(h=a[l])&&(i.push(e.call(h,h.__data__,l,a)),s.push(h));return new zr(i,s)}function P2(e){return function(){return this.matches(e)}}function O2(e){return function(t){return t.matches(e)}}var Jw=Array.prototype.find;function tT(e){return function(){return Jw.call(this.children,e)}}function eT(){return this.firstElementChild}function rT(e){return this.select(e==null?eT:tT(typeof e=="function"?e:O2(e)))}var iT=Array.prototype.filter;function sT(){return Array.from(this.children)}function nT(e){return function(){return iT.call(this.children,e)}}function aT(e){return this.selectAll(e==null?sT:nT(typeof e=="function"?e:O2(e)))}function oT(e){typeof e!="function"&&(e=P2(e));for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s)for(var n=t[s],a=n.length,o=i[s]=[],h,l=0;l<a;++l)(h=n[l])&&e.call(h,h.__data__,l,n)&&o.push(h);return new zr(i,this._parents)}function V2(e){return new Array(e.length)}function lT(){return new zr(this._enter||this._groups.map(V2),this._parents)}function Yc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yc.prototype={constructor:Yc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cT(e){return function(){return e}}function hT(e,t,r,i,s,n){for(var a=0,o,h=t.length,l=n.length;a<l;++a)(o=t[a])?(o.__data__=n[a],i[a]=o):r[a]=new Yc(e,n[a]);for(;a<h;++a)(o=t[a])&&(s[a]=o)}function uT(e,t,r,i,s,n,a){var o,h,l=new Map,u=t.length,f=n.length,p=new Array(u),g;for(o=0;o<u;++o)(h=t[o])&&(p[o]=g=a.call(h,h.__data__,o,t)+"",l.has(g)?s[o]=h:l.set(g,h));for(o=0;o<f;++o)g=a.call(e,n[o],o,n)+"",(h=l.get(g))?(i[o]=h,h.__data__=n[o],l.delete(g)):r[o]=new Yc(e,n[o]);for(o=0;o<u;++o)(h=t[o])&&l.get(p[o])===h&&(s[o]=h)}function dT(e){return e.__data__}function fT(e,t){if(!arguments.length)return Array.from(this,dT);var r=t?uT:hT,i=this._parents,s=this._groups;typeof e!="function"&&(e=cT(e));for(var n=s.length,a=new Array(n),o=new Array(n),h=new Array(n),l=0;l<n;++l){var u=i[l],f=s[l],p=f.length,g=pT(e.call(u,u&&u.__data__,l,i)),y=g.length,m=o[l]=new Array(y),x=a[l]=new Array(y),b=h[l]=new Array(p);r(u,f,m,x,b,g,t);for(var _=0,S=0,C,k;_<y;++_)if(C=m[_]){for(_>=S&&(S=_+1);!(k=x[S])&&++S<y;);C._next=k||null}}return a=new zr(a,i),a._enter=o,a._exit=h,a}function pT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gT(){return new zr(this._exit||this._groups.map(V2),this._parents)}function yT(e,t,r){var i=this.enter(),s=this,n=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?n.remove():r(n),i&&s?i.merge(s).order():s}function mT(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,s=r.length,n=i.length,a=Math.min(s,n),o=new Array(s),h=0;h<a;++h)for(var l=r[h],u=i[h],f=l.length,p=o[h]=new Array(f),g,y=0;y<f;++y)(g=l[y]||u[y])&&(p[y]=g);for(;h<s;++h)o[h]=r[h];return new zr(o,this._parents)}function xT(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],s=i.length-1,n=i[s],a;--s>=0;)(a=i[s])&&(n&&a.compareDocumentPosition(n)^4&&n.parentNode.insertBefore(a,n),n=a);return this}function bT(e){e||(e=vT);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var r=this._groups,i=r.length,s=new Array(i),n=0;n<i;++n){for(var a=r[n],o=a.length,h=s[n]=new Array(o),l,u=0;u<o;++u)(l=a[u])&&(h[u]=l);h.sort(t)}return new zr(s,this._parents).order()}function vT(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _T(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kT(){return Array.from(this)}function wT(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,n=i.length;s<n;++s){var a=i[s];if(a)return a}return null}function TT(){let e=0;for(const t of this)++e;return e}function ST(){return!this.node()}function CT(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var s=t[r],n=0,a=s.length,o;n<a;++n)(o=s[n])&&e.call(o,o.__data__,n,s);return this}function ET(e){return function(){this.removeAttribute(e)}}function AT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function LT(e,t){return function(){this.setAttribute(e,t)}}function DT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function RT(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function BT(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function IT(e,t){var r=Yh(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?AT:ET:typeof t=="function"?r.local?BT:RT:r.local?DT:LT)(r,t))}function z2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function NT(e){return function(){this.style.removeProperty(e)}}function $T(e,t,r){return function(){this.style.setProperty(e,t,r)}}function MT(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function FT(e,t,r){return arguments.length>1?this.each((t==null?NT:typeof t=="function"?MT:$T)(e,t,r??"")):no(this.node(),e)}function no(e,t){return e.style.getPropertyValue(t)||z2(e).getComputedStyle(e,null).getPropertyValue(t)}function PT(e){return function(){delete this[e]}}function OT(e,t){return function(){this[e]=t}}function VT(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function zT(e,t){return arguments.length>1?this.each((t==null?PT:typeof t=="function"?VT:OT)(e,t)):this.node()[e]}function W2(e){return e.trim().split(/^|\s+/)}function df(e){return e.classList||new q2(e)}function q2(e){this._node=e,this._names=W2(e.getAttribute("class")||"")}q2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Y2(e,t){for(var r=df(e),i=-1,s=t.length;++i<s;)r.add(t[i])}function G2(e,t){for(var r=df(e),i=-1,s=t.length;++i<s;)r.remove(t[i])}function WT(e){return function(){Y2(this,e)}}function qT(e){return function(){G2(this,e)}}function YT(e,t){return function(){(t.apply(this,arguments)?Y2:G2)(this,e)}}function GT(e,t){var r=W2(e+"");if(arguments.length<2){for(var i=df(this.node()),s=-1,n=r.length;++s<n;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?YT:t?WT:qT)(r,t))}function HT(){this.textContent=""}function UT(e){return function(){this.textContent=e}}function jT(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XT(e){return arguments.length?this.each(e==null?HT:(typeof e=="function"?jT:UT)(e)):this.node().textContent}function KT(){this.innerHTML=""}function QT(e){return function(){this.innerHTML=e}}function ZT(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function JT(e){return arguments.length?this.each(e==null?KT:(typeof e=="function"?ZT:QT)(e)):this.node().innerHTML}function t6(){this.nextSibling&&this.parentNode.appendChild(this)}function e6(){return this.each(t6)}function r6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function i6(){return this.each(r6)}function s6(e){var t=typeof e=="function"?e:M2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function n6(){return null}function a6(e,t){var r=typeof e=="function"?e:M2(e),i=t==null?n6:typeof t=="function"?t:uf(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function o6(){var e=this.parentNode;e&&e.removeChild(this)}function l6(){return this.each(o6)}function c6(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function h6(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function u6(e){return this.select(e?h6:c6)}function d6(e){return arguments.length?this.property("__data__",e):this.node().__data__}function f6(e){return function(t){e.call(this,t,this.__data__)}}function p6(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function g6(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,s=t.length,n;r<s;++r)n=t[r],(!e.type||n.type===e.type)&&n.name===e.name?this.removeEventListener(n.type,n.listener,n.options):t[++i]=n;++i?t.length=i:delete this.__on}}}function y6(e,t,r){return function(){var i=this.__on,s,n=f6(t);if(i){for(var a=0,o=i.length;a<o;++a)if((s=i[a]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=n,s.options=r),s.value=t;return}}this.addEventListener(e.type,n,r),s={type:e.type,name:e.name,value:t,listener:n,options:r},i?i.push(s):this.__on=[s]}}function m6(e,t,r){var i=p6(e+""),s,n=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var h=0,l=o.length,u;h<l;++h)for(s=0,u=o[h];s<n;++s)if((a=i[s]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?y6:g6,s=0;s<n;++s)this.each(o(i[s],t,r));return this}function H2(e,t,r){var i=z2(e),s=i.CustomEvent;typeof s=="function"?s=new s(t,r):(s=i.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function x6(e,t){return function(){return H2(this,e,t)}}function b6(e,t){return function(){return H2(this,e,t.apply(this,arguments))}}function v6(e,t){return this.each((typeof t=="function"?b6:x6)(e,t))}function*_6(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],s=0,n=i.length,a;s<n;++s)(a=i[s])&&(yield a)}var U2=[null];function zr(e,t){this._groups=e,this._parents=t}function Fl(){return new zr([[document.documentElement]],U2)}function k6(){return this}zr.prototype=Fl.prototype={constructor:zr,select:jw,selectAll:Zw,selectChild:rT,selectChildren:aT,filter:oT,data:fT,enter:lT,exit:gT,join:yT,merge:mT,selection:k6,order:xT,sort:bT,call:_T,nodes:kT,node:wT,size:TT,empty:ST,each:CT,attr:IT,style:FT,property:zT,classed:GT,text:XT,html:JT,raise:e6,lower:i6,append:s6,insert:a6,remove:l6,clone:u6,datum:d6,on:m6,dispatch:v6,[Symbol.iterator]:_6};function _t(e){return typeof e=="string"?new zr([[document.querySelector(e)]],[document.documentElement]):new zr([[e]],U2)}function Pl(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Gh(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function mn(){}var nl=.7,Gc=1/nl,Zn="\\s*([+-]?\\d+)\\s*",al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w6=/^#([0-9a-f]{3,8})$/,T6=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),S6=new RegExp(`^rgb\\(${bi},${bi},${bi}\\)$`),C6=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${al}\\)$`),E6=new RegExp(`^rgba\\(${bi},${bi},${bi},${al}\\)$`),A6=new RegExp(`^hsl\\(${al},${bi},${bi}\\)$`),L6=new RegExp(`^hsla\\(${al},${bi},${bi},${al}\\)$`),Jp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pl(mn,sn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t0,formatHex:t0,formatHex8:D6,formatHsl:R6,formatRgb:e0,toString:e0});function t0(){return this.rgb().formatHex()}function D6(){return this.rgb().formatHex8()}function R6(){return X2(this).formatHsl()}function e0(){return this.rgb().formatRgb()}function sn(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=w6.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?r0(t):r===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Zl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Zl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=T6.exec(e))?new gr(t[1],t[2],t[3],1):(t=S6.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C6.exec(e))?Zl(t[1],t[2],t[3],t[4]):(t=E6.exec(e))?Zl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=A6.exec(e))?n0(t[1],t[2]/100,t[3]/100,1):(t=L6.exec(e))?n0(t[1],t[2]/100,t[3]/100,t[4]):Jp.hasOwnProperty(e)?r0(Jp[e]):e==="transparent"?new gr(NaN,NaN,NaN,0):null}function r0(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function Zl(e,t,r,i){return i<=0&&(e=t=r=NaN),new gr(e,t,r,i)}function j2(e){return e instanceof mn||(e=sn(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function wd(e,t,r,i){return arguments.length===1?j2(e):new gr(e,t,r,i??1)}function gr(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}Pl(gr,wd,Gh(mn,{brighter(e){return e=e==null?Gc:Math.pow(Gc,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nl:Math.pow(nl,e),new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(Xs(this.r),Xs(this.g),Xs(this.b),Hc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i0,formatHex:i0,formatHex8:B6,formatRgb:s0,toString:s0}));function i0(){return`#${Ws(this.r)}${Ws(this.g)}${Ws(this.b)}`}function B6(){return`#${Ws(this.r)}${Ws(this.g)}${Ws(this.b)}${Ws((isNaN(this.opacity)?1:this.opacity)*255)}`}function s0(){const e=Hc(this.opacity);return`${e===1?"rgb(":"rgba("}${Xs(this.r)}, ${Xs(this.g)}, ${Xs(this.b)}${e===1?")":`, ${e})`}`}function Hc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ws(e){return e=Xs(e),(e<16?"0":"")+e.toString(16)}function n0(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ri(e,t,r,i)}function X2(e){if(e instanceof ri)return new ri(e.h,e.s,e.l,e.opacity);if(e instanceof mn||(e=sn(e)),!e)return new ri;if(e instanceof ri)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,s=Math.min(t,r,i),n=Math.max(t,r,i),a=NaN,o=n-s,h=(n+s)/2;return o?(t===n?a=(r-i)/o+(r<i)*6:r===n?a=(i-t)/o+2:a=(t-r)/o+4,o/=h<.5?n+s:2-n-s,a*=60):o=h>0&&h<1?0:a,new ri(a,o,h,e.opacity)}function I6(e,t,r,i){return arguments.length===1?X2(e):new ri(e,t,r,i??1)}function ri(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}Pl(ri,I6,Gh(mn,{brighter(e){return e=e==null?Gc:Math.pow(Gc,e),new ri(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nl:Math.pow(nl,e),new ri(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,s=2*r-i;return new gr(Du(e>=240?e-240:e+120,s,i),Du(e,s,i),Du(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new ri(a0(this.h),Jl(this.s),Jl(this.l),Hc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hc(this.opacity);return`${e===1?"hsl(":"hsla("}${a0(this.h)}, ${Jl(this.s)*100}%, ${Jl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a0(e){return e=(e||0)%360,e<0?e+360:e}function Jl(e){return Math.max(0,Math.min(1,e||0))}function Du(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const N6=Math.PI/180,$6=180/Math.PI,Uc=18,K2=.96422,Q2=1,Z2=.82521,J2=4/29,Jn=6/29,ty=3*Jn*Jn,M6=Jn*Jn*Jn;function ey(e){if(e instanceof vi)return new vi(e.l,e.a,e.b,e.opacity);if(e instanceof qi)return ry(e);e instanceof gr||(e=j2(e));var t=Nu(e.r),r=Nu(e.g),i=Nu(e.b),s=Ru((.2225045*t+.7168786*r+.0606169*i)/Q2),n,a;return t===r&&r===i?n=a=s:(n=Ru((.4360747*t+.3850649*r+.1430804*i)/K2),a=Ru((.0139322*t+.0971045*r+.7141733*i)/Z2)),new vi(116*s-16,500*(n-s),200*(s-a),e.opacity)}function F6(e,t,r,i){return arguments.length===1?ey(e):new vi(e,t,r,i??1)}function vi(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}Pl(vi,F6,Gh(mn,{brighter(e){return new vi(this.l+Uc*(e??1),this.a,this.b,this.opacity)},darker(e){return new vi(this.l-Uc*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=K2*Bu(t),e=Q2*Bu(e),r=Z2*Bu(r),new gr(Iu(3.1338561*t-1.6168667*e-.4906146*r),Iu(-.9787684*t+1.9161415*e+.033454*r),Iu(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function Ru(e){return e>M6?Math.pow(e,1/3):e/ty+J2}function Bu(e){return e>Jn?e*e*e:ty*(e-J2)}function Iu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Nu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function P6(e){if(e instanceof qi)return new qi(e.h,e.c,e.l,e.opacity);if(e instanceof vi||(e=ey(e)),e.a===0&&e.b===0)return new qi(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*$6;return new qi(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Td(e,t,r,i){return arguments.length===1?P6(e):new qi(e,t,r,i??1)}function qi(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function ry(e){if(isNaN(e.h))return new vi(e.l,0,0,e.opacity);var t=e.h*N6;return new vi(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Pl(qi,Td,Gh(mn,{brighter(e){return new qi(this.h,this.c,this.l+Uc*(e??1),this.opacity)},darker(e){return new qi(this.h,this.c,this.l-Uc*(e??1),this.opacity)},rgb(){return ry(this).rgb()}}));const Hh=e=>()=>e;function iy(e,t){return function(r){return e+r*t}}function O6(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function V6(e,t){var r=t-e;return r?iy(e,r>180||r<-180?r-360*Math.round(r/360):r):Hh(isNaN(e)?t:e)}function z6(e){return(e=+e)==1?el:function(t,r){return r-t?O6(t,r,e):Hh(isNaN(t)?r:t)}}function el(e,t){var r=t-e;return r?iy(e,r):Hh(isNaN(e)?t:e)}const jc=(function e(t){var r=z6(t);function i(s,n){var a=r((s=wd(s)).r,(n=wd(n)).r),o=r(s.g,n.g),h=r(s.b,n.b),l=el(s.opacity,n.opacity);return function(u){return s.r=a(u),s.g=o(u),s.b=h(u),s.opacity=l(u),s+""}}return i.gamma=e,i})(1);function W6(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),s;return function(n){for(s=0;s<r;++s)i[s]=e[s]*(1-n)+t[s]*n;return i}}function q6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Y6(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,s=new Array(i),n=new Array(r),a;for(a=0;a<i;++a)s[a]=ff(e[a],t[a]);for(;a<r;++a)n[a]=t[a];return function(o){for(a=0;a<i;++a)n[a]=s[a](o);return n}}function G6(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function ei(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function H6(e,t){var r={},i={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=ff(e[s],t[s]):i[s]=t[s];return function(n){for(s in r)i[s]=r[s](n);return i}}var Sd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$u=new RegExp(Sd.source,"g");function U6(e){return function(){return e}}function j6(e){return function(t){return e(t)+""}}function sy(e,t){var r=Sd.lastIndex=$u.lastIndex=0,i,s,n,a=-1,o=[],h=[];for(e=e+"",t=t+"";(i=Sd.exec(e))&&(s=$u.exec(t));)(n=s.index)>r&&(n=t.slice(r,n),o[a]?o[a]+=n:o[++a]=n),(i=i[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,h.push({i:a,x:ei(i,s)})),r=$u.lastIndex;return r<t.length&&(n=t.slice(r),o[a]?o[a]+=n:o[++a]=n),o.length<2?h[0]?j6(h[0].x):U6(t):(t=h.length,function(l){for(var u=0,f;u<t;++u)o[(f=h[u]).i]=f.x(l);return o.join("")})}function ff(e,t){var r=typeof t,i;return t==null||r==="boolean"?Hh(t):(r==="number"?ei:r==="string"?(i=sn(t))?(t=i,jc):sy:t instanceof sn?jc:t instanceof Date?G6:q6(t)?W6:Array.isArray(t)?Y6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?H6:ei)(e,t)}function X6(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var o0=180/Math.PI,Cd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ny(e,t,r,i,s,n){var a,o,h;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(h=e*r+t*i)&&(r-=e*h,i-=t*h),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,h/=o),e*i<t*r&&(e=-e,t=-t,h=-h,a=-a),{translateX:s,translateY:n,rotate:Math.atan2(t,e)*o0,skewX:Math.atan(h)*o0,scaleX:a,scaleY:o}}var tc;function K6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Cd:ny(t.a,t.b,t.c,t.d,t.e,t.f)}function Q6(e){return e==null||(tc||(tc=document.createElementNS("http://www.w3.org/2000/svg","g")),tc.setAttribute("transform",e),!(e=tc.transform.baseVal.consolidate()))?Cd:(e=e.matrix,ny(e.a,e.b,e.c,e.d,e.e,e.f))}function ay(e,t,r,i){function s(l){return l.length?l.pop()+" ":""}function n(l,u,f,p,g,y){if(l!==f||u!==p){var m=g.push("translate(",null,t,null,r);y.push({i:m-4,x:ei(l,f)},{i:m-2,x:ei(u,p)})}else(f||p)&&g.push("translate("+f+t+p+r)}function a(l,u,f,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:f.push(s(f)+"rotate(",null,i)-2,x:ei(l,u)})):u&&f.push(s(f)+"rotate("+u+i)}function o(l,u,f,p){l!==u?p.push({i:f.push(s(f)+"skewX(",null,i)-2,x:ei(l,u)}):u&&f.push(s(f)+"skewX("+u+i)}function h(l,u,f,p,g,y){if(l!==f||u!==p){var m=g.push(s(g)+"scale(",null,",",null,")");y.push({i:m-4,x:ei(l,f)},{i:m-2,x:ei(u,p)})}else(f!==1||p!==1)&&g.push(s(g)+"scale("+f+","+p+")")}return function(l,u){var f=[],p=[];return l=e(l),u=e(u),n(l.translateX,l.translateY,u.translateX,u.translateY,f,p),a(l.rotate,u.rotate,f,p),o(l.skewX,u.skewX,f,p),h(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,p),l=u=null,function(g){for(var y=-1,m=p.length,x;++y<m;)f[(x=p[y]).i]=x.x(g);return f.join("")}}}var Z6=ay(K6,"px, ","px)","deg)"),J6=ay(Q6,", ",")",")");function tS(e){return function(t,r){var i=e((t=Td(t)).h,(r=Td(r)).h),s=el(t.c,r.c),n=el(t.l,r.l),a=el(t.opacity,r.opacity);return function(o){return t.h=i(o),t.c=s(o),t.l=n(o),t.opacity=a(o),t+""}}}const eS=tS(V6);var ao=0,Po=0,Eo=0,oy=1e3,Xc,Oo,Kc=0,nn=0,Uh=0,ol=typeof performance=="object"&&performance.now?performance:Date,ly=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pf(){return nn||(ly(rS),nn=ol.now()+Uh)}function rS(){nn=0}function Qc(){this._call=this._time=this._next=null}Qc.prototype=cy.prototype={constructor:Qc,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?pf():+r)+(t==null?0:+t),!this._next&&Oo!==this&&(Oo?Oo._next=this:Xc=this,Oo=this),this._call=e,this._time=r,Ed()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ed())}};function cy(e,t,r){var i=new Qc;return i.restart(e,t,r),i}function iS(){pf(),++ao;for(var e=Xc,t;e;)(t=nn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ao}function l0(){nn=(Kc=ol.now())+Uh,ao=Po=0;try{iS()}finally{ao=0,nS(),nn=0}}function sS(){var e=ol.now(),t=e-Kc;t>oy&&(Uh-=t,Kc=e)}function nS(){for(var e,t=Xc,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Xc=r);Oo=e,Ed(i)}function Ed(e){if(!ao){Po&&(Po=clearTimeout(Po));var t=e-nn;t>24?(e<1/0&&(Po=setTimeout(l0,e-ol.now()-Uh)),Eo&&(Eo=clearInterval(Eo))):(Eo||(Kc=ol.now(),Eo=setInterval(sS,oy)),ao=1,ly(l0))}}function c0(e,t,r){var i=new Qc;return t=t==null?0:+t,i.restart(s=>{i.stop(),e(s+t)},t,r),i}var aS=$2("start","end","cancel","interrupt"),oS=[],hy=0,h0=1,Ad=2,vc=3,u0=4,Ld=5,_c=6;function jh(e,t,r,i,s,n){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;lS(e,r,{name:t,index:i,group:s,on:aS,tween:oS,time:n.time,delay:n.delay,duration:n.duration,ease:n.ease,timer:null,state:hy})}function gf(e,t){var r=oi(e,t);if(r.state>hy)throw new Error("too late; already scheduled");return r}function Ti(e,t){var r=oi(e,t);if(r.state>vc)throw new Error("too late; already running");return r}function oi(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function lS(e,t,r){var i=e.__transition,s;i[t]=r,r.timer=cy(n,0,r.time);function n(l){r.state=h0,r.timer.restart(a,r.delay,r.time),r.delay<=l&&a(l-r.delay)}function a(l){var u,f,p,g;if(r.state!==h0)return h();for(u in i)if(g=i[u],g.name===r.name){if(g.state===vc)return c0(a);g.state===u0?(g.state=_c,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=_c,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(c0(function(){r.state===vc&&(r.state=u0,r.timer.restart(o,r.delay,r.time),o(l))}),r.state=Ad,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Ad){for(r.state=vc,s=new Array(p=r.tween.length),u=0,f=-1;u<p;++u)(g=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(s[++f]=g);s.length=f+1}}function o(l){for(var u=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(h),r.state=Ld,1),f=-1,p=s.length;++f<p;)s[f].call(e,u);r.state===Ld&&(r.on.call("end",e,e.__data__,r.index,r.group),h())}function h(){r.state=_c,r.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function cS(e,t){var r=e.__transition,i,s,n=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((i=r[a]).name!==t){n=!1;continue}s=i.state>Ad&&i.state<Ld,i.state=_c,i.timer.stop(),i.on.call(s?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[a]}n&&delete e.__transition}}function hS(e){return this.each(function(){cS(this,e)})}function uS(e,t){var r,i;return function(){var s=Ti(this,e),n=s.tween;if(n!==r){i=r=n;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}s.tween=i}}function dS(e,t,r){var i,s;if(typeof r!="function")throw new Error;return function(){var n=Ti(this,e),a=n.tween;if(a!==i){s=(i=a).slice();for(var o={name:t,value:r},h=0,l=s.length;h<l;++h)if(s[h].name===t){s[h]=o;break}h===l&&s.push(o)}n.tween=s}}function fS(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=oi(this.node(),r).tween,s=0,n=i.length,a;s<n;++s)if((a=i[s]).name===e)return a.value;return null}return this.each((t==null?uS:dS)(r,e,t))}function yf(e,t,r){var i=e._id;return e.each(function(){var s=Ti(this,i);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return oi(s,i).value[t]}}function uy(e,t){var r;return(typeof t=="number"?ei:t instanceof sn?jc:(r=sn(t))?(t=r,jc):sy)(e,t)}function pS(e){return function(){this.removeAttribute(e)}}function gS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yS(e,t,r){var i,s=r+"",n;return function(){var a=this.getAttribute(e);return a===s?null:a===i?n:n=t(i=a,r)}}function mS(e,t,r){var i,s=r+"",n;return function(){var a=this.getAttributeNS(e.space,e.local);return a===s?null:a===i?n:n=t(i=a,r)}}function xS(e,t,r){var i,s,n;return function(){var a,o=r(this),h;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),h=o+"",a===h?null:a===i&&h===s?n:(s=h,n=t(i=a,o)))}}function bS(e,t,r){var i,s,n;return function(){var a,o=r(this),h;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),h=o+"",a===h?null:a===i&&h===s?n:(s=h,n=t(i=a,o)))}}function vS(e,t){var r=Yh(e),i=r==="transform"?J6:uy;return this.attrTween(e,typeof t=="function"?(r.local?bS:xS)(r,i,yf(this,"attr."+e,t)):t==null?(r.local?gS:pS)(r):(r.local?mS:yS)(r,i,t))}function _S(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function kS(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function wS(e,t){var r,i;function s(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&kS(e,n)),r}return s._value=t,s}function TS(e,t){var r,i;function s(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&_S(e,n)),r}return s._value=t,s}function SS(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=Yh(e);return this.tween(r,(i.local?wS:TS)(i,t))}function CS(e,t){return function(){gf(this,e).delay=+t.apply(this,arguments)}}function ES(e,t){return t=+t,function(){gf(this,e).delay=t}}function AS(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?CS:ES)(t,e)):oi(this.node(),t).delay}function LS(e,t){return function(){Ti(this,e).duration=+t.apply(this,arguments)}}function DS(e,t){return t=+t,function(){Ti(this,e).duration=t}}function RS(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?LS:DS)(t,e)):oi(this.node(),t).duration}function BS(e,t){if(typeof t!="function")throw new Error;return function(){Ti(this,e).ease=t}}function IS(e){var t=this._id;return arguments.length?this.each(BS(t,e)):oi(this.node(),t).ease}function NS(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Ti(this,e).ease=r}}function $S(e){if(typeof e!="function")throw new Error;return this.each(NS(this._id,e))}function MS(e){typeof e!="function"&&(e=P2(e));for(var t=this._groups,r=t.length,i=new Array(r),s=0;s<r;++s)for(var n=t[s],a=n.length,o=i[s]=[],h,l=0;l<a;++l)(h=n[l])&&e.call(h,h.__data__,l,n)&&o.push(h);return new Zi(i,this._parents,this._name,this._id)}function FS(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,s=r.length,n=Math.min(i,s),a=new Array(i),o=0;o<n;++o)for(var h=t[o],l=r[o],u=h.length,f=a[o]=new Array(u),p,g=0;g<u;++g)(p=h[g]||l[g])&&(f[g]=p);for(;o<i;++o)a[o]=t[o];return new Zi(a,this._parents,this._name,this._id)}function PS(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function OS(e,t,r){var i,s,n=PS(t)?gf:Ti;return function(){var a=n(this,e),o=a.on;o!==i&&(s=(i=o).copy()).on(t,r),a.on=s}}function VS(e,t){var r=this._id;return arguments.length<2?oi(this.node(),r).on.on(e):this.each(OS(r,e,t))}function zS(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function WS(){return this.on("end.remove",zS(this._id))}function qS(e){var t=this._name,r=this._id;typeof e!="function"&&(e=uf(e));for(var i=this._groups,s=i.length,n=new Array(s),a=0;a<s;++a)for(var o=i[a],h=o.length,l=n[a]=new Array(h),u,f,p=0;p<h;++p)(u=o[p])&&(f=e.call(u,u.__data__,p,o))&&("__data__"in u&&(f.__data__=u.__data__),l[p]=f,jh(l[p],t,r,p,l,oi(u,r)));return new Zi(n,this._parents,t,r)}function YS(e){var t=this._name,r=this._id;typeof e!="function"&&(e=F2(e));for(var i=this._groups,s=i.length,n=[],a=[],o=0;o<s;++o)for(var h=i[o],l=h.length,u,f=0;f<l;++f)if(u=h[f]){for(var p=e.call(u,u.__data__,f,h),g,y=oi(u,r),m=0,x=p.length;m<x;++m)(g=p[m])&&jh(g,t,r,m,p,y);n.push(p),a.push(u)}return new Zi(n,a,t,r)}var GS=Fl.prototype.constructor;function HS(){return new GS(this._groups,this._parents)}function US(e,t){var r,i,s;return function(){var n=no(this,e),a=(this.style.removeProperty(e),no(this,e));return n===a?null:n===r&&a===i?s:s=t(r=n,i=a)}}function dy(e){return function(){this.style.removeProperty(e)}}function jS(e,t,r){var i,s=r+"",n;return function(){var a=no(this,e);return a===s?null:a===i?n:n=t(i=a,r)}}function XS(e,t,r){var i,s,n;return function(){var a=no(this,e),o=r(this),h=o+"";return o==null&&(h=o=(this.style.removeProperty(e),no(this,e))),a===h?null:a===i&&h===s?n:(s=h,n=t(i=a,o))}}function KS(e,t){var r,i,s,n="style."+t,a="end."+n,o;return function(){var h=Ti(this,e),l=h.on,u=h.value[n]==null?o||(o=dy(t)):void 0;(l!==r||s!==u)&&(i=(r=l).copy()).on(a,s=u),h.on=i}}function QS(e,t,r){var i=(e+="")=="transform"?Z6:uy;return t==null?this.styleTween(e,US(e,i)).on("end.style."+e,dy(e)):typeof t=="function"?this.styleTween(e,XS(e,i,yf(this,"style."+e,t))).each(KS(this._id,e)):this.styleTween(e,jS(e,i,t),r).on("end.style."+e,null)}function ZS(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function JS(e,t,r){var i,s;function n(){var a=t.apply(this,arguments);return a!==s&&(i=(s=a)&&ZS(e,a,r)),i}return n._value=t,n}function tC(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,JS(e,t,r??""))}function eC(e){return function(){this.textContent=e}}function rC(e){return function(){var t=e(this);this.textContent=t??""}}function iC(e){return this.tween("text",typeof e=="function"?rC(yf(this,"text",e)):eC(e==null?"":e+""))}function sC(e){return function(t){this.textContent=e.call(this,t)}}function nC(e){var t,r;function i(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&sC(s)),t}return i._value=e,i}function aC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nC(e))}function oC(){for(var e=this._name,t=this._id,r=fy(),i=this._groups,s=i.length,n=0;n<s;++n)for(var a=i[n],o=a.length,h,l=0;l<o;++l)if(h=a[l]){var u=oi(h,t);jh(h,e,r,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Zi(i,this._parents,e,r)}function lC(){var e,t,r=this,i=r._id,s=r.size();return new Promise(function(n,a){var o={value:a},h={value:function(){--s===0&&n()}};r.each(function(){var l=Ti(this,i),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(h)),l.on=t}),s===0&&n()})}var cC=0;function Zi(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function fy(){return++cC}var Ni=Fl.prototype;Zi.prototype={constructor:Zi,select:qS,selectAll:YS,selectChild:Ni.selectChild,selectChildren:Ni.selectChildren,filter:MS,merge:FS,selection:HS,transition:oC,call:Ni.call,nodes:Ni.nodes,node:Ni.node,size:Ni.size,empty:Ni.empty,each:Ni.each,on:VS,attr:vS,attrTween:SS,style:QS,styleTween:tC,text:iC,textTween:aC,remove:WS,tween:fS,delay:AS,duration:RS,ease:IS,easeVarying:$S,end:lC,[Symbol.iterator]:Ni[Symbol.iterator]};function hC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var uC={time:null,delay:0,duration:250,ease:hC};function dC(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function fC(e){var t,r;e instanceof Zi?(t=e._id,e=e._name):(t=fy(),(r=uC).time=pf(),e=e==null?null:e+"");for(var i=this._groups,s=i.length,n=0;n<s;++n)for(var a=i[n],o=a.length,h,l=0;l<o;++l)(h=a[l])&&jh(h,e,t,l,a,r||dC(h,t));return new Zi(i,this._parents,e,t)}Fl.prototype.interrupt=hS;Fl.prototype.transition=fC;const Dd=Math.PI,Rd=2*Dd,Ns=1e-6,pC=Rd-Ns;function py(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function gC(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return py;const r=10**t;return function(i){this._+=i[0];for(let s=1,n=i.length;s<n;++s)this._+=Math.round(arguments[s]*r)/r+i[s]}}let yC=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?py:gC(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,s){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+s}`}bezierCurveTo(t,r,i,s,n,a){this._append`C${+t},${+r},${+i},${+s},${this._x1=+n},${this._y1=+a}`}arcTo(t,r,i,s,n){if(t=+t,r=+r,i=+i,s=+s,n=+n,n<0)throw new Error(`negative radius: ${n}`);let a=this._x1,o=this._y1,h=i-t,l=s-r,u=a-t,f=o-r,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Ns)if(!(Math.abs(f*h-l*u)>Ns)||!n)this._append`L${this._x1=t},${this._y1=r}`;else{let g=i-a,y=s-o,m=h*h+l*l,x=g*g+y*y,b=Math.sqrt(m),_=Math.sqrt(p),S=n*Math.tan((Dd-Math.acos((m+p-x)/(2*b*_)))/2),C=S/_,k=S/b;Math.abs(C-1)>Ns&&this._append`L${t+C*u},${r+C*f}`,this._append`A${n},${n},0,0,${+(f*g>u*y)},${this._x1=t+k*h},${this._y1=r+k*l}`}}arc(t,r,i,s,n,a){if(t=+t,r=+r,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(s),h=i*Math.sin(s),l=t+o,u=r+h,f=1^a,p=a?s-n:n-s;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Ns||Math.abs(this._y1-u)>Ns)&&this._append`L${l},${u}`,i&&(p<0&&(p=p%Rd+Rd),p>pC?this._append`A${i},${i},0,1,${f},${t-o},${r-h}A${i},${i},0,1,${f},${this._x1=l},${this._y1=u}`:p>Ns&&this._append`A${i},${i},0,${+(p>=Dd)},${f},${this._x1=t+i*Math.cos(n)},${this._y1=r+i*Math.sin(n)}`)}rect(t,r,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+s}h${-i}Z`}toString(){return this._}};function mC(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zc(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function oo(e){return e=Zc(Math.abs(e)),e?e[1]:NaN}function xC(e,t){return function(r,i){for(var s=r.length,n=[],a=0,o=e[0],h=0;s>0&&o>0&&(h+o+1>i&&(o=Math.max(1,i-h)),n.push(r.substring(s-=o,s+o)),!((h+=o+1)>i));)o=e[a=(a+1)%e.length];return n.reverse().join(t)}}function bC(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var vC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jc(e){if(!(t=vC.exec(e)))throw new Error("invalid format: "+e);var t;return new mf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jc.prototype=mf.prototype;function mf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}mf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _C(e){t:for(var t=e.length,r=1,i=-1,s;r<t;++r)switch(e[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;default:if(!+e[r])break t;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(s+1):e}var th;function kC(e,t){var r=Zc(e,t);if(!r)return th=void 0,e.toPrecision(t);var i=r[0],s=r[1],n=s-(th=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=i.length;return n===a?i:n>a?i+new Array(n-a+1).join("0"):n>0?i.slice(0,n)+"."+i.slice(n):"0."+new Array(1-n).join("0")+Zc(e,Math.max(0,t+n-1))[0]}function d0(e,t){var r=Zc(e,t);if(!r)return e+"";var i=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+i:i.length>s+1?i.slice(0,s+1)+"."+i.slice(s+1):i+new Array(s-i.length+2).join("0")}const f0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mC,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>d0(e*100,t),r:d0,s:kC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function p0(e){return e}var g0=Array.prototype.map,y0=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wC(e){var t=e.grouping===void 0||e.thousands===void 0?p0:xC(g0.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",n=e.numerals===void 0?p0:bC(g0.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function l(f,p){f=Jc(f);var g=f.fill,y=f.align,m=f.sign,x=f.symbol,b=f.zero,_=f.width,S=f.comma,C=f.precision,k=f.trim,v=f.type;v==="n"?(S=!0,v="g"):f0[v]||(C===void 0&&(C=12),k=!0,v="g"),(b||g==="0"&&y==="=")&&(b=!0,g="0",y="=");var A=(p&&p.prefix!==void 0?p.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():""),L=(x==="$"?i:/[%p]/.test(v)?a:"")+(p&&p.suffix!==void 0?p.suffix:""),w=f0[v],R=/[defgprs%]/.test(v);C=C===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function T(V){var N=A,D=L,E,M,F;if(v==="c")D=w(V)+D,V="";else{V=+V;var I=V<0||1/V<0;if(V=isNaN(V)?h:w(Math.abs(V),C),k&&(V=_C(V)),I&&+V==0&&m!=="+"&&(I=!1),N=(I?m==="("?m:o:m==="-"||m==="("?"":m)+N,D=(v==="s"&&!isNaN(V)&&th!==void 0?y0[8+th/3]:"")+D+(I&&m==="("?")":""),R){for(E=-1,M=V.length;++E<M;)if(F=V.charCodeAt(E),48>F||F>57){D=(F===46?s+V.slice(E+1):V.slice(E))+D,V=V.slice(0,E);break}}}S&&!b&&(V=t(V,1/0));var B=N.length+V.length+D.length,X=B<_?new Array(_-B+1).join(g):"";switch(S&&b&&(V=t(X+V,X.length?_-D.length:1/0),X=""),y){case"<":V=N+V+D+X;break;case"=":V=N+X+V+D;break;case"^":V=X.slice(0,B=X.length>>1)+N+V+D+X.slice(B);break;default:V=X+N+V+D;break}return n(V)}return T.toString=function(){return f+""},T}function u(f,p){var g=Math.max(-8,Math.min(8,Math.floor(oo(p)/3)))*3,y=Math.pow(10,-g),m=l((f=Jc(f),f.type="f",f),{suffix:y0[8+g/3]});return function(x){return m(y*x)}}return{format:l,formatPrefix:u}}var ec,Ps,gy;TC({thousands:",",grouping:[3],currency:["$",""]});function TC(e){return ec=wC(e),Ps=ec.format,gy=ec.formatPrefix,ec}function SC(e){return Math.max(0,-oo(Math.abs(e)))}function CC(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oo(t)/3)))*3-oo(Math.abs(e)))}function EC(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oo(t)-oo(e))+1}function AC(e){var t=0,r=e.children,i=r&&r.length;if(!i)t=1;else for(;--i>=0;)t+=r[i].value;e.value=t}function LC(){return this.eachAfter(AC)}function DC(e,t){let r=-1;for(const i of this)e.call(t,i,++r,this);return this}function RC(e,t){for(var r=this,i=[r],s,n,a=-1;r=i.pop();)if(e.call(t,r,++a,this),s=r.children)for(n=s.length-1;n>=0;--n)i.push(s[n]);return this}function BC(e,t){for(var r=this,i=[r],s=[],n,a,o,h=-1;r=i.pop();)if(s.push(r),n=r.children)for(a=0,o=n.length;a<o;++a)i.push(n[a]);for(;r=s.pop();)e.call(t,r,++h,this);return this}function IC(e,t){let r=-1;for(const i of this)if(e.call(t,i,++r,this))return i}function NC(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,i=t.children,s=i&&i.length;--s>=0;)r+=i[s].value;t.value=r})}function $C(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function MC(e){for(var t=this,r=FC(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;e!==r;)i.splice(s,0,e),e=e.parent;return i}function FC(e,t){if(e===t)return e;var r=e.ancestors(),i=t.ancestors(),s=null;for(e=r.pop(),t=i.pop();e===t;)s=e,e=r.pop(),t=i.pop();return s}function PC(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function OC(){return Array.from(this)}function VC(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function zC(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*WC(){var e=this,t,r=[e],i,s,n;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,i=e.children)for(s=0,n=i.length;s<n;++s)r.push(i[s]);while(r.length)}function xf(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=GC)):t===void 0&&(t=YC);for(var r=new eh(e),i,s=[r],n,a,o,h;i=s.pop();)if((a=t(i.data))&&(h=(a=Array.from(a)).length))for(i.children=a,o=h-1;o>=0;--o)s.push(n=a[o]=new eh(a[o])),n.parent=i,n.depth=i.depth+1;return r.eachBefore(UC)}function qC(){return xf(this).eachBefore(HC)}function YC(e){return e.children}function GC(e){return Array.isArray(e)?e[1]:null}function HC(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UC(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function eh(e){this.data=e,this.depth=this.height=0,this.parent=null}eh.prototype=xf.prototype={constructor:eh,count:LC,each:DC,eachAfter:BC,eachBefore:RC,find:IC,sum:NC,sort:$C,path:MC,ancestors:PC,descendants:OC,leaves:VC,links:zC,copy:qC,[Symbol.iterator]:WC};function jC(e){if(typeof e!="function")throw new Error;return e}function Ao(){return 0}function Lo(e){return function(){return e}}function XC(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function KC(e,t,r,i,s){for(var n=e.children,a,o=-1,h=n.length,l=e.value&&(i-t)/e.value;++o<h;)a=n[o],a.y0=r,a.y1=s,a.x0=t,a.x1=t+=a.value*l}function QC(e,t,r,i,s){for(var n=e.children,a,o=-1,h=n.length,l=e.value&&(s-r)/e.value;++o<h;)a=n[o],a.x0=t,a.x1=i,a.y0=r,a.y1=r+=a.value*l}var ZC=(1+Math.sqrt(5))/2;function JC(e,t,r,i,s,n){for(var a=[],o=t.children,h,l,u=0,f=0,p=o.length,g,y,m=t.value,x,b,_,S,C,k,v;u<p;){g=s-r,y=n-i;do x=o[f++].value;while(!x&&f<p);for(b=_=x,k=Math.max(y/g,g/y)/(m*e),v=x*x*k,C=Math.max(_/v,v/b);f<p;++f){if(x+=l=o[f].value,l<b&&(b=l),l>_&&(_=l),v=x*x*k,S=Math.max(_/v,v/b),S>C){x-=l;break}C=S}a.push(h={value:x,dice:g<y,children:o.slice(u,f)}),h.dice?KC(h,r,i,s,m?i+=y*x/m:n):QC(h,r,i,m?r+=g*x/m:s,n),m-=x,u=f}return a}const tE=(function e(t){function r(i,s,n,a,o){JC(t,i,s,n,a,o)}return r.ratio=function(i){return e((i=+i)>1?i:1)},r})(ZC);function eE(){var e=tE,t=!1,r=1,i=1,s=[0],n=Ao,a=Ao,o=Ao,h=Ao,l=Ao;function u(p){return p.x0=p.y0=0,p.x1=r,p.y1=i,p.eachBefore(f),s=[0],t&&p.eachBefore(XC),p}function f(p){var g=s[p.depth],y=p.x0+g,m=p.y0+g,x=p.x1-g,b=p.y1-g;x<y&&(y=x=(y+x)/2),b<m&&(m=b=(m+b)/2),p.x0=y,p.y0=m,p.x1=x,p.y1=b,p.children&&(g=s[p.depth+1]=n(p)/2,y+=l(p)-g,m+=a(p)-g,x-=o(p)-g,b-=h(p)-g,x<y&&(y=x=(y+x)/2),b<m&&(m=b=(m+b)/2),e(p,y,m,x,b))}return u.round=function(p){return arguments.length?(t=!!p,u):t},u.size=function(p){return arguments.length?(r=+p[0],i=+p[1],u):[r,i]},u.tile=function(p){return arguments.length?(e=jC(p),u):e},u.padding=function(p){return arguments.length?u.paddingInner(p).paddingOuter(p):u.paddingInner()},u.paddingInner=function(p){return arguments.length?(n=typeof p=="function"?p:Lo(+p),u):n},u.paddingOuter=function(p){return arguments.length?u.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):u.paddingTop()},u.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:Lo(+p),u):a},u.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Lo(+p),u):o},u.paddingBottom=function(p){return arguments.length?(h=typeof p=="function"?p:Lo(+p),u):h},u.paddingLeft=function(p){return arguments.length?(l=typeof p=="function"?p:Lo(+p),u):l},u}function Xh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const m0=Symbol("implicit");function Ks(){var e=new qp,t=[],r=[],i=m0;function s(n){let a=e.get(n);if(a===void 0){if(i!==m0)return i;e.set(n,a=t.push(n)-1)}return r[a%r.length]}return s.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new qp;for(const a of n)e.has(a)||e.set(a,t.push(a)-1);return s},s.range=function(n){return arguments.length?(r=Array.from(n),s):r.slice()},s.unknown=function(n){return arguments.length?(i=n,s):i},s.copy=function(){return Ks(t,r).unknown(i)},Xh.apply(s,arguments),s}function Bd(){var e=Ks().unknown(void 0),t=e.domain,r=e.range,i=0,s=1,n,a,o=!1,h=0,l=0,u=.5;delete e.unknown;function f(){var p=t().length,g=s<i,y=g?s:i,m=g?i:s;n=(m-y)/Math.max(1,p-h+l*2),o&&(n=Math.floor(n)),y+=(m-y-n*(p-h))*u,a=n*(1-h),o&&(y=Math.round(y),a=Math.round(a));var x=Iw(p).map(function(b){return y+n*b});return r(g?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([i,s]=p,i=+i,s=+s,f()):[i,s]},e.rangeRound=function(p){return[i,s]=p,i=+i,s=+s,o=!0,f()},e.bandwidth=function(){return a},e.step=function(){return n},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(h=Math.min(1,l=+p),f()):h},e.paddingInner=function(p){return arguments.length?(h=Math.min(1,p),f()):h},e.paddingOuter=function(p){return arguments.length?(l=+p,f()):l},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return Bd(t(),[i,s]).round(o).paddingInner(h).paddingOuter(l).align(u)},Xh.apply(f(),arguments)}function rE(e){return function(){return e}}function iE(e){return+e}var x0=[0,1];function jn(e){return e}function Id(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:rE(isNaN(t)?NaN:.5)}function sE(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function nE(e,t,r){var i=e[0],s=e[1],n=t[0],a=t[1];return s<i?(i=Id(s,i),n=r(a,n)):(i=Id(i,s),n=r(n,a)),function(o){return n(i(o))}}function aE(e,t,r){var i=Math.min(e.length,t.length)-1,s=new Array(i),n=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)s[a]=Id(e[a],e[a+1]),n[a]=r(t[a],t[a+1]);return function(o){var h=Cw(e,o,1,i)-1;return n[h](s[h](o))}}function yy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function oE(){var e=x0,t=x0,r=ff,i,s,n,a=jn,o,h,l;function u(){var p=Math.min(e.length,t.length);return a!==jn&&(a=sE(e[0],e[p-1])),o=p>2?aE:nE,h=l=null,f}function f(p){return p==null||isNaN(p=+p)?n:(h||(h=o(e.map(i),t,r)))(i(a(p)))}return f.invert=function(p){return a(s((l||(l=o(t,e.map(i),ei)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,iE),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=X6,u()},f.clamp=function(p){return arguments.length?(a=p?!0:jn,u()):a!==jn},f.interpolate=function(p){return arguments.length?(r=p,u()):r},f.unknown=function(p){return arguments.length?(n=p,f):n},function(p,g){return i=p,s=g,u()}}function my(){return oE()(jn,jn)}function lE(e,t,r,i){var s=vd(e,t,r),n;switch(i=Jc(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(n=CC(s,a))&&(i.precision=n),gy(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(n=EC(s,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=n-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(n=SC(s))&&(i.precision=n-(i.type==="%")*2);break}}return Ps(i)}function cE(e){var t=e.domain;return e.ticks=function(r){var i=t();return Dw(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var s=t();return lE(s[0],s[s.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),s=0,n=i.length-1,a=i[s],o=i[n],h,l,u=10;for(o<a&&(l=a,a=o,o=l,l=s,s=n,n=l);u-- >0;){if(l=bd(a,o,r),l===h)return i[s]=a,i[n]=o,t(i);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;h=l}return e},e}function lo(){var e=my();return e.copy=function(){return yy(e,lo())},Xh.apply(e,arguments),cE(e)}function hE(e,t){e=e.slice();var r=0,i=e.length-1,s=e[r],n=e[i],a;return n<s&&(a=r,r=i,i=a,a=s,s=n,n=a),e[r]=t.floor(s),e[i]=t.ceil(n),e}const Mu=new Date,Fu=new Date;function Je(e,t,r,i){function s(n){return e(n=arguments.length===0?new Date:new Date(+n)),n}return s.floor=n=>(e(n=new Date(+n)),n),s.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),s.round=n=>{const a=s(n),o=s.ceil(n);return n-a<o-n?a:o},s.offset=(n,a)=>(t(n=new Date(+n),a==null?1:Math.floor(a)),n),s.range=(n,a,o)=>{const h=[];if(n=s.ceil(n),o=o==null?1:Math.floor(o),!(n<a)||!(o>0))return h;let l;do h.push(l=new Date(+n)),t(n,o),e(n);while(l<n&&n<a);return h},s.filter=n=>Je(a=>{if(a>=a)for(;e(a),!n(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!n(a););else for(;--o>=0;)for(;t(a,1),!n(a););}),r&&(s.count=(n,a)=>(Mu.setTime(+n),Fu.setTime(+a),e(Mu),e(Fu),Math.floor(r(Mu,Fu))),s.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?s.filter(i?a=>i(a)%n===0:a=>s.count(0,a)%n===0):s)),s}const co=Je(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);co.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Je(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):co);co.range;const Yi=1e3,Qr=Yi*60,Gi=Qr*60,Ji=Gi*24,bf=Ji*7,b0=Ji*30,Pu=Ji*365,ls=Je(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yi)},(e,t)=>(t-e)/Yi,e=>e.getUTCSeconds());ls.range;const ll=Je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getMinutes());ll.range;const uE=Je(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qr)},(e,t)=>(t-e)/Qr,e=>e.getUTCMinutes());uE.range;const cl=Je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi-e.getMinutes()*Qr)},(e,t)=>{e.setTime(+e+t*Gi)},(e,t)=>(t-e)/Gi,e=>e.getHours());cl.range;const dE=Je(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gi)},(e,t)=>(t-e)/Gi,e=>e.getUTCHours());dE.range;const an=Je(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qr)/Ji,e=>e.getDate()-1);an.range;const vf=Je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ji,e=>e.getUTCDate()-1);vf.range;const fE=Je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ji,e=>Math.floor(e/Ji));fE.range;function xn(e){return Je(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Qr)/bf)}const Ol=xn(0),hl=xn(1),xy=xn(2),by=xn(3),on=xn(4),vy=xn(5),_y=xn(6);Ol.range;hl.range;xy.range;by.range;on.range;vy.range;_y.range;function bn(e){return Je(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/bf)}const ky=bn(0),rh=bn(1),pE=bn(2),gE=bn(3),ho=bn(4),yE=bn(5),mE=bn(6);ky.range;rh.range;pE.range;gE.range;ho.range;yE.range;mE.range;const ul=Je(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ul.range;const xE=Je(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());xE.range;const ts=Je(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Je(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ts.range;const ln=Je(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ln.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Je(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ln.range;function bE(e,t,r,i,s,n){const a=[[ls,1,Yi],[ls,5,5*Yi],[ls,15,15*Yi],[ls,30,30*Yi],[n,1,Qr],[n,5,5*Qr],[n,15,15*Qr],[n,30,30*Qr],[s,1,Gi],[s,3,3*Gi],[s,6,6*Gi],[s,12,12*Gi],[i,1,Ji],[i,2,2*Ji],[r,1,bf],[t,1,b0],[t,3,3*b0],[e,1,Pu]];function o(l,u,f){const p=u<l;p&&([l,u]=[u,l]);const g=f&&typeof f.range=="function"?f:h(l,u,f),y=g?g.range(l,+u+1):[];return p?y.reverse():y}function h(l,u,f){const p=Math.abs(u-l)/f,g=hf(([,,x])=>x).right(a,p);if(g===a.length)return e.every(vd(l/Pu,u/Pu,f));if(g===0)return co.every(Math.max(vd(l,u,f),1));const[y,m]=a[p/a[g-1][2]<a[g][2]/p?g-1:g];return y.every(m)}return[o,h]}const[vE,_E]=bE(ts,ul,Ol,an,cl,ll);function Ou(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Vu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Do(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function kE(e){var t=e.dateTime,r=e.date,i=e.time,s=e.periods,n=e.days,a=e.shortDays,o=e.months,h=e.shortMonths,l=Ro(s),u=Bo(s),f=Ro(n),p=Bo(n),g=Ro(a),y=Bo(a),m=Ro(o),x=Bo(o),b=Ro(h),_=Bo(h),S={a:F,A:I,b:B,B:X,c:null,d:S0,e:S0,f:GE,g:e7,G:i7,H:WE,I:qE,j:YE,L:wy,m:HE,M:UE,p:$,q:G,Q:A0,s:L0,S:jE,u:XE,U:KE,V:QE,w:ZE,W:JE,x:null,X:null,y:t7,Y:r7,Z:s7,"%":E0},C={a:nt,A:ht,b:tt,B:dt,c:null,d:C0,e:C0,f:l7,g:x7,G:v7,H:n7,I:a7,j:o7,L:Sy,m:c7,M:h7,p:st,q:ot,Q:A0,s:L0,S:u7,u:d7,U:f7,V:p7,w:g7,W:y7,x:null,X:null,y:m7,Y:b7,Z:_7,"%":E0},k={a:R,A:T,b:V,B:N,c:D,d:w0,e:w0,f:PE,g:k0,G:_0,H:T0,I:T0,j:NE,L:FE,m:IE,M:$E,p:w,q:BE,Q:VE,s:zE,S:ME,u:EE,U:AE,V:LE,w:CE,W:DE,x:E,X:M,y:k0,Y:_0,Z:RE,"%":OE};S.x=v(r,S),S.X=v(i,S),S.c=v(t,S),C.x=v(r,C),C.X=v(i,C),C.c=v(t,C);function v(K,lt){return function(U){var j=[],Q=-1,W=0,et=K.length,z,vt,O;for(U instanceof Date||(U=new Date(+U));++Q<et;)K.charCodeAt(Q)===37&&(j.push(K.slice(W,Q)),(vt=v0[z=K.charAt(++Q)])!=null?z=K.charAt(++Q):vt=z==="e"?" ":"0",(O=lt[z])&&(z=O(U,vt)),j.push(z),W=Q+1);return j.push(K.slice(W,Q)),j.join("")}}function A(K,lt){return function(U){var j=Do(1900,void 0,1),Q=L(j,K,U+="",0),W,et;if(Q!=U.length)return null;if("Q"in j)return new Date(j.Q);if("s"in j)return new Date(j.s*1e3+("L"in j?j.L:0));if(lt&&!("Z"in j)&&(j.Z=0),"p"in j&&(j.H=j.H%12+j.p*12),j.m===void 0&&(j.m="q"in j?j.q:0),"V"in j){if(j.V<1||j.V>53)return null;"w"in j||(j.w=1),"Z"in j?(W=Vu(Do(j.y,0,1)),et=W.getUTCDay(),W=et>4||et===0?rh.ceil(W):rh(W),W=vf.offset(W,(j.V-1)*7),j.y=W.getUTCFullYear(),j.m=W.getUTCMonth(),j.d=W.getUTCDate()+(j.w+6)%7):(W=Ou(Do(j.y,0,1)),et=W.getDay(),W=et>4||et===0?hl.ceil(W):hl(W),W=an.offset(W,(j.V-1)*7),j.y=W.getFullYear(),j.m=W.getMonth(),j.d=W.getDate()+(j.w+6)%7)}else("W"in j||"U"in j)&&("w"in j||(j.w="u"in j?j.u%7:"W"in j?1:0),et="Z"in j?Vu(Do(j.y,0,1)).getUTCDay():Ou(Do(j.y,0,1)).getDay(),j.m=0,j.d="W"in j?(j.w+6)%7+j.W*7-(et+5)%7:j.w+j.U*7-(et+6)%7);return"Z"in j?(j.H+=j.Z/100|0,j.M+=j.Z%100,Vu(j)):Ou(j)}}function L(K,lt,U,j){for(var Q=0,W=lt.length,et=U.length,z,vt;Q<W;){if(j>=et)return-1;if(z=lt.charCodeAt(Q++),z===37){if(z=lt.charAt(Q++),vt=k[z in v0?lt.charAt(Q++):z],!vt||(j=vt(K,U,j))<0)return-1}else if(z!=U.charCodeAt(j++))return-1}return j}function w(K,lt,U){var j=l.exec(lt.slice(U));return j?(K.p=u.get(j[0].toLowerCase()),U+j[0].length):-1}function R(K,lt,U){var j=g.exec(lt.slice(U));return j?(K.w=y.get(j[0].toLowerCase()),U+j[0].length):-1}function T(K,lt,U){var j=f.exec(lt.slice(U));return j?(K.w=p.get(j[0].toLowerCase()),U+j[0].length):-1}function V(K,lt,U){var j=b.exec(lt.slice(U));return j?(K.m=_.get(j[0].toLowerCase()),U+j[0].length):-1}function N(K,lt,U){var j=m.exec(lt.slice(U));return j?(K.m=x.get(j[0].toLowerCase()),U+j[0].length):-1}function D(K,lt,U){return L(K,t,lt,U)}function E(K,lt,U){return L(K,r,lt,U)}function M(K,lt,U){return L(K,i,lt,U)}function F(K){return a[K.getDay()]}function I(K){return n[K.getDay()]}function B(K){return h[K.getMonth()]}function X(K){return o[K.getMonth()]}function $(K){return s[+(K.getHours()>=12)]}function G(K){return 1+~~(K.getMonth()/3)}function nt(K){return a[K.getUTCDay()]}function ht(K){return n[K.getUTCDay()]}function tt(K){return h[K.getUTCMonth()]}function dt(K){return o[K.getUTCMonth()]}function st(K){return s[+(K.getUTCHours()>=12)]}function ot(K){return 1+~~(K.getUTCMonth()/3)}return{format:function(K){var lt=v(K+="",S);return lt.toString=function(){return K},lt},parse:function(K){var lt=A(K+="",!1);return lt.toString=function(){return K},lt},utcFormat:function(K){var lt=v(K+="",C);return lt.toString=function(){return K},lt},utcParse:function(K){var lt=A(K+="",!0);return lt.toString=function(){return K},lt}}}var v0={"-":"",_:" ",0:"0"},sr=/^\s*\d+/,wE=/^%/,TE=/[\\^$*+?|[\]().{}]/g;function be(e,t,r){var i=e<0?"-":"",s=(i?-e:e)+"",n=s.length;return i+(n<r?new Array(r-n+1).join(t)+s:s)}function SE(e){return e.replace(TE,"\\$&")}function Ro(e){return new RegExp("^(?:"+e.map(SE).join("|")+")","i")}function Bo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function CE(e,t,r){var i=sr.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function EE(e,t,r){var i=sr.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function AE(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function LE(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function DE(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function _0(e,t,r){var i=sr.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function k0(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function RE(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function BE(e,t,r){var i=sr.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function IE(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function w0(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function NE(e,t,r){var i=sr.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function T0(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function $E(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function ME(e,t,r){var i=sr.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function FE(e,t,r){var i=sr.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function PE(e,t,r){var i=sr.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function OE(e,t,r){var i=wE.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function VE(e,t,r){var i=sr.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function zE(e,t,r){var i=sr.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function S0(e,t){return be(e.getDate(),t,2)}function WE(e,t){return be(e.getHours(),t,2)}function qE(e,t){return be(e.getHours()%12||12,t,2)}function YE(e,t){return be(1+an.count(ts(e),e),t,3)}function wy(e,t){return be(e.getMilliseconds(),t,3)}function GE(e,t){return wy(e,t)+"000"}function HE(e,t){return be(e.getMonth()+1,t,2)}function UE(e,t){return be(e.getMinutes(),t,2)}function jE(e,t){return be(e.getSeconds(),t,2)}function XE(e){var t=e.getDay();return t===0?7:t}function KE(e,t){return be(Ol.count(ts(e)-1,e),t,2)}function Ty(e){var t=e.getDay();return t>=4||t===0?on(e):on.ceil(e)}function QE(e,t){return e=Ty(e),be(on.count(ts(e),e)+(ts(e).getDay()===4),t,2)}function ZE(e){return e.getDay()}function JE(e,t){return be(hl.count(ts(e)-1,e),t,2)}function t7(e,t){return be(e.getFullYear()%100,t,2)}function e7(e,t){return e=Ty(e),be(e.getFullYear()%100,t,2)}function r7(e,t){return be(e.getFullYear()%1e4,t,4)}function i7(e,t){var r=e.getDay();return e=r>=4||r===0?on(e):on.ceil(e),be(e.getFullYear()%1e4,t,4)}function s7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+be(t/60|0,"0",2)+be(t%60,"0",2)}function C0(e,t){return be(e.getUTCDate(),t,2)}function n7(e,t){return be(e.getUTCHours(),t,2)}function a7(e,t){return be(e.getUTCHours()%12||12,t,2)}function o7(e,t){return be(1+vf.count(ln(e),e),t,3)}function Sy(e,t){return be(e.getUTCMilliseconds(),t,3)}function l7(e,t){return Sy(e,t)+"000"}function c7(e,t){return be(e.getUTCMonth()+1,t,2)}function h7(e,t){return be(e.getUTCMinutes(),t,2)}function u7(e,t){return be(e.getUTCSeconds(),t,2)}function d7(e){var t=e.getUTCDay();return t===0?7:t}function f7(e,t){return be(ky.count(ln(e)-1,e),t,2)}function Cy(e){var t=e.getUTCDay();return t>=4||t===0?ho(e):ho.ceil(e)}function p7(e,t){return e=Cy(e),be(ho.count(ln(e),e)+(ln(e).getUTCDay()===4),t,2)}function g7(e){return e.getUTCDay()}function y7(e,t){return be(rh.count(ln(e)-1,e),t,2)}function m7(e,t){return be(e.getUTCFullYear()%100,t,2)}function x7(e,t){return e=Cy(e),be(e.getUTCFullYear()%100,t,2)}function b7(e,t){return be(e.getUTCFullYear()%1e4,t,4)}function v7(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ho(e):ho.ceil(e),be(e.getUTCFullYear()%1e4,t,4)}function _7(){return"+0000"}function E0(){return"%"}function A0(e){return+e}function L0(e){return Math.floor(+e/1e3)}var Rn,ih;k7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k7(e){return Rn=kE(e),ih=Rn.format,Rn.parse,Rn.utcFormat,Rn.utcParse,Rn}function w7(e){return new Date(e)}function T7(e){return e instanceof Date?+e:+new Date(+e)}function Ey(e,t,r,i,s,n,a,o,h,l){var u=my(),f=u.invert,p=u.domain,g=l(".%L"),y=l(":%S"),m=l("%I:%M"),x=l("%I %p"),b=l("%a %d"),_=l("%b %d"),S=l("%B"),C=l("%Y");function k(v){return(h(v)<v?g:o(v)<v?y:a(v)<v?m:n(v)<v?x:i(v)<v?s(v)<v?b:_:r(v)<v?S:C)(v)}return u.invert=function(v){return new Date(f(v))},u.domain=function(v){return arguments.length?p(Array.from(v,T7)):p().map(w7)},u.ticks=function(v){var A=p();return e(A[0],A[A.length-1],v??10)},u.tickFormat=function(v,A){return A==null?k:l(A)},u.nice=function(v){var A=p();return(!v||typeof v.range!="function")&&(v=t(A[0],A[A.length-1],v??10)),v?p(hE(A,v)):u},u.copy=function(){return yy(u,Ey(e,t,r,i,s,n,a,o,h,l))},u}function S7(){return Xh.apply(Ey(vE,_E,ts,ul,Ol,an,cl,ll,ls,ih).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C7(e){for(var t=e.length/6|0,r=new Array(t),i=0;i<t;)r[i]="#"+e.slice(i*6,++i*6);return r}const E7=C7("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function $e(e){return function(){return e}}const D0=Math.abs,ur=Math.atan2,Ls=Math.cos,A7=Math.max,zu=Math.min,di=Math.sin,Xn=Math.sqrt,dr=1e-12,dl=Math.PI,sh=dl/2,kc=2*dl;function L7(e){return e>1?0:e<-1?dl:Math.acos(e)}function R0(e){return e>=1?sh:e<=-1?-sh:Math.asin(e)}function Ay(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new yC(t)}function D7(e){return e.innerRadius}function R7(e){return e.outerRadius}function B7(e){return e.startAngle}function I7(e){return e.endAngle}function N7(e){return e&&e.padAngle}function $7(e,t,r,i,s,n,a,o){var h=r-e,l=i-t,u=a-s,f=o-n,p=f*h-u*l;if(!(p*p<dr))return p=(u*(t-n)-f*(e-s))/p,[e+p*h,t+p*l]}function rc(e,t,r,i,s,n,a){var o=e-r,h=t-i,l=(a?n:-n)/Xn(o*o+h*h),u=l*h,f=-l*o,p=e+u,g=t+f,y=r+u,m=i+f,x=(p+y)/2,b=(g+m)/2,_=y-p,S=m-g,C=_*_+S*S,k=s-n,v=p*m-y*g,A=(S<0?-1:1)*Xn(A7(0,k*k*C-v*v)),L=(v*S-_*A)/C,w=(-v*_-S*A)/C,R=(v*S+_*A)/C,T=(-v*_+S*A)/C,V=L-x,N=w-b,D=R-x,E=T-b;return V*V+N*N>D*D+E*E&&(L=R,w=T),{cx:L,cy:w,x01:-u,y01:-f,x11:L*(s/k-1),y11:w*(s/k-1)}}function uo(){var e=D7,t=R7,r=$e(0),i=null,s=B7,n=I7,a=N7,o=null,h=Ay(l);function l(){var u,f,p=+e.apply(this,arguments),g=+t.apply(this,arguments),y=s.apply(this,arguments)-sh,m=n.apply(this,arguments)-sh,x=D0(m-y),b=m>y;if(o||(o=u=h()),g<p&&(f=g,g=p,p=f),!(g>dr))o.moveTo(0,0);else if(x>kc-dr)o.moveTo(g*Ls(y),g*di(y)),o.arc(0,0,g,y,m,!b),p>dr&&(o.moveTo(p*Ls(m),p*di(m)),o.arc(0,0,p,m,y,b));else{var _=y,S=m,C=y,k=m,v=x,A=x,L=a.apply(this,arguments)/2,w=L>dr&&(i?+i.apply(this,arguments):Xn(p*p+g*g)),R=zu(D0(g-p)/2,+r.apply(this,arguments)),T=R,V=R,N,D;if(w>dr){var E=R0(w/p*di(L)),M=R0(w/g*di(L));(v-=E*2)>dr?(E*=b?1:-1,C+=E,k-=E):(v=0,C=k=(y+m)/2),(A-=M*2)>dr?(M*=b?1:-1,_+=M,S-=M):(A=0,_=S=(y+m)/2)}var F=g*Ls(_),I=g*di(_),B=p*Ls(k),X=p*di(k);if(R>dr){var $=g*Ls(S),G=g*di(S),nt=p*Ls(C),ht=p*di(C),tt;if(x<dl)if(tt=$7(F,I,nt,ht,$,G,B,X)){var dt=F-tt[0],st=I-tt[1],ot=$-tt[0],K=G-tt[1],lt=1/di(L7((dt*ot+st*K)/(Xn(dt*dt+st*st)*Xn(ot*ot+K*K)))/2),U=Xn(tt[0]*tt[0]+tt[1]*tt[1]);T=zu(R,(p-U)/(lt-1)),V=zu(R,(g-U)/(lt+1))}else T=V=0}A>dr?V>dr?(N=rc(nt,ht,F,I,g,V,b),D=rc($,G,B,X,g,V,b),o.moveTo(N.cx+N.x01,N.cy+N.y01),V<R?o.arc(N.cx,N.cy,V,ur(N.y01,N.x01),ur(D.y01,D.x01),!b):(o.arc(N.cx,N.cy,V,ur(N.y01,N.x01),ur(N.y11,N.x11),!b),o.arc(0,0,g,ur(N.cy+N.y11,N.cx+N.x11),ur(D.cy+D.y11,D.cx+D.x11),!b),o.arc(D.cx,D.cy,V,ur(D.y11,D.x11),ur(D.y01,D.x01),!b))):(o.moveTo(F,I),o.arc(0,0,g,_,S,!b)):o.moveTo(F,I),!(p>dr)||!(v>dr)?o.lineTo(B,X):T>dr?(N=rc(B,X,$,G,p,-T,b),D=rc(F,I,nt,ht,p,-T,b),o.lineTo(N.cx+N.x01,N.cy+N.y01),T<R?o.arc(N.cx,N.cy,T,ur(N.y01,N.x01),ur(D.y01,D.x01),!b):(o.arc(N.cx,N.cy,T,ur(N.y01,N.x01),ur(N.y11,N.x11),!b),o.arc(0,0,p,ur(N.cy+N.y11,N.cx+N.x11),ur(D.cy+D.y11,D.cx+D.x11),b),o.arc(D.cx,D.cy,T,ur(D.y11,D.x11),ur(D.y01,D.x01),!b))):o.arc(0,0,p,k,C,b)}if(o.closePath(),u)return o=null,u+""||null}return l.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+s.apply(this,arguments)+ +n.apply(this,arguments))/2-dl/2;return[Ls(f)*u,di(f)*u]},l.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:$e(+u),l):e},l.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:$e(+u),l):t},l.cornerRadius=function(u){return arguments.length?(r=typeof u=="function"?u:$e(+u),l):r},l.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:$e(+u),l):i},l.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:$e(+u),l):s},l.endAngle=function(u){return arguments.length?(n=typeof u=="function"?u:$e(+u),l):n},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:$e(+u),l):a},l.context=function(u){return arguments.length?(o=u??null,l):o},l}function Ly(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Dy(e){this._context=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Qs(e){return new Dy(e)}function M7(e){return e[0]}function F7(e){return e[1]}function fl(e,t){var r=$e(!0),i=null,s=Qs,n=null,a=Ay(o);e=typeof e=="function"?e:e===void 0?M7:$e(e),t=typeof t=="function"?t:t===void 0?F7:$e(t);function o(h){var l,u=(h=Ly(h)).length,f,p=!1,g;for(i==null&&(n=s(g=a())),l=0;l<=u;++l)!(l<u&&r(f=h[l],l,h))===p&&((p=!p)?n.lineStart():n.lineEnd()),p&&n.point(+e(f,l,h),+t(f,l,h));if(g)return n=null,g+""||null}return o.x=function(h){return arguments.length?(e=typeof h=="function"?h:$e(+h),o):e},o.y=function(h){return arguments.length?(t=typeof h=="function"?h:$e(+h),o):t},o.defined=function(h){return arguments.length?(r=typeof h=="function"?h:$e(!!h),o):r},o.curve=function(h){return arguments.length?(s=h,i!=null&&(n=s(i)),o):s},o.context=function(h){return arguments.length?(h==null?i=n=null:n=s(i=h),o):i},o}function P7(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function O7(e){return e}function V7(){var e=O7,t=P7,r=null,i=$e(0),s=$e(kc),n=$e(0);function a(o){var h,l=(o=Ly(o)).length,u,f,p=0,g=new Array(l),y=new Array(l),m=+i.apply(this,arguments),x=Math.min(kc,Math.max(-kc,s.apply(this,arguments)-m)),b,_=Math.min(Math.abs(x)/l,n.apply(this,arguments)),S=_*(x<0?-1:1),C;for(h=0;h<l;++h)(C=y[g[h]=h]=+e(o[h],h,o))>0&&(p+=C);for(t!=null?g.sort(function(k,v){return t(y[k],y[v])}):r!=null&&g.sort(function(k,v){return r(o[k],o[v])}),h=0,f=p?(x-l*S)/p:0;h<l;++h,m=b)u=g[h],C=y[u],b=m+(C>0?C*f:0)+S,y[u]={data:o[u],index:h,value:C,startAngle:m,endAngle:b,padAngle:_};return y}return a.value=function(o){return arguments.length?(e=typeof o=="function"?o:$e(+o),a):e},a.sortValues=function(o){return arguments.length?(t=o,r=null,a):t},a.sort=function(o){return arguments.length?(r=o,t=null,a):r},a.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:$e(+o),a):i},a.endAngle=function(o){return arguments.length?(s=typeof o=="function"?o:$e(+o),a):s},a.padAngle=function(o){return arguments.length?(n=typeof o=="function"?o:$e(+o),a):n},a}class Ry{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function By(e){return new Ry(e,!0)}function Iy(e){return new Ry(e,!1)}function fs(){}function nh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Kh(e){this._context=e}Kh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ta(e){return new Kh(e)}function Ny(e){this._context=e}Ny.prototype={areaStart:fs,areaEnd:fs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function z7(e){return new Ny(e)}function $y(e){this._context=e}$y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:nh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function W7(e){return new $y(e)}function My(e,t){this._basis=new Kh(e),this._beta=t}My.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],s=t[0],n=e[r]-i,a=t[r]-s,o=-1,h;++o<=r;)h=o/r,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+h*n),this._beta*t[o]+(1-this._beta)*(s+h*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const q7=(function e(t){function r(i){return t===1?new Kh(i):new My(i,t)}return r.beta=function(i){return e(+i)},r})(.85);function ah(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function _f(e,t){this._context=e,this._k=(1-t)/6}_f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ah(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ah(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fy=(function e(t){function r(i){return new _f(i,t)}return r.tension=function(i){return e(+i)},r})(0);function kf(e,t){this._context=e,this._k=(1-t)/6}kf.prototype={areaStart:fs,areaEnd:fs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ah(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Y7=(function e(t){function r(i){return new kf(i,t)}return r.tension=function(i){return e(+i)},r})(0);function wf(e,t){this._context=e,this._k=(1-t)/6}wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ah(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G7=(function e(t){function r(i){return new wf(i,t)}return r.tension=function(i){return e(+i)},r})(0);function Tf(e,t,r){var i=e._x1,s=e._y1,n=e._x2,a=e._y2;if(e._l01_a>dr){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,h=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/h,s=(s*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/h}if(e._l23_a>dr){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);n=(n*l+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*l+e._y1*e._l23_2a-r*e._l12_2a)/u}e._context.bezierCurveTo(i,s,n,a,e._x2,e._y2)}function Py(e,t){this._context=e,this._alpha=t}Py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Tf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oy=(function e(t){function r(i){return t?new Py(i,t):new _f(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function Vy(e,t){this._context=e,this._alpha=t}Vy.prototype={areaStart:fs,areaEnd:fs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Tf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H7=(function e(t){function r(i){return t?new Vy(i,t):new kf(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function zy(e,t){this._context=e,this._alpha=t}zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const U7=(function e(t){function r(i){return t?new zy(i,t):new wf(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function Wy(e){this._context=e}Wy.prototype={areaStart:fs,areaEnd:fs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function j7(e){return new Wy(e)}function B0(e){return e<0?-1:1}function I0(e,t,r){var i=e._x1-e._x0,s=t-e._x1,n=(e._y1-e._y0)/(i||s<0&&-0),a=(r-e._y1)/(s||i<0&&-0),o=(n*s+a*i)/(i+s);return(B0(n)+B0(a))*Math.min(Math.abs(n),Math.abs(a),.5*Math.abs(o))||0}function N0(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Wu(e,t,r){var i=e._x0,s=e._y0,n=e._x1,a=e._y1,o=(n-i)/3;e._context.bezierCurveTo(i+o,s+o*t,n-o,a-o*r,n,a)}function oh(e){this._context=e}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wu(this,this._t0,N0(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wu(this,N0(this,r=I0(this,e,t)),r);break;default:Wu(this,this._t0,r=I0(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function qy(e){this._context=new Yy(e)}(qy.prototype=Object.create(oh.prototype)).point=function(e,t){oh.prototype.point.call(this,t,e)};function Yy(e){this._context=e}Yy.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,s,n){this._context.bezierCurveTo(t,e,i,r,n,s)}};function Gy(e){return new oh(e)}function Hy(e){return new qy(e)}function Uy(e){this._context=e}Uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=$0(e),s=$0(t),n=0,a=1;a<r;++n,++a)this._context.bezierCurveTo(i[0][n],s[0][n],i[1][n],s[1][n],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $0(e){var t,r=e.length-1,i,s=new Array(r),n=new Array(r),a=new Array(r);for(s[0]=0,n[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,n[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,n[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=s[t]/n[t-1],n[t]-=i,a[t]-=i*a[t-1];for(s[r-1]=a[r-1]/n[r-1],t=r-2;t>=0;--t)s[t]=(a[t]-s[t+1])/n[t];for(n[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)n[t]=2*e[t+1]-s[t+1];return[s,n]}function jy(e){return new Uy(e)}function Qh(e,t){this._context=e,this._t=t}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Xy(e){return new Qh(e,.5)}function Ky(e){return new Qh(e,0)}function Qy(e){return new Qh(e,1)}function Vo(e,t,r){this.k=e,this.x=t,this.y=r}Vo.prototype={constructor:Vo,scale:function(e){return e===1?this:new Vo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vo.prototype;var es=d(e=>{var s;const{securityLevel:t}=it();let r=_t("body");if(t==="sandbox"){const a=((s=_t(`#i${e}`).node())==null?void 0:s.contentDocument)??document;r=_t(a.body)}return r.select(`#${e}`)},"selectSvgElement");function Sf(e){return typeof e>"u"||e===null}d(Sf,"isNothing");function Zy(e){return typeof e=="object"&&e!==null}d(Zy,"isObject");function Jy(e){return Array.isArray(e)?e:Sf(e)?[]:[e]}d(Jy,"toArray");function tm(e,t){var r,i,s,n;if(t)for(n=Object.keys(t),r=0,i=n.length;r<i;r+=1)s=n[r],e[s]=t[s];return e}d(tm,"extend");function em(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}d(em,"repeat");function rm(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}d(rm,"isNegativeZero");var X7=Sf,K7=Zy,Q7=Jy,Z7=em,J7=rm,t8=tm,Xe={isNothing:X7,isObject:K7,toArray:Q7,repeat:Z7,isNegativeZero:J7,extend:t8};function Cf(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}d(Cf,"formatError");function fo(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Cf(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}d(fo,"YAMLException$1");fo.prototype=Object.create(Error.prototype);fo.prototype.constructor=fo;fo.prototype.toString=d(function(t){return this.name+": "+Cf(this,t)},"toString");var Dr=fo;function wc(e,t,r,i,s){var n="",a="",o=Math.floor(s/2)-1;return i-t>o&&(n=" ... ",t=i-o+n.length),r-i>o&&(a=" ...",r=i+o-a.length),{str:n+e.slice(t,r).replace(/\t/g,"")+a,pos:i-t+n.length}}d(wc,"getLine");function Tc(e,t){return Xe.repeat(" ",t-e.length)+e}d(Tc,"padStart");function im(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],s=[],n,a=-1;n=r.exec(e.buffer);)s.push(n.index),i.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var o="",h,l,u=Math.min(e.line+t.linesAfter,s.length).toString().length,f=t.maxLength-(t.indent+u+3);for(h=1;h<=t.linesBefore&&!(a-h<0);h++)l=wc(e.buffer,i[a-h],s[a-h],e.position-(i[a]-i[a-h]),f),o=Xe.repeat(" ",t.indent)+Tc((e.line-h+1).toString(),u)+" | "+l.str+`
`+o;for(l=wc(e.buffer,i[a],s[a],e.position,f),o+=Xe.repeat(" ",t.indent)+Tc((e.line+1).toString(),u)+" | "+l.str+`
`,o+=Xe.repeat("-",t.indent+u+3+l.pos)+`^
`,h=1;h<=t.linesAfter&&!(a+h>=s.length);h++)l=wc(e.buffer,i[a+h],s[a+h],e.position-(i[a]-i[a+h]),f),o+=Xe.repeat(" ",t.indent)+Tc((e.line+h+1).toString(),u)+" | "+l.str+`
`;return o.replace(/\n$/,"")}d(im,"makeSnippet");var e8=im,r8=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],i8=["scalar","sequence","mapping"];function sm(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}d(sm,"compileStyleAliases");function nm(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(r8.indexOf(r)===-1)throw new Dr('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=sm(t.styleAliases||null),i8.indexOf(this.kind)===-1)throw new Dr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}d(nm,"Type$1");var yr=nm;function Nd(e,t){var r=[];return e[t].forEach(function(i){var s=r.length;r.forEach(function(n,a){n.tag===i.tag&&n.kind===i.kind&&n.multi===i.multi&&(s=a)}),r[s]=i}),r}d(Nd,"compileList");function am(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(s){s.multi?(e.multi[s.kind].push(s),e.multi.fallback.push(s)):e[s.kind][s.tag]=e.fallback[s.tag]=s}for(d(i,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}d(am,"compileMap");function lh(e){return this.extend(e)}d(lh,"Schema$1");lh.prototype.extend=d(function(t){var r=[],i=[];if(t instanceof yr)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new Dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(n){if(!(n instanceof yr))throw new Dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new Dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new Dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(n){if(!(n instanceof yr))throw new Dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(lh.prototype);return s.implicit=(this.implicit||[]).concat(r),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=Nd(s,"implicit"),s.compiledExplicit=Nd(s,"explicit"),s.compiledTypeMap=am(s.compiledImplicit,s.compiledExplicit),s},"extend");var s8=lh,n8=new yr("tag:yaml.org,2002:str",{kind:"scalar",construct:d(function(e){return e!==null?e:""},"construct")}),a8=new yr("tag:yaml.org,2002:seq",{kind:"sequence",construct:d(function(e){return e!==null?e:[]},"construct")}),o8=new yr("tag:yaml.org,2002:map",{kind:"mapping",construct:d(function(e){return e!==null?e:{}},"construct")}),l8=new s8({explicit:[n8,a8,o8]});function om(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}d(om,"resolveYamlNull");function lm(){return null}d(lm,"constructYamlNull");function cm(e){return e===null}d(cm,"isNull");var c8=new yr("tag:yaml.org,2002:null",{kind:"scalar",resolve:om,construct:lm,predicate:cm,represent:{canonical:d(function(){return"~"},"canonical"),lowercase:d(function(){return"null"},"lowercase"),uppercase:d(function(){return"NULL"},"uppercase"),camelcase:d(function(){return"Null"},"camelcase"),empty:d(function(){return""},"empty")},defaultStyle:"lowercase"});function hm(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}d(hm,"resolveYamlBoolean");function um(e){return e==="true"||e==="True"||e==="TRUE"}d(um,"constructYamlBoolean");function dm(e){return Object.prototype.toString.call(e)==="[object Boolean]"}d(dm,"isBoolean");var h8=new yr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:hm,construct:um,predicate:dm,represent:{lowercase:d(function(e){return e?"true":"false"},"lowercase"),uppercase:d(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:d(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function fm(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}d(fm,"isHexCode");function pm(e){return 48<=e&&e<=55}d(pm,"isOctCode");function gm(e){return 48<=e&&e<=57}d(gm,"isDecCode");function ym(e){if(e===null)return!1;var t=e.length,r=0,i=!1,s;if(!t)return!1;if(s=e[r],(s==="-"||s==="+")&&(s=e[++r]),s==="0"){if(r+1===t)return!0;if(s=e[++r],s==="b"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;i=!0}return i&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!fm(e.charCodeAt(r)))return!1;i=!0}return i&&s!=="_"}if(s==="o"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!pm(e.charCodeAt(r)))return!1;i=!0}return i&&s!=="_"}}if(s==="_")return!1;for(;r<t;r++)if(s=e[r],s!=="_"){if(!gm(e.charCodeAt(r)))return!1;i=!0}return!(!i||s==="_")}d(ym,"resolveYamlInteger");function mm(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}d(mm,"constructYamlInteger");function xm(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Xe.isNegativeZero(e)}d(xm,"isInteger");var u8=new yr("tag:yaml.org,2002:int",{kind:"scalar",resolve:ym,construct:mm,predicate:xm,represent:{binary:d(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:d(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:d(function(e){return e.toString(10)},"decimal"),hexadecimal:d(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),d8=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function bm(e){return!(e===null||!d8.test(e)||e[e.length-1]==="_")}d(bm,"resolveYamlFloat");function vm(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}d(vm,"constructYamlFloat");var f8=/^[-+]?[0-9]+e/;function _m(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xe.isNegativeZero(e))return"-0.0";return r=e.toString(10),f8.test(r)?r.replace("e",".e"):r}d(_m,"representYamlFloat");function km(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Xe.isNegativeZero(e))}d(km,"isFloat");var p8=new yr("tag:yaml.org,2002:float",{kind:"scalar",resolve:bm,construct:vm,predicate:km,represent:_m,defaultStyle:"lowercase"}),wm=l8.extend({implicit:[c8,h8,u8,p8]}),g8=wm,Tm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Sm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Cm(e){return e===null?!1:Tm.exec(e)!==null||Sm.exec(e)!==null}d(Cm,"resolveYamlTimestamp");function Em(e){var t,r,i,s,n,a,o,h=0,l=null,u,f,p;if(t=Tm.exec(e),t===null&&(t=Sm.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,i,s));if(n=+t[4],a=+t[5],o=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(u=+t[10],f=+(t[11]||0),l=(u*60+f)*6e4,t[9]==="-"&&(l=-l)),p=new Date(Date.UTC(r,i,s,n,a,o,h)),l&&p.setTime(p.getTime()-l),p}d(Em,"constructYamlTimestamp");function Am(e){return e.toISOString()}d(Am,"representYamlTimestamp");var y8=new yr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Cm,construct:Em,instanceOf:Date,represent:Am});function Lm(e){return e==="<<"||e===null}d(Lm,"resolveYamlMerge");var m8=new yr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Lm}),Ef=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Dm(e){if(e===null)return!1;var t,r,i=0,s=e.length,n=Ef;for(r=0;r<s;r++)if(t=n.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}d(Dm,"resolveYamlBinary");function Rm(e){var t,r,i=e.replace(/[\r\n=]/g,""),s=i.length,n=Ef,a=0,o=[];for(t=0;t<s;t++)t%4===0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|n.indexOf(i.charAt(t));return r=s%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}d(Rm,"constructYamlBinary");function Bm(e){var t="",r=0,i,s,n=e.length,a=Ef;for(i=0;i<n;i++)i%3===0&&i&&(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]),r=(r<<8)+e[i];return s=n%3,s===0?(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]):s===2?(t+=a[r>>10&63],t+=a[r>>4&63],t+=a[r<<2&63],t+=a[64]):s===1&&(t+=a[r>>2&63],t+=a[r<<4&63],t+=a[64],t+=a[64]),t}d(Bm,"representYamlBinary");function Im(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}d(Im,"isBinary");var x8=new yr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Dm,construct:Rm,predicate:Im,represent:Bm}),b8=Object.prototype.hasOwnProperty,v8=Object.prototype.toString;function Nm(e){if(e===null)return!0;var t=[],r,i,s,n,a,o=e;for(r=0,i=o.length;r<i;r+=1){if(s=o[r],a=!1,v8.call(s)!=="[object Object]")return!1;for(n in s)if(b8.call(s,n))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(n)===-1)t.push(n);else return!1}return!0}d(Nm,"resolveYamlOmap");function $m(e){return e!==null?e:[]}d($m,"constructYamlOmap");var _8=new yr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Nm,construct:$m}),k8=Object.prototype.toString;function Mm(e){if(e===null)return!0;var t,r,i,s,n,a=e;for(n=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(i=a[t],k8.call(i)!=="[object Object]"||(s=Object.keys(i),s.length!==1))return!1;n[t]=[s[0],i[s[0]]]}return!0}d(Mm,"resolveYamlPairs");function Fm(e){if(e===null)return[];var t,r,i,s,n,a=e;for(n=new Array(a.length),t=0,r=a.length;t<r;t+=1)i=a[t],s=Object.keys(i),n[t]=[s[0],i[s[0]]];return n}d(Fm,"constructYamlPairs");var w8=new yr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Mm,construct:Fm}),T8=Object.prototype.hasOwnProperty;function Pm(e){if(e===null)return!0;var t,r=e;for(t in r)if(T8.call(r,t)&&r[t]!==null)return!1;return!0}d(Pm,"resolveYamlSet");function Om(e){return e!==null?e:{}}d(Om,"constructYamlSet");var S8=new yr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Pm,construct:Om}),Vm=g8.extend({implicit:[y8,m8],explicit:[x8,_8,w8,S8]}),ps=Object.prototype.hasOwnProperty,ch=1,zm=2,Wm=3,hh=4,qu=1,C8=2,M0=3,E8=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,A8=/[\x85\u2028\u2029]/,L8=/[,\[\]\{\}]/,qm=/^(?:!|!!|![a-z\-]+!)$/i,Ym=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function $d(e){return Object.prototype.toString.call(e)}d($d,"_class");function ii(e){return e===10||e===13}d(ii,"is_EOL");function us(e){return e===9||e===32}d(us,"is_WHITE_SPACE");function wr(e){return e===9||e===32||e===10||e===13}d(wr,"is_WS_OR_EOL");function qs(e){return e===44||e===91||e===93||e===123||e===125}d(qs,"is_FLOW_INDICATOR");function Gm(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}d(Gm,"fromHexCode");function Hm(e){return e===120?2:e===117?4:e===85?8:0}d(Hm,"escapedHexLen");function Um(e){return 48<=e&&e<=57?e-48:-1}d(Um,"fromDecimalCode");function Md(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}d(Md,"simpleEscapeSequence");function jm(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}d(jm,"charFromCodepoint");var Xm=new Array(256),Km=new Array(256);for(Ds=0;Ds<256;Ds++)Xm[Ds]=Md(Ds)?1:0,Km[Ds]=Md(Ds);var Ds;function Qm(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Vm,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}d(Qm,"State$1");function Af(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=e8(r),new Dr(t,r)}d(Af,"generateError");function jt(e,t){throw Af(e,t)}d(jt,"throwError");function pl(e,t){e.onWarning&&e.onWarning.call(null,Af(e,t))}d(pl,"throwWarning");var F0={YAML:d(function(t,r,i){var s,n,a;t.version!==null&&jt(t,"duplication of %YAML directive"),i.length!==1&&jt(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),s===null&&jt(t,"ill-formed argument of the YAML directive"),n=parseInt(s[1],10),a=parseInt(s[2],10),n!==1&&jt(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&pl(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:d(function(t,r,i){var s,n;i.length!==2&&jt(t,"TAG directive accepts exactly two arguments"),s=i[0],n=i[1],qm.test(s)||jt(t,"ill-formed tag handle (first argument) of the TAG directive"),ps.call(t.tagMap,s)&&jt(t,'there is a previously declared suffix for "'+s+'" tag handle'),Ym.test(n)||jt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{jt(t,"tag prefix is malformed: "+n)}t.tagMap[s]=n},"handleTagDirective")};function Qi(e,t,r,i){var s,n,a,o;if(t<r){if(o=e.input.slice(t,r),i)for(s=0,n=o.length;s<n;s+=1)a=o.charCodeAt(s),a===9||32<=a&&a<=1114111||jt(e,"expected valid JSON character");else E8.test(o)&&jt(e,"the stream contains non-printable characters");e.result+=o}}d(Qi,"captureSegment");function Fd(e,t,r,i){var s,n,a,o;for(Xe.isObject(r)||jt(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),a=0,o=s.length;a<o;a+=1)n=s[a],ps.call(t,n)||(t[n]=r[n],i[n]=!0)}d(Fd,"mergeMappings");function Ys(e,t,r,i,s,n,a,o,h){var l,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),l=0,u=s.length;l<u;l+=1)Array.isArray(s[l])&&jt(e,"nested arrays are not supported inside keys"),typeof s=="object"&&$d(s[l])==="[object Object]"&&(s[l]="[object Object]");if(typeof s=="object"&&$d(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(n))for(l=0,u=n.length;l<u;l+=1)Fd(e,t,n[l],r);else Fd(e,t,n,r);else!e.json&&!ps.call(r,s)&&ps.call(t,s)&&(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=h||e.position,jt(e,"duplicated mapping key")),s==="__proto__"?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[s]=n,delete r[s];return t}d(Ys,"storeMappingPair");function Zh(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):jt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}d(Zh,"readLineBreak");function Pe(e,t,r){for(var i=0,s=e.input.charCodeAt(e.position);s!==0;){for(;us(s);)s===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(ii(s))for(Zh(e),s=e.input.charCodeAt(e.position),i++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&pl(e,"deficient indentation"),i}d(Pe,"skipSeparationSpace");function Vl(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||wr(r)))}d(Vl,"testDocumentSeparator");function Jh(e,t){t===1?e.result+=" ":t>1&&(e.result+=Xe.repeat(`
`,t-1))}d(Jh,"writeFoldedLines");function Zm(e,t,r){var i,s,n,a,o,h,l,u,f=e.kind,p=e.result,g;if(g=e.input.charCodeAt(e.position),wr(g)||qs(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(s=e.input.charCodeAt(e.position+1),wr(s)||r&&qs(s)))return!1;for(e.kind="scalar",e.result="",n=a=e.position,o=!1;g!==0;){if(g===58){if(s=e.input.charCodeAt(e.position+1),wr(s)||r&&qs(s))break}else if(g===35){if(i=e.input.charCodeAt(e.position-1),wr(i))break}else{if(e.position===e.lineStart&&Vl(e)||r&&qs(g))break;if(ii(g))if(h=e.line,l=e.lineStart,u=e.lineIndent,Pe(e,!1,-1),e.lineIndent>=t){o=!0,g=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=h,e.lineStart=l,e.lineIndent=u;break}}o&&(Qi(e,n,a,!1),Jh(e,e.line-h),n=a=e.position,o=!1),us(g)||(a=e.position+1),g=e.input.charCodeAt(++e.position)}return Qi(e,n,a,!1),e.result?!0:(e.kind=f,e.result=p,!1)}d(Zm,"readPlainScalar");function Jm(e,t){var r,i,s;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Qi(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,s=e.position;else return!0;else ii(r)?(Qi(e,i,s,!0),Jh(e,Pe(e,!1,t)),i=s=e.position):e.position===e.lineStart&&Vl(e)?jt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);jt(e,"unexpected end of the stream within a single quoted scalar")}d(Jm,"readSingleQuotedScalar");function tx(e,t){var r,i,s,n,a,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return Qi(e,r,e.position,!0),e.position++,!0;if(o===92){if(Qi(e,r,e.position,!0),o=e.input.charCodeAt(++e.position),ii(o))Pe(e,!1,t);else if(o<256&&Xm[o])e.result+=Km[o],e.position++;else if((a=Hm(o))>0){for(s=a,n=0;s>0;s--)o=e.input.charCodeAt(++e.position),(a=Gm(o))>=0?n=(n<<4)+a:jt(e,"expected hexadecimal character");e.result+=jm(n),e.position++}else jt(e,"unknown escape sequence");r=i=e.position}else ii(o)?(Qi(e,r,i,!0),Jh(e,Pe(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Vl(e)?jt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}jt(e,"unexpected end of the stream within a double quoted scalar")}d(tx,"readDoubleQuotedScalar");function ex(e,t){var r=!0,i,s,n,a=e.tag,o,h=e.anchor,l,u,f,p,g,y=Object.create(null),m,x,b,_;if(_=e.input.charCodeAt(e.position),_===91)u=93,g=!1,o=[];else if(_===123)u=125,g=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),_=e.input.charCodeAt(++e.position);_!==0;){if(Pe(e,!0,t),_=e.input.charCodeAt(e.position),_===u)return e.position++,e.tag=a,e.anchor=h,e.kind=g?"mapping":"sequence",e.result=o,!0;r?_===44&&jt(e,"expected the node content, but found ','"):jt(e,"missed comma between flow collection entries"),x=m=b=null,f=p=!1,_===63&&(l=e.input.charCodeAt(e.position+1),wr(l)&&(f=p=!0,e.position++,Pe(e,!0,t))),i=e.line,s=e.lineStart,n=e.position,cn(e,t,ch,!1,!0),x=e.tag,m=e.result,Pe(e,!0,t),_=e.input.charCodeAt(e.position),(p||e.line===i)&&_===58&&(f=!0,_=e.input.charCodeAt(++e.position),Pe(e,!0,t),cn(e,t,ch,!1,!0),b=e.result),g?Ys(e,o,y,x,m,b,i,s,n):f?o.push(Ys(e,null,y,x,m,b,i,s,n)):o.push(m),Pe(e,!0,t),_=e.input.charCodeAt(e.position),_===44?(r=!0,_=e.input.charCodeAt(++e.position)):r=!1}jt(e,"unexpected end of the stream within a flow collection")}d(ex,"readFlowCollection");function rx(e,t){var r,i,s=qu,n=!1,a=!1,o=t,h=0,l=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)qu===s?s=f===43?M0:C8:jt(e,"repeat of a chomping mode identifier");else if((u=Um(f))>=0)u===0?jt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?jt(e,"repeat of an indentation width identifier"):(o=t+u-1,a=!0);else break;if(us(f)){do f=e.input.charCodeAt(++e.position);while(us(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!ii(f)&&f!==0)}for(;f!==0;){for(Zh(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!a||e.lineIndent<o)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>o&&(o=e.lineIndent),ii(f)){h++;continue}if(e.lineIndent<o){s===M0?e.result+=Xe.repeat(`
`,n?1+h:h):s===qu&&n&&(e.result+=`
`);break}for(i?us(f)?(l=!0,e.result+=Xe.repeat(`
`,n?1+h:h)):l?(l=!1,e.result+=Xe.repeat(`
`,h+1)):h===0?n&&(e.result+=" "):e.result+=Xe.repeat(`
`,h):e.result+=Xe.repeat(`
`,n?1+h:h),n=!0,a=!0,h=0,r=e.position;!ii(f)&&f!==0;)f=e.input.charCodeAt(++e.position);Qi(e,r,e.position,!1)}return!0}d(rx,"readBlockScalar");function Pd(e,t){var r,i=e.tag,s=e.anchor,n=[],a,o=!1,h;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=n),h=e.input.charCodeAt(e.position);h!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,jt(e,"tab characters must not be used in indentation")),!(h!==45||(a=e.input.charCodeAt(e.position+1),!wr(a))));){if(o=!0,e.position++,Pe(e,!0,-1)&&e.lineIndent<=t){n.push(null),h=e.input.charCodeAt(e.position);continue}if(r=e.line,cn(e,t,Wm,!1,!0),n.push(e.result),Pe(e,!0,-1),h=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&h!==0)jt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=i,e.anchor=s,e.kind="sequence",e.result=n,!0):!1}d(Pd,"readBlockSequence");function ix(e,t,r){var i,s,n,a,o,h,l=e.tag,u=e.anchor,f={},p=Object.create(null),g=null,y=null,m=null,x=!1,b=!1,_;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),_=e.input.charCodeAt(e.position);_!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,jt(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),n=e.line,(_===63||_===58)&&wr(i))_===63?(x&&(Ys(e,f,p,g,y,null,a,o,h),g=y=m=null),b=!0,x=!0,s=!0):x?(x=!1,s=!0):jt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,_=i;else{if(a=e.line,o=e.lineStart,h=e.position,!cn(e,r,zm,!1,!0))break;if(e.line===n){for(_=e.input.charCodeAt(e.position);us(_);)_=e.input.charCodeAt(++e.position);if(_===58)_=e.input.charCodeAt(++e.position),wr(_)||jt(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Ys(e,f,p,g,y,null,a,o,h),g=y=m=null),b=!0,x=!1,s=!1,g=e.tag,y=e.result;else if(b)jt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=l,e.anchor=u,!0}else if(b)jt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=l,e.anchor=u,!0}if((e.line===n||e.lineIndent>t)&&(x&&(a=e.line,o=e.lineStart,h=e.position),cn(e,t,hh,!0,s)&&(x?y=e.result:m=e.result),x||(Ys(e,f,p,g,y,m,a,o,h),g=y=m=null),Pe(e,!0,-1),_=e.input.charCodeAt(e.position)),(e.line===n||e.lineIndent>t)&&_!==0)jt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&Ys(e,f,p,g,y,null,a,o,h),b&&(e.tag=l,e.anchor=u,e.kind="mapping",e.result=f),b}d(ix,"readBlockMapping");function sx(e){var t,r=!1,i=!1,s,n,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&jt(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(r=!0,a=e.input.charCodeAt(++e.position)):a===33?(i=!0,s="!!",a=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(n=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):jt(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!wr(a);)a===33&&(i?jt(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),qm.test(s)||jt(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),L8.test(n)&&jt(e,"tag suffix cannot contain flow indicator characters")}n&&!Ym.test(n)&&jt(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{jt(e,"tag name is malformed: "+n)}return r?e.tag=n:ps.call(e.tagMap,s)?e.tag=e.tagMap[s]+n:s==="!"?e.tag="!"+n:s==="!!"?e.tag="tag:yaml.org,2002:"+n:jt(e,'undeclared tag handle "'+s+'"'),!0}d(sx,"readTagProperty");function nx(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&jt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!wr(r)&&!qs(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&jt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}d(nx,"readAnchorProperty");function ax(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!wr(i)&&!qs(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&jt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),ps.call(e.anchorMap,r)||jt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Pe(e,!0,-1),!0}d(ax,"readAlias");function cn(e,t,r,i,s){var n,a,o,h=1,l=!1,u=!1,f,p,g,y,m,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,n=a=o=hh===r||Wm===r,i&&Pe(e,!0,-1)&&(l=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),h===1)for(;sx(e)||nx(e);)Pe(e,!0,-1)?(l=!0,o=n,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):o=!1;if(o&&(o=l||s),(h===1||hh===r)&&(ch===r||zm===r?m=t:m=t+1,x=e.position-e.lineStart,h===1?o&&(Pd(e,x)||ix(e,x,m))||ex(e,m)?u=!0:(a&&rx(e,m)||Jm(e,m)||tx(e,m)?u=!0:ax(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&jt(e,"alias node should not have any properties")):Zm(e,m,ch===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):h===0&&(u=o&&Pd(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&jt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(y=e.implicitTypes[f],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ps.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,g=e.typeMap.multi[e.kind||"fallback"],f=0,p=g.length;f<p;f+=1)if(e.tag.slice(0,g[f].tag.length)===g[f].tag){y=g[f];break}y||jt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&jt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):jt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}d(cn,"composeNode");function ox(e){var t=e.position,r,i,s,n=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(Pe(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(n=!0,a=e.input.charCodeAt(++e.position),r=e.position;a!==0&&!wr(a);)a=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),s=[],i.length<1&&jt(e,"directive name must not be less than one character in length");a!==0;){for(;us(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!ii(a));break}if(ii(a))break;for(r=e.position;a!==0&&!wr(a);)a=e.input.charCodeAt(++e.position);s.push(e.input.slice(r,e.position))}a!==0&&Zh(e),ps.call(F0,i)?F0[i](e,i,s):pl(e,'unknown document directive "'+i+'"')}if(Pe(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Pe(e,!0,-1)):n&&jt(e,"directives end mark is expected"),cn(e,e.lineIndent-1,hh,!1,!0),Pe(e,!0,-1),e.checkLineBreaks&&A8.test(e.input.slice(t,e.position))&&pl(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Vl(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Pe(e,!0,-1));return}if(e.position<e.length-1)jt(e,"end of the stream or a document separator is expected");else return}d(ox,"readDocument");function Lf(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Qm(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,jt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)ox(r);return r.documents}d(Lf,"loadDocuments");function D8(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=Lf(e,r);if(typeof t!="function")return i;for(var s=0,n=i.length;s<n;s+=1)t(i[s])}d(D8,"loadAll$1");function lx(e,t){var r=Lf(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Dr("expected a single document in the stream, but found more")}}d(lx,"load$1");var R8=lx,B8={load:R8},cx=Object.prototype.toString,hx=Object.prototype.hasOwnProperty,Df=65279,I8=9,gl=10,N8=13,$8=32,M8=33,F8=34,Od=35,P8=37,O8=38,V8=39,z8=42,ux=44,W8=45,uh=58,q8=61,Y8=62,G8=63,H8=64,dx=91,fx=93,U8=96,px=123,j8=124,gx=125,xr={};xr[0]="\\0";xr[7]="\\a";xr[8]="\\b";xr[9]="\\t";xr[10]="\\n";xr[11]="\\v";xr[12]="\\f";xr[13]="\\r";xr[27]="\\e";xr[34]='\\"';xr[92]="\\\\";xr[133]="\\N";xr[160]="\\_";xr[8232]="\\L";xr[8233]="\\P";var X8=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],K8=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function yx(e,t){var r,i,s,n,a,o,h;if(t===null)return{};for(r={},i=Object.keys(t),s=0,n=i.length;s<n;s+=1)a=i[s],o=String(t[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),h=e.compiledTypeMap.fallback[a],h&&hx.call(h.styleAliases,o)&&(o=h.styleAliases[o]),r[a]=o;return r}d(yx,"compileStyleMap");function mx(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new Dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Xe.repeat("0",i-t.length)+t}d(mx,"encodeHex");var Q8=1,yl=2;function xx(e){this.schema=e.schema||Vm,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Xe.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=yx(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?yl:Q8,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}d(xx,"State");function Vd(e,t){for(var r=Xe.repeat(" ",t),i=0,s=-1,n="",a,o=e.length;i<o;)s=e.indexOf(`
`,i),s===-1?(a=e.slice(i),i=o):(a=e.slice(i,s+1),i=s+1),a.length&&a!==`
`&&(n+=r),n+=a;return n}d(Vd,"indentString");function dh(e,t){return`
`+Xe.repeat(" ",e.indent*t)}d(dh,"generateNextLine");function bx(e,t){var r,i,s;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(s=e.implicitTypes[r],s.resolve(t))return!0;return!1}d(bx,"testImplicitResolving");function ml(e){return e===$8||e===I8}d(ml,"isWhitespace");function po(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==Df||65536<=e&&e<=1114111}d(po,"isPrintable");function zd(e){return po(e)&&e!==Df&&e!==N8&&e!==gl}d(zd,"isNsCharOrWhitespace");function Wd(e,t,r){var i=zd(e),s=i&&!ml(e);return(r?i:i&&e!==ux&&e!==dx&&e!==fx&&e!==px&&e!==gx)&&e!==Od&&!(t===uh&&!s)||zd(t)&&!ml(t)&&e===Od||t===uh&&s}d(Wd,"isPlainSafe");function vx(e){return po(e)&&e!==Df&&!ml(e)&&e!==W8&&e!==G8&&e!==uh&&e!==ux&&e!==dx&&e!==fx&&e!==px&&e!==gx&&e!==Od&&e!==O8&&e!==z8&&e!==M8&&e!==j8&&e!==q8&&e!==Y8&&e!==V8&&e!==F8&&e!==P8&&e!==H8&&e!==U8}d(vx,"isPlainSafeFirst");function _x(e){return!ml(e)&&e!==uh}d(_x,"isPlainSafeLast");function Kn(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}d(Kn,"codePointAt");function Rf(e){var t=/^\n* /;return t.test(e)}d(Rf,"needIndentIndicator");var kx=1,qd=2,wx=3,Tx=4,Pn=5;function Sx(e,t,r,i,s,n,a,o){var h,l=0,u=null,f=!1,p=!1,g=i!==-1,y=-1,m=vx(Kn(e,0))&&_x(Kn(e,e.length-1));if(t||a)for(h=0;h<e.length;l>=65536?h+=2:h++){if(l=Kn(e,h),!po(l))return Pn;m=m&&Wd(l,u,o),u=l}else{for(h=0;h<e.length;l>=65536?h+=2:h++){if(l=Kn(e,h),l===gl)f=!0,g&&(p=p||h-y-1>i&&e[y+1]!==" ",y=h);else if(!po(l))return Pn;m=m&&Wd(l,u,o),u=l}p=p||g&&h-y-1>i&&e[y+1]!==" "}return!f&&!p?m&&!a&&!s(e)?kx:n===yl?Pn:qd:r>9&&Rf(e)?Pn:a?n===yl?Pn:qd:p?Tx:wx}d(Sx,"chooseScalarStyle");function Cx(e,t,r,i,s){e.dump=(function(){if(t.length===0)return e.quotingType===yl?'""':"''";if(!e.noCompatMode&&(X8.indexOf(t)!==-1||K8.test(t)))return e.quotingType===yl?'"'+t+'"':"'"+t+"'";var n=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),o=i||e.flowLevel>-1&&r>=e.flowLevel;function h(l){return bx(e,l)}switch(d(h,"testAmbiguity"),Sx(t,o,e.indent,a,h,e.quotingType,e.forceQuotes&&!i,s)){case kx:return t;case qd:return"'"+t.replace(/'/g,"''")+"'";case wx:return"|"+Yd(t,e.indent)+Gd(Vd(t,n));case Tx:return">"+Yd(t,e.indent)+Gd(Vd(Ex(t,a),n));case Pn:return'"'+Ax(t)+'"';default:throw new Dr("impossible error: invalid scalar style")}})()}d(Cx,"writeScalar");function Yd(e,t){var r=Rf(e)?String(t):"",i=e[e.length-1]===`
`,s=i&&(e[e.length-2]===`
`||e===`
`),n=s?"+":i?"":"-";return r+n+`
`}d(Yd,"blockHeader");function Gd(e){return e[e.length-1]===`
`?e.slice(0,-1):e}d(Gd,"dropEndingNewline");function Ex(e,t){for(var r=/(\n+)([^\n]*)/g,i=(function(){var l=e.indexOf(`
`);return l=l!==-1?l:e.length,r.lastIndex=l,Hd(e.slice(0,l),t)})(),s=e[0]===`
`||e[0]===" ",n,a;a=r.exec(e);){var o=a[1],h=a[2];n=h[0]===" ",i+=o+(!s&&!n&&h!==""?`
`:"")+Hd(h,t),s=n}return i}d(Ex,"foldString");function Hd(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,s=0,n,a=0,o=0,h="";i=r.exec(e);)o=i.index,o-s>t&&(n=a>s?a:o,h+=`
`+e.slice(s,n),s=n+1),a=o;return h+=`
`,e.length-s>t&&a>s?h+=e.slice(s,a)+`
`+e.slice(a+1):h+=e.slice(s),h.slice(1)}d(Hd,"foldLine");function Ax(e){for(var t="",r=0,i,s=0;s<e.length;r>=65536?s+=2:s++)r=Kn(e,s),i=xr[r],!i&&po(r)?(t+=e[s],r>=65536&&(t+=e[s+1])):t+=i||mx(r);return t}d(Ax,"escapeString");function Lx(e,t,r){var i="",s=e.tag,n,a,o;for(n=0,a=r.length;n<a;n+=1)o=r[n],e.replacer&&(o=e.replacer.call(r,String(n),o)),(_i(e,t,o,!1,!1)||typeof o>"u"&&_i(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=s,e.dump="["+i+"]"}d(Lx,"writeFlowSequence");function Ud(e,t,r,i){var s="",n=e.tag,a,o,h;for(a=0,o=r.length;a<o;a+=1)h=r[a],e.replacer&&(h=e.replacer.call(r,String(a),h)),(_i(e,t+1,h,!0,!0,!1,!0)||typeof h>"u"&&_i(e,t+1,null,!0,!0,!1,!0))&&((!i||s!=="")&&(s+=dh(e,t)),e.dump&&gl===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=n,e.dump=s||"[]"}d(Ud,"writeBlockSequence");function Dx(e,t,r){var i="",s=e.tag,n=Object.keys(r),a,o,h,l,u;for(a=0,o=n.length;a<o;a+=1)u="",i!==""&&(u+=", "),e.condenseFlow&&(u+='"'),h=n[a],l=r[h],e.replacer&&(l=e.replacer.call(r,h,l)),_i(e,t,h,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),_i(e,t,l,!1,!1)&&(u+=e.dump,i+=u));e.tag=s,e.dump="{"+i+"}"}d(Dx,"writeFlowMapping");function Rx(e,t,r,i){var s="",n=e.tag,a=Object.keys(r),o,h,l,u,f,p;if(e.sortKeys===!0)a.sort();else if(typeof e.sortKeys=="function")a.sort(e.sortKeys);else if(e.sortKeys)throw new Dr("sortKeys must be a boolean or a function");for(o=0,h=a.length;o<h;o+=1)p="",(!i||s!=="")&&(p+=dh(e,t)),l=a[o],u=r[l],e.replacer&&(u=e.replacer.call(r,l,u)),_i(e,t+1,l,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&gl===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=dh(e,t)),_i(e,t+1,u,!0,f)&&(e.dump&&gl===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,s+=p));e.tag=n,e.dump=s||"{}"}d(Rx,"writeBlockMapping");function jd(e,t,r){var i,s,n,a,o,h;for(s=r?e.explicitTypes:e.implicitTypes,n=0,a=s.length;n<a;n+=1)if(o=s[n],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof t=="object"&&t instanceof o.instanceOf)&&(!o.predicate||o.predicate(t))){if(r?o.multi&&o.representName?e.tag=o.representName(t):e.tag=o.tag:e.tag="?",o.represent){if(h=e.styleMap[o.tag]||o.defaultStyle,cx.call(o.represent)==="[object Function]")i=o.represent(t,h);else if(hx.call(o.represent,h))i=o.represent[h](t,h);else throw new Dr("!<"+o.tag+'> tag resolver accepts not "'+h+'" style');e.dump=i}return!0}return!1}d(jd,"detectType");function _i(e,t,r,i,s,n,a){e.tag=null,e.dump=r,jd(e,r,!1)||jd(e,r,!0);var o=cx.call(e.dump),h=i,l;i&&(i=e.flowLevel<0||e.flowLevel>t);var u=o==="[object Object]"||o==="[object Array]",f,p;if(u&&(f=e.duplicates.indexOf(r),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(s=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(u&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),o==="[object Object]")i&&Object.keys(e.dump).length!==0?(Rx(e,t,e.dump,s),p&&(e.dump="&ref_"+f+e.dump)):(Dx(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(o==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!a&&t>0?Ud(e,t-1,e.dump,s):Ud(e,t,e.dump,s),p&&(e.dump="&ref_"+f+e.dump)):(Lx(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(o==="[object String]")e.tag!=="?"&&Cx(e,e.dump,t,n,h);else{if(o==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Dr("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(l=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",e.dump=l+" "+e.dump)}return!0}d(_i,"writeNode");function Bx(e,t){var r=[],i=[],s,n;for(fh(e,r,i),s=0,n=i.length;s<n;s+=1)t.duplicates.push(r[i[s]]);t.usedDuplicates=new Array(n)}d(Bx,"getDuplicateReferences");function fh(e,t,r){var i,s,n;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,n=e.length;s<n;s+=1)fh(e[s],t,r);else for(i=Object.keys(e),s=0,n=i.length;s<n;s+=1)fh(e[i[s]],t,r)}d(fh,"inspectNode");function Z8(e,t){t=t||{};var r=new xx(t);r.noRefs||Bx(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),_i(r,0,i,!0,!0)?r.dump+`
`:""}d(Z8,"dump$1");function J8(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}d(J8,"renamed");var tu=wm,eu=B8.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var fr={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},P0={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function zo(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Ae(e),t=Ae(t);const[r,i]=[e.x,e.y],[s,n]=[t.x,t.y],a=s-r,o=n-i;return{angle:Math.atan(o/a),deltaX:a,deltaY:o}}d(zo,"calculateDeltaAndAngle");var Ae=d(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Ix=d(e=>({x:d(function(t,r,i){let s=0;const n=Ae(i[0]).x<Ae(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(fr,e.arrowTypeStart)){const{angle:g,deltaX:y}=zo(i[0],i[1]);s=fr[e.arrowTypeStart]*Math.cos(g)*(y>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(fr,e.arrowTypeEnd)){const{angle:g,deltaX:y}=zo(i[i.length-1],i[i.length-2]);s=fr[e.arrowTypeEnd]*Math.cos(g)*(y>=0?1:-1)}const a=Math.abs(Ae(t).x-Ae(i[i.length-1]).x),o=Math.abs(Ae(t).y-Ae(i[i.length-1]).y),h=Math.abs(Ae(t).x-Ae(i[0]).x),l=Math.abs(Ae(t).y-Ae(i[0]).y),u=fr[e.arrowTypeStart],f=fr[e.arrowTypeEnd],p=1;if(a<f&&a>0&&o<f){let g=f+p-a;g*=n==="right"?-1:1,s-=g}if(h<u&&h>0&&l<u){let g=u+p-h;g*=n==="right"?-1:1,s+=g}return Ae(t).x+s},"x"),y:d(function(t,r,i){let s=0;const n=Ae(i[0]).y<Ae(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(fr,e.arrowTypeStart)){const{angle:g,deltaY:y}=zo(i[0],i[1]);s=fr[e.arrowTypeStart]*Math.abs(Math.sin(g))*(y>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(fr,e.arrowTypeEnd)){const{angle:g,deltaY:y}=zo(i[i.length-1],i[i.length-2]);s=fr[e.arrowTypeEnd]*Math.abs(Math.sin(g))*(y>=0?1:-1)}const a=Math.abs(Ae(t).y-Ae(i[i.length-1]).y),o=Math.abs(Ae(t).x-Ae(i[i.length-1]).x),h=Math.abs(Ae(t).y-Ae(i[0]).y),l=Math.abs(Ae(t).x-Ae(i[0]).x),u=fr[e.arrowTypeStart],f=fr[e.arrowTypeEnd],p=1;if(a<f&&a>0&&o<f){let g=f+p-a;g*=n==="up"?-1:1,s-=g}if(h<u&&h>0&&l<u){let g=u+p-h;g*=n==="up"?-1:1,s+=g}return Ae(t).y+s},"y")}),"getLineFunctionsWithOffset"),zl=d(({flowchart:e})=>{var s,n;const t=((s=e==null?void 0:e.subGraphTitleMargin)==null?void 0:s.top)??0,r=((n=e==null?void 0:e.subGraphTitleMargin)==null?void 0:n.bottom)??0,i=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),tA=d(e=>{const{handDrawnSeed:t}=it();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),_o=d(e=>{const t=eA([...e.cssCompiledStyles||[],...e.cssStyles||[],...e.labelStyle||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),eA=d(e=>{const t=new Map;return e.forEach(r=>{const[i,s]=r.split(":");t.set(i.trim(),s==null?void 0:s.trim())}),t},"styles2Map"),Bf=d(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),$t=d(e=>{const{stylesArray:t}=_o(e),r=[],i=[],s=[],n=[];return t.forEach(a=>{const o=a[0];Bf(o)?r.push(a.join(":")+" !important"):(i.push(a.join(":")+" !important"),o.includes("stroke")&&s.push(a.join(":")+" !important"),o==="fill"&&n.push(a.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:t,borderStyles:s,backgroundStyles:n}},"styles2String"),Vt=d((e,t)=>{var h;const{themeVariables:r,handDrawnSeed:i}=it(),{nodeBorder:s,mainBkg:n}=r,{stylesMap:a}=_o(e);return Object.assign({roughness:.7,fill:a.get("fill")||n,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:a.get("stroke")||s,seed:i,strokeWidth:((h=a.get("stroke-width"))==null?void 0:h.replace("px",""))||1.3,fillLineDash:[0,0],strokeLineDash:rA(a.get("stroke-dasharray"))},t)},"userNodeOverrides"),rA=d(e=>{if(!e)return[0,0];const t=e.trim().split(/\s+/).map(Number);if(t.length===1){const s=isNaN(t[0])?0:t[0];return[s,s]}const r=isNaN(t[0])?0:t[0],i=isNaN(t[1])?0:t[1];return[r,i]},"getStrokeDashArray"),Nx="",iA={curveBasis:ta,curveBasisClosed:z7,curveBasisOpen:W7,curveBumpX:By,curveBumpY:Iy,curveBundle:q7,curveCardinalClosed:Y7,curveCardinalOpen:G7,curveCardinal:Fy,curveCatmullRomClosed:H7,curveCatmullRomOpen:U7,curveCatmullRom:Oy,curveLinear:Qs,curveLinearClosed:j7,curveMonotoneX:Gy,curveMonotoneY:Hy,curveNatural:jy,curveStep:Xy,curveStepAfter:Qy,curveStepBefore:Ky},sA=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,nA=d(function(e,t){const r=$x(e,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const a=r.map(o=>o.args);Pc(a),i=Fe(i,[...a])}else i=r.args;if(!i)return;let s=rf(e,t);const n="config";return i[n]!==void 0&&(s==="flowchart-v2"&&(s="flowchart"),i[s]=i[n],delete i[n]),i},"detectInit"),$x=d(function(e,t=null){var r,i;try{const s=new RegExp(`[%]{2}(?![{]${sA.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(s,"").replace(/'/gm,'"'),P.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const a=[];for(;(n=Jo.exec(e))!==null;)if(n.index===Jo.lastIndex&&Jo.lastIndex++,n&&!t||t&&((r=n[1])!=null&&r.match(t))||t&&((i=n[2])!=null&&i.match(t))){const o=n[1]?n[1]:n[2],h=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;a.push({type:o,args:h})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(s){return P.error(`ERROR: ${s.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),aA=d(function(e){return e.replace(Jo,"")},"removeDirectives"),oA=d(function(e,t){for(const[r,i]of t.entries())if(i.match(e))return r;return-1},"isSubstringInArray");function If(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return iA[r]??t}d(If,"interpolateToCurve");function Mx(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?dn.sanitizeUrl(r):r}d(Mx,"formatUrl");var lA=d((e,...t)=>{const r=e.split("."),i=r.length-1,s=r[i];let n=window;for(let a=0;a<i;a++)if(n=n[r[a]],!n){P.error(`Function name: ${e} not found in window`);return}n[s](...t)},"runFunc");function Nf(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}d(Nf,"distance");function Fx(e){let t,r=0;e.forEach(s=>{r+=Nf(s,t),t=s});const i=r/2;return $f(e,i)}d(Fx,"traverseEdge");function Px(e){return e.length===1?e[0]:Fx(e)}d(Px,"calcLabelPosition");var O0=d((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),$f=d((e,t)=>{let r,i=t;for(const s of e){if(r){const n=Nf(s,r);if(n===0)return r;if(n<i)i-=n;else{const a=i/n;if(a<=0)return r;if(a>=1)return{x:s.x,y:s.y};if(a>0&&a<1)return{x:O0((1-a)*r.x+a*s.x,5),y:O0((1-a)*r.y+a*s.y,5)}}}r=s}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),cA=d((e,t,r)=>{P.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const s=$f(t,25),n=e?10:5,a=Math.atan2(t[0].y-s.y,t[0].x-s.x),o={x:0,y:0};return o.x=Math.sin(a)*n+(t[0].x+s.x)/2,o.y=-Math.cos(a)*n+(t[0].y+s.y)/2,o},"calcCardinalityPosition");function Ox(e,t,r){const i=structuredClone(r);P.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();const s=25+e,n=$f(i,s),a=10+e*.5,o=Math.atan2(i[0].y-n.y,i[0].x-n.x),h={x:0,y:0};return t==="start_left"?(h.x=Math.sin(o+Math.PI)*a+(i[0].x+n.x)/2,h.y=-Math.cos(o+Math.PI)*a+(i[0].y+n.y)/2):t==="end_right"?(h.x=Math.sin(o-Math.PI)*a+(i[0].x+n.x)/2-5,h.y=-Math.cos(o-Math.PI)*a+(i[0].y+n.y)/2-5):t==="end_left"?(h.x=Math.sin(o)*a+(i[0].x+n.x)/2-5,h.y=-Math.cos(o)*a+(i[0].y+n.y)/2-5):(h.x=Math.sin(o)*a+(i[0].x+n.x)/2,h.y=-Math.cos(o)*a+(i[0].y+n.y)/2),h}d(Ox,"calcTerminalLabelPosition");function Mf(e){let t="",r="";for(const i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}d(Mf,"getStylesFromArray");var V0=0,Vx=d(()=>(V0++,"id-"+Math.random().toString(36).substr(2,12)+"-"+V0),"generateId");function zx(e){let t="";const r="0123456789abcdef",i=r.length;for(let s=0;s<e;s++)t+=r.charAt(Math.floor(Math.random()*i));return t}d(zx,"makeRandomHex");var Wx=d(e=>zx(e.length),"random"),hA=d(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),uA=d(function(e,t){const r=t.text.replace(Ct.lineBreakRegex," "),[,i]=vn(t.fontSize),s=e.append("text");s.attr("x",t.x),s.attr("y",t.y),s.style("text-anchor",t.anchor),s.style("font-family",t.fontFamily),s.style("font-size",i),s.style("font-weight",t.fontWeight),s.attr("fill",t.fill),t.class!==void 0&&s.attr("class",t.class);const n=s.append("tspan");return n.attr("x",t.x+t.textMargin*2),n.attr("fill",t.fill),n.text(r),s},"drawSimpleText"),qx=Q1((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Ct.lineBreakRegex.test(e)))return e;const i=e.split(" ").filter(Boolean),s=[];let n="";return i.forEach((a,o)=>{const h=Tr(`${a} `,r),l=Tr(n,r);if(h>t){const{hyphenatedStrings:p,remainingWord:g}=dA(a,t,"-",r);s.push(n,...p),n=g}else l+h>=t?(s.push(n),n=a):n=[n,a].filter(Boolean).join(" ");o+1===i.length&&s.push(n)}),s.filter(a=>a!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),dA=Q1((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const s=[...e],n=[];let a="";return s.forEach((o,h)=>{const l=`${a}${o}`;if(Tr(l,i)>=t){const f=h+1,p=s.length===f,g=`${l}${r}`;n.push(p?l:g),a=""}else a=l}),{hyphenatedStrings:n,remainingWord:a}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function ph(e,t){return Ff(e,t).height}d(ph,"calculateTextHeight");function Tr(e,t){return Ff(e,t).width}d(Tr,"calculateTextWidth");var Ff=Q1((e,t)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:s=400}=t;if(!e)return{width:0,height:0};const[,n]=vn(r),a=["sans-serif",i],o=e.split(Ct.lineBreakRegex),h=[],l=_t("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const u=l.append("svg");for(const p of a){let g=0;const y={width:0,height:0,lineHeight:0};for(const m of o){const x=hA();x.text=m||Nx;const b=uA(u,x).style("font-size",n).style("font-weight",s).style("font-family",p),_=(b._groups||b)[0][0].getBBox();if(_.width===0&&_.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,_.width)),g=Math.round(_.height),y.height+=g,y.lineHeight=Math.round(Math.max(y.lineHeight,g))}h.push(y)}u.remove();const f=isNaN(h[1].height)||isNaN(h[1].width)||isNaN(h[1].lineHeight)||h[0].height>h[1].height&&h[0].width>h[1].width&&h[0].lineHeight>h[1].lineHeight?0:1;return h[f]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),ua,fA=(ua=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},d(ua,"InitIDGenerator"),ua),ic,pA=d(function(e){return ic=ic||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),ic.innerHTML=e,unescape(ic.textContent)},"entityDecode");function Pf(e){return"str"in e}d(Pf,"isDetailedError");var gA=d((e,t,r,i)=>{var n;if(!i)return;const s=(n=e.node())==null?void 0:n.getBBox();s&&e.append("text").text(i).attr("text-anchor","middle").attr("x",s.x+s.width/2).attr("y",-r).attr("class",t)},"insertTitle"),vn=d(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function Cr(e,t){return Nc({},e,t)}d(Cr,"cleanAndMerge");var ie={assignWithDepth:Fe,wrapLabel:qx,calculateTextHeight:ph,calculateTextWidth:Tr,calculateTextDimensions:Ff,cleanAndMerge:Cr,detectInit:nA,detectDirective:$x,isSubstringInArray:oA,interpolateToCurve:If,calcLabelPosition:Px,calcCardinalityPosition:cA,calcTerminalLabelPosition:Ox,formatUrl:Mx,getStylesFromArray:Mf,generateId:Vx,random:Wx,runFunc:lA,entityDecode:pA,insertTitle:gA,isLabelCoordinateInPath:Yx,parseFontSize:vn,InitIDGenerator:fA},yA=d(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),t},"encodeEntities"),ki=d(function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),ea=d((e,t,{counter:r=0,prefix:i,suffix:s},n)=>n||`${i?`${i}_`:""}${e}_${t}_${r}${s?`_${s}`:""}`,"getEdgeId");function mr(e){return e??null}d(mr,"handleUndefinedAttr");function Yx(e,t){const r=Math.round(e.x),i=Math.round(e.y),s=t.replace(/(\d+\.\d+)/g,n=>Math.round(parseFloat(n)).toString());return s.includes(r.toString())||s.includes(i.toString())}d(Yx,"isLabelCoordinateInPath");var Gx={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Xd=new Map,Hx=new Map,Ux=d(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(P.debug("Registering icon pack:",t.name),"loader"in t)Hx.set(t.name,t.loader);else if("icons"in t)Xd.set(t.name,t.icons);else throw P.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),jx=d(async(e,t)=>{const r=dk(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const i=r.prefix||t;if(!i)throw new Error(`Icon name must contain a prefix: ${e}`);let s=Xd.get(i);if(!s){const a=Hx.get(i);if(!a)throw new Error(`Icon set not found: ${r.prefix}`);try{s={...await a(),prefix:i},Xd.set(i,s)}catch(o){throw P.error(o),new Error(`Failed to load icon set: ${r.prefix}`)}}const n=fk(s,r.name);if(!n)throw new Error(`Icon not found: ${e}`);return n},"getRegisteredIconData"),mA=d(async e=>{try{return await jx(e),!0}catch{return!1}},"isIconAvailable"),gs=d(async(e,t,r)=>{let i;try{i=await jx(e,t==null?void 0:t.fallbackPrefix)}catch(a){P.error(a),i=Gx}const s=ck(i,t),n=hk(uk(s.body),{...s.attributes,...r});return me(n,xe())},"getIconSVG");function Xx(e,{markdownAutoWrap:t}){const i=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),s=g2(i);return t===!1?s.replace(/ /g,"&nbsp;"):s}d(Xx,"preprocessMarkdown");function Kx(e,t={}){const r=Xx(e,t),i=y2.lexer(r),s=[[]];let n=0;function a(o,h="normal"){o.type==="text"?o.text.split(`
`).forEach((u,f)=>{f!==0&&(n++,s.push([])),u.split(" ").forEach(p=>{p=p.replace(/&#39;/g,"'"),p&&s[n].push({content:p,type:h})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(l=>{a(l,o.type)}):o.type==="html"&&s[n].push({content:o.text,type:"normal"})}return d(a,"processNode"),i.forEach(o=>{var h;o.type==="paragraph"?(h=o.tokens)==null||h.forEach(l=>{a(l)}):o.type==="html"?s[n].push({content:o.text,type:"normal"}):s[n].push({content:o.raw,type:"normal"})}),s}d(Kx,"markdownToLines");function Qx(e,{markdownAutoWrap:t}={}){const r=y2.lexer(e);function i(s){var n,a,o;return s.type==="text"?t===!1?s.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):s.text.replace(/\n */g,"<br/>"):s.type==="strong"?`<strong>${(n=s.tokens)==null?void 0:n.map(i).join("")}</strong>`:s.type==="em"?`<em>${(a=s.tokens)==null?void 0:a.map(i).join("")}</em>`:s.type==="paragraph"?`<p>${(o=s.tokens)==null?void 0:o.map(i).join("")}</p>`:s.type==="space"?"":s.type==="html"?`${s.text}`:s.type==="escape"?s.text:(P.warn(`Unsupported markdown: ${s.type}`),s.raw)}return d(i,"output"),r.map(i).join("")}d(Qx,"markdownToHTML");function Zx(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}d(Zx,"splitTextToChars");function Jx(e,t){const r=Zx(t.content);return Of(e,[],r,t.type)}d(Jx,"splitWordToFitWidth");function Of(e,t,r,i){if(r.length===0)return[{content:t.join(""),type:i},{content:"",type:i}];const[s,...n]=r,a=[...t,s];return e([{content:a.join(""),type:i}])?Of(e,a,n,i):(t.length===0&&s&&(t.push(s),r.shift()),[{content:t.join(""),type:i},{content:r.join(""),type:i}])}d(Of,"splitWordToFitWidthRecursion");function tb(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return gh(e,t)}d(tb,"splitLineToFitWidth");function gh(e,t,r=[],i=[]){if(e.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let s="";e[0].content===" "&&(s=" ",e.shift());const n=e.shift()??{content:" ",type:"normal"},a=[...i];if(s!==""&&a.push({content:s,type:"normal"}),a.push(n),t(a))return gh(e,t,r,a);if(i.length>0)r.push(i),e.unshift(n);else if(n.content){const[o,h]=Jx(t,n);r.push([o]),h.content&&e.unshift(h)}return gh(e,t,r)}d(gh,"splitLineToFitWidthRecursion");function Kd(e,t){t&&e.attr("style",t)}d(Kd,"applyStyle");async function eb(e,t,r,i,s=!1,n=xe()){const a=e.append("foreignObject");a.attr("width",`${10*r}px`),a.attr("height",`${10*r}px`);const o=a.append("xhtml:div"),h=Re(t.label)?await $l(t.label.replace(Ct.lineBreakRegex,`
`),n):me(t.label,n),l=t.isNode?"nodeLabel":"edgeLabel",u=o.append("span");u.html(h),Kd(u,t.labelStyle),u.attr("class",`${l} ${i}`),Kd(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),s&&o.attr("class","labelBkg");let f=o.node().getBoundingClientRect();return f.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),f=o.node().getBoundingClientRect()),a.node()}d(eb,"addHtmlSpan");function ru(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}d(ru,"createTspan");function rb(e,t,r){const i=e.append("text"),s=ru(i,1,t);iu(s,r);const n=s.node().getComputedTextLength();return i.remove(),n}d(rb,"computeWidthOfText");function ib(e,t,r){var a;const i=e.append("text"),s=ru(i,1,t);iu(s,[{content:r,type:"normal"}]);const n=(a=s.node())==null?void 0:a.getBoundingClientRect();return n&&i.remove(),n}d(ib,"computeDimensionOfText");function sb(e,t,r,i=!1){const n=t.append("g"),a=n.insert("rect").attr("class","background").attr("style","stroke: none"),o=n.append("text").attr("y","-10.1");let h=0;for(const l of r){const u=d(p=>rb(n,1.1,p)<=e,"checkWidth"),f=u(l)?[l]:tb(l,u);for(const p of f){const g=ru(o,h,1.1);iu(g,p),h++}}if(i){const l=o.node().getBBox(),u=2;return a.attr("x",l.x-u).attr("y",l.y-u).attr("width",l.width+2*u).attr("height",l.height+2*u),n.node()}else return o.node()}d(sb,"createFormattedText");function iu(e,t){e.text(""),t.forEach((r,i)=>{const s=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?s.text(r.content):s.text(" "+r.content)})}d(iu,"updateTextContentAndStyles");async function Vf(e,t={}){const r=[];e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(s,n,a)=>(r.push((async()=>{const o=`${n}:${a}`;return await mA(o)?await gs(o,void 0,{class:"label-icon"}):`<i class='${me(s,t).replace(":"," ")}'></i>`})()),s));const i=await Promise.all(r);return e.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>i.shift()??"")}d(Vf,"replaceIconSubstring");var Wr=d(async(e,t="",{style:r="",isTitle:i=!1,classes:s="",useHtmlLabels:n=!0,isNode:a=!0,width:o=200,addSvgBackground:h=!1}={},l)=>{if(P.debug("XYZ createText",t,r,i,s,n,a,"addSvgBackground: ",h),n){const u=Qx(t,l),f=await Vf(ki(u),l),p=t.replace(/\\\\/g,"\\"),g={isNode:a,label:Re(t)?p:f,labelStyle:r.replace("fill:","color:")};return await eb(e,g,o,s,h,l)}else{const u=t.replace(/<br\s*\/?>/g,"<br/>"),f=Kx(u.replace("<br>","<br/>"),l),p=sb(o,e,f,t?h:!1);if(a){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");_t(p).attr("style",g)}else{const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");_t(p).select("rect").attr("style",g.replace(/background:/g,"fill:"));const y=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");_t(p).select("text").attr("style",y)}return p}},"createText"),te=d(async(e,t,r)=>{var f,p;let i;const s=t.useHtmlLabels||Te((f=it())==null?void 0:f.htmlLabels);r?i=r:i="node default";const n=e.insert("g").attr("class",i).attr("id",t.domId||t.id),a=n.insert("g").attr("class","label").attr("style",mr(t.labelStyle));let o;t.label===void 0?o="":o=typeof t.label=="string"?t.label:t.label[0];const h=await Wr(a,me(ki(o),it()),{useHtmlLabels:s,width:t.width||((p=it().flowchart)==null?void 0:p.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let l=h.getBBox();const u=((t==null?void 0:t.padding)??0)/2;if(s){const g=h.children[0],y=_t(h),m=g.getElementsByTagName("img");if(m){const x=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(b=>new Promise(_=>{function S(){if(b.style.display="flex",b.style.flexDirection="column",x){const C=it().fontSize?it().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[v=ge.fontSize]=vn(C),A=v*k+"px";b.style.minWidth=A,b.style.maxWidth=A}else b.style.width="100%";_(b)}d(S,"setupImage"),setTimeout(()=>{b.complete&&S()}),b.addEventListener("error",S),b.addEventListener("load",S)})))}l=g.getBoundingClientRect(),y.attr("width",l.width),y.attr("height",l.height)}return s?a.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"):a.attr("transform","translate(0, "+-l.height/2+")"),t.centerLabel&&a.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:n,bbox:l,halfPadding:u,label:a}},"labelHelper"),Yu=d(async(e,t,r)=>{var h,l,u,f,p,g;const i=r.useHtmlLabels||Te((l=(h=it())==null?void 0:h.flowchart)==null?void 0:l.htmlLabels),s=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),n=await Wr(s,me(ki(t),it()),{useHtmlLabels:i,width:r.width||((f=(u=it())==null?void 0:u.flowchart)==null?void 0:f.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let a=n.getBBox();const o=r.padding/2;if(Te((g=(p=it())==null?void 0:p.flowchart)==null?void 0:g.htmlLabels)){const y=n.children[0],m=_t(n);a=y.getBoundingClientRect(),m.attr("width",a.width),m.attr("height",a.height)}return i?s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"):s.attr("transform","translate(0, "+-a.height/2+")"),r.centerLabel&&s.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:e,bbox:a,halfPadding:o,label:s}},"insertLabel"),zt=d((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),Qt=d((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function de(e){const t=e.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}d(de,"createPathFromPoints");function ys(e,t,r,i,s,n){const a=[],h=r-e,l=i-t,u=h/n,f=2*Math.PI/u,p=t+l/2;for(let g=0;g<=50;g++){const y=g/50,m=e+y*h,x=p+s*Math.sin(f*(m-e));a.push({x:m,y:x})}return a}d(ys,"generateFullSineWavePoints");function xl(e,t,r,i,s,n){const a=[],o=s*Math.PI/180,u=(n*Math.PI/180-o)/(i-1);for(let f=0;f<i;f++){const p=o+f*u,g=e+r*Math.cos(p),y=t+r*Math.sin(p);a.push({x:-g,y:-y})}return a}d(xl,"generateCirclePoints");var xA=d((e,t)=>{var r=e.x,i=e.y,s=t.x-r,n=t.y-i,a=e.width/2,o=e.height/2,h,l;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),h=n===0?0:o*s/n,l=o):(s<0&&(a=-a),h=a,l=s===0?0:a*n/s),{x:r+h,y:i+l}},"intersectRect"),ko=xA;function nb(e,t){t&&e.attr("style",t)}d(nb,"applyStyle");async function ab(e){const t=_t(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div"),i=it();let s=e.label;e.label&&Re(e.label)&&(s=await $l(e.label.replace(Ct.lineBreakRegex,`
`),i));const a='<span class="'+(e.isNode?"nodeLabel":"edgeLabel")+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+s+"</span>";return r.html(me(a,i)),nb(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}d(ab,"addHtmlLabel");var bA=d(async(e,t,r,i)=>{let s=e||"";if(typeof s=="object"&&(s=s[0]),Te(it().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),P.info("vertexText"+s);const n={isNode:i,label:ki(s).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await ab(n)}else{const n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("style",t.replace("color:","fill:"));let a=[];typeof s=="string"?a=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?a=s:a=[];for(const o of a){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=o.trim(),n.appendChild(h)}return n}},"createLabel"),Gs=bA,vs=d((e,t,r,i,s)=>["M",e+s,t,"H",e+r-s,"A",s,s,0,0,1,e+r,t+s,"V",t+i-s,"A",s,s,0,0,1,e+r-s,t+i,"H",e+s,"A",s,s,0,0,1,e,t+i-s,"V",t+s,"A",s,s,0,0,1,e+s,t,"Z"].join(" "),"createRoundedRectPathD"),ob=d(async(e,t)=>{P.info("Creating subgraph rect for ",t.id,t);const r=it(),{themeVariables:i,handDrawnSeed:s}=r,{clusterBkg:n,clusterBorder:a}=i,{labelStyles:o,nodeStyles:h,borderStyles:l,backgroundStyles:u}=$t(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=Te(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),y=await Wr(g,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0});let m=y.getBBox();if(Te(r.flowchart.htmlLabels)){const A=y.children[0],L=_t(y);m=A.getBoundingClientRect(),L.attr("width",m.width),L.attr("height",m.height)}const x=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,_=t.x-x/2,S=t.y-b/2;P.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const A=Pt.svg(f),L=Vt(t,{roughness:.7,fill:n,stroke:a,fillWeight:3,seed:s}),w=A.path(vs(_,S,x,b,0),L);C=f.insert(()=>(P.debug("Rough node insert CXC",w),w),":first-child"),C.select("path:nth-child(2)").attr("style",l.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=f.insert("rect",":first-child"),C.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",S).attr("width",x).attr("height",b);const{subGraphTitleTopMargin:k}=zl(r);if(g.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+k})`),o){const A=g.select("span");A&&A.attr("style",o)}const v=C.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=m.height-t.padding/2,t.intersect=function(A){return ko(t,A)},{cluster:f,labelBBox:m}},"rect"),vA=d((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),s=0*t.padding,n=s/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-n).attr("y",t.y-t.height/2-n).attr("width",t.width+s).attr("height",t.height+s).attr("fill","none");const a=i.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(o){return ko(t,o)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),_A=d(async(e,t)=>{const r=it(),{themeVariables:i,handDrawnSeed:s}=r,{altBackground:n,compositeBackground:a,compositeTitleBackground:o,nodeBorder:h}=i,l=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),u=l.insert("g",":first-child"),f=l.insert("g").attr("class","cluster-label");let p=l.append("rect");const g=f.node().appendChild(await Gs(t.label,t.labelStyle,void 0,!0));let y=g.getBBox();if(Te(r.flowchart.htmlLabels)){const w=g.children[0],R=_t(g);y=w.getBoundingClientRect(),R.attr("width",y.width),R.attr("height",y.height)}const m=0*t.padding,x=m/2,b=(t.width<=y.width+t.padding?y.width+t.padding:t.width)+m;t.width<=y.width+t.padding?t.diff=(b-t.width)/2-t.padding:t.diff=-t.padding;const _=t.height+m,S=t.height+m-y.height-6,C=t.x-b/2,k=t.y-_/2;t.width=b;const v=t.y-t.height/2-x+y.height+2;let A;if(t.look==="handDrawn"){const w=t.cssClasses.includes("statediagram-cluster-alt"),R=Pt.svg(l),T=t.rx||t.ry?R.path(vs(C,k,b,_,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:h,seed:s}):R.rectangle(C,k,b,_,{seed:s});A=l.insert(()=>T,":first-child");const V=R.rectangle(C,v,b,S,{fill:w?n:a,fillStyle:w?"hachure":"solid",stroke:h,seed:s});A=l.insert(()=>T,":first-child"),p=l.insert(()=>V)}else A=u.insert("rect",":first-child"),A.attr("class","outer").attr("x",C).attr("y",k).attr("width",b).attr("height",_).attr("data-look",t.look),p.attr("class","inner").attr("x",C).attr("y",v).attr("width",b).attr("height",S);f.attr("transform",`translate(${t.x-y.width/2}, ${k+1-(Te(r.flowchart.htmlLabels)?0:3)})`);const L=A.node().getBBox();return t.height=L.height,t.offsetX=0,t.offsetY=y.height-t.padding/2,t.labelBBox=y,t.intersect=function(w){return ko(t,w)},{cluster:l,labelBBox:y}},"roundedWithTitle"),kA=d(async(e,t)=>{P.info("Creating subgraph rect for ",t.id,t);const r=it(),{themeVariables:i,handDrawnSeed:s}=r,{clusterBkg:n,clusterBorder:a}=i,{labelStyles:o,nodeStyles:h,borderStyles:l,backgroundStyles:u}=$t(t),f=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=Te(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),y=await Wr(g,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0,width:t.width});let m=y.getBBox();if(Te(r.flowchart.htmlLabels)){const A=y.children[0],L=_t(y);m=A.getBoundingClientRect(),L.attr("width",m.width),L.attr("height",m.height)}const x=t.width<=m.width+t.padding?m.width+t.padding:t.width;t.width<=m.width+t.padding?t.diff=(x-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,_=t.x-x/2,S=t.y-b/2;P.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const A=Pt.svg(f),L=Vt(t,{roughness:.7,fill:n,stroke:a,fillWeight:4,seed:s}),w=A.path(vs(_,S,x,b,t.rx),L);C=f.insert(()=>(P.debug("Rough node insert CXC",w),w),":first-child"),C.select("path:nth-child(2)").attr("style",l.join(";")),C.select("path").attr("style",u.join(";").replace("fill","stroke"))}else C=f.insert("rect",":first-child"),C.attr("style",h).attr("rx",t.rx).attr("ry",t.ry).attr("x",_).attr("y",S).attr("width",x).attr("height",b);const{subGraphTitleTopMargin:k}=zl(r);if(g.attr("transform",`translate(${t.x-m.width/2}, ${t.y-t.height/2+k})`),o){const A=g.select("span");A&&A.attr("style",o)}const v=C.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=m.height-t.padding/2,t.intersect=function(A){return ko(t,A)},{cluster:f,labelBBox:m}},"kanbanSection"),wA=d((e,t)=>{const r=it(),{themeVariables:i,handDrawnSeed:s}=r,{nodeBorder:n}=i,a=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),o=a.insert("g",":first-child"),h=0*t.padding,l=t.width+h;t.diff=-t.padding;const u=t.height+h,f=t.x-l/2,p=t.y-u/2;t.width=l;let g;if(t.look==="handDrawn"){const x=Pt.svg(a).rectangle(f,p,l,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:n,seed:s});g=a.insert(()=>x,":first-child")}else g=o.insert("rect",":first-child"),g.attr("class","divider").attr("x",f).attr("y",p).attr("width",l).attr("height",u).attr("data-look",t.look);const y=g.node().getBBox();return t.height=y.height,t.offsetX=0,t.offsetY=0,t.intersect=function(m){return ko(t,m)},{cluster:a,labelBBox:{}}},"divider"),TA=ob,SA={rect:ob,squareRect:TA,roundedWithTitle:_A,noteGroup:vA,divider:wA,kanbanSection:kA},lb=new Map,zf=d(async(e,t)=>{const r=t.shape||"rect",i=await SA[r](e,t);return lb.set(t.id,i),i},"insertCluster"),CA=d(()=>{lb=new Map},"clear");function cb(e,t){return e.intersect(t)}d(cb,"intersectNode");var EA=cb;function hb(e,t,r,i){var s=e.x,n=e.y,a=s-i.x,o=n-i.y,h=Math.sqrt(t*t*o*o+r*r*a*a),l=Math.abs(t*r*a/h);i.x<s&&(l=-l);var u=Math.abs(t*r*o/h);return i.y<n&&(u=-u),{x:s+l,y:n+u}}d(hb,"intersectEllipse");var ub=hb;function db(e,t,r){return ub(e,t,t,r)}d(db,"intersectCircle");var AA=db;function fb(e,t,r,i){{const s=t.y-e.y,n=e.x-t.x,a=t.x*e.y-e.x*t.y,o=s*r.x+n*r.y+a,h=s*i.x+n*i.y+a,l=1e-6;if(o!==0&&h!==0&&Qd(o,h))return;const u=i.y-r.y,f=r.x-i.x,p=i.x*r.y-r.x*i.y,g=u*e.x+f*e.y+p,y=u*t.x+f*t.y+p;if(Math.abs(g)<l&&Math.abs(y)<l&&Qd(g,y))return;const m=s*f-u*n;if(m===0)return;const x=Math.abs(m/2);let b=n*p-f*a;const _=b<0?(b-x)/m:(b+x)/m;b=u*a-s*p;const S=b<0?(b-x)/m:(b+x)/m;return{x:_,y:S}}}d(fb,"intersectLine");function Qd(e,t){return e*t>0}d(Qd,"sameSign");var LA=fb;function pb(e,t,r){let i=e.x,s=e.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(u){a=Math.min(a,u.x),o=Math.min(o,u.y)}):(a=Math.min(a,t.x),o=Math.min(o,t.y));let h=i-e.width/2-a,l=s-e.height/2-o;for(let u=0;u<t.length;u++){let f=t[u],p=t[u<t.length-1?u+1:0],g=LA(e,r,{x:h+f.x,y:l+f.y},{x:h+p.x,y:l+p.y});g&&n.push(g)}return n.length?(n.length>1&&n.sort(function(u,f){let p=u.x-r.x,g=u.y-r.y,y=Math.sqrt(p*p+g*g),m=f.x-r.x,x=f.y-r.y,b=Math.sqrt(m*m+x*x);return y<b?-1:y===b?0:1}),n[0]):e}d(pb,"intersectPolygon");var DA=pb,Nt={node:EA,circle:AA,ellipse:ub,polygon:DA,rect:ko};function gb(e,t){const{labelStyles:r}=$t(t);t.labelStyle=r;const i=Qt(t);let s=i;i||(s="anchor");const n=e.insert("g").attr("class",s).attr("id",t.domId||t.id),a=1,{cssStyles:o}=t,h=Pt.svg(n),l=Vt(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(l.roughness=0);const u=h.circle(0,0,a*2,l),f=n.insert(()=>u,":first-child");return f.attr("class","anchor").attr("style",mr(o)),zt(t,f),t.intersect=function(p){return P.info("Circle intersect",t,a,p),Nt.circle(t,a,p)},n}d(gb,"anchor");function Zd(e,t,r,i,s,n,a){const h=(e+r)/2,l=(t+i)/2,u=Math.atan2(i-t,r-e),f=(r-e)/2,p=(i-t)/2,g=f/s,y=p/n,m=Math.sqrt(g**2+y**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const x=Math.sqrt(1-m**2),b=h+x*n*Math.sin(u)*(a?-1:1),_=l-x*s*Math.cos(u)*(a?-1:1),S=Math.atan2((t-_)/n,(e-b)/s);let k=Math.atan2((i-_)/n,(r-b)/s)-S;a&&k<0&&(k+=2*Math.PI),!a&&k>0&&(k-=2*Math.PI);const v=[];for(let A=0;A<20;A++){const L=A/19,w=S+L*k,R=b+s*Math.cos(w),T=_+n*Math.sin(w);v.push({x:R,y:T})}return v}d(Zd,"generateArcPoints");async function yb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.width+t.padding+20,o=n.height+t.padding,h=o/2,l=h/(2.5+o/50),{cssStyles:u}=t,f=[{x:a/2,y:-o/2},{x:-a/2,y:-o/2},...Zd(-a/2,-o/2,-a/2,o/2,l,h,!1),{x:a/2,y:o/2},...Zd(a/2,o/2,a/2,-o/2,l,h,!0)],p=Pt.svg(s),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=de(f),m=p.path(y,g),x=s.insert(()=>m,":first-child");return x.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),x.attr("transform",`translate(${l/2}, 0)`),zt(t,x),t.intersect=function(b){return Nt.polygon(t,f,b)},s}d(yb,"bowTieRect");function _s(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}d(_s,"insertPolygonShape");async function mb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.height+t.padding,o=12,h=n.width+t.padding+o,l=0,u=h,f=-a,p=0,g=[{x:l+o,y:f},{x:u,y:f},{x:u,y:p},{x:l,y:p},{x:l,y:f+o},{x:l+o,y:f}];let y;const{cssStyles:m}=t;if(t.look==="handDrawn"){const x=Pt.svg(s),b=Vt(t,{}),_=de(g),S=x.path(_,b);y=s.insert(()=>S,":first-child").attr("transform",`translate(${-h/2}, ${a/2})`),m&&y.attr("style",m)}else y=_s(s,h,a,g);return i&&y.attr("style",i),zt(t,y),t.intersect=function(x){return Nt.polygon(t,g,x)},s}d(mb,"card");function xb(e,t){const{nodeStyles:r}=$t(t);t.label="";const i=e.insert("g").attr("class",Qt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,n=Math.max(28,t.width??0),a=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],o=Pt.svg(i),h=Vt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const l=de(a),u=o.path(l,h),f=i.insert(()=>u,":first-child");return s&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",s),r&&t.look!=="handDrawn"&&f.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(p){return Nt.polygon(t,a,p)},i}d(xb,"choice");async function Wf(e,t,r){const{labelStyles:i,nodeStyles:s}=$t(t);t.labelStyle=i;const{shapeSvg:n,bbox:a,halfPadding:o}=await te(e,t,Qt(t)),h=(r==null?void 0:r.padding)??o,l=a.width/2+h;let u;const{cssStyles:f}=t;if(t.look==="handDrawn"){const p=Pt.svg(n),g=Vt(t,{}),y=p.circle(0,0,l*2,g);u=n.insert(()=>y,":first-child"),u.attr("class","basic label-container").attr("style",mr(f))}else u=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",s).attr("r",l).attr("cx",0).attr("cy",0);return zt(t,u),t.calcIntersect=function(p,g){const y=p.width/2;return Nt.circle(p,y,g)},t.intersect=function(p){return P.info("Circle intersect",t,l,p),Nt.circle(t,l,p)},n}d(Wf,"circle");function bb(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=e*2,s={x:i/2*t,y:i/2*r},n={x:-(i/2)*t,y:i/2*r},a={x:-(i/2)*t,y:-(i/2)*r},o={x:i/2*t,y:-(i/2)*r};return`M ${n.x},${n.y} L ${o.x},${o.y}
                   M ${s.x},${s.y} L ${a.x},${a.y}`}d(bb,"createLine");function vb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r,t.label="";const s=e.insert("g").attr("class",Qt(t)).attr("id",t.domId??t.id),n=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:a}=t,o=Pt.svg(s),h=Vt(t,{});t.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const l=o.circle(0,0,n*2,h),u=bb(n),f=o.path(u,h),p=s.insert(()=>l,":first-child");return p.insert(()=>f),a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),i&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",i),zt(t,p),t.intersect=function(g){return P.info("crossedCircle intersect",t,{radius:n,point:g}),Nt.circle(t,n,g)},s}d(vb,"crossedCircle");function Fi(e,t,r,i=100,s=0,n=180){const a=[],o=s*Math.PI/180,u=(n*Math.PI/180-o)/(i-1);for(let f=0;f<i;f++){const p=o+f*u,g=e+r*Math.cos(p),y=t+r*Math.sin(p);a.push({x:-g,y:-y})}return a}d(Fi,"generateCirclePoints");async function _b(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=n.width+(t.padding??0),h=n.height+(t.padding??0),l=Math.max(5,h*.1),{cssStyles:u}=t,f=[...Fi(o/2,-h/2,l,30,-90,0),{x:-o/2-l,y:l},...Fi(o/2+l*2,-l,l,20,-180,-270),...Fi(o/2+l*2,l,l,20,-90,-180),{x:-o/2-l,y:-h/2},...Fi(o/2,h/2,l,20,0,90)],p=[{x:o/2,y:-h/2-l},{x:-o/2,y:-h/2-l},...Fi(o/2,-h/2,l,20,-90,0),{x:-o/2-l,y:-l},...Fi(o/2+o*.1,-l,l,20,-180,-270),...Fi(o/2+o*.1,l,l,20,-90,-180),{x:-o/2-l,y:h/2},...Fi(o/2,h/2,l,20,0,90),{x:-o/2,y:h/2+l},{x:o/2,y:h/2+l}],g=Pt.svg(s),y=Vt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=de(f).replace("Z",""),b=g.path(x,y),_=de(p),S=g.path(_,{...y}),C=s.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>b,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${l}, 0)`),a.attr("transform",`translate(${-o/2+l-(n.x-(n.left??0))},${-h/2+(t.padding??0)/2-(n.y-(n.top??0))})`),zt(t,C),t.intersect=function(k){return Nt.polygon(t,p,k)},s}d(_b,"curlyBraceLeft");function Pi(e,t,r,i=100,s=0,n=180){const a=[],o=s*Math.PI/180,u=(n*Math.PI/180-o)/(i-1);for(let f=0;f<i;f++){const p=o+f*u,g=e+r*Math.cos(p),y=t+r*Math.sin(p);a.push({x:g,y})}return a}d(Pi,"generateCirclePoints");async function kb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=n.width+(t.padding??0),h=n.height+(t.padding??0),l=Math.max(5,h*.1),{cssStyles:u}=t,f=[...Pi(o/2,-h/2,l,20,-90,0),{x:o/2+l,y:-l},...Pi(o/2+l*2,-l,l,20,-180,-270),...Pi(o/2+l*2,l,l,20,-90,-180),{x:o/2+l,y:h/2},...Pi(o/2,h/2,l,20,0,90)],p=[{x:-o/2,y:-h/2-l},{x:o/2,y:-h/2-l},...Pi(o/2,-h/2,l,20,-90,0),{x:o/2+l,y:-l},...Pi(o/2+l*2,-l,l,20,-180,-270),...Pi(o/2+l*2,l,l,20,-90,-180),{x:o/2+l,y:h/2},...Pi(o/2,h/2,l,20,0,90),{x:o/2,y:h/2+l},{x:-o/2,y:h/2+l}],g=Pt.svg(s),y=Vt(t,{fill:"none"});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=de(f).replace("Z",""),b=g.path(x,y),_=de(p),S=g.path(_,{...y}),C=s.insert("g",":first-child");return C.insert(()=>S,":first-child").attr("stroke-opacity",0),C.insert(()=>b,":first-child"),C.attr("class","text"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${-l}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(n.x-(n.left??0))},${-h/2+(t.padding??0)/2-(n.y-(n.top??0))})`),zt(t,C),t.intersect=function(k){return Nt.polygon(t,p,k)},s}d(kb,"curlyBraceRight");function or(e,t,r,i=100,s=0,n=180){const a=[],o=s*Math.PI/180,u=(n*Math.PI/180-o)/(i-1);for(let f=0;f<i;f++){const p=o+f*u,g=e+r*Math.cos(p),y=t+r*Math.sin(p);a.push({x:-g,y:-y})}return a}d(or,"generateCirclePoints");async function wb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=n.width+(t.padding??0),h=n.height+(t.padding??0),l=Math.max(5,h*.1),{cssStyles:u}=t,f=[...or(o/2,-h/2,l,30,-90,0),{x:-o/2-l,y:l},...or(o/2+l*2,-l,l,20,-180,-270),...or(o/2+l*2,l,l,20,-90,-180),{x:-o/2-l,y:-h/2},...or(o/2,h/2,l,20,0,90)],p=[...or(-o/2+l+l/2,-h/2,l,20,-90,-180),{x:o/2-l/2,y:l},...or(-o/2-l/2,-l,l,20,0,90),...or(-o/2-l/2,l,l,20,-90,0),{x:o/2-l/2,y:-l},...or(-o/2+l+l/2,h/2,l,30,-180,-270)],g=[{x:o/2,y:-h/2-l},{x:-o/2,y:-h/2-l},...or(o/2,-h/2,l,20,-90,0),{x:-o/2-l,y:-l},...or(o/2+l*2,-l,l,20,-180,-270),...or(o/2+l*2,l,l,20,-90,-180),{x:-o/2-l,y:h/2},...or(o/2,h/2,l,20,0,90),{x:-o/2,y:h/2+l},{x:o/2-l-l/2,y:h/2+l},...or(-o/2+l+l/2,-h/2,l,20,-90,-180),{x:o/2-l/2,y:l},...or(-o/2-l/2,-l,l,20,0,90),...or(-o/2-l/2,l,l,20,-90,0),{x:o/2-l/2,y:-l},...or(-o/2+l+l/2,h/2,l,30,-180,-270)],y=Pt.svg(s),m=Vt(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=de(f).replace("Z",""),_=y.path(b,m),C=de(p).replace("Z",""),k=y.path(C,m),v=de(g),A=y.path(v,{...m}),L=s.insert("g",":first-child");return L.insert(()=>A,":first-child").attr("stroke-opacity",0),L.insert(()=>_,":first-child"),L.insert(()=>k,":first-child"),L.attr("class","text"),u&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(${l-l/4}, 0)`),a.attr("transform",`translate(${-o/2+(t.padding??0)/2-(n.x-(n.left??0))},${-h/2+(t.padding??0)/2-(n.y-(n.top??0))})`),zt(t,L),t.intersect=function(w){return Nt.polygon(t,g,w)},s}d(wb,"curlyBraces");async function Tb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=80,o=20,h=Math.max(a,(n.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),l=Math.max(o,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/2,{cssStyles:f}=t,p=Pt.svg(s),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=h,m=l,x=y-u,b=m/4,_=[{x,y:0},{x:b,y:0},{x:0,y:m/2},{x:b,y:m},{x,y:m},...xl(-x,-m/2,u,50,270,90)],S=de(_),C=p.path(S,g),k=s.insert(()=>C,":first-child");return k.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",f),i&&t.look!=="handDrawn"&&k.selectChildren("path").attr("style",i),k.attr("transform",`translate(${-h/2}, ${-l/2})`),zt(t,k),t.intersect=function(v){return Nt.polygon(t,_,v)},s}d(Tb,"curvedTrapezoid");var RA=d((e,t,r,i,s,n)=>[`M${e},${t+n}`,`a${s},${n} 0,0,0 ${r},0`,`a${s},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${s},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),BA=d((e,t,r,i,s,n)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${s},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${s},${n} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),IA=d((e,t,r,i,s,n)=>[`M${e-r/2},${-i/2}`,`a${s},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Sb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+t.padding,t.width??0),h=o/2,l=h/(2.5+o/50),u=Math.max(n.height+l+t.padding,t.height??0);let f;const{cssStyles:p}=t;if(t.look==="handDrawn"){const g=Pt.svg(s),y=BA(0,0,o,u,h,l),m=IA(0,l,o,u,h,l),x=g.path(y,Vt(t,{})),b=g.path(m,Vt(t,{fill:"none"}));f=s.insert(()=>b,":first-child"),f=s.insert(()=>x,":first-child"),f.attr("class","basic label-container"),p&&f.attr("style",p)}else{const g=RA(0,0,o,u,h,l);f=s.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",mr(p)).attr("style",i)}return f.attr("label-offset-y",l),f.attr("transform",`translate(${-o/2}, ${-(u/2+l)})`),zt(t,f),a.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+(t.padding??0)/1.5-(n.y-(n.top??0))})`),t.intersect=function(g){const y=Nt.rect(t,g),m=y.x-(t.x??0);if(h!=0&&(Math.abs(m)<(t.width??0)/2||Math.abs(m)==(t.width??0)/2&&Math.abs(y.y-(t.y??0))>(t.height??0)/2-l)){let x=l*l*(1-m*m/(h*h));x>0&&(x=Math.sqrt(x)),x=l-x,g.y-(t.y??0)>0&&(x=-x),y.y+=x}return y},s}d(Sb,"cylinder");async function Cb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=n.width+t.padding,h=n.height+t.padding,l=h*.2,u=-o/2,f=-h/2-l/2,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=[{x:u,y:f+l},{x:-u,y:f+l},{x:-u,y:-f},{x:u,y:-f},{x:u,y:f},{x:-u,y:f},{x:-u,y:f+l}],x=g.polygon(m.map(_=>[_.x,_.y]),y),b=s.insert(()=>x,":first-child");return b.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),a.attr("transform",`translate(${u+(t.padding??0)/2-(n.x-(n.left??0))}, ${f+l+(t.padding??0)/2-(n.y-(n.top??0))})`),zt(t,b),t.intersect=function(_){return Nt.rect(t,_)},s}d(Cb,"dividedRectangle");async function Eb(e,t){var p,g;const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,halfPadding:a}=await te(e,t,Qt(t)),h=n.width/2+a+5,l=n.width/2+a;let u;const{cssStyles:f}=t;if(t.look==="handDrawn"){const y=Pt.svg(s),m=Vt(t,{roughness:.2,strokeWidth:2.5}),x=Vt(t,{roughness:.2,strokeWidth:1.5}),b=y.circle(0,0,h*2,m),_=y.circle(0,0,l*2,x);u=s.insert("g",":first-child"),u.attr("class",mr(t.cssClasses)).attr("style",mr(f)),(p=u.node())==null||p.appendChild(b),(g=u.node())==null||g.appendChild(_)}else{u=s.insert("g",":first-child");const y=u.insert("circle",":first-child"),m=u.insert("circle");u.attr("class","basic label-container").attr("style",i),y.attr("class","outer-circle").attr("style",i).attr("r",h).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0)}return zt(t,u),t.intersect=function(y){return P.info("DoubleCircle intersect",t,h,y),Nt.circle(t,h,y)},s}d(Eb,"doublecircle");function Ab(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:s}=$t(t);t.label="",t.labelStyle=i;const n=e.insert("g").attr("class",Qt(t)).attr("id",t.domId??t.id),a=7,{cssStyles:o}=t,h=Pt.svg(n),{nodeBorder:l}=r,u=Vt(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(u.roughness=0);const f=h.circle(0,0,a*2,u),p=n.insert(()=>f,":first-child");return p.selectAll("path").attr("style",`fill: ${l} !important;`),o&&o.length>0&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",o),s&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",s),zt(t,p),t.intersect=function(g){return P.info("filledCircle intersect",t,{radius:a,point:g}),Nt.circle(t,a,g)},n}d(Ab,"filledCircle");async function Lb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=n.width+(t.padding??0),h=o+n.height,l=o+n.height,u=[{x:0,y:-h},{x:l,y:-h},{x:l/2,y:0}],{cssStyles:f}=t,p=Pt.svg(s),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=de(u),m=p.path(y,g),x=s.insert(()=>m,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return f&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",f),i&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),t.width=o,t.height=h,zt(t,x),a.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-h/2+(t.padding??0)/2+(n.y-(n.top??0))})`),t.intersect=function(b){return P.info("Triangle intersect",t,u,b),Nt.polygon(t,u,b)},s}d(Lb,"flippedTriangle");function Db(e,t,{dir:r,config:{state:i,themeVariables:s}}){const{nodeStyles:n}=$t(t);t.label="";const a=e.insert("g").attr("class",Qt(t)).attr("id",t.domId??t.id),{cssStyles:o}=t;let h=Math.max(70,(t==null?void 0:t.width)??0),l=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(h=Math.max(10,(t==null?void 0:t.width)??0),l=Math.max(70,(t==null?void 0:t.height)??0));const u=-1*h/2,f=-1*l/2,p=Pt.svg(a),g=Vt(t,{stroke:s.lineColor,fill:s.lineColor});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=p.rectangle(u,f,h,l,g),m=a.insert(()=>y,":first-child");o&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",o),n&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",n),zt(t,m);const x=(i==null?void 0:i.padding)??0;return t.width&&t.height&&(t.width+=x/2||0,t.height+=x/2||0),t.intersect=function(b){return Nt.rect(t,b)},a}d(Db,"forkJoin");async function Rb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const s=80,n=50,{shapeSvg:a,bbox:o}=await te(e,t,Qt(t)),h=Math.max(s,o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n,o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=l/2,{cssStyles:f}=t,p=Pt.svg(a),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-h/2,y:-l/2},{x:h/2-u,y:-l/2},...xl(-h/2+u,0,u,50,90,270),{x:h/2-u,y:l/2},{x:-h/2,y:l/2}],m=de(y),x=p.path(m,g),b=a.insert(()=>x,":first-child");return b.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",f),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),zt(t,b),t.intersect=function(_){return P.info("Pill intersect",t,{radius:u,point:_}),Nt.polygon(t,y,_)},a}d(Rb,"halfRoundedRectangle");async function Bb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.height+(t.padding??0),o=n.width+(t.padding??0)*2.5,{cssStyles:h}=t,l=Pt.svg(s),u=Vt(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let f=o/2;const p=f/6;f=f+p;const g=a/2,y=g/2,m=f-y,x=[{x:-m,y:-g},{x:0,y:-g},{x:m,y:-g},{x:f,y:0},{x:m,y:g},{x:0,y:g},{x:-m,y:g},{x:-f,y:0}],b=de(x),_=l.path(b,u),S=s.insert(()=>_,":first-child");return S.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",h),i&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",i),t.width=o,t.height=a,zt(t,S),t.intersect=function(C){return Nt.polygon(t,x,C)},s}d(Bb,"hexagon");async function Ib(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.label="",t.labelStyle=r;const{shapeSvg:s}=await te(e,t,Qt(t)),n=Math.max(30,(t==null?void 0:t.width)??0),a=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:o}=t,h=Pt.svg(s),l=Vt(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const u=[{x:0,y:0},{x:n,y:0},{x:0,y:a},{x:n,y:a}],f=de(u),p=h.path(f,l),g=s.insert(()=>p,":first-child");return g.attr("class","basic label-container"),o&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",o),i&&t.look!=="handDrawn"&&g.selectChildren("path").attr("style",i),g.attr("transform",`translate(${-n/2}, ${-a/2})`),zt(t,g),t.intersect=function(y){return P.info("Pill intersect",t,{points:u}),Nt.polygon(t,u,y)},s}d(Ib,"hourglass");async function Nb(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:s}=$t(t);t.labelStyle=s;const n=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(n,a),h=i==null?void 0:i.wrappingWidth;t.width=Math.max(o,h??0);const{shapeSvg:l,bbox:u,label:f}=await te(e,t,"icon-shape default"),p=t.pos==="t",g=o,y=o,{nodeBorder:m}=r,{stylesMap:x}=_o(t),b=-y/2,_=-g/2,S=t.label?8:0,C=Pt.svg(l),k=Vt(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const v=C.rectangle(b,_,y,g,k),A=Math.max(y,u.width),L=g+u.height+S,w=C.rectangle(-A/2,-L/2,A,L,{...k,fill:"transparent",stroke:"none"}),R=l.insert(()=>v,":first-child"),T=l.insert(()=>w);if(t.icon){const V=l.append("g");V.html(`<g>${await gs(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const N=V.node().getBBox(),D=N.width,E=N.height,M=N.x,F=N.y;V.attr("transform",`translate(${-D/2-M},${p?u.height/2+S/2-E/2-F:-u.height/2-S/2-E/2-F})`),V.attr("style",`color: ${x.get("stroke")??m};`)}return f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-L/2:L/2-u.height})`),R.attr("transform",`translate(0,${p?u.height/2+S/2:-u.height/2-S/2})`),zt(t,T),t.intersect=function(V){if(P.info("iconSquare intersect",t,V),!t.label)return Nt.rect(t,V);const N=t.x??0,D=t.y??0,E=t.height??0;let M=[];return p?M=[{x:N-u.width/2,y:D-E/2},{x:N+u.width/2,y:D-E/2},{x:N+u.width/2,y:D-E/2+u.height+S},{x:N+y/2,y:D-E/2+u.height+S},{x:N+y/2,y:D+E/2},{x:N-y/2,y:D+E/2},{x:N-y/2,y:D-E/2+u.height+S},{x:N-u.width/2,y:D-E/2+u.height+S}]:M=[{x:N-y/2,y:D-E/2},{x:N+y/2,y:D-E/2},{x:N+y/2,y:D-E/2+g},{x:N+u.width/2,y:D-E/2+g},{x:N+u.width/2/2,y:D+E/2},{x:N-u.width/2,y:D+E/2},{x:N-u.width/2,y:D-E/2+g},{x:N-y/2,y:D-E/2+g}],Nt.polygon(t,M,V)},l}d(Nb,"icon");async function $b(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:s}=$t(t);t.labelStyle=s;const n=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(n,a),h=i==null?void 0:i.wrappingWidth;t.width=Math.max(o,h??0);const{shapeSvg:l,bbox:u,label:f}=await te(e,t,"icon-shape default"),p=20,g=t.label?8:0,y=t.pos==="t",{nodeBorder:m,mainBkg:x}=r,{stylesMap:b}=_o(t),_=Pt.svg(l),S=Vt(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=b.get("fill");S.stroke=C??x;const k=l.append("g");t.icon&&k.html(`<g>${await gs(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const v=k.node().getBBox(),A=v.width,L=v.height,w=v.x,R=v.y,T=Math.max(A,L)*Math.SQRT2+p*2,V=_.circle(0,0,T,S),N=Math.max(T,u.width),D=T+u.height+g,E=_.rectangle(-N/2,-D/2,N,D,{...S,fill:"transparent",stroke:"none"}),M=l.insert(()=>V,":first-child"),F=l.insert(()=>E);return k.attr("transform",`translate(${-A/2-w},${y?u.height/2+g/2-L/2-R:-u.height/2-g/2-L/2-R})`),k.attr("style",`color: ${b.get("stroke")??m};`),f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${y?-D/2:D/2-u.height})`),M.attr("transform",`translate(0,${y?u.height/2+g/2:-u.height/2-g/2})`),zt(t,F),t.intersect=function(I){return P.info("iconSquare intersect",t,I),Nt.rect(t,I)},l}d($b,"iconCircle");async function Mb(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:s}=$t(t);t.labelStyle=s;const n=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(n,a),h=i==null?void 0:i.wrappingWidth;t.width=Math.max(o,h??0);const{shapeSvg:l,bbox:u,halfPadding:f,label:p}=await te(e,t,"icon-shape default"),g=t.pos==="t",y=o+f*2,m=o+f*2,{nodeBorder:x,mainBkg:b}=r,{stylesMap:_}=_o(t),S=-m/2,C=-y/2,k=t.label?8:0,v=Pt.svg(l),A=Vt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const L=_.get("fill");A.stroke=L??b;const w=v.path(vs(S,C,m,y,5),A),R=Math.max(m,u.width),T=y+u.height+k,V=v.rectangle(-R/2,-T/2,R,T,{...A,fill:"transparent",stroke:"none"}),N=l.insert(()=>w,":first-child").attr("class","icon-shape2"),D=l.insert(()=>V);if(t.icon){const E=l.append("g");E.html(`<g>${await gs(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=E.node().getBBox(),F=M.width,I=M.height,B=M.x,X=M.y;E.attr("transform",`translate(${-F/2-B},${g?u.height/2+k/2-I/2-X:-u.height/2-k/2-I/2-X})`),E.attr("style",`color: ${_.get("stroke")??x};`)}return p.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${g?-T/2:T/2-u.height})`),N.attr("transform",`translate(0,${g?u.height/2+k/2:-u.height/2-k/2})`),zt(t,D),t.intersect=function(E){if(P.info("iconSquare intersect",t,E),!t.label)return Nt.rect(t,E);const M=t.x??0,F=t.y??0,I=t.height??0;let B=[];return g?B=[{x:M-u.width/2,y:F-I/2},{x:M+u.width/2,y:F-I/2},{x:M+u.width/2,y:F-I/2+u.height+k},{x:M+m/2,y:F-I/2+u.height+k},{x:M+m/2,y:F+I/2},{x:M-m/2,y:F+I/2},{x:M-m/2,y:F-I/2+u.height+k},{x:M-u.width/2,y:F-I/2+u.height+k}]:B=[{x:M-m/2,y:F-I/2},{x:M+m/2,y:F-I/2},{x:M+m/2,y:F-I/2+y},{x:M+u.width/2,y:F-I/2+y},{x:M+u.width/2/2,y:F+I/2},{x:M-u.width/2,y:F+I/2},{x:M-u.width/2,y:F-I/2+y},{x:M-m/2,y:F-I/2+y}],Nt.polygon(t,B,E)},l}d(Mb,"iconRounded");async function Fb(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:s}=$t(t);t.labelStyle=s;const n=t.assetHeight??48,a=t.assetWidth??48,o=Math.max(n,a),h=i==null?void 0:i.wrappingWidth;t.width=Math.max(o,h??0);const{shapeSvg:l,bbox:u,halfPadding:f,label:p}=await te(e,t,"icon-shape default"),g=t.pos==="t",y=o+f*2,m=o+f*2,{nodeBorder:x,mainBkg:b}=r,{stylesMap:_}=_o(t),S=-m/2,C=-y/2,k=t.label?8:0,v=Pt.svg(l),A=Vt(t,{});t.look!=="handDrawn"&&(A.roughness=0,A.fillStyle="solid");const L=_.get("fill");A.stroke=L??b;const w=v.path(vs(S,C,m,y,.1),A),R=Math.max(m,u.width),T=y+u.height+k,V=v.rectangle(-R/2,-T/2,R,T,{...A,fill:"transparent",stroke:"none"}),N=l.insert(()=>w,":first-child"),D=l.insert(()=>V);if(t.icon){const E=l.append("g");E.html(`<g>${await gs(t.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=E.node().getBBox(),F=M.width,I=M.height,B=M.x,X=M.y;E.attr("transform",`translate(${-F/2-B},${g?u.height/2+k/2-I/2-X:-u.height/2-k/2-I/2-X})`),E.attr("style",`color: ${_.get("stroke")??x};`)}return p.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${g?-T/2:T/2-u.height})`),N.attr("transform",`translate(0,${g?u.height/2+k/2:-u.height/2-k/2})`),zt(t,D),t.intersect=function(E){if(P.info("iconSquare intersect",t,E),!t.label)return Nt.rect(t,E);const M=t.x??0,F=t.y??0,I=t.height??0;let B=[];return g?B=[{x:M-u.width/2,y:F-I/2},{x:M+u.width/2,y:F-I/2},{x:M+u.width/2,y:F-I/2+u.height+k},{x:M+m/2,y:F-I/2+u.height+k},{x:M+m/2,y:F+I/2},{x:M-m/2,y:F+I/2},{x:M-m/2,y:F-I/2+u.height+k},{x:M-u.width/2,y:F-I/2+u.height+k}]:B=[{x:M-m/2,y:F-I/2},{x:M+m/2,y:F-I/2},{x:M+m/2,y:F-I/2+y},{x:M+u.width/2,y:F-I/2+y},{x:M+u.width/2/2,y:F+I/2},{x:M-u.width/2,y:F+I/2},{x:M-u.width/2,y:F-I/2+y},{x:M-m/2,y:F-I/2+y}],Nt.polygon(t,B,E)},l}d(Fb,"iconSquare");async function Pb(e,t,{config:{flowchart:r}}){const i=new Image;i.src=(t==null?void 0:t.img)??"",await i.decode();const s=Number(i.naturalWidth.toString().replace("px","")),n=Number(i.naturalHeight.toString().replace("px",""));t.imageAspectRatio=s/n;const{labelStyles:a}=$t(t);t.labelStyle=a;const o=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const h=Math.max(t.label?o??0:0,(t==null?void 0:t.assetWidth)??s),l=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:h,u=t.constraint==="on"?l/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??n;t.width=Math.max(l,o??0);const{shapeSvg:f,bbox:p,label:g}=await te(e,t,"image-shape default"),y=t.pos==="t",m=-l/2,x=-u/2,b=t.label?8:0,_=Pt.svg(f),S=Vt(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=_.rectangle(m,x,l,u,S),k=Math.max(l,p.width),v=u+p.height+b,A=_.rectangle(-k/2,-v/2,k,v,{...S,fill:"none",stroke:"none"}),L=f.insert(()=>C,":first-child"),w=f.insert(()=>A);if(t.img){const R=f.append("image");R.attr("href",t.img),R.attr("width",l),R.attr("height",u),R.attr("preserveAspectRatio","none"),R.attr("transform",`translate(${-l/2},${y?v/2-u:-v/2})`)}return g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${y?-u/2-p.height/2-b/2:u/2-p.height/2+b/2})`),L.attr("transform",`translate(0,${y?p.height/2+b/2:-p.height/2-b/2})`),zt(t,w),t.intersect=function(R){if(P.info("iconSquare intersect",t,R),!t.label)return Nt.rect(t,R);const T=t.x??0,V=t.y??0,N=t.height??0;let D=[];return y?D=[{x:T-p.width/2,y:V-N/2},{x:T+p.width/2,y:V-N/2},{x:T+p.width/2,y:V-N/2+p.height+b},{x:T+l/2,y:V-N/2+p.height+b},{x:T+l/2,y:V+N/2},{x:T-l/2,y:V+N/2},{x:T-l/2,y:V-N/2+p.height+b},{x:T-p.width/2,y:V-N/2+p.height+b}]:D=[{x:T-l/2,y:V-N/2},{x:T+l/2,y:V-N/2},{x:T+l/2,y:V-N/2+u},{x:T+p.width/2,y:V-N/2+u},{x:T+p.width/2/2,y:V+N/2},{x:T-p.width/2,y:V+N/2},{x:T-p.width/2,y:V-N/2+u},{x:T-l/2,y:V-N/2+u}],Nt.polygon(t,D,R)},f}d(Pb,"imageSquare");async function Ob(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=[{x:0,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:-3*o/6,y:-o}];let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=Pt.svg(s),p=Vt(t,{}),g=de(h),y=f.path(g,p);l=s.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&l.attr("style",u)}else l=_s(s,a,o,h);return i&&l.attr("style",i),t.width=a,t.height=o,zt(t,l),t.intersect=function(f){return Nt.polygon(t,h,f)},s}d(Ob,"inv_trapezoid");async function su(e,t,r){const{labelStyles:i,nodeStyles:s}=$t(t);t.labelStyle=i;const{shapeSvg:n,bbox:a}=await te(e,t,Qt(t)),o=Math.max(a.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),h=Math.max(a.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),l=-o/2,u=-h/2;let f,{rx:p,ry:g}=t;const{cssStyles:y}=t;if(r!=null&&r.rx&&r.ry&&(p=r.rx,g=r.ry),t.look==="handDrawn"){const m=Pt.svg(n),x=Vt(t,{}),b=p||g?m.path(vs(l,u,o,h,p||0),x):m.rectangle(l,u,o,h,x);f=n.insert(()=>b,":first-child"),f.attr("class","basic label-container").attr("style",mr(y))}else f=n.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",s).attr("rx",mr(p)).attr("ry",mr(g)).attr("x",l).attr("y",u).attr("width",o).attr("height",h);return zt(t,f),t.calcIntersect=function(m,x){return Nt.rect(m,x)},t.intersect=function(m){return Nt.rect(t,m)},n}d(su,"drawRect");async function Vb(e,t){const{shapeSvg:r,bbox:i,label:s}=await te(e,t,"label"),n=r.insert("rect",":first-child");return n.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),s.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),zt(t,n),t.intersect=function(h){return Nt.rect(t,h)},r}d(Vb,"labelRect");async function zb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),h=[{x:0,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:-(3*o)/6,y:-o}];let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=Pt.svg(s),p=Vt(t,{}),g=de(h),y=f.path(g,p);l=s.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&l.attr("style",u)}else l=_s(s,a,o,h);return i&&l.attr("style",i),t.width=a,t.height=o,zt(t,l),t.intersect=function(f){return Nt.polygon(t,h,f)},s}d(zb,"lean_left");async function Wb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),h=[{x:-3*o/6,y:0},{x:a,y:0},{x:a+3*o/6,y:-o},{x:0,y:-o}];let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=Pt.svg(s),p=Vt(t,{}),g=de(h),y=f.path(g,p);l=s.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&l.attr("style",u)}else l=_s(s,a,o,h);return i&&l.attr("style",i),t.width=a,t.height=o,zt(t,l),t.intersect=function(f){return Nt.polygon(t,h,f)},s}d(Wb,"lean_right");function qb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.label="",t.labelStyle=r;const s=e.insert("g").attr("class",Qt(t)).attr("id",t.domId??t.id),{cssStyles:n}=t,a=Math.max(35,(t==null?void 0:t.width)??0),o=Math.max(35,(t==null?void 0:t.height)??0),h=7,l=[{x:a,y:0},{x:0,y:o+h/2},{x:a-2*h,y:o+h/2},{x:0,y:2*o},{x:a,y:o-h/2},{x:2*h,y:o-h/2}],u=Pt.svg(s),f=Vt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=de(l),g=u.path(p,f),y=s.insert(()=>g,":first-child");return n&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",n),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(-${a/2},${-o})`),zt(t,y),t.intersect=function(m){return P.info("lightningBolt intersect",t,m),Nt.polygon(t,l,m)},s}d(qb,"lightningBolt");var NA=d((e,t,r,i,s,n,a)=>[`M${e},${t+n}`,`a${s},${n} 0,0,0 ${r},0`,`a${s},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${s},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+a}`,`a${s},${n} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),$A=d((e,t,r,i,s,n,a)=>[`M${e},${t+n}`,`M${e+r},${t+n}`,`a${s},${n} 0,0,0 ${-r},0`,`l0,${i}`,`a${s},${n} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+n+a}`,`a${s},${n} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),MA=d((e,t,r,i,s,n)=>[`M${e-r/2},${-i/2}`,`a${s},${n} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Yb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0),t.width??0),h=o/2,l=h/(2.5+o/50),u=Math.max(n.height+l+(t.padding??0),t.height??0),f=u*.1;let p;const{cssStyles:g}=t;if(t.look==="handDrawn"){const y=Pt.svg(s),m=$A(0,0,o,u,h,l,f),x=MA(0,l,o,u,h,l),b=Vt(t,{}),_=y.path(m,b),S=y.path(x,b);s.insert(()=>S,":first-child").attr("class","line"),p=s.insert(()=>_,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{const y=NA(0,0,o,u,h,l,f);p=s.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",mr(g)).attr("style",i)}return p.attr("label-offset-y",l),p.attr("transform",`translate(${-o/2}, ${-(u/2+l)})`),zt(t,p),a.attr("transform",`translate(${-(n.width/2)-(n.x-(n.left??0))}, ${-(n.height/2)+l-(n.y-(n.top??0))})`),t.intersect=function(y){const m=Nt.rect(t,y),x=m.x-(t.x??0);if(h!=0&&(Math.abs(x)<(t.width??0)/2||Math.abs(x)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-l)){let b=l*l*(1-x*x/(h*h));b>0&&(b=Math.sqrt(b)),b=l-b,y.y-(t.y??0)>0&&(b=-b),m.y+=b}return m},s}d(Yb,"linedCylinder");async function Gb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=h/4,u=h+l,{cssStyles:f}=t,p=Pt.svg(s),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-o/2-o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:u/2},...ys(-o/2-o/2*.1,u/2,o/2+o/2*.1,u/2,l,.8),{x:o/2+o/2*.1,y:-u/2},{x:-o/2-o/2*.1,y:-u/2},{x:-o/2,y:-u/2},{x:-o/2,y:u/2*1.1},{x:-o/2,y:-u/2}],m=p.polygon(y.map(b=>[b.x,b.y]),g),x=s.insert(()=>m,":first-child");return x.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",f),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),x.attr("transform",`translate(0,${-l/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)+o/2*.1/2-(n.x-(n.left??0))},${-h/2+(t.padding??0)-l/2-(n.y-(n.top??0))})`),zt(t,x),t.intersect=function(b){return Nt.polygon(t,y,b)},s}d(Gb,"linedWaveEdgedRect");async function Hb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=5,u=-o/2,f=-h/2,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{}),m=[{x:u-l,y:f+l},{x:u-l,y:f+h+l},{x:u+o-l,y:f+h+l},{x:u+o-l,y:f+h},{x:u+o,y:f+h},{x:u+o,y:f+h-l},{x:u+o+l,y:f+h-l},{x:u+o+l,y:f-l},{x:u+l,y:f-l},{x:u+l,y:f},{x:u,y:f},{x:u,y:f+l}],x=[{x:u,y:f+l},{x:u+o-l,y:f+l},{x:u+o-l,y:f+h},{x:u+o,y:f+h},{x:u+o,y:f},{x:u,y:f}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=de(m),_=g.path(b,y),S=de(x),C=g.path(S,{...y,fill:"none"}),k=s.insert(()=>C,":first-child");return k.insert(()=>_,":first-child"),k.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",i),a.attr("transform",`translate(${-(n.width/2)-l-(n.x-(n.left??0))}, ${-(n.height/2)+l-(n.y-(n.top??0))})`),zt(t,k),t.intersect=function(v){return Nt.polygon(t,m,v)},s}d(Hb,"multiRect");async function Ub(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=h/4,u=h+l,f=-o/2,p=-u/2,g=5,{cssStyles:y}=t,m=ys(f-g,p+u+g,f+o-g,p+u+g,l,.8),x=m==null?void 0:m[m.length-1],b=[{x:f-g,y:p+g},{x:f-g,y:p+u+g},...m,{x:f+o-g,y:x.y-g},{x:f+o,y:x.y-g},{x:f+o,y:x.y-2*g},{x:f+o+g,y:x.y-2*g},{x:f+o+g,y:p-g},{x:f+g,y:p-g},{x:f+g,y:p},{x:f,y:p},{x:f,y:p+g}],_=[{x:f,y:p+g},{x:f+o-g,y:p+g},{x:f+o-g,y:x.y-g},{x:f+o,y:x.y-g},{x:f+o,y:p},{x:f,y:p}],S=Pt.svg(s),C=Vt(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const k=de(b),v=S.path(k,C),A=de(_),L=S.path(A,C),w=s.insert(()=>v,":first-child");return w.insert(()=>L),w.attr("class","basic label-container"),y&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",y),i&&t.look!=="handDrawn"&&w.selectAll("path").attr("style",i),w.attr("transform",`translate(0,${-l/2})`),a.attr("transform",`translate(${-(n.width/2)-g-(n.x-(n.left??0))}, ${-(n.height/2)+g-l/2-(n.y-(n.top??0))})`),zt(t,w),t.intersect=function(R){return Nt.polygon(t,b,R)},s}d(Ub,"multiWaveEdgedRectangle");async function jb(e,t,{config:{themeVariables:r}}){var _;const{labelStyles:i,nodeStyles:s}=$t(t);t.labelStyle=i,t.useHtmlLabels||((_=xe().flowchart)==null?void 0:_.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:a,bbox:o,label:h}=await te(e,t,Qt(t)),l=Math.max(o.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),u=Math.max(o.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),f=-l/2,p=-u/2,{cssStyles:g}=t,y=Pt.svg(a),m=Vt(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=y.rectangle(f,p,l,u,m),b=a.insert(()=>x,":first-child");return b.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",g),s&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",s),h.attr("transform",`translate(${-o.width/2-(o.x-(o.left??0))}, ${-(o.height/2)-(o.y-(o.top??0))})`),zt(t,b),t.intersect=function(S){return Nt.rect(t,S)},a}d(jb,"note");var FA=d((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Xb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.width+t.padding,o=n.height+t.padding,h=a+o,l=.5,u=[{x:h/2,y:0},{x:h,y:-h/2},{x:h/2,y:-h},{x:0,y:-h/2}];let f;const{cssStyles:p}=t;if(t.look==="handDrawn"){const g=Pt.svg(s),y=Vt(t,{}),m=FA(0,0,h),x=g.path(m,y);f=s.insert(()=>x,":first-child").attr("transform",`translate(${-h/2+l}, ${h/2})`),p&&f.attr("style",p)}else f=_s(s,h,h,u),f.attr("transform",`translate(${-h/2+l}, ${h/2})`);return i&&f.attr("style",i),zt(t,f),t.calcIntersect=function(g,y){const m=g.width,x=[{x:m/2,y:0},{x:m,y:-m/2},{x:m/2,y:-m},{x:0,y:-m/2}],b=Nt.polygon(g,x,y);return{x:b.x-.5,y:b.y-.5}},t.intersect=function(g){return this.calcIntersect(t,g)},s}d(Xb,"question");async function Kb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0),(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0),(t==null?void 0:t.height)??0),l=-o/2,u=-h/2,f=u/2,p=[{x:l+f,y:u},{x:l,y:0},{x:l+f,y:-u},{x:-l,y:-u},{x:-l,y:u}],{cssStyles:g}=t,y=Pt.svg(s),m=Vt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=de(p),b=y.path(x,m),_=s.insert(()=>b,":first-child");return _.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(${-f/2},0)`),a.attr("transform",`translate(${-f/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),zt(t,_),t.intersect=function(S){return Nt.polygon(t,p,S)},s}d(Kb,"rect_left_inv_arrow");async function Qb(e,t){var L,w;const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;let s;t.cssClasses?s="node "+t.cssClasses:s="node default";const n=e.insert("g").attr("class",s).attr("id",t.domId||t.id),a=n.insert("g"),o=n.insert("g").attr("class","label").attr("style",i),h=t.description,l=t.label,u=o.node().appendChild(await Gs(l,t.labelStyle,!0,!0));let f={width:0,height:0};if(Te((w=(L=it())==null?void 0:L.flowchart)==null?void 0:w.htmlLabels)){const R=u.children[0],T=_t(u);f=R.getBoundingClientRect(),T.attr("width",f.width),T.attr("height",f.height)}P.info("Text 2",h);const p=h||[],g=u.getBBox(),y=o.node().appendChild(await Gs(p.join?p.join("<br/>"):p,t.labelStyle,!0,!0)),m=y.children[0],x=_t(y);f=m.getBoundingClientRect(),x.attr("width",f.width),x.attr("height",f.height);const b=(t.padding||0)/2;_t(y).attr("transform","translate( "+(f.width>g.width?0:(g.width-f.width)/2)+", "+(g.height+b+5)+")"),_t(u).attr("transform","translate( "+(f.width<g.width?0:-(g.width-f.width)/2)+", 0)"),f=o.node().getBBox(),o.attr("transform","translate("+-f.width/2+", "+(-f.height/2-b+3)+")");const _=f.width+(t.padding||0),S=f.height+(t.padding||0),C=-f.width/2-b,k=-f.height/2-b;let v,A;if(t.look==="handDrawn"){const R=Pt.svg(n),T=Vt(t,{}),V=R.path(vs(C,k,_,S,t.rx||0),T),N=R.line(-f.width/2-b,-f.height/2-b+g.height+b,f.width/2+b,-f.height/2-b+g.height+b,T);A=n.insert(()=>(P.debug("Rough node insert CXC",V),N),":first-child"),v=n.insert(()=>(P.debug("Rough node insert CXC",V),V),":first-child")}else v=a.insert("rect",":first-child"),A=a.insert("line"),v.attr("class","outer title-state").attr("style",i).attr("x",-f.width/2-b).attr("y",-f.height/2-b).attr("width",f.width+(t.padding||0)).attr("height",f.height+(t.padding||0)),A.attr("class","divider").attr("x1",-f.width/2-b).attr("x2",f.width/2+b).attr("y1",-f.height/2-b+g.height+b).attr("y2",-f.height/2-b+g.height+b);return zt(t,v),t.intersect=function(R){return Nt.rect(t,R)},n}d(Qb,"rectWithTitle");function Wo(e,t,r,i,s,n,a){const h=(e+r)/2,l=(t+i)/2,u=Math.atan2(i-t,r-e),f=(r-e)/2,p=(i-t)/2,g=f/s,y=p/n,m=Math.sqrt(g**2+y**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const x=Math.sqrt(1-m**2),b=h+x*n*Math.sin(u)*(a?-1:1),_=l-x*s*Math.cos(u)*(a?-1:1),S=Math.atan2((t-_)/n,(e-b)/s);let k=Math.atan2((i-_)/n,(r-b)/s)-S;a&&k<0&&(k+=2*Math.PI),!a&&k>0&&(k-=2*Math.PI);const v=[];for(let A=0;A<20;A++){const L=A/19,w=S+L*k,R=b+s*Math.cos(w),T=_+n*Math.sin(w);v.push({x:R,y:T})}return v}d(Wo,"generateArcPoints");async function Zb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=(t==null?void 0:t.padding)??0,o=(t==null?void 0:t.padding)??0,h=(t!=null&&t.width?t==null?void 0:t.width:n.width)+a*2,l=(t!=null&&t.height?t==null?void 0:t.height:n.height)+o*2,u=t.radius||5,f=t.taper||5,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{});t.stroke&&(y.stroke=t.stroke),t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=[{x:-h/2+f,y:-l/2},{x:h/2-f,y:-l/2},...Wo(h/2-f,-l/2,h/2,-l/2+f,u,u,!0),{x:h/2,y:-l/2+f},{x:h/2,y:l/2-f},...Wo(h/2,l/2-f,h/2-f,l/2,u,u,!0),{x:h/2-f,y:l/2},{x:-h/2+f,y:l/2},...Wo(-h/2+f,l/2,-h/2,l/2-f,u,u,!0),{x:-h/2,y:l/2-f},{x:-h/2,y:-l/2+f},...Wo(-h/2,-l/2+f,-h/2+f,-l/2,u,u,!0)],x=de(m),b=g.path(x,y),_=s.insert(()=>b,":first-child");return _.attr("class","basic label-container outer-path"),p&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",p),i&&t.look!=="handDrawn"&&_.selectChildren("path").attr("style",i),zt(t,_),t.intersect=function(S){return Nt.polygon(t,m,S)},s}d(Zb,"roundedRect");async function Jb(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=(t==null?void 0:t.padding)??0,h=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=-n.width/2-o,f=-n.height/2-o,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=[{x:u,y:f},{x:u+h+8,y:f},{x:u+h+8,y:f+l},{x:u-8,y:f+l},{x:u-8,y:f},{x:u,y:f},{x:u,y:f+l}],x=g.polygon(m.map(_=>[_.x,_.y]),y),b=s.insert(()=>x,":first-child");return b.attr("class","basic label-container").attr("style",mr(p)),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),a.attr("transform",`translate(${-h/2+4+(t.padding??0)-(n.x-(n.left??0))},${-l/2+(t.padding??0)-(n.y-(n.top??0))})`),zt(t,b),t.intersect=function(_){return Nt.rect(t,_)},s}d(Jb,"shadedProcess");async function t3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-o/2,u=-h/2,{cssStyles:f}=t,p=Pt.svg(s),g=Vt(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:l,y:u},{x:l,y:u+h},{x:l+o,y:u+h},{x:l+o,y:u-h/2}],m=de(y),x=p.path(m,g),b=s.insert(()=>x,":first-child");return b.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",f),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),b.attr("transform",`translate(0, ${h/4})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))}, ${-h/4+(t.padding??0)-(n.y-(n.top??0))})`),zt(t,b),t.intersect=function(_){return Nt.polygon(t,y,_)},s}d(t3,"slopedRect");async function e3(e,t){const r={rx:0,ry:0,labelPaddingX:t.labelPaddingX??((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return su(e,t,r)}d(e3,"squareRect");async function r3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.height+t.padding,o=n.width+a/4+t.padding,h=a/2,{cssStyles:l}=t,u=Pt.svg(s),f=Vt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-o/2+h,y:-a/2},{x:o/2-h,y:-a/2},...xl(-o/2+h,0,h,50,90,270),{x:o/2-h,y:a/2},...xl(o/2-h,0,h,50,270,450)],g=de(p),y=u.path(g,f),m=s.insert(()=>y,":first-child");return m.attr("class","basic label-container outer-path"),l&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",l),i&&t.look!=="handDrawn"&&m.selectChildren("path").attr("style",i),zt(t,m),t.intersect=function(x){return Nt.polygon(t,p,x)},s}d(r3,"stadium");async function i3(e,t){return su(e,t,{rx:5,ry:5})}d(i3,"state");function s3(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:s}=$t(t);t.labelStyle=i;const{cssStyles:n}=t,{lineColor:a,stateBorder:o,nodeBorder:h}=r,l=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),u=Pt.svg(l),f=Vt(t,{});t.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=u.circle(0,0,14,{...f,stroke:a,strokeWidth:2}),g=o??h,y=u.circle(0,0,5,{...f,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),m=l.insert(()=>p,":first-child");return m.insert(()=>y),n&&m.selectAll("path").attr("style",n),s&&m.selectAll("path").attr("style",s),zt(t,m),t.intersect=function(x){return Nt.circle(t,7,x)},l}d(s3,"stateEnd");function n3(e,t,{config:{themeVariables:r}}){const{lineColor:i}=r,s=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let n;if(t.look==="handDrawn"){const o=Pt.svg(s).circle(0,0,14,tA(i));n=s.insert(()=>o),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else n=s.insert("circle",":first-child"),n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return zt(t,n),t.intersect=function(a){return Nt.circle(t,7,a)},s}d(n3,"stateStart");async function a3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=((t==null?void 0:t.padding)||0)/2,o=n.width+t.padding,h=n.height+t.padding,l=-n.width/2-a,u=-n.height/2-a,f=[{x:0,y:0},{x:o,y:0},{x:o,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if(t.look==="handDrawn"){const p=Pt.svg(s),g=Vt(t,{}),y=p.rectangle(l-8,u,o+16,h,g),m=p.line(l,u,l,u+h,g),x=p.line(l+o,u,l+o,u+h,g);s.insert(()=>m,":first-child"),s.insert(()=>x,":first-child");const b=s.insert(()=>y,":first-child"),{cssStyles:_}=t;b.attr("class","basic label-container").attr("style",mr(_)),zt(t,b)}else{const p=_s(s,o,h,f);i&&p.attr("style",i),zt(t,p)}return t.intersect=function(p){return Nt.polygon(t,f,p)},s}d(a3,"subroutine");async function o3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),o=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-a/2,l=-o/2,u=.2*o,f=.2*o,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{}),m=[{x:h-u/2,y:l},{x:h+a+u/2,y:l},{x:h+a+u/2,y:l+o},{x:h-u/2,y:l+o}],x=[{x:h+a-u/2,y:l+o},{x:h+a+u/2,y:l+o},{x:h+a+u/2,y:l+o-f}];t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=de(m),_=g.path(b,y),S=de(x),C=g.path(S,{...y,fillStyle:"solid"}),k=s.insert(()=>C,":first-child");return k.insert(()=>_,":first-child"),k.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",i),zt(t,k),t.intersect=function(v){return Nt.polygon(t,m,v)},s}d(o3,"taggedRect");async function l3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=h/4,u=.2*o,f=.2*h,p=h+l,{cssStyles:g}=t,y=Pt.svg(s),m=Vt(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=[{x:-o/2-o/2*.1,y:p/2},...ys(-o/2-o/2*.1,p/2,o/2+o/2*.1,p/2,l,.8),{x:o/2+o/2*.1,y:-p/2},{x:-o/2-o/2*.1,y:-p/2}],b=-o/2+o/2*.1,_=-p/2-f*.4,S=[{x:b+o-u,y:(_+h)*1.4},{x:b+o,y:_+h-f},{x:b+o,y:(_+h)*.9},...ys(b+o,(_+h)*1.3,b+o-u,(_+h)*1.5,-h*.03,.5)],C=de(x),k=y.path(C,m),v=de(S),A=y.path(v,{...m,fillStyle:"solid"}),L=s.insert(()=>A,":first-child");return L.insert(()=>k,":first-child"),L.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&L.selectAll("path").attr("style",i),L.attr("transform",`translate(0,${-l/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))},${-h/2+(t.padding??0)-l/2-(n.y-(n.top??0))})`),zt(t,L),t.intersect=function(w){return Nt.polygon(t,x,w)},s}d(l3,"taggedWaveEdgedRectangle");async function c3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=Math.max(n.width+t.padding,(t==null?void 0:t.width)||0),o=Math.max(n.height+t.padding,(t==null?void 0:t.height)||0),h=-a/2,l=-o/2,u=s.insert("rect",":first-child");return u.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",h).attr("y",l).attr("width",a).attr("height",o),zt(t,u),t.intersect=function(f){return Nt.rect(t,f)},s}d(c3,"text");var PA=d((e,t,r,i,s,n)=>`M${e},${t}
    a${s},${n} 0,0,1 0,${-i}
    l${r},0
    a${s},${n} 0,0,1 0,${i}
    M${r},${-i}
    a${s},${n} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),OA=d((e,t,r,i,s,n)=>[`M${e},${t}`,`M${e+r},${t}`,`a${s},${n} 0,0,0 0,${-i}`,`l${-r},0`,`a${s},${n} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),VA=d((e,t,r,i,s,n)=>[`M${e+r/2},${-i/2}`,`a${s},${n} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function h3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a,halfPadding:o}=await te(e,t,Qt(t)),h=t.look==="neo"?o*2:o,l=n.height+h,u=l/2,f=u/(2.5+l/50),p=n.width+f+h,{cssStyles:g}=t;let y;if(t.look==="handDrawn"){const m=Pt.svg(s),x=OA(0,0,p,l,f,u),b=VA(0,0,p,l,f,u),_=m.path(x,Vt(t,{})),S=m.path(b,Vt(t,{fill:"none"}));y=s.insert(()=>S,":first-child"),y=s.insert(()=>_,":first-child"),y.attr("class","basic label-container"),g&&y.attr("style",g)}else{const m=PA(0,0,p,l,f,u);y=s.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",mr(g)).attr("style",i),y.attr("class","basic label-container"),g&&y.selectAll("path").attr("style",g),i&&y.selectAll("path").attr("style",i)}return y.attr("label-offset-x",f),y.attr("transform",`translate(${-p/2}, ${l/2} )`),a.attr("transform",`translate(${-(n.width/2)-f-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),zt(t,y),t.intersect=function(m){const x=Nt.rect(t,m),b=x.y-(t.y??0);if(u!=0&&(Math.abs(b)<(t.height??0)/2||Math.abs(b)==(t.height??0)/2&&Math.abs(x.x-(t.x??0))>(t.width??0)/2-f)){let _=f*f*(1-b*b/(u*u));_!=0&&(_=Math.sqrt(Math.abs(_))),_=f-_,m.x-(t.x??0)>0&&(_=-_),x.x+=_}return x},s}d(h3,"tiltedCylinder");async function u3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=n.width+t.padding,o=n.height+t.padding,h=[{x:-3*o/6,y:0},{x:a+3*o/6,y:0},{x:a,y:-o},{x:0,y:-o}];let l;const{cssStyles:u}=t;if(t.look==="handDrawn"){const f=Pt.svg(s),p=Vt(t,{}),g=de(h),y=f.path(g,p);l=s.insert(()=>y,":first-child").attr("transform",`translate(${-a/2}, ${o/2})`),u&&l.attr("style",u)}else l=_s(s,a,o,h);return i&&l.attr("style",i),t.width=a,t.height=o,zt(t,l),t.intersect=function(f){return Nt.polygon(t,h,f)},s}d(u3,"trapezoid");async function d3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=60,o=20,h=Math.max(a,n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(o,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:u}=t,f=Pt.svg(s),p=Vt(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-h/2*.8,y:-l/2},{x:h/2*.8,y:-l/2},{x:h/2,y:-l/2*.6},{x:h/2,y:l/2},{x:-h/2,y:l/2},{x:-h/2,y:-l/2*.6}],y=de(g),m=f.path(y,p),x=s.insert(()=>m,":first-child");return x.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),zt(t,x),t.intersect=function(b){return Nt.polygon(t,g,b)},s}d(d3,"trapezoidalPentagon");async function f3(e,t){var _;const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Te((_=it().flowchart)==null?void 0:_.htmlLabels),h=n.width+(t.padding??0),l=h+n.height,u=h+n.height,f=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-l}],{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=de(f),x=g.path(m,y),b=s.insert(()=>x,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return p&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),t.width=h,t.height=l,zt(t,b),a.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${l/2-(n.height+(t.padding??0)/(o?2:1)-(n.y-(n.top??0)))})`),t.intersect=function(S){return P.info("Triangle intersect",t,f,S),Nt.polygon(t,f,S)},s}d(f3,"triangle");async function p3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=h/8,u=h+l,{cssStyles:f}=t,g=70-o,y=g>0?g/2:0,m=Pt.svg(s),x=Vt(t,{});t.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-o/2-y,y:u/2},...ys(-o/2-y,u/2,o/2+y,u/2,l,.8),{x:o/2+y,y:-u/2},{x:-o/2-y,y:-u/2}],_=de(b),S=m.path(_,x),C=s.insert(()=>S,":first-child");return C.attr("class","basic label-container"),f&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",f),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(0,${-l/2})`),a.attr("transform",`translate(${-o/2+(t.padding??0)-(n.x-(n.left??0))},${-h/2+(t.padding??0)-l-(n.y-(n.top??0))})`),zt(t,C),t.intersect=function(k){return Nt.polygon(t,b,k)},s}d(p3,"waveEdgedRectangle");async function g3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n}=await te(e,t,Qt(t)),a=100,o=50,h=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),u=h/l;let f=h,p=l;f>p*u?p=f/u:f=p*u,f=Math.max(f,a),p=Math.max(p,o);const g=Math.min(p*.2,p/4),y=p+g*2,{cssStyles:m}=t,x=Pt.svg(s),b=Vt(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const _=[{x:-f/2,y:y/2},...ys(-f/2,y/2,f/2,y/2,g,1),{x:f/2,y:-y/2},...ys(f/2,-y/2,-f/2,-y/2,g,-1)],S=de(_),C=x.path(S,b),k=s.insert(()=>C,":first-child");return k.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&k.selectAll("path").attr("style",i),zt(t,k),t.intersect=function(v){return Nt.polygon(t,_,v)},s}d(g3,"waveRectangle");async function y3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,label:a}=await te(e,t,Qt(t)),o=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),h=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=5,u=-o/2,f=-h/2,{cssStyles:p}=t,g=Pt.svg(s),y=Vt(t,{}),m=[{x:u-l,y:f-l},{x:u-l,y:f+h},{x:u+o,y:f+h},{x:u+o,y:f-l}],x=`M${u-l},${f-l} L${u+o},${f-l} L${u+o},${f+h} L${u-l},${f+h} L${u-l},${f-l}
                M${u-l},${f} L${u+o},${f}
                M${u},${f-l} L${u},${f+h}`;t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=g.path(x,y),_=s.insert(()=>b,":first-child");return _.attr("transform",`translate(${l/2}, ${l/2})`),_.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&_.selectAll("path").attr("style",i),a.attr("transform",`translate(${-(n.width/2)+l/2-(n.x-(n.left??0))}, ${-(n.height/2)+l/2-(n.y-(n.top??0))})`),zt(t,_),t.intersect=function(S){return Nt.polygon(t,m,S)},s}d(y3,"windowPane");async function qf(e,t){var G,nt,ht,tt;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:dt}=xe(),{background:st}=dt,ot={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${st}`]};await qf(e,ot)}const i=xe();t.useHtmlLabels=i.htmlLabels;let s=((G=i.er)==null?void 0:G.diagramPadding)??10,n=((nt=i.er)==null?void 0:nt.entityPadding)??6;const{cssStyles:a}=t,{labelStyles:o,nodeStyles:h}=$t(t);if(r.attributes.length===0&&t.label){const dt={rx:0,ry:0,labelPaddingX:s,labelPaddingY:s*1.5};Tr(t.label,i)+dt.labelPaddingX*2<i.er.minEntityWidth&&(t.width=i.er.minEntityWidth);const st=await su(e,t,dt);if(!Te(i.htmlLabels)){const ot=st.select("text"),K=(ht=ot.node())==null?void 0:ht.getBBox();ot.attr("transform",`translate(${-K.width/2}, 0)`)}return st}i.htmlLabels||(s*=1.25,n*=1.25);let l=Qt(t);l||(l="node default");const u=e.insert("g").attr("class",l).attr("id",t.domId||t.id),f=await On(u,t.label??"",i,0,0,["name"],o);f.height+=n;let p=0;const g=[],y=[];let m=0,x=0,b=0,_=0,S=!0,C=!0;for(const dt of r.attributes){const st=await On(u,dt.type,i,0,p,["attribute-type"],o);m=Math.max(m,st.width+s);const ot=await On(u,dt.name,i,0,p,["attribute-name"],o);x=Math.max(x,ot.width+s);const K=await On(u,dt.keys.join(),i,0,p,["attribute-keys"],o);b=Math.max(b,K.width+s);const lt=await On(u,dt.comment,i,0,p,["attribute-comment"],o);_=Math.max(_,lt.width+s);const U=Math.max(st.height,ot.height,K.height,lt.height)+n;y.push({yOffset:p,rowHeight:U}),p+=U}let k=4;b<=s&&(S=!1,b=0,k--),_<=s&&(C=!1,_=0,k--);const v=u.node().getBBox();if(f.width+s*2-(m+x+b+_)>0){const dt=f.width+s*2-(m+x+b+_);m+=dt/k,x+=dt/k,b>0&&(b+=dt/k),_>0&&(_+=dt/k)}const A=m+x+b+_,L=Pt.svg(u),w=Vt(t,{});t.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");let R=0;y.length>0&&(R=y.reduce((dt,st)=>dt+((st==null?void 0:st.rowHeight)??0),0));const T=Math.max(v.width+s*2,(t==null?void 0:t.width)||0,A),V=Math.max((R??0)+f.height,(t==null?void 0:t.height)||0),N=-T/2,D=-V/2;u.selectAll("g:not(:first-child)").each((dt,st,ot)=>{const K=_t(ot[st]),lt=K.attr("transform");let U=0,j=0;if(lt){const W=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(lt);W&&(U=parseFloat(W[1]),j=parseFloat(W[2]),K.attr("class").includes("attribute-name")?U+=m:K.attr("class").includes("attribute-keys")?U+=m+x:K.attr("class").includes("attribute-comment")&&(U+=m+x+b))}K.attr("transform",`translate(${N+s/2+U}, ${j+D+f.height+n/2})`)}),u.select(".name").attr("transform","translate("+-f.width/2+", "+(D+n/2)+")");const E=L.rectangle(N,D,T,V,w),M=u.insert(()=>E,":first-child").attr("style",a.join("")),{themeVariables:F}=xe(),{rowEven:I,rowOdd:B,nodeBorder:X}=F;g.push(0);for(const[dt,st]of y.entries()){const K=(dt+1)%2===0&&st.yOffset!==0,lt=L.rectangle(N,f.height+D+(st==null?void 0:st.yOffset),T,st==null?void 0:st.rowHeight,{...w,fill:K?I:B,stroke:X});u.insert(()=>lt,"g.label").attr("style",a.join("")).attr("class",`row-rect-${K?"even":"odd"}`)}let $=L.line(N,f.height+D,T+N,f.height+D,w);u.insert(()=>$).attr("class","divider"),$=L.line(m+N,f.height+D,m+N,V+D,w),u.insert(()=>$).attr("class","divider"),S&&($=L.line(m+x+N,f.height+D,m+x+N,V+D,w),u.insert(()=>$).attr("class","divider")),C&&($=L.line(m+x+b+N,f.height+D,m+x+b+N,V+D,w),u.insert(()=>$).attr("class","divider"));for(const dt of g)$=L.line(N,f.height+D+dt,T+N,f.height+D+dt,w),u.insert(()=>$).attr("class","divider");if(zt(t,M),h&&t.look!=="handDrawn"){const dt=h.split(";"),st=(tt=dt==null?void 0:dt.filter(ot=>ot.includes("stroke")))==null?void 0:tt.map(ot=>`${ot}`).join("; ");u.selectAll("path").attr("style",st??""),u.selectAll(".row-rect-even path").attr("style",h)}return t.intersect=function(dt){return Nt.rect(t,dt)},u}d(qf,"erBox");async function On(e,t,r,i=0,s=0,n=[],a=""){const o=e.insert("g").attr("class",`label ${n.join(" ")}`).attr("transform",`translate(${i}, ${s})`).attr("style",a);t!==ss(t)&&(t=ss(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const h=o.node().appendChild(await Wr(o,t,{width:Tr(t,r)+100,style:a,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let u=h.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let l=h.getBBox();if(Te(r.htmlLabels)){const u=h.children[0];u.style.textAlign="start";const f=_t(h);l=u.getBoundingClientRect(),f.attr("width",l.width),f.attr("height",l.height)}return l}d(On,"addText");async function m3(e,t,r,i,s=r.class.padding??12){const n=i?0:3,a=e.insert("g").attr("class",Qt(t)).attr("id",t.domId||t.id);let o=null,h=null,l=null,u=null,f=0,p=0,g=0;if(o=a.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const _=t.annotations[0];await qo(o,{text:`${_}`},0),f=o.node().getBBox().height}h=a.insert("g").attr("class","label-group text"),await qo(h,t,0,["font-weight: bolder"]);const y=h.node().getBBox();p=y.height,l=a.insert("g").attr("class","members-group text");let m=0;for(const _ of t.members){const S=await qo(l,_,m,[_.parseClassifier()]);m+=S+n}g=l.node().getBBox().height,g<=0&&(g=s/2),u=a.insert("g").attr("class","methods-group text");let x=0;for(const _ of t.methods){const S=await qo(u,_,x,[_.parseClassifier()]);x+=S+n}let b=a.node().getBBox();if(o!==null){const _=o.node().getBBox();o.attr("transform",`translate(${-_.width/2})`)}return h.attr("transform",`translate(${-y.width/2}, ${f})`),b=a.node().getBBox(),l.attr("transform",`translate(0, ${f+p+s*2})`),b=a.node().getBBox(),u.attr("transform",`translate(0, ${f+p+(g?g+s*4:s*2)})`),b=a.node().getBBox(),{shapeSvg:a,bbox:b}}d(m3,"textHelper");async function qo(e,t,r,i=[]){const s=e.insert("g").attr("class","label").attr("style",i.join("; ")),n=xe();let a="useHtmlLabels"in t?t.useHtmlLabels:Te(n.htmlLabels)??!0,o="";"text"in t?o=t.text:o=t.label,!a&&o.startsWith("\\")&&(o=o.substring(1)),Re(o)&&(a=!0);const h=await Wr(s,cf(ki(o)),{width:Tr(o,n)+50,classes:"markdown-node-label",useHtmlLabels:a},n);let l,u=1;if(a){const f=h.children[0],p=_t(h);u=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(u+=f.innerHTML.split("<mrow>").length-1);const g=f.getElementsByTagName("img");if(g){const y=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(m=>new Promise(x=>{function b(){var _;if(m.style.display="flex",m.style.flexDirection="column",y){const S=((_=n.fontSize)==null?void 0:_.toString())??window.getComputedStyle(document.body).fontSize,k=parseInt(S,10)*5+"px";m.style.minWidth=k,m.style.maxWidth=k}else m.style.width="100%";x(m)}d(b,"setupImage"),setTimeout(()=>{m.complete&&b()}),m.addEventListener("error",b),m.addEventListener("load",b)})))}l=f.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}else{i.includes("font-weight: bolder")&&_t(h).selectAll("tspan").attr("font-weight",""),u=h.children.length;const f=h.children[0];(h.textContent===""||h.textContent.includes("&gt"))&&(f.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),l=h.getBBox()}return s.attr("transform","translate(0,"+(-l.height/(2*u)+r)+")"),l.height}d(qo,"addText");async function x3(e,t){var w,R;const r=it(),i=r.class.padding??12,s=i,n=t.useHtmlLabels??Te(r.htmlLabels)??!0,a=t;a.annotations=a.annotations??[],a.members=a.members??[],a.methods=a.methods??[];const{shapeSvg:o,bbox:h}=await m3(e,t,r,n,s),{labelStyles:l,nodeStyles:u}=$t(t);t.labelStyle=l,t.cssStyles=a.styles||"";const f=((w=a.styles)==null?void 0:w.join(";"))||u||"";t.cssStyles||(t.cssStyles=f.replaceAll("!important","").split(";"));const p=a.members.length===0&&a.methods.length===0&&!((R=r.class)!=null&&R.hideEmptyMembersBox),g=Pt.svg(o),y=Vt(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=h.width;let x=h.height;a.members.length===0&&a.methods.length===0?x+=s:a.members.length>0&&a.methods.length===0&&(x+=s*2);const b=-m/2,_=-x/2,S=g.rectangle(b-i,_-i-(p?i:a.members.length===0&&a.methods.length===0?-i/2:0),m+2*i,x+2*i+(p?i*2:a.members.length===0&&a.methods.length===0?-i:0),y),C=o.insert(()=>S,":first-child");C.attr("class","basic label-container");const k=C.node().getBBox();o.selectAll(".text").each((T,V,N)=>{var B;const D=_t(N[V]),E=D.attr("transform");let M=0;if(E){const $=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(E);$&&(M=parseFloat($[2]))}let F=M+_+i-(p?i:a.members.length===0&&a.methods.length===0?-i/2:0);n||(F-=4);let I=b;(D.attr("class").includes("label-group")||D.attr("class").includes("annotation-group"))&&(I=-((B=D.node())==null?void 0:B.getBBox().width)/2||0,o.selectAll("text").each(function(X,$,G){window.getComputedStyle(G[$]).textAnchor==="middle"&&(I=0)})),D.attr("transform",`translate(${I}, ${F})`)});const v=o.select(".annotation-group").node().getBBox().height-(p?i/2:0)||0,A=o.select(".label-group").node().getBBox().height-(p?i/2:0)||0,L=o.select(".members-group").node().getBBox().height-(p?i/2:0)||0;if(a.members.length>0||a.methods.length>0||p){const T=g.line(k.x,v+A+_+i,k.x+k.width,v+A+_+i,y);o.insert(()=>T).attr("class","divider").attr("style",f)}if(p||a.members.length>0||a.methods.length>0){const T=g.line(k.x,v+A+L+_+s*2+i,k.x+k.width,v+A+L+_+i+s*2,y);o.insert(()=>T).attr("class","divider").attr("style",f)}if(a.look!=="handDrawn"&&o.selectAll("path").attr("style",f),C.select(":nth-child(2)").attr("style",f),o.selectAll(".divider").select("path").attr("style",f),t.labelStyle?o.selectAll("span").attr("style",t.labelStyle):o.selectAll("span").attr("style",f),!n){const T=RegExp(/color\s*:\s*([^;]*)/),V=T.exec(f);if(V){const N=V[0].replace("color","fill");o.selectAll("tspan").attr("style",N)}else if(l){const N=T.exec(l);if(N){const D=N[0].replace("color","fill");o.selectAll("tspan").attr("style",D)}}}return zt(t,C),t.intersect=function(T){return Nt.rect(t,T)},o}d(x3,"classBox");async function b3(e,t){var v,A;const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const s=t,n=t,a=20,o=20,h="verifyMethod"in t,l=Qt(t),u=e.insert("g").attr("class",l).attr("id",t.domId??t.id);let f;h?f=await pi(u,`&lt;&lt;${s.type}&gt;&gt;`,0,t.labelStyle):f=await pi(u,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let p=f;const g=await pi(u,s.name,p,t.labelStyle+"; font-weight: bold;");if(p+=g+o,h){const L=await pi(u,`${s.requirementId?`ID: ${s.requirementId}`:""}`,p,t.labelStyle);p+=L;const w=await pi(u,`${s.text?`Text: ${s.text}`:""}`,p,t.labelStyle);p+=w;const R=await pi(u,`${s.risk?`Risk: ${s.risk}`:""}`,p,t.labelStyle);p+=R,await pi(u,`${s.verifyMethod?`Verification: ${s.verifyMethod}`:""}`,p,t.labelStyle)}else{const L=await pi(u,`${n.type?`Type: ${n.type}`:""}`,p,t.labelStyle);p+=L,await pi(u,`${n.docRef?`Doc Ref: ${n.docRef}`:""}`,p,t.labelStyle)}const y=(((v=u.node())==null?void 0:v.getBBox().width)??200)+a,m=(((A=u.node())==null?void 0:A.getBBox().height)??200)+a,x=-y/2,b=-m/2,_=Pt.svg(u),S=Vt(t,{});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const C=_.rectangle(x,b,y,m,S),k=u.insert(()=>C,":first-child");if(k.attr("class","basic label-container").attr("style",i),u.selectAll(".label").each((L,w,R)=>{const T=_t(R[w]),V=T.attr("transform");let N=0,D=0;if(V){const I=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(V);I&&(N=parseFloat(I[1]),D=parseFloat(I[2]))}const E=D-m/2;let M=x+a/2;(w===0||w===1)&&(M=N),T.attr("transform",`translate(${M}, ${E+a})`)}),p>f+g+o){const L=_.line(x,b+f+g+o,x+y,b+f+g+o,S);u.insert(()=>L).attr("style",i)}return zt(t,k),t.intersect=function(L){return Nt.rect(t,L)},u}d(b3,"requirementBox");async function pi(e,t,r,i=""){if(t==="")return 0;const s=e.insert("g").attr("class","label").attr("style",i),n=it(),a=n.htmlLabels??!0,o=await Wr(s,cf(ki(t)),{width:Tr(t,n)+50,classes:"markdown-node-label",useHtmlLabels:a,style:i},n);let h;if(a){const l=o.children[0],u=_t(o);h=l.getBoundingClientRect(),u.attr("width",h.width),u.attr("height",h.height)}else{const l=o.children[0];for(const u of l.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&u.setAttribute("style",i);h=o.getBBox(),h.height+=6}return s.attr("transform",`translate(${-h.width/2},${-h.height/2+r})`),h.height}d(pi,"addText");var zA=d(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function v3(e,t,{config:r}){var V,N;const{labelStyles:i,nodeStyles:s}=$t(t);t.labelStyle=i||"";const n=10,a=t.width;t.width=(t.width??200)-10;const{shapeSvg:o,bbox:h,label:l}=await te(e,t,Qt(t)),u=t.padding||10;let f="",p;"ticket"in t&&t.ticket&&((V=r==null?void 0:r.kanban)!=null&&V.ticketBaseUrl)&&(f=(N=r==null?void 0:r.kanban)==null?void 0:N.ticketBaseUrl.replace("#TICKET#",t.ticket),p=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const g={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let y,m;p?{label:y,bbox:m}=await Yu(p,"ticket"in t&&t.ticket||"",g):{label:y,bbox:m}=await Yu(o,"ticket"in t&&t.ticket||"",g);const{label:x,bbox:b}=await Yu(o,"assigned"in t&&t.assigned||"",g);t.width=a;const _=10,S=(t==null?void 0:t.width)||0,C=Math.max(m.height,b.height)/2,k=Math.max(h.height+_*2,(t==null?void 0:t.height)||0)+C,v=-S/2,A=-k/2;l.attr("transform","translate("+(u-S/2)+", "+(-C-h.height/2)+")"),y.attr("transform","translate("+(u-S/2)+", "+(-C+h.height/2)+")"),x.attr("transform","translate("+(u+S/2-b.width-2*n)+", "+(-C+h.height/2)+")");let L;const{rx:w,ry:R}=t,{cssStyles:T}=t;if(t.look==="handDrawn"){const D=Pt.svg(o),E=Vt(t,{}),M=w||R?D.path(vs(v,A,S,k,w||0),E):D.rectangle(v,A,S,k,E);L=o.insert(()=>M,":first-child"),L.attr("class","basic label-container").attr("style",T||null)}else{L=o.insert("rect",":first-child"),L.attr("class","basic label-container __APA__").attr("style",s).attr("rx",w??5).attr("ry",R??5).attr("x",v).attr("y",A).attr("width",S).attr("height",k);const D="priority"in t&&t.priority;if(D){const E=o.append("line"),M=v+2,F=A+Math.floor((w??0)/2),I=A+k-Math.floor((w??0)/2);E.attr("x1",M).attr("y1",F).attr("x2",M).attr("y2",I).attr("stroke-width","4").attr("stroke",zA(D))}}return zt(t,L),t.height=k,t.intersect=function(D){return Nt.rect(t,D)},o}d(v3,"kanbanItem");async function _3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,halfPadding:a,label:o}=await te(e,t,Qt(t)),h=n.width+10*a,l=n.height+8*a,u=.15*h,{cssStyles:f}=t,p=n.width+20,g=n.height+20,y=Math.max(h,p),m=Math.max(l,g);o.attr("transform",`translate(${-n.width/2}, ${-n.height/2})`);let x;const b=`M0 0 
    a${u},${u} 1 0,0 ${y*.25},${-1*m*.1}
    a${u},${u} 1 0,0 ${y*.25},0
    a${u},${u} 1 0,0 ${y*.25},0
    a${u},${u} 1 0,0 ${y*.25},${m*.1}

    a${u},${u} 1 0,0 ${y*.15},${m*.33}
    a${u*.8},${u*.8} 1 0,0 0,${m*.34}
    a${u},${u} 1 0,0 ${-1*y*.15},${m*.33}

    a${u},${u} 1 0,0 ${-1*y*.25},${m*.15}
    a${u},${u} 1 0,0 ${-1*y*.25},0
    a${u},${u} 1 0,0 ${-1*y*.25},0
    a${u},${u} 1 0,0 ${-1*y*.25},${-1*m*.15}

    a${u},${u} 1 0,0 ${-1*y*.1},${-1*m*.33}
    a${u*.8},${u*.8} 1 0,0 0,${-1*m*.34}
    a${u},${u} 1 0,0 ${y*.1},${-1*m*.33}
  H0 V0 Z`;if(t.look==="handDrawn"){const _=Pt.svg(s),S=Vt(t,{}),C=_.path(b,S);x=s.insert(()=>C,":first-child"),x.attr("class","basic label-container").attr("style",mr(f))}else x=s.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",b);return x.attr("transform",`translate(${-y/2}, ${-m/2})`),zt(t,x),t.calcIntersect=function(_,S){return Nt.rect(_,S)},t.intersect=function(_){return P.info("Bang intersect",t,_),Nt.rect(t,_)},s}d(_3,"bang");async function k3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,halfPadding:a,label:o}=await te(e,t,Qt(t)),h=n.width+2*a,l=n.height+2*a,u=.15*h,f=.25*h,p=.35*h,g=.2*h,{cssStyles:y}=t;let m;const x=`M0 0 
    a${u},${u} 0 0,1 ${h*.25},${-1*h*.1}
    a${p},${p} 1 0,1 ${h*.4},${-1*h*.1}
    a${f},${f} 1 0,1 ${h*.35},${h*.2}

    a${u},${u} 1 0,1 ${h*.15},${l*.35}
    a${g},${g} 1 0,1 ${-1*h*.15},${l*.65}

    a${f},${u} 1 0,1 ${-1*h*.25},${h*.15}
    a${p},${p} 1 0,1 ${-1*h*.5},0
    a${u},${u} 1 0,1 ${-1*h*.25},${-1*h*.15}

    a${u},${u} 1 0,1 ${-1*h*.1},${-1*l*.35}
    a${g},${g} 1 0,1 ${h*.1},${-1*l*.65}
  H0 V0 Z`;if(t.look==="handDrawn"){const b=Pt.svg(s),_=Vt(t,{}),S=b.path(x,_);m=s.insert(()=>S,":first-child"),m.attr("class","basic label-container").attr("style",mr(y))}else m=s.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",x);return o.attr("transform",`translate(${-n.width/2}, ${-n.height/2})`),m.attr("transform",`translate(${-h/2}, ${-l/2})`),zt(t,m),t.calcIntersect=function(b,_){return Nt.rect(b,_)},t.intersect=function(b){return P.info("Cloud intersect",t,b),Nt.rect(t,b)},s}d(k3,"cloud");async function w3(e,t){const{labelStyles:r,nodeStyles:i}=$t(t);t.labelStyle=r;const{shapeSvg:s,bbox:n,halfPadding:a,label:o}=await te(e,t,Qt(t)),h=n.width+8*a,l=n.height+2*a,u=5,f=`
    M${-h/2} ${l/2-u}
    v${-l+2*u}
    q0,-${u} ${u},-${u}
    h${h-2*u}
    q${u},0 ${u},${u}
    v${l-2*u}
    q0,${u} -${u},${u}
    h${-h+2*u}
    q-${u},0 -${u},-${u}
    Z
  `,p=s.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("style",i).attr("d",f);return s.append("line").attr("class","node-line-").attr("x1",-h/2).attr("y1",l/2).attr("x2",h/2).attr("y2",l/2),o.attr("transform",`translate(${-n.width/2}, ${-n.height/2})`),s.append(()=>o.node()),zt(t,p),t.calcIntersect=function(g,y){return Nt.rect(g,y)},t.intersect=function(g){return Nt.rect(t,g)},s}d(w3,"defaultMindmapNode");async function T3(e,t){const r={padding:t.padding??0};return Wf(e,t,r)}d(T3,"mindmapCircle");var WA=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:e3},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Zb},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:r3},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:a3},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Sb},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:Wf},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:_3},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:k3},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Xb},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Bb},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Wb},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:zb},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:u3},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Ob},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Eb},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:c3},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:mb},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Jb},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:n3},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:s3},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Db},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Ib},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:_b},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:kb},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:wb},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:qb},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:p3},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Rb},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:h3},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Yb},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:Tb},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Cb},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:f3},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:y3},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Ab},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:d3},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Lb},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:t3},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Ub},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Hb},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:yb},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:vb},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:l3},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:o3},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:g3},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Kb},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Gb}],qA=d(()=>{const t=[...Object.entries({state:i3,choice:xb,note:jb,rectWithTitle:Qb,labelRect:Vb,iconSquare:Fb,iconCircle:$b,icon:Nb,iconRounded:Mb,imageSquare:Pb,anchor:gb,kanbanItem:v3,mindmapCircle:T3,defaultMindmapNode:w3,classBox:x3,erBox:qf,requirementBox:b3}),...WA.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(s=>[s,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),S3=qA();function C3(e){return e in S3}d(C3,"isValidShape");var nu=new Map;async function au(e,t,r){let i,s;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const n=t.shape?S3[t.shape]:void 0;if(!n)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let a;r.config.securityLevel==="sandbox"?a="_top":t.linkTarget&&(a=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",a??null),s=await n(i,t,r)}else s=await n(e,t,r),i=s;return t.tooltip&&s.attr("title",t.tooltip),nu.set(t.id,i),t.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}d(au,"insertNode");var YA=d((e,t)=>{nu.set(t.id,e)},"setNodeElem"),GA=d(()=>{nu.clear()},"clear"),Jd=d(e=>{const t=nu.get(e.id);P.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode"),HA=d((e,t,r,i,s,n)=>{t.arrowTypeStart&&z0(e,"start",t.arrowTypeStart,r,i,s,n),t.arrowTypeEnd&&z0(e,"end",t.arrowTypeEnd,r,i,s,n)},"addEdgeMarkers"),UA={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},z0=d((e,t,r,i,s,n,a)=>{var f;const o=UA[r];if(!o){P.warn(`Unknown arrow type: ${r}`);return}const h=o.type,u=`${s}_${n}-${h}${t==="start"?"Start":"End"}`;if(a&&a.trim()!==""){const p=a.replace(/[^\dA-Za-z]/g,"_"),g=`${u}_${p}`;if(!document.getElementById(g)){const y=document.getElementById(u);if(y){const m=y.cloneNode(!0);m.id=g,m.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",a),o.fill&&b.setAttribute("fill",a)}),(f=y.parentNode)==null||f.appendChild(m)}}e.attr(`marker-${t}`,`url(${i}#${g})`)}else e.attr(`marker-${t}`,`url(${i}#${u})`)},"addEdgeMarker"),yh=new Map,lr=new Map,jA=d(()=>{yh.clear(),lr.clear()},"clear"),sc=d(e=>e?e.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),E3=d(async(e,t)=>{let r=Te(it().flowchart.htmlLabels);const{labelStyles:i}=$t(t);t.labelStyle=i;const s=await Wr(e,t.label,{style:t.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});P.info("abc82",t,t.labelType);const n=e.insert("g").attr("class","edgeLabel"),a=n.insert("g").attr("class","label").attr("data-id",t.id);a.node().appendChild(s);let o=s.getBBox();if(r){const l=s.children[0],u=_t(s);o=l.getBoundingClientRect(),u.attr("width",o.width),u.attr("height",o.height)}a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),yh.set(t.id,n),t.width=o.width,t.height=o.height;let h;if(t.startLabelLeft){const l=await Gs(t.startLabelLeft,sc(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),lr.get(t.id)||lr.set(t.id,{}),lr.get(t.id).startLeft=u,Yo(h,t.startLabelLeft)}if(t.startLabelRight){const l=await Gs(t.startLabelRight,sc(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=u.node().appendChild(l),f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),lr.get(t.id)||lr.set(t.id,{}),lr.get(t.id).startRight=u,Yo(h,t.startLabelRight)}if(t.endLabelLeft){const l=await Gs(t.endLabelLeft,sc(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),u.node().appendChild(l),lr.get(t.id)||lr.set(t.id,{}),lr.get(t.id).endLeft=u,Yo(h,t.endLabelLeft)}if(t.endLabelRight){const l=await Gs(t.endLabelRight,sc(t.labelStyle)),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),u.node().appendChild(l),lr.get(t.id)||lr.set(t.id,{}),lr.get(t.id).endRight=u,Yo(h,t.endLabelRight)}return s},"insertEdgeLabel");function Yo(e,t){it().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}d(Yo,"setTerminalWidth");var A3=d((e,t)=>{P.debug("Moving label abc88 ",e.id,e.label,yh.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const i=it(),{subGraphTitleTotalMargin:s}=zl(i);if(e.label){const n=yh.get(e.id);let a=e.x,o=e.y;if(r){const h=ie.calcLabelPosition(r);P.debug("Moving label "+e.label+" from (",a,",",o,") to (",h.x,",",h.y,") abc88"),t.updatedPath&&(a=h.x,o=h.y)}n.attr("transform",`translate(${a}, ${o+s/2})`)}if(e.startLabelLeft){const n=lr.get(e.id).startLeft;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.startLabelRight){const n=lr.get(e.id).startRight;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelLeft){const n=lr.get(e.id).endLeft;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelRight){const n=lr.get(e.id).endRight;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}},"positionEdgeLabel"),XA=d((e,t)=>{const r=e.x,i=e.y,s=Math.abs(t.x-r),n=Math.abs(t.y-i),a=e.width/2,o=e.height/2;return s>=a||n>=o},"outsideNode"),KA=d((e,t,r)=>{P.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,s=e.y,n=Math.abs(i-r.x),a=e.width/2;let o=r.x<t.x?a-n:a+n;const h=e.height/2,l=Math.abs(t.y-r.y),u=Math.abs(t.x-r.x);if(Math.abs(s-t.y)*a>Math.abs(i-t.x)*h){let f=r.y<t.y?t.y-h-s:s-h-t.y;o=u*f/l;const p={x:r.x<t.x?r.x+o:r.x-u+o,y:r.y<t.y?r.y+l-f:r.y-l+f};return o===0&&(p.x=t.x,p.y=t.y),u===0&&(p.x=t.x),l===0&&(p.y=t.y),P.debug(`abc89 top/bottom calc, Q ${l}, q ${f}, R ${u}, r ${o}`,p),p}else{r.x<t.x?o=t.x-a-i:o=i-a-t.x;let f=l*o/u,p=r.x<t.x?r.x+u-o:r.x-u+o,g=r.y<t.y?r.y+f:r.y-f;return P.debug(`sides calc abc89, Q ${l}, q ${f}, R ${u}, r ${o}`,{_x:p,_y:g}),o===0&&(p=t.x,g=t.y),u===0&&(p=t.x),l===0&&(g=t.y),{x:p,y:g}}},"intersection"),W0=d((e,t)=>{P.warn("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],s=!1;return e.forEach(n=>{if(P.info("abc88 checking point",n,t),!XA(t,n)&&!s){const a=KA(t,i,n);P.debug("abc88 inside",n,i,a),P.debug("abc88 intersection",a,t);let o=!1;r.forEach(h=>{o=o||h.x===a.x&&h.y===a.y}),r.some(h=>h.x===a.x&&h.y===a.y)?P.warn("abc88 no intersect",a,r):r.push(a),s=!0}else P.warn("abc88 outside",n,i),i=n,s||r.push(n)}),P.debug("returning points",r),r},"cutPathAtIntersect");function L3(e){const t=[],r=[];for(let i=1;i<e.length-1;i++){const s=e[i-1],n=e[i],a=e[i+1];(s.x===n.x&&n.y===a.y&&Math.abs(n.x-a.x)>5&&Math.abs(n.y-s.y)>5||s.y===n.y&&n.x===a.x&&Math.abs(n.x-s.x)>5&&Math.abs(n.y-a.y)>5)&&(t.push(n),r.push(i))}return{cornerPoints:t,cornerPointPositions:r}}d(L3,"extractCornerPoints");var q0=d(function(e,t,r){const i=t.x-e.x,s=t.y-e.y,n=Math.sqrt(i*i+s*s),a=r/n;return{x:t.x-a*i,y:t.y-a*s}},"findAdjacentPoint"),QA=d(function(e){const{cornerPointPositions:t}=L3(e),r=[];for(let i=0;i<e.length;i++)if(t.includes(i)){const s=e[i-1],n=e[i+1],a=e[i],o=q0(s,a,5),h=q0(n,a,5),l=h.x-o.x,u=h.y-o.y;r.push(o);const f=Math.sqrt(2)*2;let p={x:a.x,y:a.y};if(Math.abs(n.x-s.x)>10&&Math.abs(n.y-s.y)>=10){P.debug("Corner point fixing",Math.abs(n.x-s.x),Math.abs(n.y-s.y));const g=5;a.x===o.x?p={x:l<0?o.x-g+f:o.x+g-f,y:u<0?o.y-f:o.y+f}:p={x:l<0?o.x-f:o.x+f,y:u<0?o.y-g+f:o.y+g-f}}else P.debug("Corner point skipping fixing",Math.abs(n.x-s.x),Math.abs(n.y-s.y));r.push(p,h)}else r.push(e[i]);return r},"fixCorners"),ZA=d((e,t,r)=>{const i=e-t-r,s=2,n=2,a=s+n,o=Math.floor(i/a),h=Array(o).fill(`${s} ${n}`).join(" ");return`0 ${t} ${h} ${r}`},"generateDashArray"),D3=d(function(e,t,r,i,s,n,a,o=!1){var D;const{handDrawnSeed:h}=it();let l=t.points,u=!1;const f=s;var p=n;const g=[];for(const E in t.cssCompiledStyles)Bf(E)||g.push(t.cssCompiledStyles[E]);P.debug("UIO intersect check",t.points,p.x,f.x),p.intersect&&f.intersect&&!o&&(l=l.slice(1,t.points.length-1),l.unshift(f.intersect(l[0])),P.debug("Last point UIO",t.start,"-->",t.end,l[l.length-1],p,p.intersect(l[l.length-1])),l.push(p.intersect(l[l.length-1])));const y=btoa(JSON.stringify(l));t.toCluster&&(P.info("to cluster abc88",r.get(t.toCluster)),l=W0(t.points,r.get(t.toCluster).node),u=!0),t.fromCluster&&(P.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(l,null,2)),l=W0(l.reverse(),r.get(t.fromCluster).node).reverse(),u=!0);let m=l.filter(E=>!Number.isNaN(E.y));m=QA(m);let x=ta;switch(x=Qs,t.curve){case"linear":x=Qs;break;case"basis":x=ta;break;case"cardinal":x=Fy;break;case"bumpX":x=By;break;case"bumpY":x=Iy;break;case"catmullRom":x=Oy;break;case"monotoneX":x=Gy;break;case"monotoneY":x=Hy;break;case"natural":x=jy;break;case"step":x=Xy;break;case"stepAfter":x=Qy;break;case"stepBefore":x=Ky;break;default:x=ta}const{x:b,y:_}=Ix(t),S=fl().x(b).y(_).curve(x);let C;switch(t.thickness){case"normal":C="edge-thickness-normal";break;case"thick":C="edge-thickness-thick";break;case"invisible":C="edge-thickness-invisible";break;default:C="edge-thickness-normal"}switch(t.pattern){case"solid":C+=" edge-pattern-solid";break;case"dotted":C+=" edge-pattern-dotted";break;case"dashed":C+=" edge-pattern-dashed";break;default:C+=" edge-pattern-solid"}let k,v=t.curve==="rounded"?R3(B3(m,t),5):S(m);const A=Array.isArray(t.style)?t.style:[t.style];let L=A.find(E=>E==null?void 0:E.startsWith("stroke:")),w=!1;if(t.look==="handDrawn"){const E=Pt.svg(e);Object.assign([],m);const M=E.path(v,{roughness:.3,seed:h});C+=" transition",k=_t(M).select("path").attr("id",t.id).attr("class"," "+C+(t.classes?" "+t.classes:"")).attr("style",A?A.reduce((I,B)=>I+";"+B,""):"");let F=k.attr("d");k.attr("d",F),e.node().appendChild(k.node())}else{const E=g.join(";"),M=A?A.reduce((nt,ht)=>nt+ht+";",""):"";let F="";t.animate&&(F=" edge-animation-fast"),t.animation&&(F=" edge-animation-"+t.animation);const I=(E?E+";"+M+";":M)+";"+(A?A.reduce((nt,ht)=>nt+";"+ht,""):"");k=e.append("path").attr("d",v).attr("id",t.id).attr("class"," "+C+(t.classes?" "+t.classes:"")+(F??"")).attr("style",I),L=(D=I.match(/stroke:([^;]+)/))==null?void 0:D[1],w=t.animate===!0||!!t.animation||E.includes("animation");const B=k.node(),X=typeof B.getTotalLength=="function"?B.getTotalLength():0,$=P0[t.arrowTypeStart]||0,G=P0[t.arrowTypeEnd]||0;if(t.look==="neo"&&!w){const ht=`stroke-dasharray: ${t.pattern==="dotted"||t.pattern==="dashed"?ZA(X,$,G):`0 ${$} ${X-$-G} ${G}`}; stroke-dashoffset: 0;`;k.attr("style",ht+k.attr("style"))}}k.attr("data-edge",!0),k.attr("data-et","edge"),k.attr("data-id",t.id),k.attr("data-points",y),t.showPoints&&m.forEach(E=>{e.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",E.x).attr("cy",E.y)});let R="";(it().flowchart.arrowMarkerAbsolute||it().state.arrowMarkerAbsolute)&&(R=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,R=R.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),P.info("arrowTypeStart",t.arrowTypeStart),P.info("arrowTypeEnd",t.arrowTypeEnd),HA(k,t,R,a,i,L);const T=Math.floor(l.length/2),V=l[T];ie.isLabelCoordinateInPath(V,k.attr("d"))||(u=!0);let N={};return u&&(N.updatedPath=l),N.originalPath=t.points,N},"insertEdge");function R3(e,t){if(e.length<2)return"";let r="";const i=e.length,s=1e-5;for(let n=0;n<i;n++){const a=e[n],o=e[n-1],h=e[n+1];if(n===0)r+=`M${a.x},${a.y}`;else if(n===i-1)r+=`L${a.x},${a.y}`;else{const l=a.x-o.x,u=a.y-o.y,f=h.x-a.x,p=h.y-a.y,g=Math.hypot(l,u),y=Math.hypot(f,p);if(g<s||y<s){r+=`L${a.x},${a.y}`;continue}const m=l/g,x=u/g,b=f/y,_=p/y,S=m*b+x*_,C=Math.max(-1,Math.min(1,S)),k=Math.acos(C);if(k<s||Math.abs(Math.PI-k)<s){r+=`L${a.x},${a.y}`;continue}const v=Math.min(t/Math.sin(k/2),g/2,y/2),A=a.x-m*v,L=a.y-x*v,w=a.x+b*v,R=a.y+_*v;r+=`L${A},${L}`,r+=`Q${a.x},${a.y} ${w},${R}`}}return r}d(R3,"generateRoundedPath");function t1(e,t){if(!e||!t)return{angle:0,deltaX:0,deltaY:0};const r=t.x-e.x,i=t.y-e.y;return{angle:Math.atan2(i,r),deltaX:r,deltaY:i}}d(t1,"calculateDeltaAndAngle");function B3(e,t){const r=e.map(s=>({...s}));if(e.length>=2&&fr[t.arrowTypeStart]){const s=fr[t.arrowTypeStart],n=e[0],a=e[1],{angle:o}=t1(n,a),h=s*Math.cos(o),l=s*Math.sin(o);r[0].x=n.x+h,r[0].y=n.y+l}const i=e.length;if(i>=2&&fr[t.arrowTypeEnd]){const s=fr[t.arrowTypeEnd],n=e[i-1],a=e[i-2],{angle:o}=t1(a,n),h=s*Math.cos(o),l=s*Math.sin(o);r[i-1].x=n.x-h,r[i-1].y=n.y-l}return r}d(B3,"applyMarkerOffsetsToPoints");var JA=d((e,t,r,i)=>{t.forEach(s=>{g9[s](e,r,i)})},"insertMarkers"),t9=d((e,t,r)=>{P.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),e9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),r9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),i9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),s9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),n9=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),a9=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),o9=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),l9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),c9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),h9=d((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),s.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),u9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),d9=d((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const s=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");s.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),s.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),f9=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),p9=d((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),g9={extension:t9,composition:e9,aggregation:r9,dependency:i9,lollipop:s9,point:n9,circle:a9,cross:o9,barb:l9,only_one:c9,zero_or_one:h9,one_or_more:u9,zero_or_more:d9,requirement_arrow:f9,requirement_contains:p9},I3=JA,y9={common:Ct,getConfig:xe,insertCluster:zf,insertEdge:D3,insertEdgeLabel:E3,insertMarkers:I3,insertNode:au,interpolateToCurve:If,labelHelper:te,log:P,positionEdgeLabel:A3},bl={},N3=d(e=>{for(const t of e)bl[t.name]=t},"registerLayoutLoaders"),m9=d(()=>{N3([{name:"dagre",loader:d(async()=>await ue(()=>Promise.resolve().then(()=>ZB),void 0),"loader")},{name:"cose-bilkent",loader:d(async()=>await ue(()=>Promise.resolve().then(()=>eI),void 0),"loader")}])},"registerDefaultLayoutLoaders");m9();var wo=d(async(e,t)=>{if(!(e.layoutAlgorithm in bl))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=bl[e.layoutAlgorithm];return(await r.loader()).render(e,t,y9,{algorithm:r.algorithm})},"render"),Wl=d((e="",{fallback:t="dagre"}={})=>{if(e in bl)return e;if(t in bl)return P.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),$3="c4",x9=d(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),b9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>QI);return{diagram:t}},void 0);return{id:$3,diagram:e}},"loader"),v9={id:$3,detector:x9,loader:b9},_9=v9,M3="flowchart",k9=d((e,t)=>{var r,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),w9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>rp);return{diagram:t}},void 0);return{id:M3,diagram:e}},"loader"),T9={id:M3,detector:k9,loader:w9},S9=T9,F3="flowchart-v2",C9=d((e,t)=>{var r,i,s;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((s=t==null?void 0:t.flowchart)==null?void 0:s.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),E9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>rp);return{diagram:t}},void 0);return{id:F3,diagram:e}},"loader"),A9={id:F3,detector:C9,loader:E9},L9=A9,P3="er",D9=d(e=>/^\s*erDiagram/.test(e),"detector"),R9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>mN);return{diagram:t}},void 0);return{id:P3,diagram:e}},"loader"),B9={id:P3,detector:D9,loader:R9},I9=B9,O3="gitGraph",N9=d(e=>/^\s*gitGraph/.test(e),"detector"),$9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>lM);return{diagram:t}},void 0);return{id:O3,diagram:e}},"loader"),M9={id:O3,detector:N9,loader:$9},F9=M9,V3="gantt",P9=d(e=>/^\s*gantt/.test(e),"detector"),O9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>JM);return{diagram:t}},void 0);return{id:V3,diagram:e}},"loader"),V9={id:V3,detector:P9,loader:O9},z9=V9,z3="info",W9=d(e=>/^\s*info/.test(e),"detector"),q9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>oF);return{diagram:t}},void 0);return{id:z3,diagram:e}},"loader"),Y9={id:z3,detector:W9,loader:q9},W3="pie",G9=d(e=>/^\s*pie/.test(e),"detector"),H9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>TF);return{diagram:t}},void 0);return{id:W3,diagram:e}},"loader"),U9={id:W3,detector:G9,loader:H9},q3="quadrantChart",j9=d(e=>/^\s*quadrantChart/.test(e),"detector"),X9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>IF);return{diagram:t}},void 0);return{id:q3,diagram:e}},"loader"),K9={id:q3,detector:j9,loader:X9},Q9=K9,Y3="xychart",Z9=d(e=>/^\s*xychart(-beta)?/.test(e),"detector"),J9=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>jF);return{diagram:t}},void 0);return{id:Y3,diagram:e}},"loader"),tL={id:Y3,detector:Z9,loader:J9},eL=tL,G3="requirement",rL=d(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),iL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>eP);return{diagram:t}},void 0);return{id:G3,diagram:e}},"loader"),sL={id:G3,detector:rL,loader:iL},nL=sL,H3="sequence",aL=d(e=>/^\s*sequenceDiagram/.test(e),"detector"),oL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>WP);return{diagram:t}},void 0);return{id:H3,diagram:e}},"loader"),lL={id:H3,detector:aL,loader:oL},cL=lL,U3="class",hL=d((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),uL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>jP);return{diagram:t}},void 0);return{id:U3,diagram:e}},"loader"),dL={id:U3,detector:hL,loader:uL},fL=dL,j3="classDiagram",pL=d((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),gL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>KP);return{diagram:t}},void 0);return{id:j3,diagram:e}},"loader"),yL={id:j3,detector:pL,loader:gL},mL=yL,X3="state",xL=d((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),bL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>OO);return{diagram:t}},void 0);return{id:X3,diagram:e}},"loader"),vL={id:X3,detector:xL,loader:bL},_L=vL,K3="stateDiagram",kL=d((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),wL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>zO);return{diagram:t}},void 0);return{id:K3,diagram:e}},"loader"),TL={id:K3,detector:kL,loader:wL},SL=TL,Q3="journey",CL=d(e=>/^\s*journey/.test(e),"detector"),EL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>cV);return{diagram:t}},void 0);return{id:Q3,diagram:e}},"loader"),AL={id:Q3,detector:CL,loader:EL},LL=AL,DL=d((e,t,r)=>{P.debug(`rendering svg for syntax error
`);const i=es(t),s=i.append("g");i.attr("viewBox","0 0 2412 512"),Er(i,100,512,!0),s.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),s.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),s.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),s.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),s.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),s.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),s.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),s.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),Z3={draw:DL},RL=Z3,BL={db:{},renderer:Z3,parser:{parse:d(()=>{},"parse")}},IL=BL,J3="flowchart-elk",NL=d((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),$L=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>rp);return{diagram:t}},void 0);return{id:J3,diagram:e}},"loader"),ML={id:J3,detector:NL,loader:$L},FL=ML,t4="timeline",PL=d(e=>/^\s*timeline/.test(e),"detector"),OL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>RV);return{diagram:t}},void 0);return{id:t4,diagram:e}},"loader"),VL={id:t4,detector:PL,loader:OL},zL=VL,e4="mindmap",WL=d(e=>/^\s*mindmap/.test(e),"detector"),qL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>VV);return{diagram:t}},void 0);return{id:e4,diagram:e}},"loader"),YL={id:e4,detector:WL,loader:qL},GL=YL,r4="kanban",HL=d(e=>/^\s*kanban/.test(e),"detector"),UL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>az);return{diagram:t}},void 0);return{id:r4,diagram:e}},"loader"),jL={id:r4,detector:HL,loader:UL},XL=jL,i4="sankey",KL=d(e=>/^\s*sankey(-beta)?/.test(e),"detector"),QL=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>Yz);return{diagram:t}},void 0);return{id:i4,diagram:e}},"loader"),ZL={id:i4,detector:KL,loader:QL},JL=ZL,s4="packet",tD=d(e=>/^\s*packet(-beta)?/.test(e),"detector"),eD=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>eW);return{diagram:t}},void 0);return{id:s4,diagram:e}},"loader"),rD={id:s4,detector:tD,loader:eD},n4="radar",iD=d(e=>/^\s*radar-beta/.test(e),"detector"),sD=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>kW);return{diagram:t}},void 0);return{id:n4,diagram:e}},"loader"),nD={id:n4,detector:iD,loader:sD},a4="block",aD=d(e=>/^\s*block(-beta)?/.test(e),"detector"),oD=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>jq);return{diagram:t}},void 0);return{id:a4,diagram:e}},"loader"),lD={id:a4,detector:aD,loader:oD},cD=lD,o4="architecture",hD=d(e=>/^\s*architecture/.test(e),"detector"),uD=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>pY);return{diagram:t}},void 0);return{id:o4,diagram:e}},"loader"),dD={id:o4,detector:hD,loader:uD},fD=dD,l4="treemap",pD=d(e=>/^\s*treemap/.test(e),"detector"),gD=d(async()=>{const{diagram:e}=await ue(async()=>{const{diagram:t}=await Promise.resolve().then(()=>SY);return{diagram:t}},void 0);return{id:l4,diagram:e}},"loader"),yD={id:l4,detector:pD,loader:gD},Y0=!1,ou=d(()=>{Y0||(Y0=!0,Wc("error",IL,e=>e.toLowerCase().trim()==="error"),Wc("---",{db:{clear:d(()=>{},"clear")},styles:{},renderer:{draw:d(()=>{},"draw")},parser:{parse:d(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:d(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),fd(FL,GL,fD),fd(_9,XL,mL,fL,I9,z9,Y9,U9,nL,cL,L9,S9,zL,F9,SL,_L,LL,Q9,JL,rD,eL,cD,nD,yD))},"addDiagrams"),mD=d(async()=>{P.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(en).map(async([r,{detector:i,loader:s}])=>{if(s)try{xd(r)}catch{try{const{diagram:n,id:a}=await s();Wc(a,n,i)}catch(n){throw P.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete en[r],n}}}))).filter(r=>r.status==="rejected");if(t.length>0){P.error(`Failed to load ${t.length} external diagrams`);for(const r of t)P.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),xD="graphics-document document";function c4(e,t){e.attr("role",xD),t!==""&&e.attr("aria-roledescription",t)}d(c4,"setA11yDiagramInfo");function h4(e,t,r,i){if(e.insert!==void 0){if(r){const s=`chart-desc-${i}`;e.attr("aria-describedby",s),e.insert("desc",":first-child").attr("id",s).text(r)}if(t){const s=`chart-title-${i}`;e.attr("aria-labelledby",s),e.insert("title",":first-child").attr("id",s).text(t)}}}d(h4,"addSVGa11yTitleDescription");var Zs,e1=(Zs=class{constructor(t,r,i,s,n){this.type=t,this.text=r,this.db=i,this.parser=s,this.renderer=n}static async fromText(t,r={}){var l,u;const i=xe(),s=rf(t,i);t=yA(t)+`
`;try{xd(s)}catch{const f=Pk(s);if(!f)throw new _2(`Diagram ${s} not found.`);const{id:p,diagram:g}=await f();Wc(p,g)}const{db:n,parser:a,renderer:o,init:h}=xd(s);return a.parser&&(a.parser.yy=n),(l=n.clear)==null||l.call(n),h==null||h(i),r.title&&((u=n.setDiagramTitle)==null||u.call(n,r.title)),await a.parse(t),new Zs(s,t,n,a,o)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},d(Zs,"Diagram"),Zs),G0=[],bD=d(()=>{G0.forEach(e=>{e()}),G0=[]},"attachFunctions"),vD=d(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function u4(e){const t=e.match(v2);if(!t)return{text:e,metadata:{}};let r=eu(t[1],{schema:tu})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}d(u4,"extractFrontMatter");var _D=d(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),kD=d(e=>{const{text:t,metadata:r}=u4(e),{displayMode:i,title:s,config:n={}}=r;return i&&(n.gantt||(n.gantt={}),n.gantt.displayMode=i),{title:s,config:n,text:t}},"processFrontmatter"),wD=d(e=>{const t=ie.detectInit(e)??{},r=ie.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>i==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:aA(e),directive:t}},"processDirectives");function Yf(e){const t=_D(e),r=kD(t),i=wD(r.text),s=Cr(r.config,i.directive);return e=vD(i.text),{code:e,title:r.title,config:s}}d(Yf,"preprocessDiagram");function d4(e){const t=new TextEncoder().encode(e),r=Array.from(t,i=>String.fromCodePoint(i)).join("");return btoa(r)}d(d4,"toBase64");var TD=5e4,SD="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",CD="sandbox",ED="loose",AD="http://www.w3.org/2000/svg",LD="http://www.w3.org/1999/xlink",DD="http://www.w3.org/1999/xhtml",RD="100%",BD="100%",ID="border:0;margin:0;",ND="margin:0",$D="allow-top-navigation-by-user-activation allow-popups",MD='The "iframe" tag is not supported by your browser.',FD=["foreignobject"],PD=["dominant-baseline"];function Gf(e){const t=Yf(e);return Vc(),Jk(t.config??{}),t}d(Gf,"processAndSetConfigs");async function f4(e,t){ou();try{const{code:r,config:i}=Gf(e);return{diagramType:(await g4(r)).type,config:i}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}d(f4,"parse");var H0=d((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),OD=d((e,t=new Map)=>{var i;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const o=e.htmlLabels??((i=e.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(h=>{$c(h.styles)||o.forEach(l=>{r+=H0(h.id,l,h.styles)}),$c(h.textStyles)||(r+=H0(h.id,"tspan",((h==null?void 0:h.textStyles)||[]).map(l=>l.replace("color","fill"))))})}return r},"createCssStyles"),VD=d((e,t,r,i)=>{const s=OD(e,r),n=xw(t,s,e.themeVariables);return pk(gk(`${i}{${n}}`),yk)},"createUserStyles"),zD=d((e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=ki(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),WD=d((e="",t)=>{var s,n;const r=(n=(s=t==null?void 0:t.viewBox)==null?void 0:s.baseVal)!=null&&n.height?t.viewBox.baseVal.height+"px":BD,i=d4(`<body style="${ND}">${e}</body>`);return`<iframe style="width:${RD};height:${r};${ID}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${$D}">
  ${MD}
</iframe>`},"putIntoIFrame"),U0=d((e,t,r,i,s)=>{const n=e.append("div");n.attr("id",r),i&&n.attr("style",i);const a=n.append("svg").attr("id",t).attr("width","100%").attr("xmlns",AD);return s&&a.attr("xmlns:xlink",s),a.append("g"),e},"appendDivSvgG");function r1(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}d(r1,"sandboxedIframe");var qD=d((e,t,r,i)=>{var s,n,a;(s=e.getElementById(t))==null||s.remove(),(n=e.getElementById(r))==null||n.remove(),(a=e.getElementById(i))==null||a.remove()},"removeExistingElements"),YD=d(async function(e,t,r){var V,N,D,E,M,F;ou();const i=Gf(t);t=i.code;const s=xe();P.debug(s),t.length>((s==null?void 0:s.maxTextSize)??TD)&&(t=SD);const n="#"+e,a="i"+e,o="#"+a,h="d"+e,l="#"+h,u=d(()=>{const B=_t(p?o:l).node();B&&"remove"in B&&B.remove()},"removeTempElements");let f=_t("body");const p=s.securityLevel===CD,g=s.securityLevel===ED,y=s.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),p){const I=r1(_t(r),a);f=_t(I.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=_t(r);U0(f,e,h,`font-family: ${y}`,LD)}else{if(qD(document,e,h,a),p){const I=r1(_t("body"),a);f=_t(I.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=_t("body");U0(f,e,h)}let m,x;try{m=await e1.fromText(t,{title:i.title})}catch(I){if(s.suppressErrorRendering)throw u(),I;m=await e1.fromText("error"),x=I}const b=f.select(l).node(),_=m.type,S=b.firstChild,C=S.firstChild,k=(N=(V=m.renderer).getClasses)==null?void 0:N.call(V,t,m),v=VD(s,_,k,n),A=document.createElement("style");A.innerHTML=v,S.insertBefore(A,C);try{await m.renderer.draw(t,e,dd.version,m)}catch(I){throw s.suppressErrorRendering?u():RL.draw(t,e,dd.version),I}const L=f.select(`${l} svg`),w=(E=(D=m.db).getAccTitle)==null?void 0:E.call(D),R=(F=(M=m.db).getAccDescription)==null?void 0:F.call(M);y4(_,L,w,R),f.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",DD);let T=f.select(l).node().innerHTML;if(P.debug("config.arrowMarkerAbsolute",s.arrowMarkerAbsolute),T=zD(T,p,Te(s.arrowMarkerAbsolute)),p){const I=f.select(l+" svg").node();T=WD(T,I)}else g||(T=ro.sanitize(T,{ADD_TAGS:FD,ADD_ATTR:PD,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(bD(),x)throw x;return u(),{diagramType:_,svg:T,bindFunctions:m.db.bindFunctions}},"render");function p4(e={}){var i;const t=Fe({},e);t!=null&&t.fontFamily&&!((i=t.themeVariables)!=null&&i.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),Qk(t),t!=null&&t.theme&&t.theme in Ki?t.themeVariables=Ki[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=Ki.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?Kk(t):S2();ef(r.logLevel),ou()}d(p4,"initialize");var g4=d((e,t={})=>{const{code:r}=Yf(e);return e1.fromText(r,t)},"getDiagramFromText");function y4(e,t,r,i){c4(t,e),h4(t,r,i,t.attr("id"))}d(y4,"addA11yInfo");var hn=Object.freeze({render:YD,parse:f4,getDiagramFromText:g4,initialize:p4,getConfig:xe,setConfig:C2,getSiteConfig:S2,updateSiteConfig:Zk,reset:d(()=>{Vc()},"reset"),globalReset:d(()=>{Vc(so)},"globalReset"),defaultConfig:so});ef(xe().logLevel);Vc(xe());var GD=d((e,t,r)=>{P.warn(e),Pf(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),m4=d(async function(e={querySelector:".mermaid"}){try{await HD(e)}catch(t){if(Pf(t)&&P.error(t.str),Vr.parseError&&Vr.parseError(t),!e.suppressErrors)throw P.error("Use the suppressErrors option to suppress these errors"),t}},"run"),HD=d(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const i=hn.getConfig();P.debug(`${e?"":"No "}Callback function found`);let s;if(r)s=r;else if(t)s=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");P.debug(`Found ${s.length} diagrams`),(i==null?void 0:i.startOnLoad)!==void 0&&(P.debug("Start On Load: "+(i==null?void 0:i.startOnLoad)),hn.updateSiteConfig({startOnLoad:i==null?void 0:i.startOnLoad}));const n=new ie.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let a;const o=[];for(const h of Array.from(s)){if(P.info("Rendering diagram: "+h.id),h.getAttribute("data-processed"))continue;h.setAttribute("data-processed","true");const l=`mermaid-${n.next()}`;a=h.innerHTML,a=g2(ie.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=ie.detectInit(a);u&&P.debug("Detected early reinit: ",u);try{const{svg:f,bindFunctions:p}=await _4(l,a,h);h.innerHTML=f,e&&await e(l),p&&p(h)}catch(f){GD(f,o,Vr.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),x4=d(function(e){hn.initialize(e)},"initialize"),UD=d(async function(e,t,r){P.warn("mermaid.init is deprecated. Please use run instead."),e&&x4(e);const i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await m4(i)},"init"),jD=d(async(e,{lazyLoad:t=!0}={})=>{ou(),fd(...e),t===!1&&await mD()},"registerExternalDiagrams"),b4=d(function(){if(Vr.startOnLoad){const{startOnLoad:e}=hn.getConfig();e&&Vr.run().catch(t=>P.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",b4,!1);var XD=d(function(e){Vr.parseError=e},"setParseErrorHandler"),mh=[],Gu=!1,v4=d(async()=>{if(!Gu){for(Gu=!0;mh.length>0;){const e=mh.shift();if(e)try{await e()}catch(t){P.error("Error executing queue",t)}}Gu=!1}},"executeQueue"),KD=d(async(e,t)=>new Promise((r,i)=>{const s=d(()=>new Promise((n,a)=>{hn.parse(e,t).then(o=>{n(o),r(o)},o=>{var h;P.error("Error parsing",o),(h=Vr.parseError)==null||h.call(Vr,o),a(o),i(o)})}),"performCall");mh.push(s),v4().catch(i)}),"parse"),_4=d((e,t,r)=>new Promise((i,s)=>{const n=d(()=>new Promise((a,o)=>{hn.render(e,t,r).then(h=>{a(h),i(h)},h=>{var l;P.error("Error parsing",h),(l=Vr.parseError)==null||l.call(Vr,h),o(h),s(h)})}),"performCall");mh.push(n),v4().catch(s)}),"render"),QD=d(()=>Object.keys(en).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),Vr={startOnLoad:!0,mermaidAPI:hn,parse:KD,render:_4,init:UD,run:m4,registerExternalDiagrams:jD,registerLayoutLoaders:N3,initialize:x4,parseError:void 0,contentLoaded:b4,setParseErrorHandler:XD,detectType:rf,registerIconPacks:Ux,getRegisteredDiagramsMetadata:QD},zY=Vr;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var ZD=Object.defineProperty,Pr=(e,t)=>ZD(e,"name",{value:t,configurable:!0}),j0=Pr(async()=>await ue(()=>Promise.resolve().then(()=>EY),void 0),"loader"),JD=["elk.stress","elk.force","elk.mrtree","elk.sporeOverlap"],tR=[{name:"elk",loader:j0,algorithm:"elk.layered"},...JD.map(e=>({name:e,loader:j0,algorithm:e}))],WY=tR,eR="\0",Rs="\0",X0="";class Nr{constructor(t={}){this._isDirected=Object.prototype.hasOwnProperty.call(t,"directed")?t.directed:!0,this._isMultigraph=Object.prototype.hasOwnProperty.call(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.prototype.hasOwnProperty.call(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=Fo(void 0),this._defaultEdgeLabelFn=Fo(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Rs]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return Yp(t)||(t=Fo(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return Dn(this._nodes)}sources(){var t=this;return Wi(this.nodes(),function(r){return $c(t._in[r])})}sinks(){var t=this;return Wi(this.nodes(),function(r){return $c(t._out[r])})}setNodes(t,r){var i=arguments,s=this;return yt(t,function(n){i.length>1?s.setNode(n,r):s.setNode(n)}),this}setNode(t,r){return Object.prototype.hasOwnProperty.call(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=r),this):(this._nodes[t]=arguments.length>1?r:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=Rs,this._children[t]={},this._children[Rs][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}removeNode(t){if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var r=i=>this.removeEdge(this._edgeObjs[i]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],yt(this.children(t),i=>{this.setParent(i)}),delete this._children[t]),yt(Dn(this._in[t]),r),delete this._in[t],delete this._preds[t],yt(Dn(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Me(r))r=Rs;else{r+="";for(var i=r;!Me(i);i=this.parent(i))if(i===t)throw new Error("Setting "+r+" as parent of "+t+" would create a cycle");this.setNode(r)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=r,this._children[r][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var r=this._parent[t];if(r!==Rs)return r}}children(t){if(Me(t)&&(t=Rs),this._isCompound){var r=this._children[t];if(r)return Dn(r)}else{if(t===Rs)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var r=this._preds[t];if(r)return Dn(r)}successors(t){var r=this._sucs[t];if(r)return Dn(r)}neighbors(t){var r=this.predecessors(t);if(r)return _k(r,this.successors(t))}isLeaf(t){var r;return this.isDirected()?r=this.successors(t):r=this.neighbors(t),r.length===0}filterNodes(t){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var i=this;yt(this._nodes,function(a,o){t(o)&&r.setNode(o,a)}),yt(this._edgeObjs,function(a){r.hasNode(a.v)&&r.hasNode(a.w)&&r.setEdge(a,i.edge(a))});var s={};function n(a){var o=i.parent(a);return o===void 0||r.hasNode(o)?(s[a]=o,o):o in s?s[o]:n(o)}return this._isCompound&&yt(r.nodes(),function(a){r.setParent(a,n(a))}),r}setDefaultEdgeLabel(t){return Yp(t)||(t=Fo(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return Xi(this._edgeObjs)}setPath(t,r){var i=this,s=arguments;return Rl(t,function(n,a){return s.length>1?i.setEdge(n,a,r):i.setEdge(n,a),a}),this}setEdge(){var t,r,i,s,n=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(t=a.v,r=a.w,i=a.name,arguments.length===2&&(s=arguments[1],n=!0)):(t=a,r=arguments[1],i=arguments[3],arguments.length>2&&(s=arguments[2],n=!0)),t=""+t,r=""+r,Me(i)||(i=""+i);var o=Go(this._isDirected,t,r,i);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,o))return n&&(this._edgeLabels[o]=s),this;if(!Me(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this._edgeLabels[o]=n?s:this._defaultEdgeLabelFn(t,r,i);var h=rR(this._isDirected,t,r,i);return t=h.v,r=h.w,Object.freeze(h),this._edgeObjs[o]=h,K0(this._preds[r],t),K0(this._sucs[t],r),this._in[r][o]=h,this._out[t][o]=h,this._edgeCount++,this}edge(t,r,i){var s=arguments.length===1?Hu(this._isDirected,arguments[0]):Go(this._isDirected,t,r,i);return this._edgeLabels[s]}hasEdge(t,r,i){var s=arguments.length===1?Hu(this._isDirected,arguments[0]):Go(this._isDirected,t,r,i);return Object.prototype.hasOwnProperty.call(this._edgeLabels,s)}removeEdge(t,r,i){var s=arguments.length===1?Hu(this._isDirected,arguments[0]):Go(this._isDirected,t,r,i),n=this._edgeObjs[s];return n&&(t=n.v,r=n.w,delete this._edgeLabels[s],delete this._edgeObjs[s],Q0(this._preds[r],t),Q0(this._sucs[t],r),delete this._in[r][s],delete this._out[t][s],this._edgeCount--),this}inEdges(t,r){var i=this._in[t];if(i){var s=Xi(i);return r?Wi(s,function(n){return n.v===r}):s}}outEdges(t,r){var i=this._out[t];if(i){var s=Xi(i);return r?Wi(s,function(n){return n.w===r}):s}}nodeEdges(t,r){var i=this.inEdges(t,r);if(i)return i.concat(this.outEdges(t,r))}}Nr.prototype._nodeCount=0;Nr.prototype._edgeCount=0;function K0(e,t){e[t]?e[t]++:e[t]=1}function Q0(e,t){--e[t]||delete e[t]}function Go(e,t,r,i){var s=""+t,n=""+r;if(!e&&s>n){var a=s;s=n,n=a}return s+X0+n+X0+(Me(i)?eR:i)}function rR(e,t,r,i){var s=""+t,n=""+r;if(!e&&s>n){var a=s;s=n,n=a}var o={v:s,w:n};return i&&(o.name=i),o}function Hu(e,t){return Go(e,t.v,t.w,t.name)}class iR{constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,r=t._prev;if(r!==t)return Z0(r),r}enqueue(t){var r=this._sentinel;t._prev&&t._next&&Z0(t),t._next=r._next,r._next._prev=t,r._next=t,t._prev=r}toString(){for(var t=[],r=this._sentinel,i=r._prev;i!==r;)t.push(JSON.stringify(i,sR)),i=i._prev;return"["+t.join(", ")+"]"}}function Z0(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function sR(e,t){if(e!=="_next"&&e!=="_prev")return t}var nR=Fo(1);function aR(e,t){if(e.nodeCount()<=1)return[];var r=lR(e,t||nR),i=oR(r.graph,r.buckets,r.zeroIdx);return Bl(ze(i,function(s){return e.outEdges(s.v,s.w)}))}function oR(e,t,r){for(var i=[],s=t[t.length-1],n=t[0],a;e.nodeCount();){for(;a=n.dequeue();)Uu(e,t,r,a);for(;a=s.dequeue();)Uu(e,t,r,a);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(a=t[o].dequeue(),a){i=i.concat(Uu(e,t,r,a,!0));break}}}return i}function Uu(e,t,r,i,s){var n=s?[]:void 0;return yt(e.inEdges(i.v),function(a){var o=e.edge(a),h=e.node(a.v);s&&n.push({v:a.v,w:a.w}),h.out-=o,i1(t,r,h)}),yt(e.outEdges(i.v),function(a){var o=e.edge(a),h=a.w,l=e.node(h);l.in-=o,i1(t,r,l)}),e.removeNode(i.v),n}function lR(e,t){var r=new Nr,i=0,s=0;yt(e.nodes(),function(o){r.setNode(o,{v:o,in:0,out:0})}),yt(e.edges(),function(o){var h=r.edge(o.v,o.w)||0,l=t(o),u=h+l;r.setEdge(o.v,o.w,u),s=Math.max(s,r.node(o.v).out+=l),i=Math.max(i,r.node(o.w).in+=l)});var n=io(s+i+3).map(function(){return new iR}),a=i+1;return yt(r.nodes(),function(o){i1(n,a,r.node(o))}),{graph:r,buckets:n,zeroIdx:a}}function i1(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}function cR(e){var t=e.graph().acyclicer==="greedy"?aR(e,r(e)):hR(e);yt(t,function(i){var s=e.edge(i);e.removeEdge(i),s.forwardName=i.name,s.reversed=!0,e.setEdge(i.w,i.v,s,Z1("rev"))});function r(i){return function(s){return i.edge(s).weight}}}function hR(e){var t=[],r={},i={};function s(n){Object.prototype.hasOwnProperty.call(i,n)||(i[n]=!0,r[n]=!0,yt(e.outEdges(n),function(a){Object.prototype.hasOwnProperty.call(r,a.w)?t.push(a):s(a.w)}),delete r[n])}return yt(e.nodes(),s),t}function uR(e){yt(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var i=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,i)}})}function To(e,t,r,i){var s;do s=Z1(i);while(e.hasNode(s));return r.dummy=t,e.setNode(s,r),s}function dR(e){var t=new Nr().setGraph(e.graph());return yt(e.nodes(),function(r){t.setNode(r,e.node(r))}),yt(e.edges(),function(r){var i=t.edge(r.v,r.w)||{weight:0,minlen:1},s=e.edge(r);t.setEdge(r.v,r.w,{weight:i.weight+s.weight,minlen:Math.max(i.minlen,s.minlen)})}),t}function k4(e){var t=new Nr({multigraph:e.isMultigraph()}).setGraph(e.graph());return yt(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),yt(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t}function J0(e,t){var r=e.x,i=e.y,s=t.x-r,n=t.y-i,a=e.width/2,o=e.height/2;if(!s&&!n)throw new Error("Not possible to find intersection inside of the rectangle");var h,l;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),h=o*s/n,l=o):(s<0&&(a=-a),h=a,l=a*n/s),{x:r+h,y:i+l}}function lu(e){var t=ze(io(w4(e)+1),function(){return[]});return yt(e.nodes(),function(r){var i=e.node(r),s=i.rank;Me(s)||(t[s][i.order]=r)}),t}function fR(e){var t=sl(ze(e.nodes(),function(r){return e.node(r).rank}));yt(e.nodes(),function(r){var i=e.node(r);m2(i,"rank")&&(i.rank-=t)})}function pR(e){var t=sl(ze(e.nodes(),function(n){return e.node(n).rank})),r=[];yt(e.nodes(),function(n){var a=e.node(n).rank-t;r[a]||(r[a]=[]),r[a].push(n)});var i=0,s=e.graph().nodeRankFactor;yt(r,function(n,a){Me(n)&&a%s!==0?--i:i&&yt(n,function(o){e.node(o).rank+=i})})}function tg(e,t,r,i){var s={width:0,height:0};return arguments.length>=4&&(s.rank=r,s.order=i),To(e,"border",s,t)}function w4(e){return tn(ze(e.nodes(),function(t){var r=e.node(t).rank;if(!Me(r))return r}))}function gR(e,t){var r={lhs:[],rhs:[]};return yt(e,function(i){t(i)?r.lhs.push(i):r.rhs.push(i)}),r}function yR(e,t){return t()}function mR(e){function t(r){var i=e.children(r),s=e.node(r);if(i.length&&yt(i,t),Object.prototype.hasOwnProperty.call(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var n=s.minRank,a=s.maxRank+1;n<a;++n)eg(e,"borderLeft","_bl",r,s,n),eg(e,"borderRight","_br",r,s,n)}}yt(e.children(),t)}function eg(e,t,r,i,s,n){var a={width:0,height:0,rank:n,borderType:t},o=s[t][n-1],h=To(e,"border",a,r);s[t][n]=h,e.setParent(h,i),o&&e.setEdge(o,h,{weight:1})}function xR(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&T4(e)}function bR(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&vR(e),(t==="lr"||t==="rl")&&(_R(e),T4(e))}function T4(e){yt(e.nodes(),function(t){rg(e.node(t))}),yt(e.edges(),function(t){rg(e.edge(t))})}function rg(e){var t=e.width;e.width=e.height,e.height=t}function vR(e){yt(e.nodes(),function(t){ju(e.node(t))}),yt(e.edges(),function(t){var r=e.edge(t);yt(r.points,ju),Object.prototype.hasOwnProperty.call(r,"y")&&ju(r)})}function ju(e){e.y=-e.y}function _R(e){yt(e.nodes(),function(t){Xu(e.node(t))}),yt(e.edges(),function(t){var r=e.edge(t);yt(r.points,Xu),Object.prototype.hasOwnProperty.call(r,"x")&&Xu(r)})}function Xu(e){var t=e.x;e.x=e.y,e.y=t}function kR(e){e.graph().dummyChains=[],yt(e.edges(),function(t){wR(e,t)})}function wR(e,t){var r=t.v,i=e.node(r).rank,s=t.w,n=e.node(s).rank,a=t.name,o=e.edge(t),h=o.labelRank;if(n!==i+1){e.removeEdge(t);var l=void 0,u,f;for(f=0,++i;i<n;++f,++i)o.points=[],l={width:0,height:0,edgeLabel:o,edgeObj:t,rank:i},u=To(e,"edge",l,"_d"),i===h&&(l.width=o.width,l.height=o.height,l.dummy="edge-label",l.labelpos=o.labelpos),e.setEdge(r,u,{weight:o.weight},a),f===0&&e.graph().dummyChains.push(u),r=u;e.setEdge(r,s,{weight:o.weight},a)}}function TR(e){yt(e.graph().dummyChains,function(t){var r=e.node(t),i=r.edgeLabel,s;for(e.setEdge(r.edgeObj,i);r.dummy;)s=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=s,r=e.node(t)})}function Hf(e){var t={};function r(i){var s=e.node(i);if(Object.prototype.hasOwnProperty.call(t,i))return s.rank;t[i]=!0;var n=sl(ze(e.outEdges(i),function(a){return r(a.w)-e.edge(a).minlen}));return(n===Number.POSITIVE_INFINITY||n===void 0||n===null)&&(n=0),s.rank=n}yt(e.sources(),r)}function vl(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function S4(e){var t=new Nr({directed:!1}),r=e.nodes()[0],i=e.nodeCount();t.setNode(r,{});for(var s,n;SR(t,e)<i;)s=CR(t,e),n=t.hasNode(s.v)?vl(e,s):-vl(e,s),ER(t,e,n);return t}function SR(e,t){function r(i){yt(t.nodeEdges(i),function(s){var n=s.v,a=i===n?s.w:n;!e.hasNode(a)&&!vl(t,s)&&(e.setNode(a,{}),e.setEdge(i,a,{}),r(a))})}return yt(e.nodes(),r),e.nodeCount()}function CR(e,t){return J1(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return vl(t,r)})}function ER(e,t,r){yt(e.nodes(),function(i){t.node(i).rank+=r})}function AR(){}AR.prototype=new Error;function C4(e,t,r){kk(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),s=[],n={};return yt(t,function(a){if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);E4(e,a,r==="post",n,i,s)}),s}function E4(e,t,r,i,s,n){Object.prototype.hasOwnProperty.call(i,t)||(i[t]=!0,r||n.push(t),yt(s(t),function(a){E4(e,a,r,i,s,n)}),r&&n.push(t))}function LR(e,t){return C4(e,t,"post")}function DR(e,t){return C4(e,t,"pre")}_n.initLowLimValues=jf;_n.initCutValues=Uf;_n.calcCutValue=A4;_n.leaveEdge=D4;_n.enterEdge=R4;_n.exchangeEdges=B4;function _n(e){e=dR(e),Hf(e);var t=S4(e);jf(t),Uf(t,e);for(var r,i;r=D4(t);)i=R4(t,e,r),B4(t,e,r,i)}function Uf(e,t){var r=LR(e,e.nodes());r=r.slice(0,r.length-1),yt(r,function(i){RR(e,t,i)})}function RR(e,t,r){var i=e.node(r),s=i.parent;e.edge(r,s).cutvalue=A4(e,t,r)}function A4(e,t,r){var i=e.node(r),s=i.parent,n=!0,a=t.edge(r,s),o=0;return a||(n=!1,a=t.edge(s,r)),o=a.weight,yt(t.nodeEdges(r),function(h){var l=h.v===r,u=l?h.w:h.v;if(u!==s){var f=l===n,p=t.edge(h).weight;if(o+=f?p:-p,IR(e,r,u)){var g=e.edge(r,u).cutvalue;o+=f?-g:g}}}),o}function jf(e,t){arguments.length<2&&(t=e.nodes()[0]),L4(e,{},1,t)}function L4(e,t,r,i,s){var n=r,a=e.node(i);return t[i]=!0,yt(e.neighbors(i),function(o){Object.prototype.hasOwnProperty.call(t,o)||(r=L4(e,t,r,o,i))}),a.low=n,a.lim=r++,s?a.parent=s:delete a.parent,r}function D4(e){return tf(e.edges(),function(t){return e.edge(t).cutvalue<0})}function R4(e,t,r){var i=r.v,s=r.w;t.hasEdge(i,s)||(i=r.w,s=r.v);var n=e.node(i),a=e.node(s),o=n,h=!1;n.lim>a.lim&&(o=a,h=!0);var l=Wi(t.edges(),function(u){return h===ig(e,e.node(u.v),o)&&h!==ig(e,e.node(u.w),o)});return J1(l,function(u){return vl(t,u)})}function B4(e,t,r,i){var s=r.v,n=r.w;e.removeEdge(s,n),e.setEdge(i.v,i.w,{}),jf(e),Uf(e,t),BR(e,t)}function BR(e,t){var r=tf(e.nodes(),function(s){return!t.node(s).parent}),i=DR(e,r);i=i.slice(1),yt(i,function(s){var n=e.node(s).parent,a=t.edge(s,n),o=!1;a||(a=t.edge(n,s),o=!0),t.node(s).rank=t.node(n).rank+(o?a.minlen:-a.minlen)})}function IR(e,t,r){return e.hasEdge(t,r)}function ig(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}function NR(e){switch(e.graph().ranker){case"network-simplex":sg(e);break;case"tight-tree":MR(e);break;case"longest-path":$R(e);break;default:sg(e)}}var $R=Hf;function MR(e){Hf(e),S4(e)}function sg(e){_n(e)}function FR(e){var t=To(e,"root",{},"_root"),r=PR(e),i=tn(Xi(r))-1,s=2*i+1;e.graph().nestingRoot=t,yt(e.edges(),function(a){e.edge(a).minlen*=s});var n=OR(e)+1;yt(e.children(),function(a){I4(e,t,s,n,i,r,a)}),e.graph().nodeRankFactor=s}function I4(e,t,r,i,s,n,a){var o=e.children(a);if(!o.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:r});return}var h=tg(e,"_bt"),l=tg(e,"_bb"),u=e.node(a);e.setParent(h,a),u.borderTop=h,e.setParent(l,a),u.borderBottom=l,yt(o,function(f){I4(e,t,r,i,s,n,f);var p=e.node(f),g=p.borderTop?p.borderTop:f,y=p.borderBottom?p.borderBottom:f,m=p.borderTop?i:2*i,x=g!==y?1:s-n[a]+1;e.setEdge(h,g,{weight:m,minlen:x,nestingEdge:!0}),e.setEdge(y,l,{weight:m,minlen:x,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,h,{weight:0,minlen:s+n[a]})}function PR(e){var t={};function r(i,s){var n=e.children(i);n&&n.length&&yt(n,function(a){r(a,s+1)}),t[i]=s}return yt(e.children(),function(i){r(i,1)}),t}function OR(e){return Rl(e.edges(),function(t,r){return t+e.edge(r).weight},0)}function VR(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,yt(e.edges(),function(r){var i=e.edge(r);i.nestingEdge&&e.removeEdge(r)})}function zR(e,t,r){var i={},s;yt(r,function(n){for(var a=e.parent(n),o,h;a;){if(o=e.parent(a),o?(h=i[o],i[o]=a):(h=s,s=a),h&&h!==a){t.setEdge(h,a);return}a=o}})}function WR(e,t,r){var i=qR(e),s=new Nr({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(n){return e.node(n)});return yt(e.nodes(),function(n){var a=e.node(n),o=e.parent(n);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(s.setNode(n),s.setParent(n,o||i),yt(e[r](n),function(h){var l=h.v===n?h.w:h.v,u=s.edge(l,n),f=Me(u)?0:u.weight;s.setEdge(l,n,{weight:e.edge(h).weight+f})}),Object.prototype.hasOwnProperty.call(a,"minRank")&&s.setNode(n,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),s}function qR(e){for(var t;e.hasNode(t=Z1("_root")););return t}function YR(e,t){for(var r=0,i=1;i<t.length;++i)r+=GR(e,t[i-1],t[i]);return r}function GR(e,t,r){for(var i=wk(r,ze(r,function(l,u){return u})),s=Bl(ze(t,function(l){return Il(ze(e.outEdges(l),function(u){return{pos:i[u.w],weight:e.edge(u).weight}}),"pos")})),n=1;n<r.length;)n<<=1;var a=2*n-1;n-=1;var o=ze(new Array(a),function(){return 0}),h=0;return yt(s.forEach(function(l){var u=l.pos+n;o[u]+=l.weight;for(var f=0;u>0;)u%2&&(f+=o[u+1]),u=u-1>>1,o[u]+=l.weight;h+=l.weight*f})),h}function HR(e){var t={},r=Wi(e.nodes(),function(o){return!e.children(o).length}),i=tn(ze(r,function(o){return e.node(o).rank})),s=ze(io(i+1),function(){return[]});function n(o){if(!m2(t,o)){t[o]=!0;var h=e.node(o);s[h.rank].push(o),yt(e.successors(o),n)}}var a=Il(r,function(o){return e.node(o).rank});return yt(a,n),s}function UR(e,t){return ze(t,function(r){var i=e.inEdges(r);if(i.length){var s=Rl(i,function(n,a){var o=e.edge(a),h=e.node(a.v);return{sum:n.sum+o.weight*h.order,weight:n.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}function jR(e,t){var r={};yt(e,function(s,n){var a=r[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:n};Me(s.barycenter)||(a.barycenter=s.barycenter,a.weight=s.weight)}),yt(t.edges(),function(s){var n=r[s.v],a=r[s.w];!Me(n)&&!Me(a)&&(a.indegree++,n.out.push(r[s.w]))});var i=Wi(r,function(s){return!s.indegree});return XR(i)}function XR(e){var t=[];function r(n){return function(a){a.merged||(Me(a.barycenter)||Me(n.barycenter)||a.barycenter>=n.barycenter)&&KR(n,a)}}function i(n){return function(a){a.in.push(n),--a.indegree===0&&e.push(a)}}for(;e.length;){var s=e.pop();t.push(s),yt(s.in.reverse(),r(s)),yt(s.out,i(s))}return ze(Wi(t,function(n){return!n.merged}),function(n){return Mc(n,["vs","i","barycenter","weight"])})}function KR(e,t){var r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0}function QR(e,t){var r=gR(e,function(u){return Object.prototype.hasOwnProperty.call(u,"barycenter")}),i=r.lhs,s=Il(r.rhs,function(u){return-u.i}),n=[],a=0,o=0,h=0;i.sort(ZR(!!t)),h=ng(n,s,h),yt(i,function(u){h+=u.vs.length,n.push(u.vs),a+=u.barycenter*u.weight,o+=u.weight,h=ng(n,s,h)});var l={vs:Bl(n)};return o&&(l.barycenter=a/o,l.weight=o),l}function ng(e,t,r){for(var i;t.length&&(i=Fc(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}function ZR(e){return function(t,r){return t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}}function N4(e,t,r,i){var s=e.children(t),n=e.node(t),a=n?n.borderLeft:void 0,o=n?n.borderRight:void 0,h={};a&&(s=Wi(s,function(y){return y!==a&&y!==o}));var l=UR(e,s);yt(l,function(y){if(e.children(y.v).length){var m=N4(e,y.v,r,i);h[y.v]=m,Object.prototype.hasOwnProperty.call(m,"barycenter")&&tB(y,m)}});var u=jR(l,r);JR(u,h);var f=QR(u,i);if(a&&(f.vs=Bl([a,f.vs,o]),e.predecessors(a).length)){var p=e.node(e.predecessors(a)[0]),g=e.node(e.predecessors(o)[0]);Object.prototype.hasOwnProperty.call(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+p.order+g.order)/(f.weight+2),f.weight+=2}return f}function JR(e,t){yt(e,function(r){r.vs=Bl(r.vs.map(function(i){return t[i]?t[i].vs:i}))})}function tB(e,t){Me(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function eB(e){var t=w4(e),r=ag(e,io(1,t+1),"inEdges"),i=ag(e,io(t-1,-1,-1),"outEdges"),s=HR(e);og(e,s);for(var n=Number.POSITIVE_INFINITY,a,o=0,h=0;h<4;++o,++h){rB(o%2?r:i,o%4>=2),s=lu(e);var l=YR(e,s);l<n&&(h=0,a=Tk(s),n=l)}og(e,a)}function ag(e,t,r){return ze(t,function(i){return WR(e,i,r)})}function rB(e,t){var r=new Nr;yt(e,function(i){var s=i.graph().root,n=N4(i,s,r,t);yt(n.vs,function(a,o){i.node(a).order=o}),zR(i,r,n.vs)})}function og(e,t){yt(t,function(r){yt(r,function(i,s){e.node(i).order=s})})}function iB(e){var t=nB(e);yt(e.graph().dummyChains,function(r){for(var i=e.node(r),s=i.edgeObj,n=sB(e,t,s.v,s.w),a=n.path,o=n.lca,h=0,l=a[h],u=!0;r!==s.w;){if(i=e.node(r),u){for(;(l=a[h])!==o&&e.node(l).maxRank<i.rank;)h++;l===o&&(u=!1)}if(!u){for(;h<a.length-1&&e.node(l=a[h+1]).minRank<=i.rank;)h++;l=a[h]}e.setParent(r,l),r=e.successors(r)[0]}})}function sB(e,t,r,i){var s=[],n=[],a=Math.min(t[r].low,t[i].low),o=Math.max(t[r].lim,t[i].lim),h,l;h=r;do h=e.parent(h),s.push(h);while(h&&(t[h].low>a||o>t[h].lim));for(l=h,h=i;(h=e.parent(h))!==l;)n.push(h);return{path:s.concat(n.reverse()),lca:l}}function nB(e){var t={},r=0;function i(s){var n=r;yt(e.children(s),i),t[s]={low:n,lim:r++}}return yt(e.children(),i),t}function aB(e,t){var r={};function i(s,n){var a=0,o=0,h=s.length,l=Fc(n);return yt(n,function(u,f){var p=lB(e,u),g=p?e.node(p).order:h;(p||u===l)&&(yt(n.slice(o,f+1),function(y){yt(e.predecessors(y),function(m){var x=e.node(m),b=x.order;(b<a||g<b)&&!(x.dummy&&e.node(y).dummy)&&$4(r,m,y)})}),o=f+1,a=g)}),n}return Rl(t,i),r}function oB(e,t){var r={};function i(n,a,o,h,l){var u;yt(io(a,o),function(f){u=n[f],e.node(u).dummy&&yt(e.predecessors(u),function(p){var g=e.node(p);g.dummy&&(g.order<h||g.order>l)&&$4(r,p,u)})})}function s(n,a){var o=-1,h,l=0;return yt(a,function(u,f){if(e.node(u).dummy==="border"){var p=e.predecessors(u);p.length&&(h=e.node(p[0]).order,i(a,l,f,o,h),l=f,o=h)}i(a,l,a.length,h,n.length)}),a}return Rl(t,s),r}function lB(e,t){if(e.node(t).dummy)return tf(e.predecessors(t),function(r){return e.node(r).dummy})}function $4(e,t,r){if(t>r){var i=t;t=r,r=i}Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{enumerable:!0,configurable:!0,value:{},writable:!0});var s=e[t];Object.defineProperty(s,r,{enumerable:!0,configurable:!0,value:!0,writable:!0})}function cB(e,t,r){if(t>r){var i=t;t=r,r=i}return!!e[t]&&Object.prototype.hasOwnProperty.call(e[t],r)}function hB(e,t,r,i){var s={},n={},a={};return yt(t,function(o){yt(o,function(h,l){s[h]=h,n[h]=h,a[h]=l})}),yt(t,function(o){var h=-1;yt(o,function(l){var u=i(l);if(u.length){u=Il(u,function(m){return a[m]});for(var f=(u.length-1)/2,p=Math.floor(f),g=Math.ceil(f);p<=g;++p){var y=u[p];n[l]===l&&h<a[y]&&!cB(r,l,y)&&(n[y]=l,n[l]=s[l]=s[y],h=a[y])}}})}),{root:s,align:n}}function uB(e,t,r,i,s){var n={},a=dB(e,t,r,s),o=s?"borderLeft":"borderRight";function h(f,p){for(var g=a.nodes(),y=g.pop(),m={};y;)m[y]?f(y):(m[y]=!0,g.push(y),g=g.concat(p(y))),y=g.pop()}function l(f){n[f]=a.inEdges(f).reduce(function(p,g){return Math.max(p,n[g.v]+a.edge(g))},0)}function u(f){var p=a.outEdges(f).reduce(function(y,m){return Math.min(y,n[m.w]-a.edge(m))},Number.POSITIVE_INFINITY),g=e.node(f);p!==Number.POSITIVE_INFINITY&&g.borderType!==o&&(n[f]=Math.max(n[f],p))}return h(l,a.predecessors.bind(a)),h(u,a.successors.bind(a)),yt(i,function(f){n[f]=n[r[f]]}),n}function dB(e,t,r,i){var s=new Nr,n=e.graph(),a=mB(n.nodesep,n.edgesep,i);return yt(t,function(o){var h;yt(o,function(l){var u=r[l];if(s.setNode(u),h){var f=r[h],p=s.edge(f,u);s.setEdge(f,u,Math.max(a(e,l,h),p||0))}h=l})}),s}function fB(e,t){return J1(Xi(t),function(r){var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return Sk(r,function(n,a){var o=xB(e,a)/2;i=Math.max(n+o,i),s=Math.min(n-o,s)}),i-s})}function pB(e,t){var r=Xi(t),i=sl(r),s=tn(r);yt(["u","d"],function(n){yt(["l","r"],function(a){var o=n+a,h=e[o],l;if(h!==t){var u=Xi(h);l=a==="l"?i-sl(u):s-tn(u),l&&(e[o]=Mh(h,function(f){return f+l}))}})})}function gB(e,t){return Mh(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var s=Il(ze(e,i));return(s[1]+s[2])/2})}function yB(e){var t=lu(e),r=Nc(aB(e,t),oB(e,t)),i={},s;yt(["u","d"],function(a){s=a==="u"?t:Xi(t).reverse(),yt(["l","r"],function(o){o==="r"&&(s=ze(s,function(f){return Xi(f).reverse()}));var h=(a==="u"?e.predecessors:e.successors).bind(e),l=hB(e,s,r,h),u=uB(e,s,l.root,l.align,o==="r");o==="r"&&(u=Mh(u,function(f){return-f})),i[a+o]=u})});var n=fB(e,i);return pB(i,n),gB(i,e.graph().align)}function mB(e,t,r){return function(i,s,n){var a=i.node(s),o=i.node(n),h=0,l;if(h+=a.width/2,Object.prototype.hasOwnProperty.call(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(h+=r?l:-l),l=0,h+=(a.dummy?t:e)/2,h+=(o.dummy?t:e)/2,h+=o.width/2,Object.prototype.hasOwnProperty.call(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=o.width/2;break;case"r":l=-o.width/2;break}return l&&(h+=r?l:-l),l=0,h}}function xB(e,t){return e.node(t).width}function bB(e){e=k4(e),vB(e),Ck(yB(e),function(t,r){e.node(r).x=t})}function vB(e){var t=lu(e),r=e.graph().ranksep,i=0;yt(t,function(s){var n=tn(ze(s,function(a){return e.node(a).height}));yt(s,function(a){e.node(a).y=i+n/2}),i+=n+r})}function M4(e,t){var r=yR;r("layout",()=>{var i=r("  buildLayoutGraph",()=>RB(e));r("  runLayout",()=>_B(i,r)),r("  updateInputGraph",()=>kB(e,i))})}function _B(e,t){t("    makeSpaceForEdgeLabels",()=>BB(e)),t("    removeSelfEdges",()=>zB(e)),t("    acyclic",()=>cR(e)),t("    nestingGraph.run",()=>FR(e)),t("    rank",()=>NR(k4(e))),t("    injectEdgeLabelProxies",()=>IB(e)),t("    removeEmptyRanks",()=>pR(e)),t("    nestingGraph.cleanup",()=>VR(e)),t("    normalizeRanks",()=>fR(e)),t("    assignRankMinMax",()=>NB(e)),t("    removeEdgeLabelProxies",()=>$B(e)),t("    normalize.run",()=>kR(e)),t("    parentDummyChains",()=>iB(e)),t("    addBorderSegments",()=>mR(e)),t("    order",()=>eB(e)),t("    insertSelfEdges",()=>WB(e)),t("    adjustCoordinateSystem",()=>xR(e)),t("    position",()=>bB(e)),t("    positionSelfEdges",()=>qB(e)),t("    removeBorderNodes",()=>VB(e)),t("    normalize.undo",()=>TR(e)),t("    fixupEdgeLabelCoords",()=>PB(e)),t("    undoCoordinateSystem",()=>bR(e)),t("    translateGraph",()=>MB(e)),t("    assignNodeIntersects",()=>FB(e)),t("    reversePoints",()=>OB(e)),t("    acyclic.undo",()=>uR(e))}function kB(e,t){yt(e.nodes(),function(r){var i=e.node(r),s=t.node(r);i&&(i.x=s.x,i.y=s.y,t.children(r).length&&(i.width=s.width,i.height=s.height))}),yt(e.edges(),function(r){var i=e.edge(r),s=t.edge(r);i.points=s.points,Object.prototype.hasOwnProperty.call(s,"x")&&(i.x=s.x,i.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var wB=["nodesep","edgesep","ranksep","marginx","marginy"],TB={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},SB=["acyclicer","ranker","rankdir","align"],CB=["width","height"],EB={width:0,height:0},AB=["minlen","weight","width","height","labeloffset"],LB={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},DB=["labelpos"];function RB(e){var t=new Nr({multigraph:!0,compound:!0}),r=Qu(e.graph());return t.setGraph(Nc({},TB,Ku(r,wB),Mc(r,SB))),yt(e.nodes(),function(i){var s=Qu(e.node(i));t.setNode(i,Ek(Ku(s,CB),EB)),t.setParent(i,e.parent(i))}),yt(e.edges(),function(i){var s=Qu(e.edge(i));t.setEdge(i,Nc({},LB,Ku(s,AB),Mc(s,DB)))}),t}function BB(e){var t=e.graph();t.ranksep/=2,yt(e.edges(),function(r){var i=e.edge(r);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function IB(e){yt(e.edges(),function(t){var r=e.edge(t);if(r.width&&r.height){var i=e.node(t.v),s=e.node(t.w),n={rank:(s.rank-i.rank)/2+i.rank,e:t};To(e,"edge-proxy",n,"_ep")}})}function NB(e){var t=0;yt(e.nodes(),function(r){var i=e.node(r);i.borderTop&&(i.minRank=e.node(i.borderTop).rank,i.maxRank=e.node(i.borderBottom).rank,t=tn(t,i.maxRank))}),e.graph().maxRank=t}function $B(e){yt(e.nodes(),function(t){var r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function MB(e){var t=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,s=0,n=e.graph(),a=n.marginx||0,o=n.marginy||0;function h(l){var u=l.x,f=l.y,p=l.width,g=l.height;t=Math.min(t,u-p/2),r=Math.max(r,u+p/2),i=Math.min(i,f-g/2),s=Math.max(s,f+g/2)}yt(e.nodes(),function(l){h(e.node(l))}),yt(e.edges(),function(l){var u=e.edge(l);Object.prototype.hasOwnProperty.call(u,"x")&&h(u)}),t-=a,i-=o,yt(e.nodes(),function(l){var u=e.node(l);u.x-=t,u.y-=i}),yt(e.edges(),function(l){var u=e.edge(l);yt(u.points,function(f){f.x-=t,f.y-=i}),Object.prototype.hasOwnProperty.call(u,"x")&&(u.x-=t),Object.prototype.hasOwnProperty.call(u,"y")&&(u.y-=i)}),n.width=r-t+a,n.height=s-i+o}function FB(e){yt(e.edges(),function(t){var r=e.edge(t),i=e.node(t.v),s=e.node(t.w),n,a;r.points?(n=r.points[0],a=r.points[r.points.length-1]):(r.points=[],n=s,a=i),r.points.unshift(J0(i,n)),r.points.push(J0(s,a))})}function PB(e){yt(e.edges(),function(t){var r=e.edge(t);if(Object.prototype.hasOwnProperty.call(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function OB(e){yt(e.edges(),function(t){var r=e.edge(t);r.reversed&&r.points.reverse()})}function VB(e){yt(e.nodes(),function(t){if(e.children(t).length){var r=e.node(t),i=e.node(r.borderTop),s=e.node(r.borderBottom),n=e.node(Fc(r.borderLeft)),a=e.node(Fc(r.borderRight));r.width=Math.abs(a.x-n.x),r.height=Math.abs(s.y-i.y),r.x=n.x+r.width/2,r.y=i.y+r.height/2}}),yt(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function zB(e){yt(e.edges(),function(t){if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function WB(e){var t=lu(e);yt(t,function(r){var i=0;yt(r,function(s,n){var a=e.node(s);a.order=n+i,yt(a.selfEdges,function(o){To(e,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:n+ ++i,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function qB(e){yt(e.nodes(),function(t){var r=e.node(t);if(r.dummy==="selfedge"){var i=e.node(r.e.v),s=i.x+i.width/2,n=i.y,a=r.x-s,o=i.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:s+2*a/3,y:n-o},{x:s+5*a/6,y:n-o},{x:s+a,y:n},{x:s+5*a/6,y:n+o},{x:s+2*a/3,y:n+o}],r.label.x=r.x,r.label.y=r.y}})}function Ku(e,t){return Mh(Mc(e,t),Number)}function Qu(e){var t={};return yt(e,function(r,i){t[i.toLowerCase()]=r}),t}function mi(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:YB(e),edges:GB(e)};return Me(e.graph())||(t.value=x2(e.graph())),t}function YB(e){return ze(e.nodes(),function(t){var r=e.node(t),i=e.parent(t),s={v:t};return Me(r)||(s.value=r),Me(i)||(s.parent=i),s})}function GB(e){return ze(e.edges(),function(t){var r=e.edge(t),i={v:t.v,w:t.w};return Me(t.name)||(i.name=t.name),Me(r)||(i.value=r),i})}var he=new Map,Hs=new Map,F4=new Map,HB=d(()=>{Hs.clear(),F4.clear(),he.clear()},"clear"),xh=d((e,t)=>{const r=Hs.get(t)||[];return P.trace("In isDescendant",t," ",e," = ",r.includes(e)),r.includes(e)},"isDescendant"),UB=d((e,t)=>{const r=Hs.get(t)||[];return P.info("Descendants of ",t," is ",r),P.info("Edge is ",e),e.v===t||e.w===t?!1:r?r.includes(e.v)||xh(e.v,t)||xh(e.w,t)||r.includes(e.w):(P.debug("Tilt, ",t,",not in descendants"),!1)},"edgeInCluster"),P4=d((e,t,r,i)=>{P.warn("Copying children of ",e,"root",i,"data",t.node(e),i);const s=t.children(e)||[];e!==i&&s.push(e),P.warn("Copying (nodes) clusterId",e,"nodes",s),s.forEach(n=>{if(t.children(n).length>0)P4(n,t,r,i);else{const a=t.node(n);P.info("cp ",n," to ",i," with parent ",e),r.setNode(n,a),i!==t.parent(n)&&(P.warn("Setting parent",n,t.parent(n)),r.setParent(n,t.parent(n))),e!==i&&n!==e?(P.debug("Setting parent",n,e),r.setParent(n,e)):(P.info("In copy ",e,"root",i,"data",t.node(e),i),P.debug("Not Setting parent for node=",n,"cluster!==rootId",e!==i,"node!==clusterId",n!==e));const o=t.edges(n);P.debug("Copying Edges",o),o.forEach(h=>{P.info("Edge",h);const l=t.edge(h.v,h.w,h.name);P.info("Edge data",l,i);try{UB(h,i)?(P.info("Copying as ",h.v,h.w,l,h.name),r.setEdge(h.v,h.w,l,h.name),P.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):P.info("Skipping copy of edge ",h.v,"-->",h.w," rootId: ",i," clusterId:",e)}catch(u){P.error(u)}})}P.debug("Removing node",n),t.removeNode(n)})},"copy"),O4=d((e,t)=>{const r=t.children(e);let i=[...r];for(const s of r)F4.set(s,e),i=[...i,...O4(s,t)];return i},"extractDescendants"),jB=d((e,t,r)=>{const i=e.edges().filter(h=>h.v===t||h.w===t),s=e.edges().filter(h=>h.v===r||h.w===r),n=i.map(h=>({v:h.v===t?r:h.v,w:h.w===t?t:h.w})),a=s.map(h=>({v:h.v,w:h.w}));return n.filter(h=>a.some(l=>h.v===l.v&&h.w===l.w))},"findCommonEdges"),_l=d((e,t,r)=>{const i=t.children(e);if(P.trace("Searching children of id ",e,i),i.length<1)return e;let s;for(const n of i){const a=_l(n,t,r),o=jB(t,r,a);if(a)if(o.length>0)s=a;else return a}return s},"findNonClusterChild"),lg=d(e=>!he.has(e)||!he.get(e).externalConnections?e:he.has(e)?he.get(e).id:e,"getAnchorId"),XB=d((e,t)=>{if(!e||t>10){P.debug("Opting out, no graph ");return}else P.debug("Opting in, graph ");e.nodes().forEach(function(r){e.children(r).length>0&&(P.warn("Cluster identified",r," Replacement id in edges: ",_l(r,e,r)),Hs.set(r,O4(r,e)),he.set(r,{id:_l(r,e,r),clusterData:e.node(r)}))}),e.nodes().forEach(function(r){const i=e.children(r),s=e.edges();i.length>0?(P.debug("Cluster identified",r,Hs),s.forEach(n=>{const a=xh(n.v,r),o=xh(n.w,r);a^o&&(P.warn("Edge: ",n," leaves cluster ",r),P.warn("Descendants of XXX ",r,": ",Hs.get(r)),he.get(r).externalConnections=!0)})):P.debug("Not a cluster ",r,Hs)});for(let r of he.keys()){const i=he.get(r).id,s=e.parent(i);s!==r&&he.has(s)&&!he.get(s).externalConnections&&(he.get(r).id=s)}e.edges().forEach(function(r){const i=e.edge(r);P.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),P.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(e.edge(r)));let s=r.v,n=r.w;if(P.warn("Fix XXX",he,"ids:",r.v,r.w,"Translating: ",he.get(r.v)," --- ",he.get(r.w)),he.get(r.v)||he.get(r.w)){if(P.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),s=lg(r.v),n=lg(r.w),e.removeEdge(r.v,r.w,r.name),s!==r.v){const a=e.parent(s);he.get(a).externalConnections=!0,i.fromCluster=r.v}if(n!==r.w){const a=e.parent(n);he.get(a).externalConnections=!0,i.toCluster=r.w}P.warn("Fix Replacing with XXX",s,n,r.name),e.setEdge(s,n,i,r.name)}}),P.warn("Adjusted Graph",mi(e)),V4(e,0),P.trace(he)},"adjustClustersAndEdges"),V4=d((e,t)=>{var s,n;if(P.warn("extractor - ",t,mi(e),e.children("D")),t>10){P.error("Bailing out");return}let r=e.nodes(),i=!1;for(const a of r){const o=e.children(a);i=i||o.length>0}if(!i){P.debug("Done, no node has children",e.nodes());return}P.debug("Nodes = ",r,t);for(const a of r)if(P.debug("Extracting node",a,he,he.has(a)&&!he.get(a).externalConnections,!e.parent(a),e.node(a),e.children("D")," Depth ",t),!he.has(a))P.debug("Not a cluster",a,t);else if(!he.get(a).externalConnections&&e.children(a)&&e.children(a).length>0){P.warn("Cluster without external connections, without a parent and with children",a,t);let h=e.graph().rankdir==="TB"?"LR":"TB";(n=(s=he.get(a))==null?void 0:s.clusterData)!=null&&n.dir&&(h=he.get(a).clusterData.dir,P.warn("Fixing dir",he.get(a).clusterData.dir,h));const l=new Nr({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});P.warn("Old graph before copy",mi(e)),P4(a,e,l,a),e.setNode(a,{clusterNode:!0,id:a,clusterData:he.get(a).clusterData,label:he.get(a).label,graph:l}),P.warn("New graph after copy node: (",a,")",mi(l)),P.debug("Old graph after copy",mi(e))}else P.warn("Cluster ** ",a," **not meeting the criteria !externalConnections:",!he.get(a).externalConnections," no parent: ",!e.parent(a)," children ",e.children(a)&&e.children(a).length>0,e.children("D"),t),P.debug(he);r=e.nodes(),P.warn("New list of nodes",r);for(const a of r){const o=e.node(a);P.warn(" Now next level",a,o),o!=null&&o.clusterNode&&V4(o.graph,t+1)}},"extractor"),z4=d((e,t)=>{if(t.length===0)return[];let r=Object.assign([],t);return t.forEach(i=>{const s=e.children(i),n=z4(e,s);r=[...r,...n]}),r},"sorter"),KB=d(e=>z4(e,e.children()),"sortNodesByHierarchy"),W4=d(async(e,t,r,i,s,n)=>{P.warn("Graph in recursive render:XAX",mi(t),s);const a=t.graph().rankdir;P.trace("Dir in recursive render - dir:",a);const o=e.insert("g").attr("class","root");t.nodes()?P.info("Recursive render XXX",t.nodes()):P.info("No nodes found for",t),t.edges().length>0&&P.info("Recursive edges",t.edge(t.edges()[0]));const h=o.insert("g").attr("class","clusters"),l=o.insert("g").attr("class","edgePaths"),u=o.insert("g").attr("class","edgeLabels"),f=o.insert("g").attr("class","nodes");await Promise.all(t.nodes().map(async function(m){const x=t.node(m);if(s!==void 0){const b=JSON.parse(JSON.stringify(s.clusterData));P.trace(`Setting data for parent cluster XXX
 Node.id = `,m,`
 data=`,b.height,`
Parent cluster`,s.height),t.setNode(s.id,b),t.parent(m)||(P.trace("Setting parent",m,s.id),t.setParent(m,s.id,b))}if(P.info("(Insert) Node XXX"+m+": "+JSON.stringify(t.node(m))),x!=null&&x.clusterNode){P.info("Cluster identified XBX",m,x.width,t.node(m));const{ranksep:b,nodesep:_}=t.graph();x.graph.setGraph({...x.graph.graph(),ranksep:b+25,nodesep:_});const S=await W4(f,x.graph,r,i,t.node(m),n),C=S.elem;zt(x,C),x.diff=S.diff||0,P.info("New compound node after recursive render XAX",m,"width",x.width,"height",x.height),YA(C,x)}else t.children(m).length>0?(P.trace("Cluster - the non recursive path XBX",m,x.id,x,x.width,"Graph:",t),P.trace(_l(x.id,t)),he.set(x.id,{id:_l(x.id,t),node:x})):(P.trace("Node - the non recursive path XAX",m,f,t.node(m),a),await au(f,t.node(m),{config:n,dir:a}))})),await d(async()=>{const m=t.edges().map(async function(x){const b=t.edge(x.v,x.w,x.name);P.info("Edge "+x.v+" -> "+x.w+": "+JSON.stringify(x)),P.info("Edge "+x.v+" -> "+x.w+": ",x," ",JSON.stringify(t.edge(x))),P.info("Fix",he,"ids:",x.v,x.w,"Translating: ",he.get(x.v),he.get(x.w)),await E3(u,b)});await Promise.all(m)},"processEdges")(),P.info("Graph before layout:",JSON.stringify(mi(t))),P.info("############################################# XXX"),P.info("###                Layout                 ### XXX"),P.info("############################################# XXX"),M4(t),P.info("Graph after layout:",JSON.stringify(mi(t)));let g=0,{subGraphTitleTotalMargin:y}=zl(n);return await Promise.all(KB(t).map(async function(m){var b;const x=t.node(m);if(P.info("Position XBX => "+m+": ("+x.x,","+x.y,") width: ",x.width," height: ",x.height),x!=null&&x.clusterNode)x.y+=y,P.info("A tainted cluster node XBX1",m,x.id,x.width,x.height,x.x,x.y,t.parent(m)),he.get(x.id).node=x,Jd(x);else if(t.children(m).length>0){P.info("A pure cluster node XBX1",m,x.id,x.x,x.y,x.width,x.height,t.parent(m)),x.height+=y,t.node(x.parentId);const _=(x==null?void 0:x.padding)/2||0,S=((b=x==null?void 0:x.labelBBox)==null?void 0:b.height)||0,C=S-_||0;P.debug("OffsetY",C,"labelHeight",S,"halfPadding",_),await zf(h,x),he.get(x.id).node=x}else{const _=t.node(x.parentId);x.y+=y/2,P.info("A regular node XBX1 - using the padding",x.id,"parent",x.parentId,x.width,x.height,x.x,x.y,"offsetY",x.offsetY,"parent",_,_==null?void 0:_.offsetY,x),Jd(x)}})),t.edges().forEach(function(m){const x=t.edge(m);P.info("Edge "+m.v+" -> "+m.w+": "+JSON.stringify(x),x),x.points.forEach(C=>C.y+=y/2);const b=t.node(m.v);var _=t.node(m.w);const S=D3(l,x,he,r,b,_,i);A3(x,S)}),t.nodes().forEach(function(m){const x=t.node(m);P.info(m,x.type,x.diff),x.isGroup&&(g=x.diff)}),P.warn("Returning from recursive render XAX",o,g),{elem:o,diff:g}},"recursiveRender"),QB=d(async(e,t)=>{var n,a,o,h,l,u;const r=new Nr({multigraph:!0,compound:!0}).setGraph({rankdir:e.direction,nodesep:((n=e.config)==null?void 0:n.nodeSpacing)||((o=(a=e.config)==null?void 0:a.flowchart)==null?void 0:o.nodeSpacing)||e.nodeSpacing,ranksep:((h=e.config)==null?void 0:h.rankSpacing)||((u=(l=e.config)==null?void 0:l.flowchart)==null?void 0:u.rankSpacing)||e.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),i=t.select("g");I3(i,e.markers,e.type,e.diagramId),GA(),jA(),CA(),HB(),e.nodes.forEach(f=>{r.setNode(f.id,{...f}),f.parentId&&r.setParent(f.id,f.parentId)}),P.debug("Edges:",e.edges),e.edges.forEach(f=>{if(f.start===f.end){const p=f.start,g=p+"---"+p+"---1",y=p+"---"+p+"---2",m=r.node(p);r.setNode(g,{domId:g,id:g,parentId:m.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(g,m.parentId),r.setNode(y,{domId:y,id:y,parentId:m.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(y,m.parentId);const x=structuredClone(f),b=structuredClone(f),_=structuredClone(f);x.label="",x.arrowTypeEnd="none",x.id=p+"-cyclic-special-1",b.arrowTypeStart="none",b.arrowTypeEnd="none",b.id=p+"-cyclic-special-mid",_.label="",m.isGroup&&(x.fromCluster=p,_.toCluster=p),_.id=p+"-cyclic-special-2",_.arrowTypeStart="none",r.setEdge(p,g,x,p+"-cyclic-special-0"),r.setEdge(g,y,b,p+"-cyclic-special-1"),r.setEdge(y,p,_,p+"-cyc<lic-special-2")}else r.setEdge(f.start,f.end,{...f},f.id)}),P.warn("Graph at first:",JSON.stringify(mi(r))),XB(r),P.warn("Graph after XAX:",JSON.stringify(mi(r)));const s=it();await W4(i,r,e.type,e.diagramId,void 0,s)},"render");const ZB=Object.freeze(Object.defineProperty({__proto__:null,render:QB},Symbol.toStringTag,{value:"Module"}));Fh.use(Ak);function q4(e,t){e.forEach(r=>{const i={id:r.id,labelText:r.label,height:r.height,width:r.width,padding:r.padding??0};Object.keys(r).forEach(s=>{["id","label","height","width","padding","x","y"].includes(s)||(i[s]=r[s])}),t.add({group:"nodes",data:i,position:{x:r.x??0,y:r.y??0}})})}d(q4,"addNodes");function Y4(e,t){e.forEach(r=>{const i={id:r.id,source:r.start,target:r.end};Object.keys(r).forEach(s=>{["id","start","end"].includes(s)||(i[s]=r[s])}),t.add({group:"edges",data:i})})}d(Y4,"addEdges");function G4(e){return new Promise(t=>{const r=_t("body").append("div").attr("id","cy").attr("style","display:none"),i=Fh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});r.remove(),q4(e.nodes,i),Y4(e.edges,i),i.nodes().forEach(function(n){n.layoutDimensions=()=>{const a=n.data();return{w:a.width,h:a.height}}});const s={name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1};i.layout(s).run(),i.ready(n=>{P.info("Cytoscape ready",n),t(i)})})}d(G4,"createCytoscapeInstance");function H4(e){return e.nodes().map(t=>{const r=t.data(),i=t.position(),s={id:r.id,x:i.x,y:i.y};return Object.keys(r).forEach(n=>{n!=="id"&&(s[n]=r[n])}),s})}d(H4,"extractPositionedNodes");function U4(e){return e.edges().map(t=>{const r=t.data(),i=t._private.rscratch,s={id:r.id,source:r.source,target:r.target,startX:i.startX,startY:i.startY,midX:i.midX,midY:i.midY,endX:i.endX,endY:i.endY};return Object.keys(r).forEach(n=>{["id","source","target"].includes(n)||(s[n]=r[n])}),s})}d(U4,"extractPositionedEdges");async function j4(e,t){P.debug("Starting cose-bilkent layout algorithm");try{X4(e);const r=await G4(e),i=H4(r),s=U4(r);return P.debug(`Layout completed: ${i.length} nodes, ${s.length} edges`),{nodes:i,edges:s}}catch(r){throw P.error("Error in cose-bilkent layout algorithm:",r),r}}d(j4,"executeCoseBilkentLayout");function X4(e){if(!e)throw new Error("Layout data is required");if(!e.config)throw new Error("Configuration is required in layout data");if(!e.rootNode)throw new Error("Root node is required");if(!e.nodes||!Array.isArray(e.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(e.edges))throw new Error("Edges array is required in layout data");return!0}d(X4,"validateLayoutData");var JB=d(async(e,t,{insertCluster:r,insertEdge:i,insertEdgeLabel:s,insertMarkers:n,insertNode:a,log:o,positionEdgeLabel:h},{algorithm:l})=>{const u={},f={},p=t.select("g");n(p,e.markers,e.type,e.diagramId);const g=p.insert("g").attr("class","subgraphs"),y=p.insert("g").attr("class","edgePaths"),m=p.insert("g").attr("class","edgeLabels"),x=p.insert("g").attr("class","nodes");o.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(e.nodes.map(async S=>{if(S.isGroup){const C={...S};f[S.id]=C,u[S.id]=C,await r(g,S)}else{const C={...S};u[S.id]=C;const k=await a(x,S,{config:e.config,dir:e.direction||"TB"}),v=k.node().getBBox();C.width=v.width,C.height=v.height,C.domId=k,o.debug(`Node ${S.id} dimensions: ${v.width}x${v.height}`)}})),o.debug("Running cose-bilkent layout algorithm");const b={...e,nodes:e.nodes.map(S=>{const C=u[S.id];return{...S,width:C.width,height:C.height}})},_=await j4(b,e.config);o.debug("Positioning nodes based on layout results"),_.nodes.forEach(S=>{const C=u[S.id];C!=null&&C.domId&&(C.domId.attr("transform",`translate(${S.x}, ${S.y})`),C.x=S.x,C.y=S.y,o.debug(`Positioned node ${C.id} at center (${S.x}, ${S.y})`))}),_.edges.forEach(S=>{const C=e.edges.find(k=>k.id===S.id);C&&(C.points=[{x:S.startX,y:S.startY},{x:S.midX,y:S.midY},{x:S.endX,y:S.endY}])}),o.debug("Inserting and positioning edges"),await Promise.all(e.edges.map(async S=>{await s(m,S);const C=u[S.start??""],k=u[S.end??""];if(C&&k){const v=_.edges.find(A=>A.id===S.id);if(v){o.debug("APA01 positionedEdge",v);const A={...S},L=i(y,A,f,e.type,C,k,e.diagramId);h(A,L)}else{const A={...S,points:[{x:C.x||0,y:C.y||0},{x:k.x||0,y:k.y||0}]},L=i(y,A,f,e.type,C,k,e.diagramId);h(A,L)}}})),o.debug("Cose-bilkent rendering completed")},"render"),tI=JB;const eI=Object.freeze(Object.defineProperty({__proto__:null,render:tI},Symbol.toStringTag,{value:"Module"}));var cu=d((e,t)=>{const r=e.append("rect");if(r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),t.name&&r.attr("name",t.name),t.rx&&r.attr("rx",t.rx),t.ry&&r.attr("ry",t.ry),t.attrs!==void 0)for(const i in t.attrs)r.attr(i,t.attrs[i]);return t.class&&r.attr("class",t.class),r},"drawRect"),K4=d((e,t)=>{const r={x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,stroke:t.stroke,class:"rect"};cu(e,r).lower()},"drawBackgroundRect"),rI=d((e,t)=>{const r=t.text.replace(vo," "),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.attr("class","legend"),i.style("text-anchor",t.anchor),t.class&&i.attr("class",t.class);const s=i.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.text(r),i},"drawText"),Xf=d((e,t,r,i)=>{const s=e.append("image");s.attr("x",t),s.attr("y",r);const n=dn.sanitizeUrl(i);s.attr("xlink:href",n)},"drawImage"),Kf=d((e,t,r,i)=>{const s=e.append("use");s.attr("x",t),s.attr("y",r);const n=dn.sanitizeUrl(i);s.attr("xlink:href",`#${n}`)},"drawEmbeddedImage"),qr=d(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),Qf=d(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj"),bh=(function(){var e=d(function(se,gt,St,ut){for(St=St||{},ut=se.length;ut--;St[se[ut]]=gt);return St},"o"),t=[1,24],r=[1,25],i=[1,26],s=[1,27],n=[1,28],a=[1,63],o=[1,64],h=[1,65],l=[1,66],u=[1,67],f=[1,68],p=[1,69],g=[1,29],y=[1,30],m=[1,31],x=[1,32],b=[1,33],_=[1,34],S=[1,35],C=[1,36],k=[1,37],v=[1,38],A=[1,39],L=[1,40],w=[1,41],R=[1,42],T=[1,43],V=[1,44],N=[1,45],D=[1,46],E=[1,47],M=[1,48],F=[1,50],I=[1,51],B=[1,52],X=[1,53],$=[1,54],G=[1,55],nt=[1,56],ht=[1,57],tt=[1,58],dt=[1,59],st=[1,60],ot=[14,42],K=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],lt=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],U=[1,82],j=[1,83],Q=[1,84],W=[1,85],et=[12,14,42],z=[12,14,33,42],vt=[12,14,33,42,76,77,79,80],O=[12,33],Zt=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],J={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:d(function(gt,St,ut,pt,wt,rt,bt){var q=rt.length-1;switch(wt){case 3:pt.setDirection("TB");break;case 4:pt.setDirection("BT");break;case 5:pt.setDirection("RL");break;case 6:pt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:pt.setC4Type(rt[q-3]);break;case 19:pt.setTitle(rt[q].substring(6)),this.$=rt[q].substring(6);break;case 20:pt.setAccDescription(rt[q].substring(15)),this.$=rt[q].substring(15);break;case 21:this.$=rt[q].trim(),pt.setTitle(this.$);break;case 22:case 23:this.$=rt[q].trim(),pt.setAccDescription(this.$);break;case 28:rt[q].splice(2,0,"ENTERPRISE"),pt.addPersonOrSystemBoundary(...rt[q]),this.$=rt[q];break;case 29:rt[q].splice(2,0,"SYSTEM"),pt.addPersonOrSystemBoundary(...rt[q]),this.$=rt[q];break;case 30:pt.addPersonOrSystemBoundary(...rt[q]),this.$=rt[q];break;case 31:rt[q].splice(2,0,"CONTAINER"),pt.addContainerBoundary(...rt[q]),this.$=rt[q];break;case 32:pt.addDeploymentNode("node",...rt[q]),this.$=rt[q];break;case 33:pt.addDeploymentNode("nodeL",...rt[q]),this.$=rt[q];break;case 34:pt.addDeploymentNode("nodeR",...rt[q]),this.$=rt[q];break;case 35:pt.popBoundaryParseStack();break;case 39:pt.addPersonOrSystem("person",...rt[q]),this.$=rt[q];break;case 40:pt.addPersonOrSystem("external_person",...rt[q]),this.$=rt[q];break;case 41:pt.addPersonOrSystem("system",...rt[q]),this.$=rt[q];break;case 42:pt.addPersonOrSystem("system_db",...rt[q]),this.$=rt[q];break;case 43:pt.addPersonOrSystem("system_queue",...rt[q]),this.$=rt[q];break;case 44:pt.addPersonOrSystem("external_system",...rt[q]),this.$=rt[q];break;case 45:pt.addPersonOrSystem("external_system_db",...rt[q]),this.$=rt[q];break;case 46:pt.addPersonOrSystem("external_system_queue",...rt[q]),this.$=rt[q];break;case 47:pt.addContainer("container",...rt[q]),this.$=rt[q];break;case 48:pt.addContainer("container_db",...rt[q]),this.$=rt[q];break;case 49:pt.addContainer("container_queue",...rt[q]),this.$=rt[q];break;case 50:pt.addContainer("external_container",...rt[q]),this.$=rt[q];break;case 51:pt.addContainer("external_container_db",...rt[q]),this.$=rt[q];break;case 52:pt.addContainer("external_container_queue",...rt[q]),this.$=rt[q];break;case 53:pt.addComponent("component",...rt[q]),this.$=rt[q];break;case 54:pt.addComponent("component_db",...rt[q]),this.$=rt[q];break;case 55:pt.addComponent("component_queue",...rt[q]),this.$=rt[q];break;case 56:pt.addComponent("external_component",...rt[q]),this.$=rt[q];break;case 57:pt.addComponent("external_component_db",...rt[q]),this.$=rt[q];break;case 58:pt.addComponent("external_component_queue",...rt[q]),this.$=rt[q];break;case 60:pt.addRel("rel",...rt[q]),this.$=rt[q];break;case 61:pt.addRel("birel",...rt[q]),this.$=rt[q];break;case 62:pt.addRel("rel_u",...rt[q]),this.$=rt[q];break;case 63:pt.addRel("rel_d",...rt[q]),this.$=rt[q];break;case 64:pt.addRel("rel_l",...rt[q]),this.$=rt[q];break;case 65:pt.addRel("rel_r",...rt[q]),this.$=rt[q];break;case 66:pt.addRel("rel_b",...rt[q]),this.$=rt[q];break;case 67:rt[q].splice(0,1),pt.addRel("rel",...rt[q]),this.$=rt[q];break;case 68:pt.updateElStyle("update_el_style",...rt[q]),this.$=rt[q];break;case 69:pt.updateRelStyle("update_rel_style",...rt[q]),this.$=rt[q];break;case 70:pt.updateLayoutConfig("update_layout_config",...rt[q]),this.$=rt[q];break;case 71:this.$=[rt[q]];break;case 72:rt[q].unshift(rt[q-1]),this.$=rt[q];break;case 73:case 75:this.$=rt[q].trim();break;case 74:let Lt={};Lt[rt[q-1].trim()]=rt[q].trim(),this.$=Lt;break;case 76:this.$="";break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:t,23:r,24:i,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{13:70,19:20,20:21,21:22,22:t,23:r,24:i,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{13:71,19:20,20:21,21:22,22:t,23:r,24:i,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{13:72,19:20,20:21,21:22,22:t,23:r,24:i,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{13:73,19:20,20:21,21:22,22:t,23:r,24:i,26:s,28:n,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{14:[1,74]},e(ot,[2,13],{43:23,29:49,30:61,32:62,20:75,34:a,36:o,37:h,38:l,39:u,40:f,41:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st}),e(ot,[2,14]),e(K,[2,16],{12:[1,76]}),e(ot,[2,36],{12:[1,77]}),e(lt,[2,19]),e(lt,[2,20]),{25:[1,78]},{27:[1,79]},e(lt,[2,23]),{35:80,75:81,76:U,77:j,79:Q,80:W},{35:86,75:81,76:U,77:j,79:Q,80:W},{35:87,75:81,76:U,77:j,79:Q,80:W},{35:88,75:81,76:U,77:j,79:Q,80:W},{35:89,75:81,76:U,77:j,79:Q,80:W},{35:90,75:81,76:U,77:j,79:Q,80:W},{35:91,75:81,76:U,77:j,79:Q,80:W},{35:92,75:81,76:U,77:j,79:Q,80:W},{35:93,75:81,76:U,77:j,79:Q,80:W},{35:94,75:81,76:U,77:j,79:Q,80:W},{35:95,75:81,76:U,77:j,79:Q,80:W},{35:96,75:81,76:U,77:j,79:Q,80:W},{35:97,75:81,76:U,77:j,79:Q,80:W},{35:98,75:81,76:U,77:j,79:Q,80:W},{35:99,75:81,76:U,77:j,79:Q,80:W},{35:100,75:81,76:U,77:j,79:Q,80:W},{35:101,75:81,76:U,77:j,79:Q,80:W},{35:102,75:81,76:U,77:j,79:Q,80:W},{35:103,75:81,76:U,77:j,79:Q,80:W},{35:104,75:81,76:U,77:j,79:Q,80:W},e(et,[2,59]),{35:105,75:81,76:U,77:j,79:Q,80:W},{35:106,75:81,76:U,77:j,79:Q,80:W},{35:107,75:81,76:U,77:j,79:Q,80:W},{35:108,75:81,76:U,77:j,79:Q,80:W},{35:109,75:81,76:U,77:j,79:Q,80:W},{35:110,75:81,76:U,77:j,79:Q,80:W},{35:111,75:81,76:U,77:j,79:Q,80:W},{35:112,75:81,76:U,77:j,79:Q,80:W},{35:113,75:81,76:U,77:j,79:Q,80:W},{35:114,75:81,76:U,77:j,79:Q,80:W},{35:115,75:81,76:U,77:j,79:Q,80:W},{20:116,29:49,30:61,32:62,34:a,36:o,37:h,38:l,39:u,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st},{12:[1,118],33:[1,117]},{35:119,75:81,76:U,77:j,79:Q,80:W},{35:120,75:81,76:U,77:j,79:Q,80:W},{35:121,75:81,76:U,77:j,79:Q,80:W},{35:122,75:81,76:U,77:j,79:Q,80:W},{35:123,75:81,76:U,77:j,79:Q,80:W},{35:124,75:81,76:U,77:j,79:Q,80:W},{35:125,75:81,76:U,77:j,79:Q,80:W},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},e(ot,[2,15]),e(K,[2,17],{21:22,19:130,22:t,23:r,24:i,26:s,28:n}),e(ot,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:t,23:r,24:i,26:s,28:n,34:a,36:o,37:h,38:l,39:u,40:f,41:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S,51:C,52:k,53:v,54:A,55:L,56:w,57:R,58:T,59:V,60:N,61:D,62:E,63:M,64:F,65:I,66:B,67:X,68:$,69:G,70:nt,71:ht,72:tt,73:dt,74:st}),e(lt,[2,21]),e(lt,[2,22]),e(et,[2,39]),e(z,[2,71],{75:81,35:132,76:U,77:j,79:Q,80:W}),e(vt,[2,73]),{78:[1,133]},e(vt,[2,75]),e(vt,[2,76]),e(et,[2,40]),e(et,[2,41]),e(et,[2,42]),e(et,[2,43]),e(et,[2,44]),e(et,[2,45]),e(et,[2,46]),e(et,[2,47]),e(et,[2,48]),e(et,[2,49]),e(et,[2,50]),e(et,[2,51]),e(et,[2,52]),e(et,[2,53]),e(et,[2,54]),e(et,[2,55]),e(et,[2,56]),e(et,[2,57]),e(et,[2,58]),e(et,[2,60]),e(et,[2,61]),e(et,[2,62]),e(et,[2,63]),e(et,[2,64]),e(et,[2,65]),e(et,[2,66]),e(et,[2,67]),e(et,[2,68]),e(et,[2,69]),e(et,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},e(O,[2,28]),e(O,[2,29]),e(O,[2,30]),e(O,[2,31]),e(O,[2,32]),e(O,[2,33]),e(O,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},e(K,[2,18]),e(ot,[2,38]),e(z,[2,72]),e(vt,[2,74]),e(et,[2,24]),e(et,[2,35]),e(Zt,[2,25]),e(Zt,[2,26],{12:[1,138]}),e(Zt,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:d(function(gt,St){if(St.recoverable)this.trace(gt);else{var ut=new Error(gt);throw ut.hash=St,ut}},"parseError"),parse:d(function(gt){var St=this,ut=[0],pt=[],wt=[null],rt=[],bt=this.table,q="",Lt=0,Y=0,Tt=2,ft=1,Ft=rt.slice.call(arguments,1),mt=Object.create(this.lexer),xt={yy:{}};for(var re in this.yy)Object.prototype.hasOwnProperty.call(this.yy,re)&&(xt.yy[re]=this.yy[re]);mt.setInput(gt,xt.yy),xt.yy.lexer=mt,xt.yy.parser=this,typeof mt.yylloc>"u"&&(mt.yylloc={});var At=mt.yylloc;rt.push(At);var pe=mt.options&&mt.options.ranges;typeof xt.yy.parseError=="function"?this.parseError=xt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ar(ee){ut.length=ut.length-2*ee,wt.length=wt.length-ee,rt.length=rt.length-ee}d(ar,"popStack");function ae(){var ee;return ee=pt.pop()||mt.lex()||ft,typeof ee!="number"&&(ee instanceof Array&&(pt=ee,ee=pt.pop()),ee=St.symbols_[ee]||ee),ee}d(ae,"lex");for(var _e,Ge,Kt,Ce,Se={},tr,Ht,ve,Ot;;){if(Ge=ut[ut.length-1],this.defaultActions[Ge]?Kt=this.defaultActions[Ge]:((_e===null||typeof _e>"u")&&(_e=ae()),Kt=bt[Ge]&&bt[Ge][_e]),typeof Kt>"u"||!Kt.length||!Kt[0]){var oe="";Ot=[];for(tr in bt[Ge])this.terminals_[tr]&&tr>Tt&&Ot.push("'"+this.terminals_[tr]+"'");mt.showPosition?oe="Parse error on line "+(Lt+1)+`:
`+mt.showPosition()+`
Expecting `+Ot.join(", ")+", got '"+(this.terminals_[_e]||_e)+"'":oe="Parse error on line "+(Lt+1)+": Unexpected "+(_e==ft?"end of input":"'"+(this.terminals_[_e]||_e)+"'"),this.parseError(oe,{text:mt.match,token:this.terminals_[_e]||_e,line:mt.yylineno,loc:At,expected:Ot})}if(Kt[0]instanceof Array&&Kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ge+", token: "+_e);switch(Kt[0]){case 1:ut.push(_e),wt.push(mt.yytext),rt.push(mt.yylloc),ut.push(Kt[1]),_e=null,Y=mt.yyleng,q=mt.yytext,Lt=mt.yylineno,At=mt.yylloc;break;case 2:if(Ht=this.productions_[Kt[1]][1],Se.$=wt[wt.length-Ht],Se._$={first_line:rt[rt.length-(Ht||1)].first_line,last_line:rt[rt.length-1].last_line,first_column:rt[rt.length-(Ht||1)].first_column,last_column:rt[rt.length-1].last_column},pe&&(Se._$.range=[rt[rt.length-(Ht||1)].range[0],rt[rt.length-1].range[1]]),Ce=this.performAction.apply(Se,[q,Y,Lt,xt.yy,Kt[1],wt,rt].concat(Ft)),typeof Ce<"u")return Ce;Ht&&(ut=ut.slice(0,-1*Ht*2),wt=wt.slice(0,-1*Ht),rt=rt.slice(0,-1*Ht)),ut.push(this.productions_[Kt[1]][0]),wt.push(Se.$),rt.push(Se._$),ve=bt[ut[ut.length-2]][ut[ut.length-1]],ut.push(ve);break;case 3:return!0}}return!0},"parse")},Yt=(function(){var se={EOF:1,parseError:d(function(St,ut){if(this.yy.parser)this.yy.parser.parseError(St,ut);else throw new Error(St)},"parseError"),setInput:d(function(gt,St){return this.yy=St||this.yy||{},this._input=gt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var gt=this._input[0];this.yytext+=gt,this.yyleng++,this.offset++,this.match+=gt,this.matched+=gt;var St=gt.match(/(?:\r\n?|\n).*/g);return St?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),gt},"input"),unput:d(function(gt){var St=gt.length,ut=gt.split(/(?:\r\n?|\n)/g);this._input=gt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-St),this.offset-=St;var pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ut.length-1&&(this.yylineno-=ut.length-1);var wt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ut?(ut.length===pt.length?this.yylloc.first_column:0)+pt[pt.length-ut.length].length-ut[0].length:this.yylloc.first_column-St},this.options.ranges&&(this.yylloc.range=[wt[0],wt[0]+this.yyleng-St]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(gt){this.unput(this.match.slice(gt))},"less"),pastInput:d(function(){var gt=this.matched.substr(0,this.matched.length-this.match.length);return(gt.length>20?"...":"")+gt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var gt=this.match;return gt.length<20&&(gt+=this._input.substr(0,20-gt.length)),(gt.substr(0,20)+(gt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var gt=this.pastInput(),St=new Array(gt.length+1).join("-");return gt+this.upcomingInput()+`
`+St+"^"},"showPosition"),test_match:d(function(gt,St){var ut,pt,wt;if(this.options.backtrack_lexer&&(wt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(wt.yylloc.range=this.yylloc.range.slice(0))),pt=gt[0].match(/(?:\r\n?|\n).*/g),pt&&(this.yylineno+=pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pt?pt[pt.length-1].length-pt[pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+gt[0].length},this.yytext+=gt[0],this.match+=gt[0],this.matches=gt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(gt[0].length),this.matched+=gt[0],ut=this.performAction.call(this,this.yy,this,St,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ut)return ut;if(this._backtrack){for(var rt in wt)this[rt]=wt[rt];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var gt,St,ut,pt;this._more||(this.yytext="",this.match="");for(var wt=this._currentRules(),rt=0;rt<wt.length;rt++)if(ut=this._input.match(this.rules[wt[rt]]),ut&&(!St||ut[0].length>St[0].length)){if(St=ut,pt=rt,this.options.backtrack_lexer){if(gt=this.test_match(ut,wt[rt]),gt!==!1)return gt;if(this._backtrack){St=!1;continue}else return!1}else if(!this.options.flex)break}return St?(gt=this.test_match(St,wt[pt]),gt!==!1?gt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var St=this.next();return St||this.lex()},"lex"),begin:d(function(St){this.conditionStack.push(St)},"begin"),popState:d(function(){var St=this.conditionStack.length-1;return St>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(St){return St=this.conditionStack.length-1-Math.abs(St||0),St>=0?this.conditionStack[St]:"INITIAL"},"topState"),pushState:d(function(St){this.begin(St)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:d(function(St,ut,pt,wt){switch(pt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return se})();J.lexer=Yt;function It(){this.yy={}}return d(It,"Parser"),It.prototype=J,J.Parser=It,new It})();bh.parser=bh;var iI=bh,ai=[],ds=[""],Sr="global",si="",wi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],kl=[],Zf="",Jf=!1,vh=4,_h=2,Q4,sI=d(function(){return Q4},"getC4Type"),nI=d(function(e){Q4=me(e,it())},"setC4Type"),aI=d(function(e,t,r,i,s,n,a,o,h){if(e==null||t===void 0||t===null||r===void 0||r===null||i===void 0||i===null)return;let l={};const u=kl.find(f=>f.from===t&&f.to===r);if(u?l=u:kl.push(l),l.type=e,l.from=t,l.to=r,l.label={text:i},s==null)l.techn={text:""};else if(typeof s=="object"){let[f,p]=Object.entries(s)[0];l[f]={text:p}}else l.techn={text:s};if(n==null)l.descr={text:""};else if(typeof n=="object"){let[f,p]=Object.entries(n)[0];l[f]={text:p}}else l.descr={text:n};if(typeof a=="object"){let[f,p]=Object.entries(a)[0];l[f]=p}else l.sprite=a;if(typeof o=="object"){let[f,p]=Object.entries(o)[0];l[f]=p}else l.tags=o;if(typeof h=="object"){let[f,p]=Object.entries(h)[0];l[f]=p}else l.link=h;l.wrap=ks()},"addRel"),oI=d(function(e,t,r,i,s,n,a){if(t===null||r===null)return;let o={};const h=ai.find(l=>l.alias===t);if(h&&t===h.alias?o=h:(o.alias=t,ai.push(o)),r==null?o.label={text:""}:o.label={text:r},i==null)o.descr={text:""};else if(typeof i=="object"){let[l,u]=Object.entries(i)[0];o[l]={text:u}}else o.descr={text:i};if(typeof s=="object"){let[l,u]=Object.entries(s)[0];o[l]=u}else o.sprite=s;if(typeof n=="object"){let[l,u]=Object.entries(n)[0];o[l]=u}else o.tags=n;if(typeof a=="object"){let[l,u]=Object.entries(a)[0];o[l]=u}else o.link=a;o.typeC4Shape={text:e},o.parentBoundary=Sr,o.wrap=ks()},"addPersonOrSystem"),lI=d(function(e,t,r,i,s,n,a,o){if(t===null||r===null)return;let h={};const l=ai.find(u=>u.alias===t);if(l&&t===l.alias?h=l:(h.alias=t,ai.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.techn={text:""};else if(typeof i=="object"){let[u,f]=Object.entries(i)[0];h[u]={text:f}}else h.techn={text:i};if(s==null)h.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];h[u]={text:f}}else h.descr={text:s};if(typeof n=="object"){let[u,f]=Object.entries(n)[0];h[u]=f}else h.sprite=n;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];h[u]=f}else h.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];h[u]=f}else h.link=o;h.wrap=ks(),h.typeC4Shape={text:e},h.parentBoundary=Sr},"addContainer"),cI=d(function(e,t,r,i,s,n,a,o){if(t===null||r===null)return;let h={};const l=ai.find(u=>u.alias===t);if(l&&t===l.alias?h=l:(h.alias=t,ai.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.techn={text:""};else if(typeof i=="object"){let[u,f]=Object.entries(i)[0];h[u]={text:f}}else h.techn={text:i};if(s==null)h.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];h[u]={text:f}}else h.descr={text:s};if(typeof n=="object"){let[u,f]=Object.entries(n)[0];h[u]=f}else h.sprite=n;if(typeof a=="object"){let[u,f]=Object.entries(a)[0];h[u]=f}else h.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];h[u]=f}else h.link=o;h.wrap=ks(),h.typeC4Shape={text:e},h.parentBoundary=Sr},"addComponent"),hI=d(function(e,t,r,i,s){if(e===null||t===null)return;let n={};const a=wi.find(o=>o.alias===e);if(a&&e===a.alias?n=a:(n.alias=e,wi.push(n)),t==null?n.label={text:""}:n.label={text:t},r==null)n.type={text:"system"};else if(typeof r=="object"){let[o,h]=Object.entries(r)[0];n[o]={text:h}}else n.type={text:r};if(typeof i=="object"){let[o,h]=Object.entries(i)[0];n[o]=h}else n.tags=i;if(typeof s=="object"){let[o,h]=Object.entries(s)[0];n[o]=h}else n.link=s;n.parentBoundary=Sr,n.wrap=ks(),si=Sr,Sr=e,ds.push(si)},"addPersonOrSystemBoundary"),uI=d(function(e,t,r,i,s){if(e===null||t===null)return;let n={};const a=wi.find(o=>o.alias===e);if(a&&e===a.alias?n=a:(n.alias=e,wi.push(n)),t==null?n.label={text:""}:n.label={text:t},r==null)n.type={text:"container"};else if(typeof r=="object"){let[o,h]=Object.entries(r)[0];n[o]={text:h}}else n.type={text:r};if(typeof i=="object"){let[o,h]=Object.entries(i)[0];n[o]=h}else n.tags=i;if(typeof s=="object"){let[o,h]=Object.entries(s)[0];n[o]=h}else n.link=s;n.parentBoundary=Sr,n.wrap=ks(),si=Sr,Sr=e,ds.push(si)},"addContainerBoundary"),dI=d(function(e,t,r,i,s,n,a,o){if(t===null||r===null)return;let h={};const l=wi.find(u=>u.alias===t);if(l&&t===l.alias?h=l:(h.alias=t,wi.push(h)),r==null?h.label={text:""}:h.label={text:r},i==null)h.type={text:"node"};else if(typeof i=="object"){let[u,f]=Object.entries(i)[0];h[u]={text:f}}else h.type={text:i};if(s==null)h.descr={text:""};else if(typeof s=="object"){let[u,f]=Object.entries(s)[0];h[u]={text:f}}else h.descr={text:s};if(typeof a=="object"){let[u,f]=Object.entries(a)[0];h[u]=f}else h.tags=a;if(typeof o=="object"){let[u,f]=Object.entries(o)[0];h[u]=f}else h.link=o;h.nodeType=e,h.parentBoundary=Sr,h.wrap=ks(),si=Sr,Sr=t,ds.push(si)},"addDeploymentNode"),fI=d(function(){Sr=si,ds.pop(),si=ds.pop(),ds.push(si)},"popBoundaryParseStack"),pI=d(function(e,t,r,i,s,n,a,o,h,l,u){let f=ai.find(p=>p.alias===t);if(!(f===void 0&&(f=wi.find(p=>p.alias===t),f===void 0))){if(r!=null)if(typeof r=="object"){let[p,g]=Object.entries(r)[0];f[p]=g}else f.bgColor=r;if(i!=null)if(typeof i=="object"){let[p,g]=Object.entries(i)[0];f[p]=g}else f.fontColor=i;if(s!=null)if(typeof s=="object"){let[p,g]=Object.entries(s)[0];f[p]=g}else f.borderColor=s;if(n!=null)if(typeof n=="object"){let[p,g]=Object.entries(n)[0];f[p]=g}else f.shadowing=n;if(a!=null)if(typeof a=="object"){let[p,g]=Object.entries(a)[0];f[p]=g}else f.shape=a;if(o!=null)if(typeof o=="object"){let[p,g]=Object.entries(o)[0];f[p]=g}else f.sprite=o;if(h!=null)if(typeof h=="object"){let[p,g]=Object.entries(h)[0];f[p]=g}else f.techn=h;if(l!=null)if(typeof l=="object"){let[p,g]=Object.entries(l)[0];f[p]=g}else f.legendText=l;if(u!=null)if(typeof u=="object"){let[p,g]=Object.entries(u)[0];f[p]=g}else f.legendSprite=u}},"updateElStyle"),gI=d(function(e,t,r,i,s,n,a){const o=kl.find(h=>h.from===t&&h.to===r);if(o!==void 0){if(i!=null)if(typeof i=="object"){let[h,l]=Object.entries(i)[0];o[h]=l}else o.textColor=i;if(s!=null)if(typeof s=="object"){let[h,l]=Object.entries(s)[0];o[h]=l}else o.lineColor=s;if(n!=null)if(typeof n=="object"){let[h,l]=Object.entries(n)[0];o[h]=parseInt(l)}else o.offsetX=parseInt(n);if(a!=null)if(typeof a=="object"){let[h,l]=Object.entries(a)[0];o[h]=parseInt(l)}else o.offsetY=parseInt(a)}},"updateRelStyle"),yI=d(function(e,t,r){let i=vh,s=_h;if(typeof t=="object"){const n=Object.values(t)[0];i=parseInt(n)}else i=parseInt(t);if(typeof r=="object"){const n=Object.values(r)[0];s=parseInt(n)}else s=parseInt(r);i>=1&&(vh=i),s>=1&&(_h=s)},"updateLayoutConfig"),mI=d(function(){return vh},"getC4ShapeInRow"),xI=d(function(){return _h},"getC4BoundaryInRow"),bI=d(function(){return Sr},"getCurrentBoundaryParse"),vI=d(function(){return si},"getParentBoundaryParse"),Z4=d(function(e){return e==null?ai:ai.filter(t=>t.parentBoundary===e)},"getC4ShapeArray"),_I=d(function(e){return ai.find(t=>t.alias===e)},"getC4Shape"),kI=d(function(e){return Object.keys(Z4(e))},"getC4ShapeKeys"),J4=d(function(e){return e==null?wi:wi.filter(t=>t.parentBoundary===e)},"getBoundaries"),wI=J4,TI=d(function(){return kl},"getRels"),SI=d(function(){return Zf},"getTitle"),CI=d(function(e){Jf=e},"setWrap"),ks=d(function(){return Jf},"autoWrap"),EI=d(function(){ai=[],wi=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],si="",Sr="global",ds=[""],kl=[],ds=[""],Zf="",Jf=!1,vh=4,_h=2},"clear"),AI={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},LI={FILLED:0,OPEN:1},DI={LEFTOF:0,RIGHTOF:1,OVER:2},RI=d(function(e){Zf=me(e,it())},"setTitle"),s1={addPersonOrSystem:oI,addPersonOrSystemBoundary:hI,addContainer:lI,addContainerBoundary:uI,addComponent:cI,addDeploymentNode:dI,popBoundaryParseStack:fI,addRel:aI,updateElStyle:pI,updateRelStyle:gI,updateLayoutConfig:yI,autoWrap:ks,setWrap:CI,getC4ShapeArray:Z4,getC4Shape:_I,getC4ShapeKeys:kI,getBoundaries:J4,getBoundarys:wI,getCurrentBoundaryParse:bI,getParentBoundaryParse:vI,getRels:TI,getTitle:SI,getC4Type:sI,getC4ShapeInRow:mI,getC4BoundaryInRow:xI,setAccTitle:We,getAccTitle:Ke,getAccDescription:Ze,setAccDescription:Qe,getConfig:d(()=>it().c4,"getConfig"),clear:EI,LINETYPE:AI,ARROWTYPE:LI,PLACEMENT:DI,setTitle:RI,setC4Type:nI},tp=d(function(e,t){return cu(e,t)},"drawRect"),t5=d(function(e,t,r,i,s,n){const a=e.append("image");a.attr("width",t),a.attr("height",r),a.attr("x",i),a.attr("y",s);let o=n.startsWith("data:image/png;base64")?n:dn.sanitizeUrl(n);a.attr("xlink:href",o)},"drawImage"),BI=d((e,t,r)=>{const i=e.append("g");let s=0;for(let n of t){let a=n.textColor?n.textColor:"#444444",o=n.lineColor?n.lineColor:"#444444",h=n.offsetX?parseInt(n.offsetX):0,l=n.offsetY?parseInt(n.offsetY):0,u="";if(s===0){let p=i.append("line");p.attr("x1",n.startPoint.x),p.attr("y1",n.startPoint.y),p.attr("x2",n.endPoint.x),p.attr("y2",n.endPoint.y),p.attr("stroke-width","1"),p.attr("stroke",o),p.style("fill","none"),n.type!=="rel_b"&&p.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&p.attr("marker-start","url("+u+"#arrowend)"),s=-1}else{let p=i.append("path");p.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",n.startPoint.x).replaceAll("starty",n.startPoint.y).replaceAll("controlx",n.startPoint.x+(n.endPoint.x-n.startPoint.x)/2-(n.endPoint.x-n.startPoint.x)/4).replaceAll("controly",n.startPoint.y+(n.endPoint.y-n.startPoint.y)/2).replaceAll("stopx",n.endPoint.x).replaceAll("stopy",n.endPoint.y)),n.type!=="rel_b"&&p.attr("marker-end","url("+u+"#arrowhead)"),(n.type==="birel"||n.type==="rel_b")&&p.attr("marker-start","url("+u+"#arrowend)")}let f=r.messageFont();Hi(r)(n.label.text,i,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+h,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+l,n.label.width,n.label.height,{fill:a},f),n.techn&&n.techn.text!==""&&(f=r.messageFont(),Hi(r)("["+n.techn.text+"]",i,Math.min(n.startPoint.x,n.endPoint.x)+Math.abs(n.endPoint.x-n.startPoint.x)/2+h,Math.min(n.startPoint.y,n.endPoint.y)+Math.abs(n.endPoint.y-n.startPoint.y)/2+r.messageFontSize+5+l,Math.max(n.label.width,n.techn.width),n.techn.height,{fill:a,"font-style":"italic"},f))}},"drawRels"),II=d(function(e,t,r){const i=e.append("g");let s=t.bgColor?t.bgColor:"none",n=t.borderColor?t.borderColor:"#444444",a=t.fontColor?t.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};t.nodeType&&(o={"stroke-width":1});let h={x:t.x,y:t.y,fill:s,stroke:n,width:t.width,height:t.height,rx:2.5,ry:2.5,attrs:o};tp(i,h);let l=r.boundaryFont();l.fontWeight="bold",l.fontSize=l.fontSize+2,l.fontColor=a,Hi(r)(t.label.text,i,t.x,t.y+t.label.Y,t.width,t.height,{fill:"#444444"},l),t.type&&t.type.text!==""&&(l=r.boundaryFont(),l.fontColor=a,Hi(r)(t.type.text,i,t.x,t.y+t.type.Y,t.width,t.height,{fill:"#444444"},l)),t.descr&&t.descr.text!==""&&(l=r.boundaryFont(),l.fontSize=l.fontSize-2,l.fontColor=a,Hi(r)(t.descr.text,i,t.x,t.y+t.descr.Y,t.width,t.height,{fill:"#444444"},l))},"drawBoundary"),NI=d(function(e,t,r){var f;let i=t.bgColor?t.bgColor:r[t.typeC4Shape.text+"_bg_color"],s=t.borderColor?t.borderColor:r[t.typeC4Shape.text+"_border_color"],n=t.fontColor?t.fontColor:"#FFFFFF",a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(t.typeC4Shape.text){case"person":a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const o=e.append("g");o.attr("class","person-man");const h=qr();switch(t.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=t.x,h.y=t.y,h.fill=i,h.width=t.width,h.height=t.height,h.stroke=s,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},tp(o,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2).replaceAll("height",t.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("half",t.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",t.x).replaceAll("starty",t.y).replaceAll("width",t.width).replaceAll("half",t.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",s).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",t.x+t.width).replaceAll("starty",t.y).replaceAll("half",t.height/2));break}let l=qI(r,t.typeC4Shape.text);switch(o.append("text").attr("fill",n).attr("font-family",l.fontFamily).attr("font-size",l.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",t.typeC4Shape.width).attr("x",t.x+t.width/2-t.typeC4Shape.width/2).attr("y",t.y+t.typeC4Shape.Y).text("<<"+t.typeC4Shape.text+">>"),t.typeC4Shape.text){case"person":case"external_person":t5(o,48,48,t.x+t.width/2-24,t.y+t.image.Y,a);break}let u=r[t.typeC4Shape.text+"Font"]();return u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=n,Hi(r)(t.label.text,o,t.x,t.y+t.label.Y,t.width,t.height,{fill:n},u),u=r[t.typeC4Shape.text+"Font"](),u.fontColor=n,t.techn&&((f=t.techn)==null?void 0:f.text)!==""?Hi(r)(t.techn.text,o,t.x,t.y+t.techn.Y,t.width,t.height,{fill:n,"font-style":"italic"},u):t.type&&t.type.text!==""&&Hi(r)(t.type.text,o,t.x,t.y+t.type.Y,t.width,t.height,{fill:n,"font-style":"italic"},u),t.descr&&t.descr.text!==""&&(u=r.personFont(),u.fontColor=n,Hi(r)(t.descr.text,o,t.x,t.y+t.descr.Y,t.width,t.height,{fill:n},u)),t.height},"drawC4Shape"),$I=d(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),MI=d(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),FI=d(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),PI=d(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),OI=d(function(e){e.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),VI=d(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),zI=d(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),WI=d(function(e){const r=e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);r.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),r.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),qI=d((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"getC4ShapeFont"),Hi=(function(){function e(s,n,a,o,h,l,u){const f=n.append("text").attr("x",a+h/2).attr("y",o+l/2+5).style("text-anchor","middle").text(s);i(f,u)}d(e,"byText");function t(s,n,a,o,h,l,u,f){const{fontSize:p,fontFamily:g,fontWeight:y}=f,m=s.split(Ct.lineBreakRegex);for(let x=0;x<m.length;x++){const b=x*p-p*(m.length-1)/2,_=n.append("text").attr("x",a+h/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",p).style("font-weight",y).style("font-family",g);_.append("tspan").attr("dy",b).text(m[x]).attr("alignment-baseline","mathematical"),i(_,u)}}d(t,"byTspan");function r(s,n,a,o,h,l,u,f){const p=n.append("switch"),y=p.append("foreignObject").attr("x",a).attr("y",o).attr("width",h).attr("height",l).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),t(s,p,a,o,h,l,u,f),i(y,u)}d(r,"byFo");function i(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return d(i,"_setTextAttrs"),function(s){return s.textPlacement==="fo"?r:s.textPlacement==="old"?e:t}})(),yi={drawRect:tp,drawBoundary:II,drawC4Shape:NI,drawRels:BI,drawImage:t5,insertArrowHead:PI,insertArrowEnd:OI,insertArrowFilledHead:VI,insertDynamicNumber:zI,insertArrowCrossHead:WI,insertDatabaseIcon:$I,insertComputerIcon:MI,insertClockIcon:FI},kh=0,wh=0,e5=4,n1=2;bh.yy=s1;var qt={},da,r5=(da=class{constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,a1(t.db.getConfig())}setData(t,r,i,s){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=r,this.nextData.starty=this.data.starty=i,this.nextData.stopy=this.data.stopy=s}updateVal(t,r,i,s){t[r]===void 0?t[r]=i:t[r]=s(i,t[r])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let r=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+t.margin*2,i=r+t.width,s=this.nextData.starty+t.margin*2,n=s+t.height;(r>=this.data.widthLimit||i>=this.data.widthLimit||this.nextData.cnt>e5)&&(r=this.nextData.startx+t.margin+qt.nextLinePaddingX,s=this.nextData.stopy+t.margin*2,this.nextData.stopx=i=r+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=s+t.height,this.nextData.cnt=1),t.x=r,t.y=s,this.updateVal(this.data,"startx",r,Math.min),this.updateVal(this.data,"starty",s,Math.min),this.updateVal(this.data,"stopx",i,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",r,Math.min),this.updateVal(this.nextData,"starty",s,Math.min),this.updateVal(this.nextData,"stopx",i,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},a1(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}},d(da,"Bounds"),da),a1=d(function(e){Fe(qt,e),e.fontFamily&&(qt.personFontFamily=qt.systemFontFamily=qt.messageFontFamily=e.fontFamily),e.fontSize&&(qt.personFontSize=qt.systemFontSize=qt.messageFontSize=e.fontSize),e.fontWeight&&(qt.personFontWeight=qt.systemFontWeight=qt.messageFontWeight=e.fontWeight)},"setConf"),Io=d((e,t)=>({fontFamily:e[t+"FontFamily"],fontSize:e[t+"FontSize"],fontWeight:e[t+"FontWeight"]}),"c4ShapeFont"),Sc=d(e=>({fontFamily:e.boundaryFontFamily,fontSize:e.boundaryFontSize,fontWeight:e.boundaryFontWeight}),"boundaryFont"),YI=d(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont");function Zr(e,t,r,i,s){if(!t[e].width)if(r)t[e].text=qx(t[e].text,s,i),t[e].textLines=t[e].text.split(Ct.lineBreakRegex).length,t[e].width=s,t[e].height=ph(t[e].text,i);else{let n=t[e].text.split(Ct.lineBreakRegex);t[e].textLines=n.length;let a=0;t[e].height=0,t[e].width=0;for(const o of n)t[e].width=Math.max(Tr(o,i),t[e].width),a=ph(o,i),t[e].height=t[e].height+a}}d(Zr,"calcC4ShapeTextWH");var i5=d(function(e,t,r){t.x=r.data.startx,t.y=r.data.starty,t.width=r.data.stopx-r.data.startx,t.height=r.data.stopy-r.data.starty,t.label.y=qt.c4ShapeMargin-35;let i=t.wrap&&qt.wrap,s=Sc(qt);s.fontSize=s.fontSize+2,s.fontWeight="bold";let n=Tr(t.label.text,s);Zr("label",t,i,s,n),yi.drawBoundary(e,t,qt)},"drawBoundary"),s5=d(function(e,t,r,i){let s=0;for(const n of i){s=0;const a=r[n];let o=Io(qt,a.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,a.typeC4Shape.width=Tr(""+a.typeC4Shape.text+"",o),a.typeC4Shape.height=o.fontSize+2,a.typeC4Shape.Y=qt.c4ShapePadding,s=a.typeC4Shape.Y+a.typeC4Shape.height-4,a.image={width:0,height:0,Y:0},a.typeC4Shape.text){case"person":case"external_person":a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height;break}a.sprite&&(a.image.width=48,a.image.height=48,a.image.Y=s,s=a.image.Y+a.image.height);let h=a.wrap&&qt.wrap,l=qt.width-qt.c4ShapePadding*2,u=Io(qt,a.typeC4Shape.text);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",Zr("label",a,h,u,l),a.label.Y=s+8,s=a.label.Y+a.label.height,a.type&&a.type.text!==""){a.type.text="["+a.type.text+"]";let g=Io(qt,a.typeC4Shape.text);Zr("type",a,h,g,l),a.type.Y=s+5,s=a.type.Y+a.type.height}else if(a.techn&&a.techn.text!==""){a.techn.text="["+a.techn.text+"]";let g=Io(qt,a.techn.text);Zr("techn",a,h,g,l),a.techn.Y=s+5,s=a.techn.Y+a.techn.height}let f=s,p=a.label.width;if(a.descr&&a.descr.text!==""){let g=Io(qt,a.typeC4Shape.text);Zr("descr",a,h,g,l),a.descr.Y=s+20,s=a.descr.Y+a.descr.height,p=Math.max(a.label.width,a.descr.width),f=s-a.descr.textLines*5}p=p+qt.c4ShapePadding,a.width=Math.max(a.width||qt.width,p,qt.width),a.height=Math.max(a.height||qt.height,f,qt.height),a.margin=a.margin||qt.c4ShapeMargin,e.insert(a),yi.drawC4Shape(t,a,qt)}e.bumpLastMargin(qt.c4ShapeMargin)},"drawC4ShapeArray"),fa,Ur=(fa=class{constructor(t,r){this.x=t,this.y=r}},d(fa,"Point"),fa),cg=d(function(e,t){let r=e.x,i=e.y,s=t.x,n=t.y,a=r+e.width/2,o=i+e.height/2,h=Math.abs(r-s),l=Math.abs(i-n),u=l/h,f=e.height/e.width,p=null;return i==n&&r<s?p=new Ur(r+e.width,o):i==n&&r>s?p=new Ur(r,o):r==s&&i<n?p=new Ur(a,i+e.height):r==s&&i>n&&(p=new Ur(a,i)),r>s&&i<n?f>=u?p=new Ur(r,o+u*e.width/2):p=new Ur(a-h/l*e.height/2,i+e.height):r<s&&i<n?f>=u?p=new Ur(r+e.width,o+u*e.width/2):p=new Ur(a+h/l*e.height/2,i+e.height):r<s&&i>n?f>=u?p=new Ur(r+e.width,o-u*e.width/2):p=new Ur(a+e.height/2*h/l,i):r>s&&i>n&&(f>=u?p=new Ur(r,o-e.width/2*u):p=new Ur(a-e.height/2*h/l,i)),p},"getIntersectPoint"),GI=d(function(e,t){let r={x:0,y:0};r.x=t.x+t.width/2,r.y=t.y+t.height/2;let i=cg(e,r);r.x=e.x+e.width/2,r.y=e.y+e.height/2;let s=cg(t,r);return{startPoint:i,endPoint:s}},"getIntersectPoints"),HI=d(function(e,t,r,i){let s=0;for(let n of t){s=s+1;let a=n.wrap&&qt.wrap,o=YI(qt);i.db.getC4Type()==="C4Dynamic"&&(n.label.text=s+": "+n.label.text);let l=Tr(n.label.text,o);Zr("label",n,a,o,l),n.techn&&n.techn.text!==""&&(l=Tr(n.techn.text,o),Zr("techn",n,a,o,l)),n.descr&&n.descr.text!==""&&(l=Tr(n.descr.text,o),Zr("descr",n,a,o,l));let u=r(n.from),f=r(n.to),p=GI(u,f);n.startPoint=p.startPoint,n.endPoint=p.endPoint}yi.drawRels(e,t,qt)},"drawRels");function ep(e,t,r,i,s){let n=new r5(s);n.data.widthLimit=r.data.widthLimit/Math.min(n1,i.length);for(let[a,o]of i.entries()){let h=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=h,h=o.image.Y+o.image.height);let l=o.wrap&&qt.wrap,u=Sc(qt);if(u.fontSize=u.fontSize+2,u.fontWeight="bold",Zr("label",o,l,u,n.data.widthLimit),o.label.Y=h+8,h=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=Sc(qt);Zr("type",o,l,y,n.data.widthLimit),o.type.Y=h+5,h=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=Sc(qt);y.fontSize=y.fontSize-2,Zr("descr",o,l,y,n.data.widthLimit),o.descr.Y=h+20,h=o.descr.Y+o.descr.height}if(a==0||a%n1===0){let y=r.data.startx+qt.diagramMarginX,m=r.data.stopy+qt.diagramMarginY+h;n.setData(y,y,m,m)}else{let y=n.data.stopx!==n.data.startx?n.data.stopx+qt.diagramMarginX:n.data.startx,m=n.data.starty;n.setData(y,y,m,m)}n.name=o.alias;let f=s.db.getC4ShapeArray(o.alias),p=s.db.getC4ShapeKeys(o.alias);p.length>0&&s5(n,e,f,p),t=o.alias;let g=s.db.getBoundaries(t);g.length>0&&ep(e,t,n,g,s),o.alias!=="global"&&i5(e,o,n),r.data.stopy=Math.max(n.data.stopy+qt.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(n.data.stopx+qt.c4ShapeMargin,r.data.stopx),kh=Math.max(kh,r.data.stopx),wh=Math.max(wh,r.data.stopy)}}d(ep,"drawInsideBoundary");var UI=d(function(e,t,r,i){qt=it().c4;const s=it().securityLevel;let n;s==="sandbox"&&(n=_t("#i"+t));const a=_t(s==="sandbox"?n.nodes()[0].contentDocument.body:"body");let o=i.db;i.db.setWrap(qt.wrap),e5=o.getC4ShapeInRow(),n1=o.getC4BoundaryInRow(),P.debug(`C:${JSON.stringify(qt,null,2)}`);const h=s==="sandbox"?a.select(`[id="${t}"]`):_t(`[id="${t}"]`);yi.insertComputerIcon(h),yi.insertDatabaseIcon(h),yi.insertClockIcon(h);let l=new r5(i);l.setData(qt.diagramMarginX,qt.diagramMarginX,qt.diagramMarginY,qt.diagramMarginY),l.data.widthLimit=screen.availWidth,kh=qt.diagramMarginX,wh=qt.diagramMarginY;const u=i.db.getTitle();let f=i.db.getBoundaries("");ep(h,"",l,f,i),yi.insertArrowHead(h),yi.insertArrowEnd(h),yi.insertArrowCrossHead(h),yi.insertArrowFilledHead(h),HI(h,i.db.getRels(),i.db.getC4Shape,i),l.data.stopx=kh,l.data.stopy=wh;const p=l.data;let y=p.stopy-p.starty+2*qt.diagramMarginY;const x=p.stopx-p.startx+2*qt.diagramMarginX;u&&h.append("text").text(u).attr("x",(p.stopx-p.startx)/2-4*qt.diagramMarginX).attr("y",p.starty+qt.diagramMarginY),Er(h,y,x,qt.useMaxWidth);const b=u?60:0;h.attr("viewBox",p.startx-qt.diagramMarginX+" -"+(qt.diagramMarginY+b)+" "+x+" "+(y+b)),P.debug("models:",p)},"draw"),hg={drawPersonOrSystemArray:s5,drawBoundary:i5,setConf:a1,draw:UI},jI=d(e=>`.person {
    stroke: ${e.personBorder};
    fill: ${e.personBkg};
  }
`,"getStyles"),XI=jI,KI={parser:iI,db:s1,renderer:hg,styles:XI,init:d(({c4:e,wrap:t})=>{hg.setConf(e),s1.setWrap(t)},"init")};const QI=Object.freeze(Object.defineProperty({__proto__:null,diagram:KI},Symbol.toStringTag,{value:"Module"}));var ql=d(()=>`
  /* Font Awesome icon styling - consolidated */
  .label-icon {
    display: inline-block;
    height: 1em;
    overflow: visible;
    vertical-align: -0.125em;
  }
  
  .node .label-icon path {
    fill: currentColor;
    stroke: revert;
    stroke-width: revert;
  }
`,"getIconStyles"),So=d((e,t)=>{let r;return t==="sandbox"&&(r=_t("#i"+e)),_t(t==="sandbox"?r.nodes()[0].contentDocument.body:"body").select(`[id="${e}"]`)},"getDiagramElement"),kn=d((e,t,r,i)=>{e.attr("class",r);const{width:s,height:n,x:a,y:o}=ZI(e,t);Er(e,n,s,i);const h=JI(a,o,s,n,t);e.attr("viewBox",h),P.debug(`viewBox configured: ${h} with padding: ${t}`)},"setupViewPortForSVG"),ZI=d((e,t)=>{var i;const r=((i=e.node())==null?void 0:i.getBBox())||{width:0,height:0,x:0,y:0};return{width:r.width+t*2,height:r.height+t*2,x:r.x,y:r.y}},"calculateDimensionsWithPadding"),JI=d((e,t,r,i,s)=>`${e-s} ${t-s} ${r} ${i}`,"createViewBox"),tN="flowchart-",pa,eN=(pa=class{constructor(){this.vertexCounter=0,this.config=it(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=We,this.setAccDescription=Qe,this.setDiagramTitle=ir,this.getAccTitle=Ke,this.getAccDescription=Ze,this.getDiagramTitle=Ye,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(t){return Ct.sanitizeText(t,this.config)}lookUpDomId(t){for(const r of this.vertices.values())if(r.id===t)return r.domId;return t}addVertex(t,r,i,s,n,a,o={},h){var g,y;if(!t||t.trim().length===0)return;let l;if(h!==void 0){let m;h.includes(`
`)?m=h+`
`:m=`{
`+h+`
}`,l=eu(m,{schema:tu})}const u=this.edges.find(m=>m.id===t);if(u){const m=l;(m==null?void 0:m.animate)!==void 0&&(u.animate=m.animate),(m==null?void 0:m.animation)!==void 0&&(u.animation=m.animation),(m==null?void 0:m.curve)!==void 0&&(u.interpolate=m.curve);return}let f,p=this.vertices.get(t);if(p===void 0&&(p={id:t,labelType:"text",domId:tN+t+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(t,p)),this.vertexCounter++,r!==void 0?(this.config=it(),f=this.sanitizeText(r.text.trim()),p.labelType=r.type,f.startsWith('"')&&f.endsWith('"')&&(f=f.substring(1,f.length-1)),p.text=f):p.text===void 0&&(p.text=t),i!==void 0&&(p.type=i),s!=null&&s.forEach(m=>{p.styles.push(m)}),n!=null&&n.forEach(m=>{p.classes.push(m)}),a!==void 0&&(p.dir=a),p.props===void 0?p.props=o:o!==void 0&&Object.assign(p.props,o),l!==void 0){if(l.shape){if(l.shape!==l.shape.toLowerCase()||l.shape.includes("_"))throw new Error(`No such shape: ${l.shape}. Shape names should be lowercase.`);if(!C3(l.shape))throw new Error(`No such shape: ${l.shape}.`);p.type=l==null?void 0:l.shape}l!=null&&l.label&&(p.text=l==null?void 0:l.label),l!=null&&l.icon&&(p.icon=l==null?void 0:l.icon,!((g=l.label)!=null&&g.trim())&&p.text===t&&(p.text="")),l!=null&&l.form&&(p.form=l==null?void 0:l.form),l!=null&&l.pos&&(p.pos=l==null?void 0:l.pos),l!=null&&l.img&&(p.img=l==null?void 0:l.img,!((y=l.label)!=null&&y.trim())&&p.text===t&&(p.text="")),l!=null&&l.constraint&&(p.constraint=l.constraint),l.w&&(p.assetWidth=Number(l.w)),l.h&&(p.assetHeight=Number(l.h))}}addSingleLink(t,r,i,s){const o={start:t,end:r,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};P.info("abc78 Got edge...",o);const h=i.text;if(h!==void 0&&(o.text=this.sanitizeText(h.text.trim()),o.text.startsWith('"')&&o.text.endsWith('"')&&(o.text=o.text.substring(1,o.text.length-1)),o.labelType=h.type),i!==void 0&&(o.type=i.type,o.stroke=i.stroke,o.length=i.length>10?10:i.length),s&&!this.edges.some(l=>l.id===s))o.id=s,o.isUserDefinedId=!0;else{const l=this.edges.filter(u=>u.start===o.start&&u.end===o.end);l.length===0?o.id=ea(o.start,o.end,{counter:0,prefix:"L"}):o.id=ea(o.start,o.end,{counter:l.length+1,prefix:"L"})}if(this.edges.length<(this.config.maxEdges??500))P.info("Pushing edge..."),this.edges.push(o);else throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)}isLinkData(t){return t!==null&&typeof t=="object"&&"id"in t&&typeof t.id=="string"}addLink(t,r,i){const s=this.isLinkData(i)?i.id.replace("@",""):void 0;P.info("addLink",t,r,s);for(const n of t)for(const a of r){const o=n===t[t.length-1],h=a===r[0];o&&h?this.addSingleLink(n,a,i,s):this.addSingleLink(n,a,i,void 0)}}updateLinkInterpolate(t,r){t.forEach(i=>{i==="default"?this.edges.defaultInterpolate=r:this.edges[i].interpolate=r})}updateLink(t,r){t.forEach(i=>{var s,n,a,o,h,l;if(typeof i=="number"&&i>=this.edges.length)throw new Error(`The index ${i} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);i==="default"?this.edges.defaultStyle=r:(this.edges[i].style=r,(((n=(s=this.edges[i])==null?void 0:s.style)==null?void 0:n.length)??0)>0&&!((o=(a=this.edges[i])==null?void 0:a.style)!=null&&o.some(u=>u==null?void 0:u.startsWith("fill")))&&((l=(h=this.edges[i])==null?void 0:h.style)==null||l.push("fill:none")))})}addClass(t,r){const i=r.join().replace(/\\,/g,"").replace(/,/g,";").replace(//g,",").split(";");t.split(",").forEach(s=>{let n=this.classes.get(s);n===void 0&&(n={id:s,styles:[],textStyles:[]},this.classes.set(s,n)),i!=null&&i.forEach(a=>{if(/color/.exec(a)){const o=a.replace("fill","bgFill");n.textStyles.push(o)}n.styles.push(a)})})}setDirection(t){this.direction=t.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),this.direction==="TD"&&(this.direction="TB")}setClass(t,r){for(const i of t.split(",")){const s=this.vertices.get(i);s&&s.classes.push(r);const n=this.edges.find(o=>o.id===i);n&&n.classes.push(r);const a=this.subGraphLookup.get(i);a&&a.classes.push(r)}}setTooltip(t,r){if(r!==void 0){r=this.sanitizeText(r);for(const i of t.split(","))this.tooltips.set(this.version==="gen-1"?this.lookUpDomId(i):i,r)}}setClickFun(t,r,i){const s=this.lookUpDomId(t);if(it().securityLevel!=="loose"||r===void 0)return;let n=[];if(typeof i=="string"){n=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let o=0;o<n.length;o++){let h=n[o].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),n[o]=h}}n.length===0&&n.push(t);const a=this.vertices.get(t);a&&(a.haveCallback=!0,this.funs.push(()=>{const o=document.querySelector(`[id="${s}"]`);o!==null&&o.addEventListener("click",()=>{ie.runFunc(r,...n)},!1)}))}setLink(t,r,i){t.split(",").forEach(s=>{const n=this.vertices.get(s);n!==void 0&&(n.link=ie.formatUrl(r,this.config),n.linkTarget=i)}),this.setClass(t,"clickable")}getTooltip(t){return this.tooltips.get(t)}setClickEvent(t,r,i){t.split(",").forEach(s=>{this.setClickFun(s,r,i)}),this.setClass(t,"clickable")}bindFunctions(t){this.funs.forEach(r=>{r(t)})}getDirection(){var t;return(t=this.direction)==null?void 0:t.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(t){let r=_t(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=_t("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),_t(t).select("svg").selectAll("g.node").on("mouseover",n=>{var l;const a=_t(n.currentTarget);if(a.attr("title")===null)return;const h=(l=n.currentTarget)==null?void 0:l.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(a.attr("title")).style("left",window.scrollX+h.left+(h.right-h.left)/2+"px").style("top",window.scrollY+h.bottom+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),a.classed("hover",!0)}).on("mouseout",n=>{r.transition().duration(500).style("opacity",0),_t(n.currentTarget).classed("hover",!1)})}clear(t="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=t,this.config=it(),qe()}setGen(t){this.version=t||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(t,r,i){let s=t.text.trim(),n=i.text;t===i&&/\s/.exec(i.text)&&(s=void 0);const o=d(p=>{const g={boolean:{},number:{},string:{}},y=[];let m;return{nodeList:p.filter(function(b){const _=typeof b;return b.stmt&&b.stmt==="dir"?(m=b.value,!1):b.trim()===""?!1:_ in g?g[_].hasOwnProperty(b)?!1:g[_][b]=!0:y.includes(b)?!1:y.push(b)}),dir:m}},"uniq")(r.flat()),h=o.nodeList;let l=o.dir;const u=it().flowchart??{};if(l=l??(u.inheritDir?this.getDirection()??it().direction??void 0:void 0),this.version==="gen-1")for(let p=0;p<h.length;p++)h[p]=this.lookUpDomId(h[p]);s=s??"subGraph"+this.subCount,n=n||"",n=this.sanitizeText(n),this.subCount=this.subCount+1;const f={id:s,nodes:h,title:n.trim(),classes:[],dir:l,labelType:i.type};return P.info("Adding",f.id,f.nodes,f.dir),f.nodes=this.makeUniq(f,this.subGraphs).nodes,this.subGraphs.push(f),this.subGraphLookup.set(s,f),s}getPosForId(t){for(const[r,i]of this.subGraphs.entries())if(i.id===t)return r;return-1}indexNodes2(t,r){const i=this.subGraphs[r].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=r,this.subGraphs[r].id===t)return{result:!0,count:0};let s=0,n=1;for(;s<i.length;){const a=this.getPosForId(i[s]);if(a>=0){const o=this.indexNodes2(t,a);if(o.result)return{result:!0,count:n+o.count};n=n+o.count}s=s+1}return{result:!1,count:n}}getDepthFirstPos(t){return this.posCrossRef[t]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return this.firstGraphFlag?(this.firstGraphFlag=!1,!0):!1}destructStartLink(t){let r=t.trim(),i="arrow_open";switch(r[0]){case"<":i="arrow_point",r=r.slice(1);break;case"x":i="arrow_cross",r=r.slice(1);break;case"o":i="arrow_circle",r=r.slice(1);break}let s="normal";return r.includes("=")&&(s="thick"),r.includes(".")&&(s="dotted"),{type:i,stroke:s}}countChar(t,r){const i=r.length;let s=0;for(let n=0;n<i;++n)r[n]===t&&++s;return s}destructEndLink(t){const r=t.trim();let i=r.slice(0,-1),s="arrow_open";switch(r.slice(-1)){case"x":s="arrow_cross",r.startsWith("x")&&(s="double_"+s,i=i.slice(1));break;case">":s="arrow_point",r.startsWith("<")&&(s="double_"+s,i=i.slice(1));break;case"o":s="arrow_circle",r.startsWith("o")&&(s="double_"+s,i=i.slice(1));break}let n="normal",a=i.length-1;i.startsWith("=")&&(n="thick"),i.startsWith("~")&&(n="invisible");const o=this.countChar(".",i);return o&&(n="dotted",a=o),{type:s,stroke:n,length:a}}destructLink(t,r){const i=this.destructEndLink(t);let s;if(r){if(s=this.destructStartLink(r),s.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if(s.type==="arrow_open")s.type=i.type;else{if(s.type!==i.type)return{type:"INVALID",stroke:"INVALID"};s.type="double_"+s.type}return s.type==="double_arrow"&&(s.type="double_arrow_point"),s.length=i.length,s}return i}exists(t,r){for(const i of t)if(i.nodes.includes(r))return!0;return!1}makeUniq(t,r){const i=[];return t.nodes.forEach((s,n)=>{this.exists(r,s)||i.push(t.nodes[n])}),{nodes:i}}getTypeFromVertex(t){if(t.img)return"imageSquare";if(t.icon)return t.form==="circle"?"iconCircle":t.form==="square"?"iconSquare":t.form==="rounded"?"iconRounded":"icon";switch(t.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return t.type}}findNode(t,r){return t.find(i=>i.id===r)}destructEdgeType(t){let r="none",i="arrow_point";switch(t){case"arrow_point":case"arrow_circle":case"arrow_cross":i=t;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":r=t.replace("double_",""),i=r;break}return{arrowTypeStart:r,arrowTypeEnd:i}}addNodeFromVertex(t,r,i,s,n,a){var u;const o=i.get(t.id),h=s.get(t.id)??!1,l=this.findNode(r,t.id);if(l)l.cssStyles=t.styles,l.cssCompiledStyles=this.getCompiledStyles(t.classes),l.cssClasses=t.classes.join(" ");else{const f={id:t.id,label:t.text,labelStyle:"",parentId:o,padding:((u=n.flowchart)==null?void 0:u.padding)||8,cssStyles:t.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...t.classes]),cssClasses:"default "+t.classes.join(" "),dir:t.dir,domId:t.domId,look:a,link:t.link,linkTarget:t.linkTarget,tooltip:this.getTooltip(t.id),icon:t.icon,pos:t.pos,img:t.img,assetWidth:t.assetWidth,assetHeight:t.assetHeight,constraint:t.constraint};h?r.push({...f,isGroup:!0,shape:"rect"}):r.push({...f,isGroup:!1,shape:this.getTypeFromVertex(t)})}}getCompiledStyles(t){let r=[];for(const i of t){const s=this.classes.get(i);s!=null&&s.styles&&(r=[...r,...s.styles??[]].map(n=>n.trim())),s!=null&&s.textStyles&&(r=[...r,...s.textStyles??[]].map(n=>n.trim()))}return r}getData(){const t=it(),r=[],i=[],s=this.getSubGraphs(),n=new Map,a=new Map;for(let l=s.length-1;l>=0;l--){const u=s[l];u.nodes.length>0&&a.set(u.id,!0);for(const f of u.nodes)n.set(f,u.id)}for(let l=s.length-1;l>=0;l--){const u=s[l];r.push({id:u.id,label:u.title,labelStyle:"",parentId:n.get(u.id),padding:8,cssCompiledStyles:this.getCompiledStyles(u.classes),cssClasses:u.classes.join(" "),shape:"rect",dir:u.dir,isGroup:!0,look:t.look})}this.getVertices().forEach(l=>{this.addNodeFromVertex(l,r,n,a,t,t.look||"classic")});const h=this.getEdges();return h.forEach((l,u)=>{var m;const{arrowTypeStart:f,arrowTypeEnd:p}=this.destructEdgeType(l.type),g=[...h.defaultStyle??[]];l.style&&g.push(...l.style);const y={id:ea(l.start,l.end,{counter:u,prefix:"L"},l.id),isUserDefinedId:l.isUserDefinedId,start:l.start,end:l.end,type:l.type??"normal",label:l.text,labelpos:"c",thickness:l.stroke,minlen:l.length,classes:(l==null?void 0:l.stroke)==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:(l==null?void 0:l.stroke)==="invisible"||(l==null?void 0:l.type)==="arrow_open"?"none":f,arrowTypeEnd:(l==null?void 0:l.stroke)==="invisible"||(l==null?void 0:l.type)==="arrow_open"?"none":p,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(l.classes),labelStyle:g,style:g,pattern:l.stroke,look:t.look,animate:l.animate,animation:l.animation,curve:l.interpolate||this.edges.defaultInterpolate||((m=t.flowchart)==null?void 0:m.curve)};i.push(y)}),{nodes:r,edges:i,other:{},config:t}}defaultConfig(){return B2.flowchart}},d(pa,"FlowDB"),pa),rN=d(function(e,t){return t.db.getClasses()},"getClasses"),iN=d(async function(e,t,r,i){var g;P.info("REF0:"),P.info("Drawing state diagram (v2)",t);const{securityLevel:s,flowchart:n,layout:a}=it();let o;s==="sandbox"&&(o=_t("#i"+t));const h=s==="sandbox"?o.nodes()[0].contentDocument:document;P.debug("Before getData: ");const l=i.db.getData();P.debug("Data: ",l);const u=So(t,s),f=i.db.getDirection();l.type=i.type,l.layoutAlgorithm=Wl(a),l.layoutAlgorithm==="dagre"&&a==="elk"&&P.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),l.direction=f,l.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,l.rankSpacing=(n==null?void 0:n.rankSpacing)||50,l.markers=["point","circle","cross"],l.diagramId=t,P.debug("REF1:",l),await wo(l,u);const p=((g=l.config.flowchart)==null?void 0:g.diagramPadding)??8;ie.insertTitle(u,"flowchartTitleText",(n==null?void 0:n.titleTopMargin)||0,i.db.getDiagramTitle()),kn(u,p,"flowchart",(n==null?void 0:n.useMaxWidth)||!1);for(const y of l.nodes){const m=_t(`#${t} [id="${y.id}"]`);if(!m||!y.link)continue;const x=h.createElementNS("http://www.w3.org/2000/svg","a");x.setAttributeNS("http://www.w3.org/2000/svg","class",y.cssClasses),x.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),s==="sandbox"?x.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):y.linkTarget&&x.setAttributeNS("http://www.w3.org/2000/svg","target",y.linkTarget);const b=m.insert(function(){return x},":first-child"),_=m.select(".label-container");_&&b.append(function(){return _.node()});const S=m.select(".label");S&&b.append(function(){return S.node()})}},"draw"),sN={getClasses:rN,draw:iN},o1=(function(){var e=d(function(is,Ut,Jt,ne){for(Jt=Jt||{},ne=is.length;ne--;Jt[is[ne]]=Ut);return Jt},"o"),t=[1,4],r=[1,3],i=[1,5],s=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],n=[2,2],a=[1,13],o=[1,14],h=[1,15],l=[1,16],u=[1,23],f=[1,25],p=[1,26],g=[1,27],y=[1,49],m=[1,48],x=[1,29],b=[1,30],_=[1,31],S=[1,32],C=[1,33],k=[1,44],v=[1,46],A=[1,42],L=[1,47],w=[1,43],R=[1,50],T=[1,45],V=[1,51],N=[1,52],D=[1,34],E=[1,35],M=[1,36],F=[1,37],I=[1,57],B=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],X=[1,61],$=[1,60],G=[1,62],nt=[8,9,11,75,77,78],ht=[1,78],tt=[1,91],dt=[1,96],st=[1,95],ot=[1,92],K=[1,88],lt=[1,94],U=[1,90],j=[1,97],Q=[1,93],W=[1,98],et=[1,89],z=[8,9,10,11,40,75,77,78],vt=[8,9,10,11,40,46,75,77,78],O=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],Zt=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],J=[44,60,89,102,105,106,109,111,114,115,116],Yt=[1,121],It=[1,122],se=[1,124],gt=[1,123],St=[44,60,62,74,89,102,105,106,109,111,114,115,116],ut=[1,133],pt=[1,147],wt=[1,148],rt=[1,149],bt=[1,150],q=[1,135],Lt=[1,137],Y=[1,141],Tt=[1,142],ft=[1,143],Ft=[1,144],mt=[1,145],xt=[1,146],re=[1,151],At=[1,152],pe=[1,131],ar=[1,132],ae=[1,139],_e=[1,134],Ge=[1,138],Kt=[1,136],Ce=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Se=[1,154],tr=[1,156],Ht=[8,9,11],ve=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Ot=[1,176],oe=[1,172],ee=[1,173],Xt=[1,177],Wt=[1,174],le=[1,175],hr=[77,116,119],ce=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],He=[10,106],$r=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Mr=[1,247],De=[1,245],Ci=[1,249],Ei=[1,243],Ai=[1,244],Li=[1,246],Di=[1,248],Ri=[1,250],An=[1,268],Pp=[8,9,11,106],hi=[8,9,10,11,60,84,105,106,109,110,111,112],Tu={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:d(function(Ut,Jt,ne,Et,Ee,H,Co){var Z=H.length-1;switch(Ee){case 2:this.$=[];break;case 3:(!Array.isArray(H[Z])||H[Z].length>0)&&H[Z-1].push(H[Z]),this.$=H[Z-1];break;case 4:case 183:this.$=H[Z];break;case 11:Et.setDirection("TB"),this.$="TB";break;case 12:Et.setDirection(H[Z-1]),this.$=H[Z-1];break;case 27:this.$=H[Z-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=Et.addSubGraph(H[Z-6],H[Z-1],H[Z-4]);break;case 34:this.$=Et.addSubGraph(H[Z-3],H[Z-1],H[Z-3]);break;case 35:this.$=Et.addSubGraph(void 0,H[Z-1],void 0);break;case 37:this.$=H[Z].trim(),Et.setAccTitle(this.$);break;case 38:case 39:this.$=H[Z].trim(),Et.setAccDescription(this.$);break;case 43:this.$=H[Z-1]+H[Z];break;case 44:this.$=H[Z];break;case 45:Et.addVertex(H[Z-1][H[Z-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,H[Z]),Et.addLink(H[Z-3].stmt,H[Z-1],H[Z-2]),this.$={stmt:H[Z-1],nodes:H[Z-1].concat(H[Z-3].nodes)};break;case 46:Et.addLink(H[Z-2].stmt,H[Z],H[Z-1]),this.$={stmt:H[Z],nodes:H[Z].concat(H[Z-2].nodes)};break;case 47:Et.addLink(H[Z-3].stmt,H[Z-1],H[Z-2]),this.$={stmt:H[Z-1],nodes:H[Z-1].concat(H[Z-3].nodes)};break;case 48:this.$={stmt:H[Z-1],nodes:H[Z-1]};break;case 49:Et.addVertex(H[Z-1][H[Z-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,H[Z]),this.$={stmt:H[Z-1],nodes:H[Z-1],shapeData:H[Z]};break;case 50:this.$={stmt:H[Z],nodes:H[Z]};break;case 51:this.$=[H[Z]];break;case 52:Et.addVertex(H[Z-5][H[Z-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,H[Z-4]),this.$=H[Z-5].concat(H[Z]);break;case 53:this.$=H[Z-4].concat(H[Z]);break;case 54:this.$=H[Z];break;case 55:this.$=H[Z-2],Et.setClass(H[Z-2],H[Z]);break;case 56:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"square");break;case 57:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"doublecircle");break;case 58:this.$=H[Z-5],Et.addVertex(H[Z-5],H[Z-2],"circle");break;case 59:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"ellipse");break;case 60:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"stadium");break;case 61:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"subroutine");break;case 62:this.$=H[Z-7],Et.addVertex(H[Z-7],H[Z-1],"rect",void 0,void 0,void 0,Object.fromEntries([[H[Z-5],H[Z-3]]]));break;case 63:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"cylinder");break;case 64:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"round");break;case 65:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"diamond");break;case 66:this.$=H[Z-5],Et.addVertex(H[Z-5],H[Z-2],"hexagon");break;case 67:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"odd");break;case 68:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"trapezoid");break;case 69:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"inv_trapezoid");break;case 70:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"lean_right");break;case 71:this.$=H[Z-3],Et.addVertex(H[Z-3],H[Z-1],"lean_left");break;case 72:this.$=H[Z],Et.addVertex(H[Z]);break;case 73:H[Z-1].text=H[Z],this.$=H[Z-1];break;case 74:case 75:H[Z-2].text=H[Z-1],this.$=H[Z-2];break;case 76:this.$=H[Z];break;case 77:var Oe=Et.destructLink(H[Z],H[Z-2]);this.$={type:Oe.type,stroke:Oe.stroke,length:Oe.length,text:H[Z-1]};break;case 78:var Oe=Et.destructLink(H[Z],H[Z-2]);this.$={type:Oe.type,stroke:Oe.stroke,length:Oe.length,text:H[Z-1],id:H[Z-3]};break;case 79:this.$={text:H[Z],type:"text"};break;case 80:this.$={text:H[Z-1].text+""+H[Z],type:H[Z-1].type};break;case 81:this.$={text:H[Z],type:"string"};break;case 82:this.$={text:H[Z],type:"markdown"};break;case 83:var Oe=Et.destructLink(H[Z]);this.$={type:Oe.type,stroke:Oe.stroke,length:Oe.length};break;case 84:var Oe=Et.destructLink(H[Z]);this.$={type:Oe.type,stroke:Oe.stroke,length:Oe.length,id:H[Z-1]};break;case 85:this.$=H[Z-1];break;case 86:this.$={text:H[Z],type:"text"};break;case 87:this.$={text:H[Z-1].text+""+H[Z],type:H[Z-1].type};break;case 88:this.$={text:H[Z],type:"string"};break;case 89:case 104:this.$={text:H[Z],type:"markdown"};break;case 101:this.$={text:H[Z],type:"text"};break;case 102:this.$={text:H[Z-1].text+""+H[Z],type:H[Z-1].type};break;case 103:this.$={text:H[Z],type:"text"};break;case 105:this.$=H[Z-4],Et.addClass(H[Z-2],H[Z]);break;case 106:this.$=H[Z-4],Et.setClass(H[Z-2],H[Z]);break;case 107:case 115:this.$=H[Z-1],Et.setClickEvent(H[Z-1],H[Z]);break;case 108:case 116:this.$=H[Z-3],Et.setClickEvent(H[Z-3],H[Z-2]),Et.setTooltip(H[Z-3],H[Z]);break;case 109:this.$=H[Z-2],Et.setClickEvent(H[Z-2],H[Z-1],H[Z]);break;case 110:this.$=H[Z-4],Et.setClickEvent(H[Z-4],H[Z-3],H[Z-2]),Et.setTooltip(H[Z-4],H[Z]);break;case 111:this.$=H[Z-2],Et.setLink(H[Z-2],H[Z]);break;case 112:this.$=H[Z-4],Et.setLink(H[Z-4],H[Z-2]),Et.setTooltip(H[Z-4],H[Z]);break;case 113:this.$=H[Z-4],Et.setLink(H[Z-4],H[Z-2],H[Z]);break;case 114:this.$=H[Z-6],Et.setLink(H[Z-6],H[Z-4],H[Z]),Et.setTooltip(H[Z-6],H[Z-2]);break;case 117:this.$=H[Z-1],Et.setLink(H[Z-1],H[Z]);break;case 118:this.$=H[Z-3],Et.setLink(H[Z-3],H[Z-2]),Et.setTooltip(H[Z-3],H[Z]);break;case 119:this.$=H[Z-3],Et.setLink(H[Z-3],H[Z-2],H[Z]);break;case 120:this.$=H[Z-5],Et.setLink(H[Z-5],H[Z-4],H[Z]),Et.setTooltip(H[Z-5],H[Z-2]);break;case 121:this.$=H[Z-4],Et.addVertex(H[Z-2],void 0,void 0,H[Z]);break;case 122:this.$=H[Z-4],Et.updateLink([H[Z-2]],H[Z]);break;case 123:this.$=H[Z-4],Et.updateLink(H[Z-2],H[Z]);break;case 124:this.$=H[Z-8],Et.updateLinkInterpolate([H[Z-6]],H[Z-2]),Et.updateLink([H[Z-6]],H[Z]);break;case 125:this.$=H[Z-8],Et.updateLinkInterpolate(H[Z-6],H[Z-2]),Et.updateLink(H[Z-6],H[Z]);break;case 126:this.$=H[Z-6],Et.updateLinkInterpolate([H[Z-4]],H[Z]);break;case 127:this.$=H[Z-6],Et.updateLinkInterpolate(H[Z-4],H[Z]);break;case 128:case 130:this.$=[H[Z]];break;case 129:case 131:H[Z-2].push(H[Z]),this.$=H[Z-2];break;case 133:this.$=H[Z-1]+H[Z];break;case 181:this.$=H[Z];break;case 182:this.$=H[Z-1]+""+H[Z];break;case 184:this.$=H[Z-1]+""+H[Z];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"};break}},"anonymous"),table:[{3:1,4:2,9:t,10:r,12:i},{1:[3]},e(s,n,{5:6}),{4:7,9:t,10:r,12:i},{4:8,9:t,10:r,12:i},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:a,9:o,10:h,11:l,20:17,22:18,23:19,24:20,25:21,26:22,27:u,33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,84:x,85:b,86:_,87:S,88:C,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N,121:D,122:E,123:M,124:F},e(s,[2,9]),e(s,[2,10]),e(s,[2,11]),{8:[1,54],9:[1,55],10:I,15:53,18:56},e(B,[2,3]),e(B,[2,4]),e(B,[2,5]),e(B,[2,6]),e(B,[2,7]),e(B,[2,8]),{8:X,9:$,11:G,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:X,9:$,11:G,21:67},{8:X,9:$,11:G,21:68},{8:X,9:$,11:G,21:69},{8:X,9:$,11:G,21:70},{8:X,9:$,11:G,21:71},{8:X,9:$,10:[1,72],11:G,21:73},e(B,[2,36]),{35:[1,74]},{37:[1,75]},e(B,[2,39]),e(nt,[2,50],{18:76,39:77,10:I,40:ht}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:tt,44:dt,60:st,80:[1,86],89:ot,95:[1,83],97:[1,84],101:85,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et,120:87},e(B,[2,185]),e(B,[2,186]),e(B,[2,187]),e(B,[2,188]),e(z,[2,51]),e(z,[2,54],{46:[1,99]}),e(vt,[2,72],{113:112,29:[1,100],44:y,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:m,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:k,102:v,105:A,106:L,109:w,111:R,114:T,115:V,116:N}),e(O,[2,181]),e(O,[2,142]),e(O,[2,143]),e(O,[2,144]),e(O,[2,145]),e(O,[2,146]),e(O,[2,147]),e(O,[2,148]),e(O,[2,149]),e(O,[2,150]),e(O,[2,151]),e(O,[2,152]),e(s,[2,12]),e(s,[2,18]),e(s,[2,19]),{9:[1,113]},e(Zt,[2,26],{18:114,10:I}),e(B,[2,27]),{42:115,43:38,44:y,45:39,47:40,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},e(B,[2,40]),e(B,[2,41]),e(B,[2,42]),e(J,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:Yt,81:It,116:se,119:gt},{75:[1,125],77:[1,126]},e(St,[2,83]),e(B,[2,28]),e(B,[2,29]),e(B,[2,30]),e(B,[2,31]),e(B,[2,32]),{10:ut,12:pt,14:wt,27:rt,28:127,32:bt,44:q,60:Lt,75:Y,80:[1,129],81:[1,130],83:140,84:Tt,85:ft,86:Ft,87:mt,88:xt,89:re,90:At,91:128,105:pe,109:ar,111:ae,114:_e,115:Ge,116:Kt},e(Ce,n,{5:153}),e(B,[2,37]),e(B,[2,38]),e(nt,[2,48],{44:Se}),e(nt,[2,49],{18:155,10:I,40:tr}),e(z,[2,44]),{44:y,47:157,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},{102:[1,158],103:159,105:[1,160]},{44:y,47:161,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},{44:y,47:162,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},e(Ht,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},e(Ht,[2,115],{120:167,10:[1,166],14:tt,44:dt,60:st,89:ot,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et}),e(Ht,[2,117],{10:[1,168]}),e(ve,[2,183]),e(ve,[2,170]),e(ve,[2,171]),e(ve,[2,172]),e(ve,[2,173]),e(ve,[2,174]),e(ve,[2,175]),e(ve,[2,176]),e(ve,[2,177]),e(ve,[2,178]),e(ve,[2,179]),e(ve,[2,180]),{44:y,47:169,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},{30:170,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:178,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:180,50:[1,179],67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:181,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:182,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:183,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{109:[1,184]},{30:185,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:186,65:[1,187],67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:188,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:189,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{30:190,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},e(O,[2,182]),e(s,[2,20]),e(Zt,[2,25]),e(nt,[2,46],{39:191,18:192,10:I,40:ht}),e(J,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{77:[1,196],79:197,116:se,119:gt},e(hr,[2,79]),e(hr,[2,81]),e(hr,[2,82]),e(hr,[2,168]),e(hr,[2,169]),{76:198,79:120,80:Yt,81:It,116:se,119:gt},e(St,[2,84]),{8:X,9:$,10:ut,11:G,12:pt,14:wt,21:200,27:rt,29:[1,199],32:bt,44:q,60:Lt,75:Y,83:140,84:Tt,85:ft,86:Ft,87:mt,88:xt,89:re,90:At,91:201,105:pe,109:ar,111:ae,114:_e,115:Ge,116:Kt},e(ce,[2,101]),e(ce,[2,103]),e(ce,[2,104]),e(ce,[2,157]),e(ce,[2,158]),e(ce,[2,159]),e(ce,[2,160]),e(ce,[2,161]),e(ce,[2,162]),e(ce,[2,163]),e(ce,[2,164]),e(ce,[2,165]),e(ce,[2,166]),e(ce,[2,167]),e(ce,[2,90]),e(ce,[2,91]),e(ce,[2,92]),e(ce,[2,93]),e(ce,[2,94]),e(ce,[2,95]),e(ce,[2,96]),e(ce,[2,97]),e(ce,[2,98]),e(ce,[2,99]),e(ce,[2,100]),{6:11,7:12,8:a,9:o,10:h,11:l,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,202],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,84:x,85:b,86:_,87:S,88:C,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N,121:D,122:E,123:M,124:F},{10:I,18:203},{44:[1,204]},e(z,[2,43]),{10:[1,205],44:y,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:112,114:T,115:V,116:N},{10:[1,206]},{10:[1,207],106:[1,208]},e(He,[2,128]),{10:[1,209],44:y,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:112,114:T,115:V,116:N},{10:[1,210],44:y,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:112,114:T,115:V,116:N},{80:[1,211]},e(Ht,[2,109],{10:[1,212]}),e(Ht,[2,111],{10:[1,213]}),{80:[1,214]},e(ve,[2,184]),{80:[1,215],98:[1,216]},e(z,[2,55],{113:112,44:y,60:m,89:k,102:v,105:A,106:L,109:w,111:R,114:T,115:V,116:N}),{31:[1,217],67:Ot,82:218,116:Xt,117:Wt,118:le},e($r,[2,86]),e($r,[2,88]),e($r,[2,89]),e($r,[2,153]),e($r,[2,154]),e($r,[2,155]),e($r,[2,156]),{49:[1,219],67:Ot,82:218,116:Xt,117:Wt,118:le},{30:220,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{51:[1,221],67:Ot,82:218,116:Xt,117:Wt,118:le},{53:[1,222],67:Ot,82:218,116:Xt,117:Wt,118:le},{55:[1,223],67:Ot,82:218,116:Xt,117:Wt,118:le},{57:[1,224],67:Ot,82:218,116:Xt,117:Wt,118:le},{60:[1,225]},{64:[1,226],67:Ot,82:218,116:Xt,117:Wt,118:le},{66:[1,227],67:Ot,82:218,116:Xt,117:Wt,118:le},{30:228,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},{31:[1,229],67:Ot,82:218,116:Xt,117:Wt,118:le},{67:Ot,69:[1,230],71:[1,231],82:218,116:Xt,117:Wt,118:le},{67:Ot,69:[1,233],71:[1,232],82:218,116:Xt,117:Wt,118:le},e(nt,[2,45],{18:155,10:I,40:tr}),e(nt,[2,47],{44:Se}),e(J,[2,75]),e(J,[2,74]),{62:[1,234],67:Ot,82:218,116:Xt,117:Wt,118:le},e(J,[2,77]),e(hr,[2,80]),{77:[1,235],79:197,116:se,119:gt},{30:236,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},e(Ce,n,{5:237}),e(ce,[2,102]),e(B,[2,35]),{43:238,44:y,45:39,47:40,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},{10:I,18:239},{10:Mr,60:De,84:Ci,92:240,105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},{10:Mr,60:De,84:Ci,92:251,104:[1,252],105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},{10:Mr,60:De,84:Ci,92:253,104:[1,254],105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},{105:[1,255]},{10:Mr,60:De,84:Ci,92:256,105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},{44:y,47:257,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},e(Ht,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},e(Ht,[2,116]),e(Ht,[2,118],{10:[1,261]}),e(Ht,[2,119]),e(vt,[2,56]),e($r,[2,87]),e(vt,[2,57]),{51:[1,262],67:Ot,82:218,116:Xt,117:Wt,118:le},e(vt,[2,64]),e(vt,[2,59]),e(vt,[2,60]),e(vt,[2,61]),{109:[1,263]},e(vt,[2,63]),e(vt,[2,65]),{66:[1,264],67:Ot,82:218,116:Xt,117:Wt,118:le},e(vt,[2,67]),e(vt,[2,68]),e(vt,[2,70]),e(vt,[2,69]),e(vt,[2,71]),e([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),e(J,[2,78]),{31:[1,265],67:Ot,82:218,116:Xt,117:Wt,118:le},{6:11,7:12,8:a,9:o,10:h,11:l,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,266],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,84:x,85:b,86:_,87:S,88:C,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N,121:D,122:E,123:M,124:F},e(z,[2,53]),{43:267,44:y,45:39,47:40,60:m,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N},e(Ht,[2,121],{106:An}),e(Pp,[2,130],{108:269,10:Mr,60:De,84:Ci,105:Ei,109:Ai,110:Li,111:Di,112:Ri}),e(hi,[2,132]),e(hi,[2,134]),e(hi,[2,135]),e(hi,[2,136]),e(hi,[2,137]),e(hi,[2,138]),e(hi,[2,139]),e(hi,[2,140]),e(hi,[2,141]),e(Ht,[2,122],{106:An}),{10:[1,270]},e(Ht,[2,123],{106:An}),{10:[1,271]},e(He,[2,129]),e(Ht,[2,105],{106:An}),e(Ht,[2,106],{113:112,44:y,60:m,89:k,102:v,105:A,106:L,109:w,111:R,114:T,115:V,116:N}),e(Ht,[2,110]),e(Ht,[2,112],{10:[1,272]}),e(Ht,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:X,9:$,11:G,21:277},e(B,[2,34]),e(z,[2,52]),{10:Mr,60:De,84:Ci,105:Ei,107:278,108:242,109:Ai,110:Li,111:Di,112:Ri},e(hi,[2,133]),{14:tt,44:dt,60:st,89:ot,101:279,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et,120:87},{14:tt,44:dt,60:st,89:ot,101:280,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et,120:87},{98:[1,281]},e(Ht,[2,120]),e(vt,[2,58]),{30:282,67:Ot,80:oe,81:ee,82:171,116:Xt,117:Wt,118:le},e(vt,[2,66]),e(Ce,n,{5:283}),e(Pp,[2,131],{108:269,10:Mr,60:De,84:Ci,105:Ei,109:Ai,110:Li,111:Di,112:Ri}),e(Ht,[2,126],{120:167,10:[1,284],14:tt,44:dt,60:st,89:ot,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et}),e(Ht,[2,127],{120:167,10:[1,285],14:tt,44:dt,60:st,89:ot,105:K,106:lt,109:U,111:j,114:Q,115:W,116:et}),e(Ht,[2,114]),{31:[1,286],67:Ot,82:218,116:Xt,117:Wt,118:le},{6:11,7:12,8:a,9:o,10:h,11:l,20:17,22:18,23:19,24:20,25:21,26:22,27:u,32:[1,287],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,84:x,85:b,86:_,87:S,88:C,89:k,102:v,105:A,106:L,109:w,111:R,113:41,114:T,115:V,116:N,121:D,122:E,123:M,124:F},{10:Mr,60:De,84:Ci,92:288,105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},{10:Mr,60:De,84:Ci,92:289,105:Ei,107:241,108:242,109:Ai,110:Li,111:Di,112:Ri},e(vt,[2,62]),e(B,[2,33]),e(Ht,[2,124],{106:An}),e(Ht,[2,125],{106:An})],defaultActions:{},parseError:d(function(Ut,Jt){if(Jt.recoverable)this.trace(Ut);else{var ne=new Error(Ut);throw ne.hash=Jt,ne}},"parseError"),parse:d(function(Ut){var Jt=this,ne=[0],Et=[],Ee=[null],H=[],Co=this.table,Z="",Oe=0,Op=0,nk=2,Vp=1,ak=H.slice.call(arguments,1),er=Object.create(this.lexer),Es={yy:{}};for(var Su in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Su)&&(Es.yy[Su]=this.yy[Su]);er.setInput(Ut,Es.yy),Es.yy.lexer=er,Es.yy.parser=this,typeof er.yylloc>"u"&&(er.yylloc={});var Cu=er.yylloc;H.push(Cu);var ok=er.options&&er.options.ranges;typeof Es.yy.parseError=="function"?this.parseError=Es.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function lk(Fr){ne.length=ne.length-2*Fr,Ee.length=Ee.length-Fr,H.length=H.length-Fr}d(lk,"popStack");function zp(){var Fr;return Fr=Et.pop()||er.lex()||Vp,typeof Fr!="number"&&(Fr instanceof Array&&(Et=Fr,Fr=Et.pop()),Fr=Jt.symbols_[Fr]||Fr),Fr}d(zp,"lex");for(var Ar,As,Gr,Eu,Ln={},Xl,Bi,Wp,Kl;;){if(As=ne[ne.length-1],this.defaultActions[As]?Gr=this.defaultActions[As]:((Ar===null||typeof Ar>"u")&&(Ar=zp()),Gr=Co[As]&&Co[As][Ar]),typeof Gr>"u"||!Gr.length||!Gr[0]){var Au="";Kl=[];for(Xl in Co[As])this.terminals_[Xl]&&Xl>nk&&Kl.push("'"+this.terminals_[Xl]+"'");er.showPosition?Au="Parse error on line "+(Oe+1)+`:
`+er.showPosition()+`
Expecting `+Kl.join(", ")+", got '"+(this.terminals_[Ar]||Ar)+"'":Au="Parse error on line "+(Oe+1)+": Unexpected "+(Ar==Vp?"end of input":"'"+(this.terminals_[Ar]||Ar)+"'"),this.parseError(Au,{text:er.match,token:this.terminals_[Ar]||Ar,line:er.yylineno,loc:Cu,expected:Kl})}if(Gr[0]instanceof Array&&Gr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+As+", token: "+Ar);switch(Gr[0]){case 1:ne.push(Ar),Ee.push(er.yytext),H.push(er.yylloc),ne.push(Gr[1]),Ar=null,Op=er.yyleng,Z=er.yytext,Oe=er.yylineno,Cu=er.yylloc;break;case 2:if(Bi=this.productions_[Gr[1]][1],Ln.$=Ee[Ee.length-Bi],Ln._$={first_line:H[H.length-(Bi||1)].first_line,last_line:H[H.length-1].last_line,first_column:H[H.length-(Bi||1)].first_column,last_column:H[H.length-1].last_column},ok&&(Ln._$.range=[H[H.length-(Bi||1)].range[0],H[H.length-1].range[1]]),Eu=this.performAction.apply(Ln,[Z,Op,Oe,Es.yy,Gr[1],Ee,H].concat(ak)),typeof Eu<"u")return Eu;Bi&&(ne=ne.slice(0,-1*Bi*2),Ee=Ee.slice(0,-1*Bi),H=H.slice(0,-1*Bi)),ne.push(this.productions_[Gr[1]][0]),Ee.push(Ln.$),H.push(Ln._$),Wp=Co[ne[ne.length-2]][ne[ne.length-1]],ne.push(Wp);break;case 3:return!0}}return!0},"parse")},sk=(function(){var is={EOF:1,parseError:d(function(Jt,ne){if(this.yy.parser)this.yy.parser.parseError(Jt,ne);else throw new Error(Jt)},"parseError"),setInput:d(function(Ut,Jt){return this.yy=Jt||this.yy||{},this._input=Ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var Ut=this._input[0];this.yytext+=Ut,this.yyleng++,this.offset++,this.match+=Ut,this.matched+=Ut;var Jt=Ut.match(/(?:\r\n?|\n).*/g);return Jt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ut},"input"),unput:d(function(Ut){var Jt=Ut.length,ne=Ut.split(/(?:\r\n?|\n)/g);this._input=Ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Jt),this.offset-=Jt;var Et=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ne.length-1&&(this.yylineno-=ne.length-1);var Ee=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ne?(ne.length===Et.length?this.yylloc.first_column:0)+Et[Et.length-ne.length].length-ne[0].length:this.yylloc.first_column-Jt},this.options.ranges&&(this.yylloc.range=[Ee[0],Ee[0]+this.yyleng-Jt]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(Ut){this.unput(this.match.slice(Ut))},"less"),pastInput:d(function(){var Ut=this.matched.substr(0,this.matched.length-this.match.length);return(Ut.length>20?"...":"")+Ut.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var Ut=this.match;return Ut.length<20&&(Ut+=this._input.substr(0,20-Ut.length)),(Ut.substr(0,20)+(Ut.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var Ut=this.pastInput(),Jt=new Array(Ut.length+1).join("-");return Ut+this.upcomingInput()+`
`+Jt+"^"},"showPosition"),test_match:d(function(Ut,Jt){var ne,Et,Ee;if(this.options.backtrack_lexer&&(Ee={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ee.yylloc.range=this.yylloc.range.slice(0))),Et=Ut[0].match(/(?:\r\n?|\n).*/g),Et&&(this.yylineno+=Et.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Et?Et[Et.length-1].length-Et[Et.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ut[0].length},this.yytext+=Ut[0],this.match+=Ut[0],this.matches=Ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ut[0].length),this.matched+=Ut[0],ne=this.performAction.call(this,this.yy,this,Jt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ne)return ne;if(this._backtrack){for(var H in Ee)this[H]=Ee[H];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Ut,Jt,ne,Et;this._more||(this.yytext="",this.match="");for(var Ee=this._currentRules(),H=0;H<Ee.length;H++)if(ne=this._input.match(this.rules[Ee[H]]),ne&&(!Jt||ne[0].length>Jt[0].length)){if(Jt=ne,Et=H,this.options.backtrack_lexer){if(Ut=this.test_match(ne,Ee[H]),Ut!==!1)return Ut;if(this._backtrack){Jt=!1;continue}else return!1}else if(!this.options.flex)break}return Jt?(Ut=this.test_match(Jt,Ee[Et]),Ut!==!1?Ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var Jt=this.next();return Jt||this.lex()},"lex"),begin:d(function(Jt){this.conditionStack.push(Jt)},"begin"),popState:d(function(){var Jt=this.conditionStack.length-1;return Jt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(Jt){return Jt=this.conditionStack.length-1-Math.abs(Jt||0),Jt>=0?this.conditionStack[Jt]:"INITIAL"},"topState"),pushState:d(function(Jt){this.begin(Jt)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:d(function(Jt,ne,Et,Ee){switch(Et){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),ne.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const H=/\n\s*/g;return ne.yytext=ne.yytext.replace(H,"<br/>"),40;case 11:return 40;case 12:this.popState();break;case 13:this.begin("callbackname");break;case 14:this.popState();break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 17:this.popState();break;case 18:return 96;case 19:return"MD_STR";case 20:this.popState();break;case 21:this.begin("md_string");break;case 22:return"STR";case 23:this.popState();break;case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 88;case 35:return Jt.lex.firstGraph()&&this.begin("dir"),12;case 36:return Jt.lex.firstGraph()&&this.begin("dir"),12;case 37:return Jt.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:return 98;case 41:return 98;case 42:return 98;case 43:return 98;case 44:return this.popState(),13;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return this.popState(),14;case 50:return this.popState(),14;case 51:return this.popState(),14;case 52:return this.popState(),14;case 53:return this.popState(),14;case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:return 111;case 62:return 46;case 63:return 60;case 64:return 44;case 65:return 8;case 66:return 106;case 67:return 115;case 68:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:return 119;case 71:return this.popState(),77;case 72:return this.pushState("thickEdgeText"),75;case 73:return 119;case 74:return this.popState(),77;case 75:return this.pushState("dottedEdgeText"),75;case 76:return 119;case 77:return 77;case 78:return this.popState(),53;case 79:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 101:return 115;case 102:return 111;case 103:return 44;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 115:return"TEXT";case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};return is})();Tu.lexer=sk;function jl(){this.yy={}}return d(jl,"Parser"),jl.prototype=Tu,Tu.Parser=jl,new jl})();o1.parser=o1;var n5=o1,a5=Object.assign({},n5);a5.parse=e=>{const t=e.replace(/}\s*\n/g,`}
`);return n5.parse(t)};var nN=a5,aN=d((e,t)=>{const r=K1,i=r(e,"r"),s=r(e,"g"),n=r(e,"b");return js(i,s,n,t)},"fade"),oN=d(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span {
    color: ${e.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${e.lineColor} !important;
    stroke-width: 0;
    stroke: ${e.lineColor};
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${aN(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${e.edgeLabelBackground};
    p {
      background-color: ${e.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }
  ${ql()}
`,"getStyles"),lN=oN,cN={parser:nN,get db(){return new eN},renderer:sN,styles:lN,init:d(e=>{e.flowchart||(e.flowchart={}),e.layout&&md({layout:e.layout}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,md({flowchart:{arrowMarkerAbsolute:e.arrowMarkerAbsolute}})},"init")};const rp=Object.freeze(Object.defineProperty({__proto__:null,diagram:cN},Symbol.toStringTag,{value:"Module"}));var l1=(function(){var e=d(function(j,Q,W,et){for(W=W||{},et=j.length;et--;W[j[et]]=Q);return W},"o"),t=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],r=[1,10],i=[1,11],s=[1,12],n=[1,13],a=[1,20],o=[1,21],h=[1,22],l=[1,23],u=[1,24],f=[1,19],p=[1,25],g=[1,26],y=[1,18],m=[1,33],x=[1,34],b=[1,35],_=[1,36],S=[1,37],C=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],k=[1,42],v=[1,43],A=[1,52],L=[40,50,68,69],w=[1,63],R=[1,61],T=[1,58],V=[1,62],N=[1,64],D=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],E=[63,64,65,66,67],M=[1,81],F=[1,80],I=[1,78],B=[1,79],X=[6,10,42,47],$=[6,10,13,41,42,47,48,49],G=[1,89],nt=[1,88],ht=[1,87],tt=[19,56],dt=[1,98],st=[1,97],ot=[19,56,58,60],K={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:d(function(Q,W,et,z,vt,O,Zt){var J=O.length-1;switch(vt){case 1:break;case 2:this.$=[];break;case 3:O[J-1].push(O[J]),this.$=O[J-1];break;case 4:case 5:this.$=O[J];break;case 6:case 7:this.$=[];break;case 8:z.addEntity(O[J-4]),z.addEntity(O[J-2]),z.addRelationship(O[J-4],O[J],O[J-2],O[J-3]);break;case 9:z.addEntity(O[J-8]),z.addEntity(O[J-4]),z.addRelationship(O[J-8],O[J],O[J-4],O[J-5]),z.setClass([O[J-8]],O[J-6]),z.setClass([O[J-4]],O[J-2]);break;case 10:z.addEntity(O[J-6]),z.addEntity(O[J-2]),z.addRelationship(O[J-6],O[J],O[J-2],O[J-3]),z.setClass([O[J-6]],O[J-4]);break;case 11:z.addEntity(O[J-6]),z.addEntity(O[J-4]),z.addRelationship(O[J-6],O[J],O[J-4],O[J-5]),z.setClass([O[J-4]],O[J-2]);break;case 12:z.addEntity(O[J-3]),z.addAttributes(O[J-3],O[J-1]);break;case 13:z.addEntity(O[J-5]),z.addAttributes(O[J-5],O[J-1]),z.setClass([O[J-5]],O[J-3]);break;case 14:z.addEntity(O[J-2]);break;case 15:z.addEntity(O[J-4]),z.setClass([O[J-4]],O[J-2]);break;case 16:z.addEntity(O[J]);break;case 17:z.addEntity(O[J-2]),z.setClass([O[J-2]],O[J]);break;case 18:z.addEntity(O[J-6],O[J-4]),z.addAttributes(O[J-6],O[J-1]);break;case 19:z.addEntity(O[J-8],O[J-6]),z.addAttributes(O[J-8],O[J-1]),z.setClass([O[J-8]],O[J-3]);break;case 20:z.addEntity(O[J-5],O[J-3]);break;case 21:z.addEntity(O[J-7],O[J-5]),z.setClass([O[J-7]],O[J-2]);break;case 22:z.addEntity(O[J-3],O[J-1]);break;case 23:z.addEntity(O[J-5],O[J-3]),z.setClass([O[J-5]],O[J]);break;case 24:case 25:this.$=O[J].trim(),z.setAccTitle(this.$);break;case 26:case 27:this.$=O[J].trim(),z.setAccDescription(this.$);break;case 32:z.setDirection("TB");break;case 33:z.setDirection("BT");break;case 34:z.setDirection("RL");break;case 35:z.setDirection("LR");break;case 36:this.$=O[J-3],z.addClass(O[J-2],O[J-1]);break;case 37:case 38:case 56:case 64:this.$=[O[J]];break;case 39:case 40:this.$=O[J-2].concat([O[J]]);break;case 41:this.$=O[J-2],z.setClass(O[J-1],O[J]);break;case 42:this.$=O[J-3],z.addCssStyles(O[J-2],O[J-1]);break;case 43:this.$=[O[J]];break;case 44:O[J-2].push(O[J]),this.$=O[J-2];break;case 46:this.$=O[J-1]+O[J];break;case 54:case 76:case 77:this.$=O[J].replace(/"/g,"");break;case 55:case 78:this.$=O[J];break;case 57:O[J].push(O[J-1]),this.$=O[J];break;case 58:this.$={type:O[J-1],name:O[J]};break;case 59:this.$={type:O[J-2],name:O[J-1],keys:O[J]};break;case 60:this.$={type:O[J-2],name:O[J-1],comment:O[J]};break;case 61:this.$={type:O[J-3],name:O[J-2],keys:O[J-1],comment:O[J]};break;case 62:case 63:case 66:this.$=O[J];break;case 65:O[J-2].push(O[J]),this.$=O[J-2];break;case 67:this.$=O[J].replace(/"/g,"");break;case 68:this.$={cardA:O[J],relType:O[J-1],cardB:O[J-2]};break;case 69:this.$=z.Cardinality.ZERO_OR_ONE;break;case 70:this.$=z.Cardinality.ZERO_OR_MORE;break;case 71:this.$=z.Cardinality.ONE_OR_MORE;break;case 72:this.$=z.Cardinality.ONLY_ONE;break;case 73:this.$=z.Cardinality.MD_PARENT;break;case 74:this.$=z.Identification.NON_IDENTIFYING;break;case 75:this.$=z.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:r,24:i,26:s,28:n,29:14,30:15,31:16,32:17,33:a,34:o,35:h,36:l,37:u,40:f,43:p,44:g,50:y},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:27,11:9,22:r,24:i,26:s,28:n,29:14,30:15,31:16,32:17,33:a,34:o,35:h,36:l,37:u,40:f,43:p,44:g,50:y},e(t,[2,5]),e(t,[2,6]),e(t,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:m,64:x,65:b,66:_,67:S}),{23:[1,38]},{25:[1,39]},{27:[1,40]},e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(C,[2,54]),e(C,[2,55]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),{16:41,40:k,41:v},{16:44,40:k,41:v},{16:45,40:k,41:v},e(t,[2,4]),{11:46,40:f,50:y},{16:47,40:k,41:v},{18:48,19:[1,49],51:50,52:51,56:A},{11:53,40:f,50:y},{62:54,68:[1,55],69:[1,56]},e(L,[2,69]),e(L,[2,70]),e(L,[2,71]),e(L,[2,72]),e(L,[2,73]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),{13:w,38:57,41:R,42:T,45:59,46:60,48:V,49:N},e(D,[2,37]),e(D,[2,38]),{16:65,40:k,41:v,42:T},{13:w,38:66,41:R,42:T,45:59,46:60,48:V,49:N},{13:[1,67],15:[1,68]},e(t,[2,17],{61:32,12:69,17:[1,70],42:T,63:m,64:x,65:b,66:_,67:S}),{19:[1,71]},e(t,[2,14]),{18:72,19:[2,56],51:50,52:51,56:A},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:m,64:x,65:b,66:_,67:S},e(E,[2,74]),e(E,[2,75]),{6:M,10:F,39:77,42:I,47:B},{40:[1,82],41:[1,83]},e(X,[2,43],{46:84,13:w,41:R,48:V,49:N}),e($,[2,45]),e($,[2,50]),e($,[2,51]),e($,[2,52]),e($,[2,53]),e(t,[2,41],{42:T}),{6:M,10:F,39:85,42:I,47:B},{14:86,40:G,50:nt,70:ht},{16:90,40:k,41:v},{11:91,40:f,50:y},{18:92,19:[1,93],51:50,52:51,56:A},e(t,[2,12]),{19:[2,57]},e(tt,[2,58],{54:94,55:95,57:96,59:dt,60:st}),e([19,56,59,60],[2,63]),e(t,[2,22],{15:[1,100],17:[1,99]}),e([40,50],[2,68]),e(t,[2,36]),{13:w,41:R,45:101,46:60,48:V,49:N},e(t,[2,47]),e(t,[2,48]),e(t,[2,49]),e(D,[2,39]),e(D,[2,40]),e($,[2,46]),e(t,[2,42]),e(t,[2,8]),e(t,[2,76]),e(t,[2,77]),e(t,[2,78]),{13:[1,102],42:T},{13:[1,104],15:[1,103]},{19:[1,105]},e(t,[2,15]),e(tt,[2,59],{55:106,58:[1,107],60:st}),e(tt,[2,60]),e(ot,[2,64]),e(tt,[2,67]),e(ot,[2,66]),{18:108,19:[1,109],51:50,52:51,56:A},{16:110,40:k,41:v},e(X,[2,44],{46:84,13:w,41:R,48:V,49:N}),{14:111,40:G,50:nt,70:ht},{16:112,40:k,41:v},{14:113,40:G,50:nt,70:ht},e(t,[2,13]),e(tt,[2,61]),{57:114,59:dt},{19:[1,115]},e(t,[2,20]),e(t,[2,23],{17:[1,116],42:T}),e(t,[2,11]),{13:[1,117],42:T},e(t,[2,10]),e(ot,[2,65]),e(t,[2,18]),{18:118,19:[1,119],51:50,52:51,56:A},{14:120,40:G,50:nt,70:ht},{19:[1,121]},e(t,[2,21]),e(t,[2,9]),e(t,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:d(function(Q,W){if(W.recoverable)this.trace(Q);else{var et=new Error(Q);throw et.hash=W,et}},"parseError"),parse:d(function(Q){var W=this,et=[0],z=[],vt=[null],O=[],Zt=this.table,J="",Yt=0,It=0,se=2,gt=1,St=O.slice.call(arguments,1),ut=Object.create(this.lexer),pt={yy:{}};for(var wt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,wt)&&(pt.yy[wt]=this.yy[wt]);ut.setInput(Q,pt.yy),pt.yy.lexer=ut,pt.yy.parser=this,typeof ut.yylloc>"u"&&(ut.yylloc={});var rt=ut.yylloc;O.push(rt);var bt=ut.options&&ut.options.ranges;typeof pt.yy.parseError=="function"?this.parseError=pt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function q(ae){et.length=et.length-2*ae,vt.length=vt.length-ae,O.length=O.length-ae}d(q,"popStack");function Lt(){var ae;return ae=z.pop()||ut.lex()||gt,typeof ae!="number"&&(ae instanceof Array&&(z=ae,ae=z.pop()),ae=W.symbols_[ae]||ae),ae}d(Lt,"lex");for(var Y,Tt,ft,Ft,mt={},xt,re,At,pe;;){if(Tt=et[et.length-1],this.defaultActions[Tt]?ft=this.defaultActions[Tt]:((Y===null||typeof Y>"u")&&(Y=Lt()),ft=Zt[Tt]&&Zt[Tt][Y]),typeof ft>"u"||!ft.length||!ft[0]){var ar="";pe=[];for(xt in Zt[Tt])this.terminals_[xt]&&xt>se&&pe.push("'"+this.terminals_[xt]+"'");ut.showPosition?ar="Parse error on line "+(Yt+1)+`:
`+ut.showPosition()+`
Expecting `+pe.join(", ")+", got '"+(this.terminals_[Y]||Y)+"'":ar="Parse error on line "+(Yt+1)+": Unexpected "+(Y==gt?"end of input":"'"+(this.terminals_[Y]||Y)+"'"),this.parseError(ar,{text:ut.match,token:this.terminals_[Y]||Y,line:ut.yylineno,loc:rt,expected:pe})}if(ft[0]instanceof Array&&ft.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Tt+", token: "+Y);switch(ft[0]){case 1:et.push(Y),vt.push(ut.yytext),O.push(ut.yylloc),et.push(ft[1]),Y=null,It=ut.yyleng,J=ut.yytext,Yt=ut.yylineno,rt=ut.yylloc;break;case 2:if(re=this.productions_[ft[1]][1],mt.$=vt[vt.length-re],mt._$={first_line:O[O.length-(re||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(re||1)].first_column,last_column:O[O.length-1].last_column},bt&&(mt._$.range=[O[O.length-(re||1)].range[0],O[O.length-1].range[1]]),Ft=this.performAction.apply(mt,[J,It,Yt,pt.yy,ft[1],vt,O].concat(St)),typeof Ft<"u")return Ft;re&&(et=et.slice(0,-1*re*2),vt=vt.slice(0,-1*re),O=O.slice(0,-1*re)),et.push(this.productions_[ft[1]][0]),vt.push(mt.$),O.push(mt._$),At=Zt[et[et.length-2]][et[et.length-1]],et.push(At);break;case 3:return!0}}return!0},"parse")},lt=(function(){var j={EOF:1,parseError:d(function(W,et){if(this.yy.parser)this.yy.parser.parseError(W,et);else throw new Error(W)},"parseError"),setInput:d(function(Q,W){return this.yy=W||this.yy||{},this._input=Q,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var Q=this._input[0];this.yytext+=Q,this.yyleng++,this.offset++,this.match+=Q,this.matched+=Q;var W=Q.match(/(?:\r\n?|\n).*/g);return W?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Q},"input"),unput:d(function(Q){var W=Q.length,et=Q.split(/(?:\r\n?|\n)/g);this._input=Q+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-W),this.offset-=W;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),et.length-1&&(this.yylineno-=et.length-1);var vt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:et?(et.length===z.length?this.yylloc.first_column:0)+z[z.length-et.length].length-et[0].length:this.yylloc.first_column-W},this.options.ranges&&(this.yylloc.range=[vt[0],vt[0]+this.yyleng-W]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(Q){this.unput(this.match.slice(Q))},"less"),pastInput:d(function(){var Q=this.matched.substr(0,this.matched.length-this.match.length);return(Q.length>20?"...":"")+Q.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var Q=this.match;return Q.length<20&&(Q+=this._input.substr(0,20-Q.length)),(Q.substr(0,20)+(Q.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var Q=this.pastInput(),W=new Array(Q.length+1).join("-");return Q+this.upcomingInput()+`
`+W+"^"},"showPosition"),test_match:d(function(Q,W){var et,z,vt;if(this.options.backtrack_lexer&&(vt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(vt.yylloc.range=this.yylloc.range.slice(0))),z=Q[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Q[0].length},this.yytext+=Q[0],this.match+=Q[0],this.matches=Q,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Q[0].length),this.matched+=Q[0],et=this.performAction.call(this,this.yy,this,W,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),et)return et;if(this._backtrack){for(var O in vt)this[O]=vt[O];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Q,W,et,z;this._more||(this.yytext="",this.match="");for(var vt=this._currentRules(),O=0;O<vt.length;O++)if(et=this._input.match(this.rules[vt[O]]),et&&(!W||et[0].length>W[0].length)){if(W=et,z=O,this.options.backtrack_lexer){if(Q=this.test_match(et,vt[O]),Q!==!1)return Q;if(this._backtrack){W=!1;continue}else return!1}else if(!this.options.flex)break}return W?(Q=this.test_match(W,vt[z]),Q!==!1?Q:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var W=this.next();return W||this.lex()},"lex"),begin:d(function(W){this.conditionStack.push(W)},"begin"),popState:d(function(){var W=this.conditionStack.length-1;return W>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(W){return W=this.conditionStack.length-1-Math.abs(W||0),W>=0?this.conditionStack[W]:"INITIAL"},"topState"),pushState:d(function(W){this.begin(W)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(W,et,z,vt){switch(z){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:return 49;case 19:return 49;case 20:return 42;case 21:return 15;case 22:return 13;case 23:break;case 24:return 59;case 25:return 56;case 26:return 56;case 27:return 60;case 28:break;case 29:return this.popState(),19;case 30:return et.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 35:break;case 36:return 13;case 37:return 42;case 38:return 49;case 39:return this.begin("style"),37;case 40:return 43;case 41:return 63;case 42:return 65;case 43:return 65;case 44:return 65;case 45:return 63;case 46:return 63;case 47:return 64;case 48:return 64;case 49:return 64;case 50:return 64;case 51:return 64;case 52:return 65;case 53:return 64;case 54:return 65;case 55:return 66;case 56:return 66;case 57:return 66;case 58:return 66;case 59:return 63;case 60:return 64;case 61:return 65;case 62:return 67;case 63:return 68;case 64:return 69;case 65:return 69;case 66:return 68;case 67:return 68;case 68:return 68;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 73:return et.yytext[0];case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return j})();K.lexer=lt;function U(){this.yy={}}return d(U,"Parser"),U.prototype=K,K.Parser=U,new U})();l1.parser=l1;var hN=l1,ga,uN=(ga=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=We,this.getAccTitle=Ke,this.setAccDescription=Qe,this.getAccDescription=Ze,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getConfig=d(()=>it().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(t,r=""){var i;return this.entities.has(t)?!((i=this.entities.get(t))!=null&&i.alias)&&r&&(this.entities.get(t).alias=r,P.info(`Add alias '${r}' to entity '${t}'`)):(this.entities.set(t,{id:`entity-${t}-${this.entities.size}`,label:t,attributes:[],alias:r,shape:"erBox",look:it().look??"default",cssClasses:"default",cssStyles:[]}),P.info("Added new entity :",t)),this.entities.get(t)}getEntity(t){return this.entities.get(t)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(t,r){const i=this.addEntity(t);let s;for(s=r.length-1;s>=0;s--)r[s].keys||(r[s].keys=[]),r[s].comment||(r[s].comment=""),i.attributes.push(r[s]),P.debug("Added attribute ",r[s].name)}addRelationship(t,r,i,s){const n=this.entities.get(t),a=this.entities.get(i);if(!n||!a)return;const o={entityA:n.id,roleA:r,entityB:a.id,relSpec:s};this.relationships.push(o),P.debug("Added new relationship :",o)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(t){this.direction=t}getCompiledStyles(t){let r=[];for(const i of t){const s=this.classes.get(i);s!=null&&s.styles&&(r=[...r,...s.styles??[]].map(n=>n.trim())),s!=null&&s.textStyles&&(r=[...r,...s.textStyles??[]].map(n=>n.trim()))}return r}addCssStyles(t,r){for(const i of t){const s=this.entities.get(i);if(!r||!s)return;for(const n of r)s.cssStyles.push(n)}}addClass(t,r){t.forEach(i=>{let s=this.classes.get(i);s===void 0&&(s={id:i,styles:[],textStyles:[]},this.classes.set(i,s)),r&&r.forEach(function(n){if(/color/.exec(n)){const a=n.replace("fill","bgFill");s.textStyles.push(a)}s.styles.push(n)})})}setClass(t,r){for(const i of t){const s=this.entities.get(i);if(s)for(const n of r)s.cssClasses+=" "+n}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],qe()}getData(){const t=[],r=[],i=it();for(const n of this.entities.keys()){const a=this.entities.get(n);a&&(a.cssCompiledStyles=this.getCompiledStyles(a.cssClasses.split(" ")),t.push(a))}let s=0;for(const n of this.relationships){const a={id:ea(n.entityA,n.entityB,{prefix:"id",counter:s++}),type:"normal",curve:"basis",start:n.entityA,end:n.entityB,label:n.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:n.relSpec.cardB.toLowerCase(),arrowTypeEnd:n.relSpec.cardA.toLowerCase(),pattern:n.relSpec.relType=="IDENTIFYING"?"solid":"dashed",look:i.look};r.push(a)}return{nodes:t,edges:r,other:{},config:i,direction:"TB"}}},d(ga,"ErDB"),ga),o5={};Ph(o5,{draw:()=>dN});var dN=d(async function(e,t,r,i){P.info("REF0:"),P.info("Drawing er diagram (unified)",t);const{securityLevel:s,er:n,layout:a}=it(),o=i.db.getData(),h=So(t,s);o.type=i.type,o.layoutAlgorithm=Wl(a),o.config.flowchart.nodeSpacing=(n==null?void 0:n.nodeSpacing)||140,o.config.flowchart.rankSpacing=(n==null?void 0:n.rankSpacing)||80,o.direction=i.db.getDirection(),o.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],o.diagramId=t,await wo(o,h),o.layoutAlgorithm==="elk"&&h.select(".edges").lower();const l=h.selectAll('[id*="-background"]');Array.from(l).length>0&&l.each(function(){const f=_t(this),g=f.attr("id").replace("-background",""),y=h.select(`#${CSS.escape(g)}`);if(!y.empty()){const m=y.attr("transform");f.attr("transform",m)}});const u=8;ie.insertTitle(h,"erDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,i.db.getDiagramTitle()),kn(h,u,"erDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),fN=d((e,t)=>{const r=K1,i=r(e,"r"),s=r(e,"g"),n=r(e,"b");return js(i,s,n,t)},"fade"),pN=d(e=>`
  .entityBox {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${e.tertiaryColor};
    opacity: 0.7;
    background-color: ${e.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

  .labelBkg {
    background-color: ${fN(e.tertiaryColor,.5)};
  }

  .edgeLabel .label {
    fill: ${e.nodeBorder};
    font-size: 14px;
  }

  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }

  .edge-pattern-dashed {
    stroke-dasharray: 8,8;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon
  {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .relationshipLine {
    stroke: ${e.lineColor};
    stroke-width: 1;
    fill: none;
  }

  .marker {
    fill: none !important;
    stroke: ${e.lineColor} !important;
    stroke-width: 1;
  }
`,"getStyles"),gN=pN,yN={parser:hN,get db(){return new uN},renderer:o5,styles:gN};const mN=Object.freeze(Object.defineProperty({__proto__:null,diagram:yN},Symbol.toStringTag,{value:"Module"}));function wn(e,t){var r,i,s;e.accDescr&&((r=t.setAccDescription)==null||r.call(t,e.accDescr)),e.accTitle&&((i=t.setAccTitle)==null||i.call(t,e.accTitle)),e.title&&((s=t.setDiagramTitle)==null||s.call(t,e.title))}d(wn,"populateCommonDb");var ya,l5=(ya=class{constructor(t){this.init=t,this.records=this.init()}reset(){this.records=this.init()}},d(ya,"ImperativeState"),ya),xN=Object.defineProperty,Dt=(e,t)=>xN(e,"name",{value:t,configurable:!0}),c1;(e=>{e.Terminals={ARROW_DIRECTION:/L|R|T|B/,ARROW_GROUP:/\{group\}/,ARROW_INTO:/<|>/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,ARCH_ICON:/\([\w-:]+\)/,ARCH_TITLE:/\[[\w ]+\]/}})(c1||(c1={}));var h1;(e=>{e.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/,REFERENCE:/\w([-\./\w]*[-\w])?/}})(h1||(h1={}));var u1;(e=>{e.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(u1||(u1={}));var d1;(e=>{e.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,INT:/0|[1-9][0-9]*(?!\.)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(d1||(d1={}));var f1;(e=>{e.Terminals={NUMBER_PIE:/(?:-?[0-9]+\.[0-9]+(?!\.))|(?:-?(0|[1-9][0-9]*)(?!\.))/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(f1||(f1={}));var p1;(e=>{e.Terminals={GRATICULE:/circle|polygon/,BOOLEAN:/true|false/,ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,NUMBER:/(?:[0-9]+\.[0-9]+(?!\.))|(?:0|[1-9][0-9]*(?!\.))/,STRING:/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'/,ID:/[\w]([-\w]*\w)?/,NEWLINE:/\r?\n/,WHITESPACE:/[\t ]+/,YAML:/---[\t ]*\r?\n(?:[\S\s]*?\r?\n)?---(?:\r?\n|(?!\S))/,DIRECTIVE:/[\t ]*%%{[\S\s]*?}%%(?:\r?\n|(?!\S))/,SINGLE_LINE_COMMENT:/[\t ]*%%[^\n\r]*/}})(p1||(p1={}));var g1;(e=>{e.Terminals={ACC_DESCR:/[\t ]*accDescr(?:[\t ]*:([^\n\r]*?(?=%%)|[^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/[\t ]*accTitle[\t ]*:(?:[^\n\r]*?(?=%%)|[^\n\r]*)/,TITLE:/[\t ]*title(?:[\t ][^\n\r]*?(?=%%)|[\t ][^\n\r]*|)/,TREEMAP_KEYWORD:/treemap-beta|treemap/,CLASS_DEF:/classDef\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\s+([^;\r\n]*))?(?:;)?/,STYLE_SEPARATOR:/:::/,SEPARATOR:/:/,COMMA:/,/,INDENTATION:/[ \t]{1,}/,WS:/[ \t]+/,ML_COMMENT:/\%\%[^\n]*/,NL:/\r?\n/,ID2:/[a-zA-Z_][a-zA-Z0-9_]*/,NUMBER2:/[0-9_\.\,]+/,STRING2:/"[^"]*"|'[^']*'/}})(g1||(g1={}));({...c1.Terminals,...h1.Terminals,...u1.Terminals,...d1.Terminals,...f1.Terminals,...p1.Terminals,...g1.Terminals});var Oi={$type:"Architecture",accDescr:"accDescr",accTitle:"accTitle",edges:"edges",groups:"groups",junctions:"junctions",services:"services",title:"title"};function bN(e){return li.isInstance(e,Oi.$type)}Dt(bN,"isArchitecture");var nc={$type:"Axis",label:"label",name:"name"},Cc={$type:"Branch",name:"name",order:"order"};function vN(e){return li.isInstance(e,Cc.$type)}Dt(vN,"isBranch");var ug={$type:"Checkout",branch:"branch"},ac={$type:"CherryPicking",id:"id",parent:"parent",tags:"tags"},Zu={$type:"ClassDefStatement",className:"className",styleText:"styleText"},Vn={$type:"Commit",id:"id",message:"message",tags:"tags",type:"type"};function _N(e){return li.isInstance(e,Vn.$type)}Dt(_N,"isCommit");var oc={$type:"Curve",entries:"entries",label:"label",name:"name"},Bn={$type:"Direction",accDescr:"accDescr",accTitle:"accTitle",dir:"dir",statements:"statements",title:"title"},fi={$type:"Edge",lhsDir:"lhsDir",lhsGroup:"lhsGroup",lhsId:"lhsId",lhsInto:"lhsInto",rhsDir:"rhsDir",rhsGroup:"rhsGroup",rhsId:"rhsId",rhsInto:"rhsInto",title:"title"},Ju={$type:"Entry",axis:"axis",value:"value"},$s={$type:"GitGraph",accDescr:"accDescr",accTitle:"accTitle",statements:"statements",title:"title"};function kN(e){return li.isInstance(e,$s.$type)}Dt(kN,"isGitGraph");var No={$type:"Group",icon:"icon",id:"id",in:"in",title:"title"},Ho={$type:"Info",accDescr:"accDescr",accTitle:"accTitle",title:"title"};function wN(e){return li.isInstance(e,Ho.$type)}Dt(wN,"isInfo");var $o={$type:"Item",classSelector:"classSelector",name:"name"},td={$type:"Junction",id:"id",in:"in"},lc={$type:"Leaf",classSelector:"classSelector",name:"name",value:"value"},zn={$type:"Merge",branch:"branch",id:"id",tags:"tags",type:"type"};function TN(e){return li.isInstance(e,zn.$type)}Dt(TN,"isMerge");var ed={$type:"Option",name:"name",value:"value"},Wn={$type:"Packet",accDescr:"accDescr",accTitle:"accTitle",blocks:"blocks",title:"title"};function SN(e){return li.isInstance(e,Wn.$type)}Dt(SN,"isPacket");var qn={$type:"PacketBlock",bits:"bits",end:"end",label:"label",start:"start"};function CN(e){return li.isInstance(e,qn.$type)}Dt(CN,"isPacketBlock");var Ms={$type:"Pie",accDescr:"accDescr",accTitle:"accTitle",sections:"sections",showData:"showData",title:"title"};function EN(e){return li.isInstance(e,Ms.$type)}Dt(EN,"isPie");var Ec={$type:"PieSection",label:"label",value:"value"};function AN(e){return li.isInstance(e,Ec.$type)}Dt(AN,"isPieSection");var Bs={$type:"Radar",accDescr:"accDescr",accTitle:"accTitle",axes:"axes",curves:"curves",options:"options",title:"title"},rd={$type:"Section",classSelector:"classSelector",name:"name"},In={$type:"Service",icon:"icon",iconText:"iconText",id:"id",in:"in",title:"title"},Nn={$type:"Statement"},Yn={$type:"Treemap",accDescr:"accDescr",accTitle:"accTitle",title:"title",TreemapRows:"TreemapRows"};function LN(e){return li.isInstance(e,Yn.$type)}Dt(LN,"isTreemap");var id={$type:"TreemapRow",indent:"indent",item:"item"},ma,c5=(ma=class extends mk{constructor(){super(...arguments),this.types={Architecture:{name:Oi.$type,properties:{accDescr:{name:Oi.accDescr},accTitle:{name:Oi.accTitle},edges:{name:Oi.edges,defaultValue:[]},groups:{name:Oi.groups,defaultValue:[]},junctions:{name:Oi.junctions,defaultValue:[]},services:{name:Oi.services,defaultValue:[]},title:{name:Oi.title}},superTypes:[]},Axis:{name:nc.$type,properties:{label:{name:nc.label},name:{name:nc.name}},superTypes:[]},Branch:{name:Cc.$type,properties:{name:{name:Cc.name},order:{name:Cc.order}},superTypes:[Nn.$type]},Checkout:{name:ug.$type,properties:{branch:{name:ug.branch}},superTypes:[Nn.$type]},CherryPicking:{name:ac.$type,properties:{id:{name:ac.id},parent:{name:ac.parent},tags:{name:ac.tags,defaultValue:[]}},superTypes:[Nn.$type]},ClassDefStatement:{name:Zu.$type,properties:{className:{name:Zu.className},styleText:{name:Zu.styleText}},superTypes:[]},Commit:{name:Vn.$type,properties:{id:{name:Vn.id},message:{name:Vn.message},tags:{name:Vn.tags,defaultValue:[]},type:{name:Vn.type}},superTypes:[Nn.$type]},Curve:{name:oc.$type,properties:{entries:{name:oc.entries,defaultValue:[]},label:{name:oc.label},name:{name:oc.name}},superTypes:[]},Direction:{name:Bn.$type,properties:{accDescr:{name:Bn.accDescr},accTitle:{name:Bn.accTitle},dir:{name:Bn.dir},statements:{name:Bn.statements,defaultValue:[]},title:{name:Bn.title}},superTypes:[$s.$type]},Edge:{name:fi.$type,properties:{lhsDir:{name:fi.lhsDir},lhsGroup:{name:fi.lhsGroup,defaultValue:!1},lhsId:{name:fi.lhsId},lhsInto:{name:fi.lhsInto,defaultValue:!1},rhsDir:{name:fi.rhsDir},rhsGroup:{name:fi.rhsGroup,defaultValue:!1},rhsId:{name:fi.rhsId},rhsInto:{name:fi.rhsInto,defaultValue:!1},title:{name:fi.title}},superTypes:[]},Entry:{name:Ju.$type,properties:{axis:{name:Ju.axis,referenceType:nc.$type},value:{name:Ju.value}},superTypes:[]},GitGraph:{name:$s.$type,properties:{accDescr:{name:$s.accDescr},accTitle:{name:$s.accTitle},statements:{name:$s.statements,defaultValue:[]},title:{name:$s.title}},superTypes:[]},Group:{name:No.$type,properties:{icon:{name:No.icon},id:{name:No.id},in:{name:No.in},title:{name:No.title}},superTypes:[]},Info:{name:Ho.$type,properties:{accDescr:{name:Ho.accDescr},accTitle:{name:Ho.accTitle},title:{name:Ho.title}},superTypes:[]},Item:{name:$o.$type,properties:{classSelector:{name:$o.classSelector},name:{name:$o.name}},superTypes:[]},Junction:{name:td.$type,properties:{id:{name:td.id},in:{name:td.in}},superTypes:[]},Leaf:{name:lc.$type,properties:{classSelector:{name:lc.classSelector},name:{name:lc.name},value:{name:lc.value}},superTypes:[$o.$type]},Merge:{name:zn.$type,properties:{branch:{name:zn.branch},id:{name:zn.id},tags:{name:zn.tags,defaultValue:[]},type:{name:zn.type}},superTypes:[Nn.$type]},Option:{name:ed.$type,properties:{name:{name:ed.name},value:{name:ed.value,defaultValue:!1}},superTypes:[]},Packet:{name:Wn.$type,properties:{accDescr:{name:Wn.accDescr},accTitle:{name:Wn.accTitle},blocks:{name:Wn.blocks,defaultValue:[]},title:{name:Wn.title}},superTypes:[]},PacketBlock:{name:qn.$type,properties:{bits:{name:qn.bits},end:{name:qn.end},label:{name:qn.label},start:{name:qn.start}},superTypes:[]},Pie:{name:Ms.$type,properties:{accDescr:{name:Ms.accDescr},accTitle:{name:Ms.accTitle},sections:{name:Ms.sections,defaultValue:[]},showData:{name:Ms.showData,defaultValue:!1},title:{name:Ms.title}},superTypes:[]},PieSection:{name:Ec.$type,properties:{label:{name:Ec.label},value:{name:Ec.value}},superTypes:[]},Radar:{name:Bs.$type,properties:{accDescr:{name:Bs.accDescr},accTitle:{name:Bs.accTitle},axes:{name:Bs.axes,defaultValue:[]},curves:{name:Bs.curves,defaultValue:[]},options:{name:Bs.options,defaultValue:[]},title:{name:Bs.title}},superTypes:[]},Section:{name:rd.$type,properties:{classSelector:{name:rd.classSelector},name:{name:rd.name}},superTypes:[$o.$type]},Service:{name:In.$type,properties:{icon:{name:In.icon},iconText:{name:In.iconText},id:{name:In.id},in:{name:In.in},title:{name:In.title}},superTypes:[]},Statement:{name:Nn.$type,properties:{},superTypes:[]},Treemap:{name:Yn.$type,properties:{accDescr:{name:Yn.accDescr},accTitle:{name:Yn.accTitle},title:{name:Yn.title},TreemapRows:{name:Yn.TreemapRows,defaultValue:[]}},superTypes:[]},TreemapRow:{name:id.$type,properties:{indent:{name:id.indent},item:{name:id.item}},superTypes:[]}}}},Dt(ma,"MermaidAstReflection"),ma),li=new c5,dg,DN=Dt(()=>dg??(dg=fn(`{"$type":"Grammar","isDeclared":true,"name":"ArchitectureGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"},"parenthesized":false}],"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"ArchitectureGrammarGrammar"),fg,RN=Dt(()=>fg??(fg=fn(`{"$type":"Grammar","isDeclared":true,"name":"GitGraphGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[],"types":[]}`)),"GitGraphGrammarGrammar"),pg,BN=Dt(()=>pg??(pg=fn(`{"$type":"Grammar","isDeclared":true,"name":"InfoGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"InfoGrammarGrammar"),gg,IN=Dt(()=>gg??(gg=fn(`{"$type":"Grammar","isDeclared":true,"name":"PacketGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PacketGrammarGrammar"),yg,NN=Dt(()=>yg??(yg=fn(`{"$type":"Grammar","isDeclared":true,"name":"PieGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[],"types":[]}`)),"PieGrammarGrammar"),mg,$N=Dt(()=>mg??(mg=fn(`{"$type":"Grammar","isDeclared":true,"name":"RadarGrammar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"entry":false,"parameters":[]},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false,"isMulti":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"},"parenthesized":false},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/","parenthesized":false},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}},"isMulti":false}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"types":[]}`)),"RadarGrammarGrammar"),xg,MN=Dt(()=>xg??(xg=fn(`{"$type":"Grammar","isDeclared":true,"name":"TreemapGrammar","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"entry":false,"parameters":[]},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"}]},"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"},"parenthesized":false},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"},"parenthesized":false}],"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","},"parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/","parenthesized":false},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/","parenthesized":false},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/","parenthesized":false},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"entry":false,"fragment":false,"parameters":[]},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/","parenthesized":false},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@15"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"imports":[],"types":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`)),"TreemapGrammarGrammar"),FN={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},PN={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},ON={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},VN={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},zN={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},WN={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},qN={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Tn={AstReflection:Dt(()=>new c5,"AstReflection")},YN={Grammar:Dt(()=>DN(),"Grammar"),LanguageMetaData:Dt(()=>FN,"LanguageMetaData"),parser:{}},GN={Grammar:Dt(()=>RN(),"Grammar"),LanguageMetaData:Dt(()=>PN,"LanguageMetaData"),parser:{}},HN={Grammar:Dt(()=>BN(),"Grammar"),LanguageMetaData:Dt(()=>ON,"LanguageMetaData"),parser:{}},UN={Grammar:Dt(()=>IN(),"Grammar"),LanguageMetaData:Dt(()=>VN,"LanguageMetaData"),parser:{}},jN={Grammar:Dt(()=>NN(),"Grammar"),LanguageMetaData:Dt(()=>zN,"LanguageMetaData"),parser:{}},XN={Grammar:Dt(()=>$N(),"Grammar"),LanguageMetaData:Dt(()=>WN,"LanguageMetaData"),parser:{}},KN={Grammar:Dt(()=>MN(),"Grammar"),LanguageMetaData:Dt(()=>qN,"LanguageMetaData"),parser:{}},QN=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ZN=/accTitle[\t ]*:([^\n\r]*)/,JN=/title([\t ][^\n\r]*|)/,t$={ACC_DESCR:QN,ACC_TITLE:ZN,TITLE:JN},xa,hu=(xa=class extends xk{runConverter(t,r,i){let s=this.runCommonConverter(t,r,i);return s===void 0&&(s=this.runCustomConverter(t,r,i)),s===void 0?super.runConverter(t,r,i):s}runCommonConverter(t,r,i){const s=t$[t.name];if(s===void 0)return;const n=s.exec(r);if(n!==null){if(n[1]!==void 0)return n[1].trim().replace(/[\t ]{2,}/gm," ");if(n[2]!==void 0)return n[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},Dt(xa,"AbstractMermaidValueConverter"),xa),ba,uu=(ba=class extends hu{runCustomConverter(t,r,i){}},Dt(ba,"CommonValueConverter"),ba),va,ws=(va=class extends bk{constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,r,i){const s=super.buildKeywordTokens(t,r,i);return s.forEach(n=>{this.keywords.has(n.name)&&n.PATTERN!==void 0&&(n.PATTERN=new RegExp(n.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),s}},Dt(va,"AbstractMermaidTokenBuilder"),va),_a;_a=class extends ws{},Dt(_a,"CommonTokenBuilder");var ka,e$=(ka=class extends ws{constructor(){super(["gitGraph"])}},Dt(ka,"GitGraphTokenBuilder"),ka),h5={parser:{TokenBuilder:Dt(()=>new e$,"TokenBuilder"),ValueConverter:Dt(()=>new uu,"ValueConverter")}};function u5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),GN,h5);return t.ServiceRegistry.register(r),{shared:t,GitGraph:r}}Dt(u5,"createGitGraphServices");var wa,r$=(wa=class extends ws{constructor(){super(["info","showInfo"])}},Dt(wa,"InfoTokenBuilder"),wa),d5={parser:{TokenBuilder:Dt(()=>new r$,"TokenBuilder"),ValueConverter:Dt(()=>new uu,"ValueConverter")}};function f5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),HN,d5);return t.ServiceRegistry.register(r),{shared:t,Info:r}}Dt(f5,"createInfoServices");var Ta,i$=(Ta=class extends ws{constructor(){super(["packet"])}},Dt(Ta,"PacketTokenBuilder"),Ta),p5={parser:{TokenBuilder:Dt(()=>new i$,"TokenBuilder"),ValueConverter:Dt(()=>new uu,"ValueConverter")}};function g5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),UN,p5);return t.ServiceRegistry.register(r),{shared:t,Packet:r}}Dt(g5,"createPacketServices");var Sa,s$=(Sa=class extends ws{constructor(){super(["pie","showData"])}},Dt(Sa,"PieTokenBuilder"),Sa),Ca,n$=(Ca=class extends hu{runCustomConverter(t,r,i){if(t.name==="PIE_SECTION_LABEL")return r.replace(/"/g,"").trim()}},Dt(Ca,"PieValueConverter"),Ca),y5={parser:{TokenBuilder:Dt(()=>new s$,"TokenBuilder"),ValueConverter:Dt(()=>new n$,"ValueConverter")}};function m5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),jN,y5);return t.ServiceRegistry.register(r),{shared:t,Pie:r}}Dt(m5,"createPieServices");var Ea,a$=(Ea=class extends ws{constructor(){super(["architecture"])}},Dt(Ea,"ArchitectureTokenBuilder"),Ea),Aa,o$=(Aa=class extends hu{runCustomConverter(t,r,i){if(t.name==="ARCH_ICON")return r.replace(/[()]/g,"").trim();if(t.name==="ARCH_TEXT_ICON")return r.replace(/["()]/g,"");if(t.name==="ARCH_TITLE")return r.replace(/[[\]]/g,"").trim()}},Dt(Aa,"ArchitectureValueConverter"),Aa),x5={parser:{TokenBuilder:Dt(()=>new a$,"TokenBuilder"),ValueConverter:Dt(()=>new o$,"ValueConverter")}};function b5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),YN,x5);return t.ServiceRegistry.register(r),{shared:t,Architecture:r}}Dt(b5,"createArchitectureServices");var La,l$=(La=class extends ws{constructor(){super(["radar-beta"])}},Dt(La,"RadarTokenBuilder"),La),v5={parser:{TokenBuilder:Dt(()=>new l$,"TokenBuilder"),ValueConverter:Dt(()=>new uu,"ValueConverter")}};function _5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),XN,v5);return t.ServiceRegistry.register(r),{shared:t,Radar:r}}Dt(_5,"createRadarServices");var Da,c$=(Da=class extends ws{constructor(){super(["treemap"])}},Dt(Da,"TreemapTokenBuilder"),Da),h$=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,Ra,u$=(Ra=class extends hu{runCustomConverter(t,r,i){if(t.name==="NUMBER2")return parseFloat(r.replace(/,/g,""));if(t.name==="SEPARATOR")return r.substring(1,r.length-1);if(t.name==="STRING2")return r.substring(1,r.length-1);if(t.name==="INDENTATION")return r.length;if(t.name==="ClassDef"){if(typeof r!="string")return r;const s=h$.exec(r);if(s)return{$type:"ClassDefStatement",className:s[1],styleText:s[2]||void 0}}}},Dt(Ra,"TreemapValueConverter"),Ra);function k5(e){const t=e.validation.TreemapValidator,r=e.validation.ValidationRegistry;if(r){const i={Treemap:t.checkSingleRoot.bind(t)};r.register(i,t)}}Dt(k5,"registerValidationChecks");var Ba,d$=(Ba=class{checkSingleRoot(t,r){let i;for(const s of t.TreemapRows)s.item&&(i===void 0&&s.indent===void 0?i=0:s.indent===void 0?r("error","Multiple root nodes are not allowed in a treemap.",{node:s,property:"item"}):i!==void 0&&i>=parseInt(s.indent,10)&&r("error","Multiple root nodes are not allowed in a treemap.",{node:s,property:"item"}))}},Dt(Ba,"TreemapValidator"),Ba),w5={parser:{TokenBuilder:Dt(()=>new c$,"TokenBuilder"),ValueConverter:Dt(()=>new u$,"ValueConverter")},validation:{TreemapValidator:Dt(()=>new d$,"TreemapValidator")}};function T5(e=pn){const t=Ir(gn(e),Tn),r=Ir(yn({shared:t}),KN,w5);return t.ServiceRegistry.register(r),k5(r),{shared:t,Treemap:r}}Dt(T5,"createTreemapServices");var Vi={},f$={info:Dt(async()=>{const{createInfoServices:e}=await ue(async()=>{const{createInfoServices:r}=await Promise.resolve().then(()=>AY);return{createInfoServices:r}},void 0),t=e().Info.parser.LangiumParser;Vi.info=t},"info"),packet:Dt(async()=>{const{createPacketServices:e}=await ue(async()=>{const{createPacketServices:r}=await Promise.resolve().then(()=>LY);return{createPacketServices:r}},void 0),t=e().Packet.parser.LangiumParser;Vi.packet=t},"packet"),pie:Dt(async()=>{const{createPieServices:e}=await ue(async()=>{const{createPieServices:r}=await Promise.resolve().then(()=>DY);return{createPieServices:r}},void 0),t=e().Pie.parser.LangiumParser;Vi.pie=t},"pie"),architecture:Dt(async()=>{const{createArchitectureServices:e}=await ue(async()=>{const{createArchitectureServices:r}=await Promise.resolve().then(()=>RY);return{createArchitectureServices:r}},void 0),t=e().Architecture.parser.LangiumParser;Vi.architecture=t},"architecture"),gitGraph:Dt(async()=>{const{createGitGraphServices:e}=await ue(async()=>{const{createGitGraphServices:r}=await Promise.resolve().then(()=>BY);return{createGitGraphServices:r}},void 0),t=e().GitGraph.parser.LangiumParser;Vi.gitGraph=t},"gitGraph"),radar:Dt(async()=>{const{createRadarServices:e}=await ue(async()=>{const{createRadarServices:r}=await Promise.resolve().then(()=>IY);return{createRadarServices:r}},void 0),t=e().Radar.parser.LangiumParser;Vi.radar=t},"radar"),treemap:Dt(async()=>{const{createTreemapServices:e}=await ue(async()=>{const{createTreemapServices:r}=await Promise.resolve().then(()=>NY);return{createTreemapServices:r}},void 0),t=e().Treemap.parser.LangiumParser;Vi.treemap=t},"treemap")};async function Ts(e,t){const r=f$[e];if(!r)throw new Error(`Unknown diagram type: ${e}`);Vi[e]||await r();const s=Vi[e].parse(t);if(s.lexerErrors.length>0||s.parserErrors.length>0)throw new p$(s);return s.value}Dt(Ts,"parse");var Ia,p$=(Ia=class extends Error{constructor(t){const r=t.lexerErrors.map(s=>s.message).join(`
`),i=t.parserErrors.map(s=>s.message).join(`
`);super(`Parsing failed: ${r} ${i}`),this.result=t}},Dt(Ia,"MermaidParseError"),Ia),we={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},g$=ge.gitGraph,Sn=d(()=>Cr({...g$,...xe().gitGraph}),"getConfig"),Rt=new l5(()=>{const e=Sn(),t=e.mainBranchName,r=e.mainBranchOrder;return{mainBranchName:t,commits:new Map,head:null,branchConfig:new Map([[t,{name:t,order:r}]]),branches:new Map([[t,null]]),currBranch:t,direction:"LR",seq:0,options:{}}});function du(){return Wx({length:7})}d(du,"getID");function S5(e,t){const r=Object.create(null);return e.reduce((i,s)=>{const n=t(s);return r[n]||(r[n]=!0,i.push(s)),i},[])}d(S5,"uniqBy");var y$=d(function(e){Rt.records.direction=e},"setDirection"),m$=d(function(e){P.debug("options str",e),e=e==null?void 0:e.trim(),e=e||"{}";try{Rt.records.options=JSON.parse(e)}catch(t){P.error("error while parsing gitGraph options",t.message)}},"setOptions"),x$=d(function(){return Rt.records.options},"getOptions"),b$=d(function(e){let t=e.msg,r=e.id;const i=e.type;let s=e.tags;P.info("commit",t,r,i,s),P.debug("Entering commit:",t,r,i,s);const n=Sn();r=Ct.sanitizeText(r,n),t=Ct.sanitizeText(t,n),s=s==null?void 0:s.map(o=>Ct.sanitizeText(o,n));const a={id:r||Rt.records.seq+"-"+du(),message:t,seq:Rt.records.seq++,type:i??we.NORMAL,tags:s??[],parents:Rt.records.head==null?[]:[Rt.records.head.id],branch:Rt.records.currBranch};Rt.records.head=a,P.info("main branch",n.mainBranchName),Rt.records.commits.has(a.id)&&P.warn(`Commit ID ${a.id} already exists`),Rt.records.commits.set(a.id,a),Rt.records.branches.set(Rt.records.currBranch,a.id),P.debug("in pushCommit "+a.id)},"commit"),v$=d(function(e){let t=e.name;const r=e.order;if(t=Ct.sanitizeText(t,Sn()),Rt.records.branches.has(t))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${t}")`);Rt.records.branches.set(t,Rt.records.head!=null?Rt.records.head.id:null),Rt.records.branchConfig.set(t,{name:t,order:r}),C5(t),P.debug("in createBranch")},"branch"),_$=d(e=>{let t=e.branch,r=e.id;const i=e.type,s=e.tags,n=Sn();t=Ct.sanitizeText(t,n),r&&(r=Ct.sanitizeText(r,n));const a=Rt.records.branches.get(Rt.records.currBranch),o=Rt.records.branches.get(t),h=a?Rt.records.commits.get(a):void 0,l=o?Rt.records.commits.get(o):void 0;if(h&&l&&h.branch===t)throw new Error(`Cannot merge branch '${t}' into itself.`);if(Rt.records.currBranch===t){const p=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw p.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},p}if(h===void 0||!h){const p=new Error(`Incorrect usage of "merge". Current branch (${Rt.records.currBranch})has no commits`);throw p.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["commit"]},p}if(!Rt.records.branches.has(t)){const p=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") does not exist");throw p.hash={text:`merge ${t}`,token:`merge ${t}`,expected:[`branch ${t}`]},p}if(l===void 0||!l){const p=new Error('Incorrect usage of "merge". Branch to be merged ('+t+") has no commits");throw p.hash={text:`merge ${t}`,token:`merge ${t}`,expected:['"commit"']},p}if(h===l){const p=new Error('Incorrect usage of "merge". Both branches have same head');throw p.hash={text:`merge ${t}`,token:`merge ${t}`,expected:["branch abc"]},p}if(r&&Rt.records.commits.has(r)){const p=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom id");throw p.hash={text:`merge ${t} ${r} ${i} ${s==null?void 0:s.join(" ")}`,token:`merge ${t} ${r} ${i} ${s==null?void 0:s.join(" ")}`,expected:[`merge ${t} ${r}_UNIQUE ${i} ${s==null?void 0:s.join(" ")}`]},p}const u=o||"",f={id:r||`${Rt.records.seq}-${du()}`,message:`merged branch ${t} into ${Rt.records.currBranch}`,seq:Rt.records.seq++,parents:Rt.records.head==null?[]:[Rt.records.head.id,u],branch:Rt.records.currBranch,type:we.MERGE,customType:i,customId:!!r,tags:s??[]};Rt.records.head=f,Rt.records.commits.set(f.id,f),Rt.records.branches.set(Rt.records.currBranch,f.id),P.debug(Rt.records.branches),P.debug("in mergeBranch")},"merge"),k$=d(function(e){let t=e.id,r=e.targetId,i=e.tags,s=e.parent;P.debug("Entering cherryPick:",t,r,i);const n=Sn();if(t=Ct.sanitizeText(t,n),r=Ct.sanitizeText(r,n),i=i==null?void 0:i.map(h=>Ct.sanitizeText(h,n)),s=Ct.sanitizeText(s,n),!t||!Rt.records.commits.has(t)){const h=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw h.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},h}const a=Rt.records.commits.get(t);if(a===void 0||!a)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(s&&!(Array.isArray(a.parents)&&a.parents.includes(s)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const o=a.branch;if(a.type===we.MERGE&&!s)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!Rt.records.commits.has(r)){if(o===Rt.records.currBranch){const f=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const h=Rt.records.branches.get(Rt.records.currBranch);if(h===void 0||!h){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${Rt.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const l=Rt.records.commits.get(h);if(l===void 0||!l){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${Rt.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${t} ${r}`,token:`cherryPick ${t} ${r}`,expected:["cherry-pick abc"]},f}const u={id:Rt.records.seq+"-"+du(),message:`cherry-picked ${a==null?void 0:a.message} into ${Rt.records.currBranch}`,seq:Rt.records.seq++,parents:Rt.records.head==null?[]:[Rt.records.head.id,a.id],branch:Rt.records.currBranch,type:we.CHERRY_PICK,tags:i?i.filter(Boolean):[`cherry-pick:${a.id}${a.type===we.MERGE?`|parent:${s}`:""}`]};Rt.records.head=u,Rt.records.commits.set(u.id,u),Rt.records.branches.set(Rt.records.currBranch,u.id),P.debug(Rt.records.branches),P.debug("in cherryPick")}},"cherryPick"),C5=d(function(e){if(e=Ct.sanitizeText(e,Sn()),Rt.records.branches.has(e)){Rt.records.currBranch=e;const t=Rt.records.branches.get(Rt.records.currBranch);t===void 0||!t?Rt.records.head=null:Rt.records.head=Rt.records.commits.get(t)??null}else{const t=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${e}")`);throw t.hash={text:`checkout ${e}`,token:`checkout ${e}`,expected:[`branch ${e}`]},t}},"checkout");function y1(e,t,r){const i=e.indexOf(t);i===-1?e.push(r):e.splice(i,1,r)}d(y1,"upsert");function ip(e){const t=e.reduce((s,n)=>s.seq>n.seq?s:n,e[0]);let r="";e.forEach(function(s){s===t?r+="	*":r+="	|"});const i=[r,t.id,t.seq];for(const s in Rt.records.branches)Rt.records.branches.get(s)===t.id&&i.push(s);if(P.debug(i.join(" ")),t.parents&&t.parents.length==2&&t.parents[0]&&t.parents[1]){const s=Rt.records.commits.get(t.parents[0]);y1(e,t,s),t.parents[1]&&e.push(Rt.records.commits.get(t.parents[1]))}else{if(t.parents.length==0)return;if(t.parents[0]){const s=Rt.records.commits.get(t.parents[0]);y1(e,t,s)}}e=S5(e,s=>s.id),ip(e)}d(ip,"prettyPrintCommitHistory");var w$=d(function(){P.debug(Rt.records.commits);const e=E5()[0];ip([e])},"prettyPrint"),T$=d(function(){Rt.reset(),qe()},"clear"),S$=d(function(){return[...Rt.records.branchConfig.values()].map((t,r)=>t.order!==null&&t.order!==void 0?t:{...t,order:parseFloat(`0.${r}`)}).sort((t,r)=>(t.order??0)-(r.order??0)).map(({name:t})=>({name:t}))},"getBranchesAsObjArray"),C$=d(function(){return Rt.records.branches},"getBranches"),E$=d(function(){return Rt.records.commits},"getCommits"),E5=d(function(){const e=[...Rt.records.commits.values()];return e.forEach(function(t){P.debug(t.id)}),e.sort((t,r)=>t.seq-r.seq),e},"getCommitsArray"),A$=d(function(){return Rt.records.currBranch},"getCurrentBranch"),L$=d(function(){return Rt.records.direction},"getDirection"),D$=d(function(){return Rt.records.head},"getHead"),A5={commitType:we,getConfig:Sn,setDirection:y$,setOptions:m$,getOptions:x$,commit:b$,branch:v$,merge:_$,cherryPick:k$,checkout:C5,prettyPrint:w$,clear:T$,getBranchesAsObjArray:S$,getBranches:C$,getCommits:E$,getCommitsArray:E5,getCurrentBranch:A$,getDirection:L$,getHead:D$,setAccTitle:We,getAccTitle:Ke,getAccDescription:Ze,setAccDescription:Qe,setDiagramTitle:ir,getDiagramTitle:Ye},R$=d((e,t)=>{wn(e,t),e.dir&&t.setDirection(e.dir);for(const r of e.statements)B$(r,t)},"populate"),B$=d((e,t)=>{const i={Commit:d(s=>t.commit(I$(s)),"Commit"),Branch:d(s=>t.branch(N$(s)),"Branch"),Merge:d(s=>t.merge($$(s)),"Merge"),Checkout:d(s=>t.checkout(M$(s)),"Checkout"),CherryPicking:d(s=>t.cherryPick(F$(s)),"CherryPicking")}[e.$type];i?i(e):P.error(`Unknown statement type: ${e.$type}`)},"parseStatement"),I$=d(e=>({id:e.id,msg:e.message??"",type:e.type!==void 0?we[e.type]:we.NORMAL,tags:e.tags??void 0}),"parseCommit"),N$=d(e=>({name:e.name,order:e.order??0}),"parseBranch"),$$=d(e=>({branch:e.branch,id:e.id??"",type:e.type!==void 0?we[e.type]:void 0,tags:e.tags??void 0}),"parseMerge"),M$=d(e=>e.branch,"parseCheckout"),F$=d(e=>{var r;return{id:e.id,targetId:"",tags:((r=e.tags)==null?void 0:r.length)===0?void 0:e.tags,parent:e.parent}},"parseCherryPicking"),P$={parse:d(async e=>{const t=await Ts("gitGraph",e);P.debug(t),R$(t,A5)},"parse")},sd=it(),Ve=sd==null?void 0:sd.gitGraph,cs=10,hs=40,gi=4,zi=2,Os=8,Rr=new Map,Br=new Map,Th=30,Uo=new Map,Sh=[],as=0,ye="LR",O$=d(()=>{Rr.clear(),Br.clear(),Uo.clear(),as=0,Sh=[],ye="LR"},"clear"),L5=d(e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof e=="string"?e.split(/\\n|\n|<br\s*\/?>/gi):e).forEach(i=>{const s=document.createElementNS("http://www.w3.org/2000/svg","tspan");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.setAttribute("dy","1em"),s.setAttribute("x","0"),s.setAttribute("class","row"),s.textContent=i.trim(),t.appendChild(s)}),t},"drawText"),D5=d(e=>{let t,r,i;return ye==="BT"?(r=d((s,n)=>s<=n,"comparisonFunc"),i=1/0):(r=d((s,n)=>s>=n,"comparisonFunc"),i=0),e.forEach(s=>{var a,o;const n=ye==="TB"||ye=="BT"?(a=Br.get(s))==null?void 0:a.y:(o=Br.get(s))==null?void 0:o.x;n!==void 0&&r(n,i)&&(t=s,i=n)}),t},"findClosestParent"),V$=d(e=>{let t="",r=1/0;return e.forEach(i=>{const s=Br.get(i).y;s<=r&&(t=i,r=s)}),t||void 0},"findClosestParentBT"),z$=d((e,t,r)=>{let i=r,s=r;const n=[];e.forEach(a=>{const o=t.get(a);if(!o)throw new Error(`Commit not found for key ${a}`);o.parents.length?(i=q$(o),s=Math.max(i,s)):n.push(o),Y$(o,i)}),i=s,n.forEach(a=>{G$(a,i,r)}),e.forEach(a=>{const o=t.get(a);if(o!=null&&o.parents.length){const h=V$(o.parents);i=Br.get(h).y-hs,i<=s&&(s=i);const l=Rr.get(o.branch).pos,u=i-cs;Br.set(o.id,{x:l,y:u})}})},"setParallelBTPos"),W$=d(e=>{var i;const t=D5(e.parents.filter(s=>s!==null));if(!t)throw new Error(`Closest parent not found for commit ${e.id}`);const r=(i=Br.get(t))==null?void 0:i.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${e.id}`);return r},"findClosestParentPos"),q$=d(e=>W$(e)+hs,"calculateCommitPosition"),Y$=d((e,t)=>{const r=Rr.get(e.branch);if(!r)throw new Error(`Branch not found for commit ${e.id}`);const i=r.pos,s=t+cs;return Br.set(e.id,{x:i,y:s}),{x:i,y:s}},"setCommitPosition"),G$=d((e,t,r)=>{const i=Rr.get(e.branch);if(!i)throw new Error(`Branch not found for commit ${e.id}`);const s=t+r,n=i.pos;Br.set(e.id,{x:n,y:s})},"setRootPosition"),H$=d((e,t,r,i,s,n)=>{if(n===we.HIGHLIGHT)e.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${t.id} commit-highlight${s%Os} ${i}-outer`),e.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${t.id} commit${s%Os} ${i}-inner`);else if(n===we.CHERRY_PICK)e.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${t.id} ${i}`),e.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${i}`),e.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${t.id} ${i}`),e.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${i}`),e.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${t.id} ${i}`);else{const a=e.append("circle");if(a.attr("cx",r.x),a.attr("cy",r.y),a.attr("r",t.type===we.MERGE?9:10),a.attr("class",`commit ${t.id} commit${s%Os}`),n===we.MERGE){const o=e.append("circle");o.attr("cx",r.x),o.attr("cy",r.y),o.attr("r",6),o.attr("class",`commit ${i} ${t.id} commit${s%Os}`)}n===we.REVERSE&&e.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${i} ${t.id} commit${s%Os}`)}},"drawCommitBullet"),U$=d((e,t,r,i)=>{var s;if(t.type!==we.CHERRY_PICK&&(t.customId&&t.type===we.MERGE||t.type!==we.MERGE)&&(Ve!=null&&Ve.showCommitLabel)){const n=e.append("g"),a=n.insert("rect").attr("class","commit-label-bkg"),o=n.append("text").attr("x",i).attr("y",r.y+25).attr("class","commit-label").text(t.id),h=(s=o.node())==null?void 0:s.getBBox();if(h&&(a.attr("x",r.posWithOffset-h.width/2-zi).attr("y",r.y+13.5).attr("width",h.width+2*zi).attr("height",h.height+2*zi),ye==="TB"||ye==="BT"?(a.attr("x",r.x-(h.width+4*gi+5)).attr("y",r.y-12),o.attr("x",r.x-(h.width+4*gi)).attr("y",r.y+h.height-12)):o.attr("x",r.posWithOffset-h.width/2),Ve.rotateCommitLabel))if(ye==="TB"||ye==="BT")o.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),a.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{const l=-7.5-(h.width+10)/25*9.5,u=10+h.width/25*8.5;n.attr("transform","translate("+l+", "+u+") rotate(-45, "+i+", "+r.y+")")}}},"drawCommitLabel"),j$=d((e,t,r,i)=>{var s;if(t.tags.length>0){let n=0,a=0,o=0;const h=[];for(const l of t.tags.reverse()){const u=e.insert("polygon"),f=e.append("circle"),p=e.append("text").attr("y",r.y-16-n).attr("class","tag-label").text(l),g=(s=p.node())==null?void 0:s.getBBox();if(!g)throw new Error("Tag bbox not found");a=Math.max(a,g.width),o=Math.max(o,g.height),p.attr("x",r.posWithOffset-g.width/2),h.push({tag:p,hole:f,rect:u,yOffset:n}),n+=20}for(const{tag:l,hole:u,rect:f,yOffset:p}of h){const g=o/2,y=r.y-19.2-p;if(f.attr("class","tag-label-bkg").attr("points",`
      ${i-a/2-gi/2},${y+zi}  
      ${i-a/2-gi/2},${y-zi}
      ${r.posWithOffset-a/2-gi},${y-g-zi}
      ${r.posWithOffset+a/2+gi},${y-g-zi}
      ${r.posWithOffset+a/2+gi},${y+g+zi}
      ${r.posWithOffset-a/2-gi},${y+g+zi}`),u.attr("cy",y).attr("cx",i-a/2+gi/2).attr("r",1.5).attr("class","tag-hole"),ye==="TB"||ye==="BT"){const m=i+p;f.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${m+2}
        ${r.x},${m-2}
        ${r.x+cs},${m-g-2}
        ${r.x+cs+a+4},${m-g-2}
        ${r.x+cs+a+4},${m+g+2}
        ${r.x+cs},${m+g+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),u.attr("cx",r.x+gi/2).attr("cy",m).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),l.attr("x",r.x+5).attr("y",m+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+i+")")}}}},"drawCommitTags"),X$=d(e=>{switch(e.customType??e.type){case we.NORMAL:return"commit-normal";case we.REVERSE:return"commit-reverse";case we.HIGHLIGHT:return"commit-highlight";case we.MERGE:return"commit-merge";case we.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),K$=d((e,t,r,i)=>{const s={x:0,y:0};if(e.parents.length>0){const n=D5(e.parents);if(n){const a=i.get(n)??s;return t==="TB"?a.y+hs:t==="BT"?(i.get(e.id)??s).y-hs:a.x+hs}}else return t==="TB"?Th:t==="BT"?(i.get(e.id)??s).y-hs:0;return 0},"calculatePosition"),Q$=d((e,t,r)=>{var a,o;const i=ye==="BT"&&r?t:t+cs,s=ye==="TB"||ye==="BT"?i:(a=Rr.get(e.branch))==null?void 0:a.pos,n=ye==="TB"||ye==="BT"?(o=Rr.get(e.branch))==null?void 0:o.pos:i;if(n===void 0||s===void 0)throw new Error(`Position were undefined for commit ${e.id}`);return{x:n,y:s,posWithOffset:i}},"getCommitPosition"),bg=d((e,t,r)=>{if(!Ve)throw new Error("GitGraph config not found");const i=e.append("g").attr("class","commit-bullets"),s=e.append("g").attr("class","commit-labels");let n=ye==="TB"||ye==="BT"?Th:0;const a=[...t.keys()],o=(Ve==null?void 0:Ve.parallelCommits)??!1,h=d((u,f)=>{var y,m;const p=(y=t.get(u))==null?void 0:y.seq,g=(m=t.get(f))==null?void 0:m.seq;return p!==void 0&&g!==void 0?p-g:0},"sortKeys");let l=a.sort(h);ye==="BT"&&(o&&z$(l,t,n),l=l.reverse()),l.forEach(u=>{var g;const f=t.get(u);if(!f)throw new Error(`Commit not found for key ${u}`);o&&(n=K$(f,ye,n,Br));const p=Q$(f,n,o);if(r){const y=X$(f),m=f.customType??f.type,x=((g=Rr.get(f.branch))==null?void 0:g.index)??0;H$(i,f,p,y,x,m),U$(s,f,p,n),j$(s,f,p,n)}ye==="TB"||ye==="BT"?Br.set(f.id,{x:p.x,y:p.posWithOffset}):Br.set(f.id,{x:p.posWithOffset,y:p.y}),n=ye==="BT"&&o?n+hs:n+hs+cs,n>as&&(as=n)})},"drawCommits"),Z$=d((e,t,r,i,s)=>{const a=(ye==="TB"||ye==="BT"?r.x<i.x:r.y<i.y)?t.branch:e.branch,o=d(l=>l.branch===a,"isOnBranchToGetCurve"),h=d(l=>l.seq>e.seq&&l.seq<t.seq,"isBetweenCommits");return[...s.values()].some(l=>h(l)&&o(l))},"shouldRerouteArrow"),jo=d((e,t,r=0)=>{const i=e+Math.abs(e-t)/2;if(r>5)return i;if(Sh.every(a=>Math.abs(a-i)>=10))return Sh.push(i),i;const n=Math.abs(e-t);return jo(e,t-n/5,r+1)},"findLane"),J$=d((e,t,r,i)=>{var g,y,m,x,b;const s=Br.get(t.id),n=Br.get(r.id);if(s===void 0||n===void 0)throw new Error(`Commit positions not found for commits ${t.id} and ${r.id}`);const a=Z$(t,r,s,n,i);let o="",h="",l=0,u=0,f=(g=Rr.get(r.branch))==null?void 0:g.index;r.type===we.MERGE&&t.id!==r.parents[0]&&(f=(y=Rr.get(t.branch))==null?void 0:y.index);let p;if(a){o="A 10 10, 0, 0, 0,",h="A 10 10, 0, 0, 1,",l=10,u=10;const _=s.y<n.y?jo(s.y,n.y):jo(n.y,s.y),S=s.x<n.x?jo(s.x,n.x):jo(n.x,s.x);ye==="TB"?s.x<n.x?p=`M ${s.x} ${s.y} L ${S-l} ${s.y} ${h} ${S} ${s.y+u} L ${S} ${n.y-l} ${o} ${S+u} ${n.y} L ${n.x} ${n.y}`:(f=(m=Rr.get(t.branch))==null?void 0:m.index,p=`M ${s.x} ${s.y} L ${S+l} ${s.y} ${o} ${S} ${s.y+u} L ${S} ${n.y-l} ${h} ${S-u} ${n.y} L ${n.x} ${n.y}`):ye==="BT"?s.x<n.x?p=`M ${s.x} ${s.y} L ${S-l} ${s.y} ${o} ${S} ${s.y-u} L ${S} ${n.y+l} ${h} ${S+u} ${n.y} L ${n.x} ${n.y}`:(f=(x=Rr.get(t.branch))==null?void 0:x.index,p=`M ${s.x} ${s.y} L ${S+l} ${s.y} ${h} ${S} ${s.y-u} L ${S} ${n.y+l} ${o} ${S-u} ${n.y} L ${n.x} ${n.y}`):s.y<n.y?p=`M ${s.x} ${s.y} L ${s.x} ${_-l} ${o} ${s.x+u} ${_} L ${n.x-l} ${_} ${h} ${n.x} ${_+u} L ${n.x} ${n.y}`:(f=(b=Rr.get(t.branch))==null?void 0:b.index,p=`M ${s.x} ${s.y} L ${s.x} ${_+l} ${h} ${s.x+u} ${_} L ${n.x-l} ${_} ${o} ${n.x} ${_-u} L ${n.x} ${n.y}`)}else o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",l=20,u=20,ye==="TB"?(s.x<n.x&&(r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${s.x} ${n.y-l} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${n.x-l} ${s.y} ${h} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",l=20,u=20,r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${s.x} ${n.y-l} ${h} ${s.x-u} ${n.y} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${n.x+l} ${s.y} ${o} ${n.x} ${s.y+u} L ${n.x} ${n.y}`),s.x===n.x&&(p=`M ${s.x} ${s.y} L ${n.x} ${n.y}`)):ye==="BT"?(s.x<n.x&&(r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${s.x} ${n.y+l} ${h} ${s.x+u} ${n.y} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${n.x-l} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`),s.x>n.x&&(o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",l=20,u=20,r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${s.x} ${n.y+l} ${o} ${s.x-u} ${n.y} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${n.x-l} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`),s.x===n.x&&(p=`M ${s.x} ${s.y} L ${n.x} ${n.y}`)):(s.y<n.y&&(r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${n.x-l} ${s.y} ${h} ${n.x} ${s.y+u} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${s.x} ${n.y-l} ${o} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y>n.y&&(r.type===we.MERGE&&t.id!==r.parents[0]?p=`M ${s.x} ${s.y} L ${n.x-l} ${s.y} ${o} ${n.x} ${s.y-u} L ${n.x} ${n.y}`:p=`M ${s.x} ${s.y} L ${s.x} ${n.y+l} ${h} ${s.x+u} ${n.y} L ${n.x} ${n.y}`),s.y===n.y&&(p=`M ${s.x} ${s.y} L ${n.x} ${n.y}`));if(p===void 0)throw new Error("Line definition not found");e.append("path").attr("d",p).attr("class","arrow arrow"+f%Os)},"drawArrow"),tM=d((e,t)=>{const r=e.append("g").attr("class","commit-arrows");[...t.keys()].forEach(i=>{const s=t.get(i);s.parents&&s.parents.length>0&&s.parents.forEach(n=>{J$(r,t.get(n),s,t)})})},"drawArrows"),eM=d((e,t)=>{const r=e.append("g");t.forEach((i,s)=>{var y;const n=s%Os,a=(y=Rr.get(i.name))==null?void 0:y.pos;if(a===void 0)throw new Error(`Position not found for branch ${i.name}`);const o=r.append("line");o.attr("x1",0),o.attr("y1",a),o.attr("x2",as),o.attr("y2",a),o.attr("class","branch branch"+n),ye==="TB"?(o.attr("y1",Th),o.attr("x1",a),o.attr("y2",as),o.attr("x2",a)):ye==="BT"&&(o.attr("y1",as),o.attr("x1",a),o.attr("y2",Th),o.attr("x2",a)),Sh.push(a);const h=i.name,l=L5(h),u=r.insert("rect"),p=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+n);p.node().appendChild(l);const g=l.getBBox();u.attr("class","branchLabelBkg label"+n).attr("rx",4).attr("ry",4).attr("x",-g.width-4-((Ve==null?void 0:Ve.rotateCommitLabel)===!0?30:0)).attr("y",-g.height/2+8).attr("width",g.width+18).attr("height",g.height+4),p.attr("transform","translate("+(-g.width-14-((Ve==null?void 0:Ve.rotateCommitLabel)===!0?30:0))+", "+(a-g.height/2-1)+")"),ye==="TB"?(u.attr("x",a-g.width/2-10).attr("y",0),p.attr("transform","translate("+(a-g.width/2-5)+", 0)")):ye==="BT"?(u.attr("x",a-g.width/2-10).attr("y",as),p.attr("transform","translate("+(a-g.width/2-5)+", "+as+")")):u.attr("transform","translate(-19, "+(a-g.height/2)+")")})},"drawBranches"),rM=d(function(e,t,r,i,s){return Rr.set(e,{pos:t,index:r}),t+=50+(s?40:0)+(ye==="TB"||ye==="BT"?i.width/2:0),t},"setBranchPosition"),iM=d(function(e,t,r,i){if(O$(),P.debug("in gitgraph renderer",e+`
`,"id:",t,r),!Ve)throw new Error("GitGraph config not found");const s=Ve.rotateCommitLabel??!1,n=i.db;Uo=n.getCommits();const a=n.getBranchesAsObjArray();ye=n.getDirection();const o=_t(`[id="${t}"]`);let h=0;a.forEach((l,u)=>{var x;const f=L5(l.name),p=o.append("g"),g=p.insert("g").attr("class","branchLabel"),y=g.insert("g").attr("class","label branch-label");(x=y.node())==null||x.appendChild(f);const m=f.getBBox();h=rM(l.name,h,u,m,s),y.remove(),g.remove(),p.remove()}),bg(o,Uo,!1),Ve.showBranches&&eM(o,a),tM(o,Uo),bg(o,Uo,!0),ie.insertTitle(o,"gitTitleText",Ve.titleTopMargin??0,n.getDiagramTitle()),I2(void 0,o,Ve.diagramPadding,Ve.useMaxWidth)},"draw"),sM={draw:iM},nM=d(e=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(t=>`
        .branch-label${t} { fill: ${e["gitBranchLabel"+t]}; }
        .commit${t} { stroke: ${e["git"+t]}; fill: ${e["git"+t]}; }
        .commit-highlight${t} { stroke: ${e["gitInv"+t]}; fill: ${e["gitInv"+t]}; }
        .label${t}  { fill: ${e["git"+t]}; }
        .arrow${t} { stroke: ${e["git"+t]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${e.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelColor};}
  .commit-label-bkg { font-size: ${e.commitLabelFontSize}; fill: ${e.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${e.tagLabelFontSize}; fill: ${e.tagLabelColor};}
  .tag-label-bkg { fill: ${e.tagLabelBackground}; stroke: ${e.tagLabelBorder}; }
  .tag-hole { fill: ${e.textColor}; }

  .commit-merge {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }
  .commit-reverse {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${e.primaryColor};
    fill: ${e.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`,"getStyles"),aM=nM,oM={parser:P$,db:A5,renderer:sM,styles:aM};const lM=Object.freeze(Object.defineProperty({__proto__:null,diagram:oM},Symbol.toStringTag,{value:"Module"}));var m1=(function(){var e=d(function(N,D,E,M){for(E=E||{},M=N.length;M--;E[N[M]]=D);return E},"o"),t=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],i=[1,27],s=[1,28],n=[1,29],a=[1,30],o=[1,31],h=[1,32],l=[1,33],u=[1,34],f=[1,9],p=[1,10],g=[1,11],y=[1,12],m=[1,13],x=[1,14],b=[1,15],_=[1,16],S=[1,19],C=[1,20],k=[1,21],v=[1,22],A=[1,23],L=[1,25],w=[1,35],R={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:d(function(D,E,M,F,I,B,X){var $=B.length-1;switch(I){case 1:return B[$-1];case 2:this.$=[];break;case 3:B[$-1].push(B[$]),this.$=B[$-1];break;case 4:case 5:this.$=B[$];break;case 6:case 7:this.$=[];break;case 8:F.setWeekday("monday");break;case 9:F.setWeekday("tuesday");break;case 10:F.setWeekday("wednesday");break;case 11:F.setWeekday("thursday");break;case 12:F.setWeekday("friday");break;case 13:F.setWeekday("saturday");break;case 14:F.setWeekday("sunday");break;case 15:F.setWeekend("friday");break;case 16:F.setWeekend("saturday");break;case 17:F.setDateFormat(B[$].substr(11)),this.$=B[$].substr(11);break;case 18:F.enableInclusiveEndDates(),this.$=B[$].substr(18);break;case 19:F.TopAxis(),this.$=B[$].substr(8);break;case 20:F.setAxisFormat(B[$].substr(11)),this.$=B[$].substr(11);break;case 21:F.setTickInterval(B[$].substr(13)),this.$=B[$].substr(13);break;case 22:F.setExcludes(B[$].substr(9)),this.$=B[$].substr(9);break;case 23:F.setIncludes(B[$].substr(9)),this.$=B[$].substr(9);break;case 24:F.setTodayMarker(B[$].substr(12)),this.$=B[$].substr(12);break;case 27:F.setDiagramTitle(B[$].substr(6)),this.$=B[$].substr(6);break;case 28:this.$=B[$].trim(),F.setAccTitle(this.$);break;case 29:case 30:this.$=B[$].trim(),F.setAccDescription(this.$);break;case 31:F.addSection(B[$].substr(8)),this.$=B[$].substr(8);break;case 33:F.addTask(B[$-1],B[$]),this.$="task";break;case 34:this.$=B[$-1],F.setClickEvent(B[$-1],B[$],null);break;case 35:this.$=B[$-2],F.setClickEvent(B[$-2],B[$-1],B[$]);break;case 36:this.$=B[$-2],F.setClickEvent(B[$-2],B[$-1],null),F.setLink(B[$-2],B[$]);break;case 37:this.$=B[$-3],F.setClickEvent(B[$-3],B[$-2],B[$-1]),F.setLink(B[$-3],B[$]);break;case 38:this.$=B[$-2],F.setClickEvent(B[$-2],B[$],null),F.setLink(B[$-2],B[$-1]);break;case 39:this.$=B[$-3],F.setClickEvent(B[$-3],B[$-1],B[$]),F.setLink(B[$-3],B[$-2]);break;case 40:this.$=B[$-1],F.setLink(B[$-1],B[$]);break;case 41:case 47:this.$=B[$-1]+" "+B[$];break;case 42:case 43:case 45:this.$=B[$-2]+" "+B[$-1]+" "+B[$];break;case 44:case 46:this.$=B[$-3]+" "+B[$-2]+" "+B[$-1]+" "+B[$];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:i,14:s,15:n,16:a,17:o,18:h,19:18,20:l,21:u,22:f,23:p,24:g,25:y,26:m,27:x,28:b,29:_,30:S,31:C,33:k,35:v,36:A,37:24,38:L,40:w},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:36,11:17,12:r,13:i,14:s,15:n,16:a,17:o,18:h,19:18,20:l,21:u,22:f,23:p,24:g,25:y,26:m,27:x,28:b,29:_,30:S,31:C,33:k,35:v,36:A,37:24,38:L,40:w},e(t,[2,5]),e(t,[2,6]),e(t,[2,17]),e(t,[2,18]),e(t,[2,19]),e(t,[2,20]),e(t,[2,21]),e(t,[2,22]),e(t,[2,23]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),e(t,[2,27]),{32:[1,37]},{34:[1,38]},e(t,[2,30]),e(t,[2,31]),e(t,[2,32]),{39:[1,39]},e(t,[2,8]),e(t,[2,9]),e(t,[2,10]),e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),{41:[1,40],43:[1,41]},e(t,[2,4]),e(t,[2,28]),e(t,[2,29]),e(t,[2,33]),e(t,[2,34],{42:[1,42],43:[1,43]}),e(t,[2,40],{41:[1,44]}),e(t,[2,35],{43:[1,45]}),e(t,[2,36]),e(t,[2,38],{42:[1,46]}),e(t,[2,37]),e(t,[2,39])],defaultActions:{},parseError:d(function(D,E){if(E.recoverable)this.trace(D);else{var M=new Error(D);throw M.hash=E,M}},"parseError"),parse:d(function(D){var E=this,M=[0],F=[],I=[null],B=[],X=this.table,$="",G=0,nt=0,ht=2,tt=1,dt=B.slice.call(arguments,1),st=Object.create(this.lexer),ot={yy:{}};for(var K in this.yy)Object.prototype.hasOwnProperty.call(this.yy,K)&&(ot.yy[K]=this.yy[K]);st.setInput(D,ot.yy),ot.yy.lexer=st,ot.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var lt=st.yylloc;B.push(lt);var U=st.options&&st.options.ranges;typeof ot.yy.parseError=="function"?this.parseError=ot.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(gt){M.length=M.length-2*gt,I.length=I.length-gt,B.length=B.length-gt}d(j,"popStack");function Q(){var gt;return gt=F.pop()||st.lex()||tt,typeof gt!="number"&&(gt instanceof Array&&(F=gt,gt=F.pop()),gt=E.symbols_[gt]||gt),gt}d(Q,"lex");for(var W,et,z,vt,O={},Zt,J,Yt,It;;){if(et=M[M.length-1],this.defaultActions[et]?z=this.defaultActions[et]:((W===null||typeof W>"u")&&(W=Q()),z=X[et]&&X[et][W]),typeof z>"u"||!z.length||!z[0]){var se="";It=[];for(Zt in X[et])this.terminals_[Zt]&&Zt>ht&&It.push("'"+this.terminals_[Zt]+"'");st.showPosition?se="Parse error on line "+(G+1)+`:
`+st.showPosition()+`
Expecting `+It.join(", ")+", got '"+(this.terminals_[W]||W)+"'":se="Parse error on line "+(G+1)+": Unexpected "+(W==tt?"end of input":"'"+(this.terminals_[W]||W)+"'"),this.parseError(se,{text:st.match,token:this.terminals_[W]||W,line:st.yylineno,loc:lt,expected:It})}if(z[0]instanceof Array&&z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+et+", token: "+W);switch(z[0]){case 1:M.push(W),I.push(st.yytext),B.push(st.yylloc),M.push(z[1]),W=null,nt=st.yyleng,$=st.yytext,G=st.yylineno,lt=st.yylloc;break;case 2:if(J=this.productions_[z[1]][1],O.$=I[I.length-J],O._$={first_line:B[B.length-(J||1)].first_line,last_line:B[B.length-1].last_line,first_column:B[B.length-(J||1)].first_column,last_column:B[B.length-1].last_column},U&&(O._$.range=[B[B.length-(J||1)].range[0],B[B.length-1].range[1]]),vt=this.performAction.apply(O,[$,nt,G,ot.yy,z[1],I,B].concat(dt)),typeof vt<"u")return vt;J&&(M=M.slice(0,-1*J*2),I=I.slice(0,-1*J),B=B.slice(0,-1*J)),M.push(this.productions_[z[1]][0]),I.push(O.$),B.push(O._$),Yt=X[M[M.length-2]][M[M.length-1]],M.push(Yt);break;case 3:return!0}}return!0},"parse")},T=(function(){var N={EOF:1,parseError:d(function(E,M){if(this.yy.parser)this.yy.parser.parseError(E,M);else throw new Error(E)},"parseError"),setInput:d(function(D,E){return this.yy=E||this.yy||{},this._input=D,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var D=this._input[0];this.yytext+=D,this.yyleng++,this.offset++,this.match+=D,this.matched+=D;var E=D.match(/(?:\r\n?|\n).*/g);return E?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),D},"input"),unput:d(function(D){var E=D.length,M=D.split(/(?:\r\n?|\n)/g);this._input=D+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var F=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var I=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===F.length?this.yylloc.first_column:0)+F[F.length-M.length].length-M[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[I[0],I[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(D){this.unput(this.match.slice(D))},"less"),pastInput:d(function(){var D=this.matched.substr(0,this.matched.length-this.match.length);return(D.length>20?"...":"")+D.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var D=this.match;return D.length<20&&(D+=this._input.substr(0,20-D.length)),(D.substr(0,20)+(D.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var D=this.pastInput(),E=new Array(D.length+1).join("-");return D+this.upcomingInput()+`
`+E+"^"},"showPosition"),test_match:d(function(D,E){var M,F,I;if(this.options.backtrack_lexer&&(I={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(I.yylloc.range=this.yylloc.range.slice(0))),F=D[0].match(/(?:\r\n?|\n).*/g),F&&(this.yylineno+=F.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:F?F[F.length-1].length-F[F.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+D[0].length},this.yytext+=D[0],this.match+=D[0],this.matches=D,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(D[0].length),this.matched+=D[0],M=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var B in I)this[B]=I[B];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var D,E,M,F;this._more||(this.yytext="",this.match="");for(var I=this._currentRules(),B=0;B<I.length;B++)if(M=this._input.match(this.rules[I[B]]),M&&(!E||M[0].length>E[0].length)){if(E=M,F=B,this.options.backtrack_lexer){if(D=this.test_match(M,I[B]),D!==!1)return D;if(this._backtrack){E=!1;continue}else return!1}else if(!this.options.flex)break}return E?(D=this.test_match(E,I[F]),D!==!1?D:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var E=this.next();return E||this.lex()},"lex"),begin:d(function(E){this.conditionStack.push(E)},"begin"),popState:d(function(){var E=this.conditionStack.length-1;return E>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(E){return E=this.conditionStack.length-1-Math.abs(E||0),E>=0?this.conditionStack[E]:"INITIAL"},"topState"),pushState:d(function(E){this.begin(E)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(E,M,F,I){switch(F){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 43;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 21:this.popState();break;case 22:return 42;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return N})();R.lexer=T;function V(){this.yy={}}return d(V,"Parser"),V.prototype=R,R.Parser=V,new V})();m1.parser=m1;var cM=m1;rr.extend(Dk);rr.extend(Rk);rr.extend(Bk);var vg={friday:5,saturday:6},xi="",sp="",np=void 0,ap="",Yl=[],Gl=[],op=new Map,lp=[],Ch=[],go="",cp="",R5=["active","done","crit","milestone","vert"],hp=[],Hl=!1,up=!1,dp="sunday",Eh="saturday",x1=0,hM=d(function(){lp=[],Ch=[],go="",hp=[],Ac=0,v1=void 0,Lc=void 0,Ue=[],xi="",sp="",cp="",np=void 0,ap="",Yl=[],Gl=[],Hl=!1,up=!1,x1=0,op=new Map,qe(),dp="sunday",Eh="saturday"},"clear"),uM=d(function(e){sp=e},"setAxisFormat"),dM=d(function(){return sp},"getAxisFormat"),fM=d(function(e){np=e},"setTickInterval"),pM=d(function(){return np},"getTickInterval"),gM=d(function(e){ap=e},"setTodayMarker"),yM=d(function(){return ap},"getTodayMarker"),mM=d(function(e){xi=e},"setDateFormat"),xM=d(function(){Hl=!0},"enableInclusiveEndDates"),bM=d(function(){return Hl},"endDatesAreInclusive"),vM=d(function(){up=!0},"enableTopAxis"),_M=d(function(){return up},"topAxisEnabled"),kM=d(function(e){cp=e},"setDisplayMode"),wM=d(function(){return cp},"getDisplayMode"),TM=d(function(){return xi},"getDateFormat"),SM=d(function(e){Yl=e.toLowerCase().split(/[\s,]+/)},"setIncludes"),CM=d(function(){return Yl},"getIncludes"),EM=d(function(e){Gl=e.toLowerCase().split(/[\s,]+/)},"setExcludes"),AM=d(function(){return Gl},"getExcludes"),LM=d(function(){return op},"getLinks"),DM=d(function(e){go=e,lp.push(e)},"addSection"),RM=d(function(){return lp},"getSections"),BM=d(function(){let e=_g();const t=10;let r=0;for(;!e&&r<t;)e=_g(),r++;return Ch=Ue,Ch},"getTasks"),B5=d(function(e,t,r,i){const s=e.format(t.trim()),n=e.format("YYYY-MM-DD");return i.includes(s)||i.includes(n)?!1:r.includes("weekends")&&(e.isoWeekday()===vg[Eh]||e.isoWeekday()===vg[Eh]+1)||r.includes(e.format("dddd").toLowerCase())?!0:r.includes(s)||r.includes(n)},"isInvalidDate"),IM=d(function(e){dp=e},"setWeekday"),NM=d(function(){return dp},"getWeekday"),$M=d(function(e){Eh=e},"setWeekend"),I5=d(function(e,t,r,i){if(!r.length||e.manualEndTime)return;let s;e.startTime instanceof Date?s=rr(e.startTime):s=rr(e.startTime,t,!0),s=s.add(1,"d");let n;e.endTime instanceof Date?n=rr(e.endTime):n=rr(e.endTime,t,!0);const[a,o]=MM(s,n,t,r,i);e.endTime=a.toDate(),e.renderEndTime=o},"checkTaskDates"),MM=d(function(e,t,r,i,s){let n=!1,a=null;for(;e<=t;)n||(a=t.toDate()),n=B5(e,r,i,s),n&&(t=t.add(1,"d")),e=e.add(1,"d");return[t,a]},"fixTaskDates"),b1=d(function(e,t,r){if(r=r.trim(),d(o=>{const h=o.trim();return h==="x"||h==="X"},"isTimestampFormat")(t)&&/^\d+$/.test(r))return new Date(Number(r));const n=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(n!==null){let o=null;for(const l of n.groups.ids.split(" ")){let u=Cn(l);u!==void 0&&(!o||u.endTime>o.endTime)&&(o=u)}if(o)return o.endTime;const h=new Date;return h.setHours(0,0,0,0),h}let a=rr(r,t.trim(),!0);if(a.isValid())return a.toDate();{P.debug("Invalid date:"+r),P.debug("With date format:"+t.trim());const o=new Date(r);if(o===void 0||isNaN(o.getTime())||o.getFullYear()<-1e4||o.getFullYear()>1e4)throw new Error("Invalid date:"+r);return o}},"getStartDate"),N5=d(function(e){const t=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(e.trim());return t!==null?[Number.parseFloat(t[1]),t[2]]:[NaN,"ms"]},"parseDuration"),$5=d(function(e,t,r,i=!1){r=r.trim();const n=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(n!==null){let u=null;for(const p of n.groups.ids.split(" ")){let g=Cn(p);g!==void 0&&(!u||g.startTime<u.startTime)&&(u=g)}if(u)return u.startTime;const f=new Date;return f.setHours(0,0,0,0),f}let a=rr(r,t.trim(),!0);if(a.isValid())return i&&(a=a.add(1,"d")),a.toDate();let o=rr(e);const[h,l]=N5(r);if(!Number.isNaN(h)){const u=o.add(h,l);u.isValid()&&(o=u)}return o.toDate()},"getEndDate"),Ac=0,ra=d(function(e){return e===void 0?(Ac=Ac+1,"task"+Ac):e},"parseId"),FM=d(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const i=r.split(","),s={};fp(i,s,R5);for(let a=0;a<i.length;a++)i[a]=i[a].trim();let n="";switch(i.length){case 1:s.id=ra(),s.startTime=e.endTime,n=i[0];break;case 2:s.id=ra(),s.startTime=b1(void 0,xi,i[0]),n=i[1];break;case 3:s.id=ra(i[0]),s.startTime=b1(void 0,xi,i[1]),n=i[2];break}return n&&(s.endTime=$5(s.startTime,xi,n,Hl),s.manualEndTime=rr(n,"YYYY-MM-DD",!0).isValid(),I5(s,xi,Gl,Yl)),s},"compileData"),PM=d(function(e,t){let r;t.substr(0,1)===":"?r=t.substr(1,t.length):r=t;const i=r.split(","),s={};fp(i,s,R5);for(let n=0;n<i.length;n++)i[n]=i[n].trim();switch(i.length){case 1:s.id=ra(),s.startTime={type:"prevTaskEnd",id:e},s.endTime={data:i[0]};break;case 2:s.id=ra(),s.startTime={type:"getStartDate",startData:i[0]},s.endTime={data:i[1]};break;case 3:s.id=ra(i[0]),s.startTime={type:"getStartDate",startData:i[1]},s.endTime={data:i[2]};break}return s},"parseData"),v1,Lc,Ue=[],M5={},OM=d(function(e,t){const r={section:go,type:go,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:t},task:e,classes:[]},i=PM(Lc,t);r.raw.startTime=i.startTime,r.raw.endTime=i.endTime,r.id=i.id,r.prevTaskId=Lc,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,r.vert=i.vert,r.order=x1,x1++;const s=Ue.push(r);Lc=r.id,M5[r.id]=s-1},"addTask"),Cn=d(function(e){const t=M5[e];return Ue[t]},"findTaskById"),VM=d(function(e,t){const r={section:go,type:go,description:e,task:e,classes:[]},i=FM(v1,t);r.startTime=i.startTime,r.endTime=i.endTime,r.id=i.id,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,r.vert=i.vert,v1=r,Ch.push(r)},"addTaskOrg"),_g=d(function(){const e=d(function(r){const i=Ue[r];let s="";switch(Ue[r].raw.startTime.type){case"prevTaskEnd":{const n=Cn(i.prevTaskId);i.startTime=n.endTime;break}case"getStartDate":s=b1(void 0,xi,Ue[r].raw.startTime.startData),s&&(Ue[r].startTime=s);break}return Ue[r].startTime&&(Ue[r].endTime=$5(Ue[r].startTime,xi,Ue[r].raw.endTime.data,Hl),Ue[r].endTime&&(Ue[r].processed=!0,Ue[r].manualEndTime=rr(Ue[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),I5(Ue[r],xi,Gl,Yl))),Ue[r].processed},"compileTask");let t=!0;for(const[r,i]of Ue.entries())e(r),t=t&&i.processed;return t},"compileTasks"),zM=d(function(e,t){let r=t;it().securityLevel!=="loose"&&(r=dn.sanitizeUrl(t)),e.split(",").forEach(function(i){Cn(i)!==void 0&&(P5(i,()=>{window.open(r,"_self")}),op.set(i,r))}),F5(e,"clickable")},"setLink"),F5=d(function(e,t){e.split(",").forEach(function(r){let i=Cn(r);i!==void 0&&i.classes.push(t)})},"setClass"),WM=d(function(e,t,r){if(it().securityLevel!=="loose"||t===void 0)return;let i=[];if(typeof r=="string"){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<i.length;n++){let a=i[n].trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.substr(1,a.length-2)),i[n]=a}}i.length===0&&i.push(e),Cn(e)!==void 0&&P5(e,()=>{ie.runFunc(t,...i)})},"setClickFun"),P5=d(function(e,t){hp.push(function(){const r=document.querySelector(`[id="${e}"]`);r!==null&&r.addEventListener("click",function(){t()})},function(){const r=document.querySelector(`[id="${e}-text"]`);r!==null&&r.addEventListener("click",function(){t()})})},"pushFun"),qM=d(function(e,t,r){e.split(",").forEach(function(i){WM(i,t,r)}),F5(e,"clickable")},"setClickEvent"),YM=d(function(e){hp.forEach(function(t){t(e)})},"bindFunctions"),GM={getConfig:d(()=>it().gantt,"getConfig"),clear:hM,setDateFormat:mM,getDateFormat:TM,enableInclusiveEndDates:xM,endDatesAreInclusive:bM,enableTopAxis:vM,topAxisEnabled:_M,setAxisFormat:uM,getAxisFormat:dM,setTickInterval:fM,getTickInterval:pM,setTodayMarker:gM,getTodayMarker:yM,setAccTitle:We,getAccTitle:Ke,setDiagramTitle:ir,getDiagramTitle:Ye,setDisplayMode:kM,getDisplayMode:wM,setAccDescription:Qe,getAccDescription:Ze,addSection:DM,getSections:RM,getTasks:BM,addTask:OM,findTaskById:Cn,addTaskOrg:VM,setIncludes:SM,getIncludes:CM,setExcludes:EM,getExcludes:AM,setClickEvent:qM,setLink:zM,getLinks:LM,bindFunctions:YM,parseDuration:N5,isInvalidDate:B5,setWeekday:IM,getWeekday:NM,setWeekend:$M};function fp(e,t,r){let i=!0;for(;i;)i=!1,r.forEach(function(s){const n="^\\s*"+s+"\\s*$",a=new RegExp(n);e[0].match(a)&&(t[s]=!0,e.shift(1),i=!0)})}d(fp,"getTaskTags");rr.extend(Ik);var HM=d(function(){P.debug("Something is calling, setConf, remove the call")},"setConf"),kg={monday:hl,tuesday:xy,wednesday:by,thursday:on,friday:vy,saturday:_y,sunday:Ol},UM=d((e,t)=>{let r=[...e].map(()=>-1/0),i=[...e].sort((n,a)=>n.startTime-a.startTime||n.order-a.order),s=0;for(const n of i)for(let a=0;a<r.length;a++)if(n.startTime>=r[a]){r[a]=n.endTime,n.order=a+t,a>s&&(s=a);break}return s},"getMaxIntersections"),$i,nd=1e4,jM=d(function(e,t,r,i){const s=it().gantt,n=it().securityLevel;let a;n==="sandbox"&&(a=_t("#i"+t));const o=_t(n==="sandbox"?a.nodes()[0].contentDocument.body:"body"),h=n==="sandbox"?a.nodes()[0].contentDocument:document,l=h.getElementById(t);$i=l.parentElement.offsetWidth,$i===void 0&&($i=1200),s.useWidth!==void 0&&($i=s.useWidth);const u=i.db.getTasks();let f=[];for(const w of u)f.push(w.type);f=L(f);const p={};let g=2*s.topPadding;if(i.db.getDisplayMode()==="compact"||s.displayMode==="compact"){const w={};for(const T of u)w[T.section]===void 0?w[T.section]=[T]:w[T.section].push(T);let R=0;for(const T of Object.keys(w)){const V=UM(w[T],R)+1;R+=V,g+=V*(s.barHeight+s.barGap),p[T]=V}}else{g+=u.length*(s.barHeight+s.barGap);for(const w of f)p[w]=u.filter(R=>R.type===w).length}l.setAttribute("viewBox","0 0 "+$i+" "+g);const y=o.select(`[id="${t}"]`),m=S7().domain([Bw(u,function(w){return w.startTime}),Rw(u,function(w){return w.endTime})]).rangeRound([0,$i-s.leftPadding-s.rightPadding]);function x(w,R){const T=w.startTime,V=R.startTime;let N=0;return T>V?N=1:T<V&&(N=-1),N}d(x,"taskCompare"),u.sort(x),b(u,$i,g),Er(y,g,$i,s.useMaxWidth),y.append("text").text(i.db.getDiagramTitle()).attr("x",$i/2).attr("y",s.titleTopMargin).attr("class","titleText");function b(w,R,T){const V=s.barHeight,N=V+s.barGap,D=s.topPadding,E=s.leftPadding,M=lo().domain([0,f.length]).range(["#00B9FA","#F95002"]).interpolate(eS);S(N,D,E,R,T,w,i.db.getExcludes(),i.db.getIncludes()),k(E,D,R,T),_(w,N,D,E,V,M,R),v(N,D),A(E,D,R,T)}d(b,"makeGantt");function _(w,R,T,V,N,D,E){w.sort(($,G)=>$.vert===G.vert?0:$.vert?1:-1);const F=[...new Set(w.map($=>$.order))].map($=>w.find(G=>G.order===$));y.append("g").selectAll("rect").data(F).enter().append("rect").attr("x",0).attr("y",function($,G){return G=$.order,G*R+T-2}).attr("width",function(){return E-s.rightPadding/2}).attr("height",R).attr("class",function($){for(const[G,nt]of f.entries())if($.type===nt)return"section section"+G%s.numberSectionStyles;return"section section0"}).enter();const I=y.append("g").selectAll("rect").data(w).enter(),B=i.db.getLinks();if(I.append("rect").attr("id",function($){return $.id}).attr("rx",3).attr("ry",3).attr("x",function($){return $.milestone?m($.startTime)+V+.5*(m($.endTime)-m($.startTime))-.5*N:m($.startTime)+V}).attr("y",function($,G){return G=$.order,$.vert?s.gridLineStartPadding:G*R+T}).attr("width",function($){return $.milestone?N:$.vert?.08*N:m($.renderEndTime||$.endTime)-m($.startTime)}).attr("height",function($){return $.vert?u.length*(s.barHeight+s.barGap)+s.barHeight*2:N}).attr("transform-origin",function($,G){return G=$.order,(m($.startTime)+V+.5*(m($.endTime)-m($.startTime))).toString()+"px "+(G*R+T+.5*N).toString()+"px"}).attr("class",function($){const G="task";let nt="";$.classes.length>0&&(nt=$.classes.join(" "));let ht=0;for(const[dt,st]of f.entries())$.type===st&&(ht=dt%s.numberSectionStyles);let tt="";return $.active?$.crit?tt+=" activeCrit":tt=" active":$.done?$.crit?tt=" doneCrit":tt=" done":$.crit&&(tt+=" crit"),tt.length===0&&(tt=" task"),$.milestone&&(tt=" milestone "+tt),$.vert&&(tt=" vert "+tt),tt+=ht,tt+=" "+nt,G+tt}),I.append("text").attr("id",function($){return $.id+"-text"}).text(function($){return $.task}).attr("font-size",s.fontSize).attr("x",function($){let G=m($.startTime),nt=m($.renderEndTime||$.endTime);if($.milestone&&(G+=.5*(m($.endTime)-m($.startTime))-.5*N,nt=G+N),$.vert)return m($.startTime)+V;const ht=this.getBBox().width;return ht>nt-G?nt+ht+1.5*s.leftPadding>E?G+V-5:nt+V+5:(nt-G)/2+G+V}).attr("y",function($,G){return $.vert?s.gridLineStartPadding+u.length*(s.barHeight+s.barGap)+60:(G=$.order,G*R+s.barHeight/2+(s.fontSize/2-2)+T)}).attr("text-height",N).attr("class",function($){const G=m($.startTime);let nt=m($.endTime);$.milestone&&(nt=G+N);const ht=this.getBBox().width;let tt="";$.classes.length>0&&(tt=$.classes.join(" "));let dt=0;for(const[ot,K]of f.entries())$.type===K&&(dt=ot%s.numberSectionStyles);let st="";return $.active&&($.crit?st="activeCritText"+dt:st="activeText"+dt),$.done?$.crit?st=st+" doneCritText"+dt:st=st+" doneText"+dt:$.crit&&(st=st+" critText"+dt),$.milestone&&(st+=" milestoneText"),$.vert&&(st+=" vertText"),ht>nt-G?nt+ht+1.5*s.leftPadding>E?tt+" taskTextOutsideLeft taskTextOutside"+dt+" "+st:tt+" taskTextOutsideRight taskTextOutside"+dt+" "+st+" width-"+ht:tt+" taskText taskText"+dt+" "+st+" width-"+ht}),it().securityLevel==="sandbox"){let $;$=_t("#i"+t);const G=$.nodes()[0].contentDocument;I.filter(function(nt){return B.has(nt.id)}).each(function(nt){var ht=G.querySelector("#"+nt.id),tt=G.querySelector("#"+nt.id+"-text");const dt=ht.parentNode;var st=G.createElement("a");st.setAttribute("xlink:href",B.get(nt.id)),st.setAttribute("target","_top"),dt.appendChild(st),st.appendChild(ht),st.appendChild(tt)})}}d(_,"drawRects");function S(w,R,T,V,N,D,E,M){if(E.length===0&&M.length===0)return;let F,I;for(const{startTime:ht,endTime:tt}of D)(F===void 0||ht<F)&&(F=ht),(I===void 0||tt>I)&&(I=tt);if(!F||!I)return;if(rr(I).diff(rr(F),"year")>5){P.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const B=i.db.getDateFormat(),X=[];let $=null,G=rr(F);for(;G.valueOf()<=I;)i.db.isInvalidDate(G,B,E,M)?$?$.end=G:$={start:G,end:G}:$&&(X.push($),$=null),G=G.add(1,"d");y.append("g").selectAll("rect").data(X).enter().append("rect").attr("id",ht=>"exclude-"+ht.start.format("YYYY-MM-DD")).attr("x",ht=>m(ht.start.startOf("day"))+T).attr("y",s.gridLineStartPadding).attr("width",ht=>m(ht.end.endOf("day"))-m(ht.start.startOf("day"))).attr("height",N-R-s.gridLineStartPadding).attr("transform-origin",function(ht,tt){return(m(ht.start)+T+.5*(m(ht.end)-m(ht.start))).toString()+"px "+(tt*w+.5*N).toString()+"px"}).attr("class","exclude-range")}d(S,"drawExcludeDays");function C(w,R,T,V){if(T<=0||w>R)return 1/0;const N=R-w,D=rr.duration({[V??"day"]:T}).asMilliseconds();return D<=0?1/0:Math.ceil(N/D)}d(C,"getEstimatedTickCount");function k(w,R,T,V){const N=i.db.getDateFormat(),D=i.db.getAxisFormat();let E;D?E=D:N==="D"?E="%d":E=s.axisFormat??"%Y-%m-%d";let M=zw(m).tickSize(-V+R+s.gridLineStartPadding).tickFormat(ih(E));const I=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(i.db.getTickInterval()||s.tickInterval);if(I!==null){const B=parseInt(I[1],10);if(isNaN(B)||B<=0)P.warn(`Invalid tick interval value: "${I[1]}". Skipping custom tick interval.`);else{const X=I[2],$=i.db.getWeekday()||s.weekday,G=m.domain(),nt=G[0],ht=G[1],tt=C(nt,ht,B,X);if(tt>nd)P.warn(`The tick interval "${B}${X}" would generate ${tt} ticks, which exceeds the maximum allowed (${nd}). This may indicate an invalid date or time range. Skipping custom tick interval.`);else switch(X){case"millisecond":M.ticks(co.every(B));break;case"second":M.ticks(ls.every(B));break;case"minute":M.ticks(ll.every(B));break;case"hour":M.ticks(cl.every(B));break;case"day":M.ticks(an.every(B));break;case"week":M.ticks(kg[$].every(B));break;case"month":M.ticks(ul.every(B));break}}}if(y.append("g").attr("class","grid").attr("transform","translate("+w+", "+(V-50)+")").call(M).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),i.db.topAxisEnabled()||s.topAxis){let B=Vw(m).tickSize(-V+R+s.gridLineStartPadding).tickFormat(ih(E));if(I!==null){const X=parseInt(I[1],10);if(isNaN(X)||X<=0)P.warn(`Invalid tick interval value: "${I[1]}". Skipping custom tick interval.`);else{const $=I[2],G=i.db.getWeekday()||s.weekday,nt=m.domain(),ht=nt[0],tt=nt[1];if(C(ht,tt,X,$)<=nd)switch($){case"millisecond":B.ticks(co.every(X));break;case"second":B.ticks(ls.every(X));break;case"minute":B.ticks(ll.every(X));break;case"hour":B.ticks(cl.every(X));break;case"day":B.ticks(an.every(X));break;case"week":B.ticks(kg[G].every(X));break;case"month":B.ticks(ul.every(X));break}}}y.append("g").attr("class","grid").attr("transform","translate("+w+", "+R+")").call(B).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}d(k,"makeGrid");function v(w,R){let T=0;const V=Object.keys(p).map(N=>[N,p[N]]);y.append("g").selectAll("text").data(V).enter().append(function(N){const D=N[0].split(Ct.lineBreakRegex),E=-(D.length-1)/2,M=h.createElementNS("http://www.w3.org/2000/svg","text");M.setAttribute("dy",E+"em");for(const[F,I]of D.entries()){const B=h.createElementNS("http://www.w3.org/2000/svg","tspan");B.setAttribute("alignment-baseline","central"),B.setAttribute("x","10"),F>0&&B.setAttribute("dy","1em"),B.textContent=I,M.appendChild(B)}return M}).attr("x",10).attr("y",function(N,D){if(D>0)for(let E=0;E<D;E++)return T+=V[D-1][1],N[1]*w/2+T*w+R;else return N[1]*w/2+R}).attr("font-size",s.sectionFontSize).attr("class",function(N){for(const[D,E]of f.entries())if(N[0]===E)return"sectionTitle sectionTitle"+D%s.numberSectionStyles;return"sectionTitle"})}d(v,"vertLabels");function A(w,R,T,V){const N=i.db.getTodayMarker();if(N==="off")return;const D=y.append("g").attr("class","today"),E=new Date,M=D.append("line");M.attr("x1",m(E)+w).attr("x2",m(E)+w).attr("y1",s.titleTopMargin).attr("y2",V-s.titleTopMargin).attr("class","today"),N!==""&&M.attr("style",N.replace(/,/g,";"))}d(A,"drawToday");function L(w){const R={},T=[];for(let V=0,N=w.length;V<N;++V)Object.prototype.hasOwnProperty.call(R,w[V])||(R[w[V]]=!0,T.push(w[V]));return T}d(L,"checkUnique")},"draw"),XM={setConf:HM,draw:jM},KM=d(e=>`
  .mermaid-main-font {
        font-family: ${e.fontFamily};
  }

  .exclude-range {
    fill: ${e.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${e.sectionBkgColor};
  }

  .section2 {
    fill: ${e.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${e.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${e.titleColor};
  }

  .sectionTitle1 {
    fill: ${e.titleColor};
  }

  .sectionTitle2 {
    fill: ${e.titleColor};
  }

  .sectionTitle3 {
    fill: ${e.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: ${e.fontFamily};
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${e.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${e.fontFamily};
    fill: ${e.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${e.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideRight {
    fill: ${e.taskTextDarkColor};
    text-anchor: start;
    font-family: ${e.fontFamily};
  }

  .taskTextOutsideLeft {
    fill: ${e.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${e.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${e.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${e.taskBkgColor};
    stroke: ${e.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${e.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${e.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${e.activeTaskBkgColor};
    stroke: ${e.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${e.doneTaskBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${e.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${e.critBorderColor};
    fill: ${e.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .vert {
    stroke: ${e.vertLineColor};
  }

  .vertText {
    font-size: 15px;
    text-anchor: middle;
    fill: ${e.vertLineColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${e.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.titleColor||e.textColor};
    font-family: ${e.fontFamily};
  }
`,"getStyles"),QM=KM,ZM={parser:cM,db:GM,renderer:XM,styles:QM};const JM=Object.freeze(Object.defineProperty({__proto__:null,diagram:ZM},Symbol.toStringTag,{value:"Module"}));var tF={parse:d(async e=>{const t=await Ts("info",e);P.debug(t)},"parse")},eF={version:dd.version+""},rF=d(()=>eF.version,"getVersion"),iF={getVersion:rF},sF=d((e,t,r)=>{P.debug(`rendering info diagram
`+e);const i=es(t);Er(i,100,400,!0),i.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)},"draw"),nF={draw:sF},aF={parser:tF,db:iF,renderer:nF};const oF=Object.freeze(Object.defineProperty({__proto__:null,diagram:aF},Symbol.toStringTag,{value:"Module"}));var lF=ge.pie,pp={sections:new Map,showData:!1},Ah=pp.sections,gp=pp.showData,cF=structuredClone(lF),hF=d(()=>structuredClone(cF),"getConfig"),uF=d(()=>{Ah=new Map,gp=pp.showData,qe()},"clear"),dF=d(({label:e,value:t})=>{if(t<0)throw new Error(`"${e}" has invalid value: ${t}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);Ah.has(e)||(Ah.set(e,t),P.debug(`added new section: ${e}, with value: ${t}`))},"addSection"),fF=d(()=>Ah,"getSections"),pF=d(e=>{gp=e},"setShowData"),gF=d(()=>gp,"getShowData"),O5={getConfig:hF,clear:uF,setDiagramTitle:ir,getDiagramTitle:Ye,setAccTitle:We,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addSection:dF,getSections:fF,setShowData:pF,getShowData:gF},yF=d((e,t)=>{wn(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)},"populateDb"),mF={parse:d(async e=>{const t=await Ts("pie",e);P.debug(t),yF(t,O5)},"parse")},xF=d(e=>`
  .pieCircle{
    stroke: ${e.pieStrokeColor};
    stroke-width : ${e.pieStrokeWidth};
    opacity : ${e.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${e.pieOuterStrokeColor};
    stroke-width: ${e.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${e.pieTitleTextSize};
    fill: ${e.pieTitleTextColor};
    font-family: ${e.fontFamily};
  }
  .slice {
    font-family: ${e.fontFamily};
    fill: ${e.pieSectionTextColor};
    font-size:${e.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${e.pieLegendTextColor};
    font-family: ${e.fontFamily};
    font-size: ${e.pieLegendTextSize};
  }
`,"getStyles"),bF=xF,vF=d(e=>{const t=[...e.values()].reduce((s,n)=>s+n,0),r=[...e.entries()].map(([s,n])=>({label:s,value:n})).filter(s=>s.value/t*100>=1).sort((s,n)=>n.value-s.value);return V7().value(s=>s.value)(r)},"createPieArcs"),_F=d((e,t,r,i)=>{P.debug(`rendering pie chart
`+e);const s=i.db,n=it(),a=Cr(s.getConfig(),n.pie),o=40,h=18,l=4,u=450,f=u,p=es(t),g=p.append("g");g.attr("transform","translate("+f/2+","+u/2+")");const{themeVariables:y}=n;let[m]=vn(y.pieOuterStrokeWidth);m??(m=2);const x=a.textPosition,b=Math.min(f,u)/2-o,_=uo().innerRadius(0).outerRadius(b),S=uo().innerRadius(b*x).outerRadius(b*x);g.append("circle").attr("cx",0).attr("cy",0).attr("r",b+m/2).attr("class","pieOuterCircle");const C=s.getSections(),k=vF(C),v=[y.pie1,y.pie2,y.pie3,y.pie4,y.pie5,y.pie6,y.pie7,y.pie8,y.pie9,y.pie10,y.pie11,y.pie12];let A=0;C.forEach(D=>{A+=D});const L=k.filter(D=>(D.data.value/A*100).toFixed(0)!=="0"),w=Ks(v);g.selectAll("mySlices").data(L).enter().append("path").attr("d",_).attr("fill",D=>w(D.data.label)).attr("class","pieCircle"),g.selectAll("mySlices").data(L).enter().append("text").text(D=>(D.data.value/A*100).toFixed(0)+"%").attr("transform",D=>"translate("+S.centroid(D)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(s.getDiagramTitle()).attr("x",0).attr("y",-400/2).attr("class","pieTitleText");const R=[...C.entries()].map(([D,E])=>({label:D,value:E})),T=g.selectAll(".legend").data(R).enter().append("g").attr("class","legend").attr("transform",(D,E)=>{const M=h+l,F=M*R.length/2,I=12*h,B=E*M-F;return"translate("+I+","+B+")"});T.append("rect").attr("width",h).attr("height",h).style("fill",D=>w(D.label)).style("stroke",D=>w(D.label)),T.append("text").attr("x",h+l).attr("y",h-l).text(D=>s.getShowData()?`${D.label} [${D.value}]`:D.label);const V=Math.max(...T.selectAll("text").nodes().map(D=>(D==null?void 0:D.getBoundingClientRect().width)??0)),N=f+o+h+l+V;p.attr("viewBox",`0 0 ${N} ${u}`),Er(p,u,N,a.useMaxWidth)},"draw"),kF={draw:_F},wF={parser:mF,db:O5,renderer:kF,styles:bF};const TF=Object.freeze(Object.defineProperty({__proto__:null,diagram:wF},Symbol.toStringTag,{value:"Module"}));var _1=(function(){var e=d(function(Lt,Y,Tt,ft){for(Tt=Tt||{},ft=Lt.length;ft--;Tt[Lt[ft]]=Y);return Tt},"o"),t=[1,3],r=[1,4],i=[1,5],s=[1,6],n=[1,7],a=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],h=[55,56,57],l=[2,36],u=[1,37],f=[1,36],p=[1,38],g=[1,35],y=[1,43],m=[1,41],x=[1,14],b=[1,23],_=[1,18],S=[1,19],C=[1,20],k=[1,21],v=[1,22],A=[1,24],L=[1,25],w=[1,26],R=[1,27],T=[1,28],V=[1,29],N=[1,32],D=[1,33],E=[1,34],M=[1,39],F=[1,40],I=[1,42],B=[1,44],X=[1,62],$=[1,61],G=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],nt=[1,65],ht=[1,66],tt=[1,67],dt=[1,68],st=[1,69],ot=[1,70],K=[1,71],lt=[1,72],U=[1,73],j=[1,74],Q=[1,75],W=[1,76],et=[4,5,6,7,8,9,10,11,12,13,14,15,18],z=[1,90],vt=[1,91],O=[1,92],Zt=[1,99],J=[1,93],Yt=[1,96],It=[1,94],se=[1,95],gt=[1,97],St=[1,98],ut=[1,102],pt=[10,55,56,57],wt=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],rt={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:d(function(Y,Tt,ft,Ft,mt,xt,re){var At=xt.length-1;switch(mt){case 23:this.$=xt[At];break;case 24:this.$=xt[At-1]+""+xt[At];break;case 26:this.$=xt[At-1]+xt[At];break;case 27:this.$=[xt[At].trim()];break;case 28:xt[At-2].push(xt[At].trim()),this.$=xt[At-2];break;case 29:this.$=xt[At-4],Ft.addClass(xt[At-2],xt[At]);break;case 37:this.$=[];break;case 42:this.$=xt[At].trim(),Ft.setDiagramTitle(this.$);break;case 43:this.$=xt[At].trim(),Ft.setAccTitle(this.$);break;case 44:case 45:this.$=xt[At].trim(),Ft.setAccDescription(this.$);break;case 46:Ft.addSection(xt[At].substr(8)),this.$=xt[At].substr(8);break;case 47:Ft.addPoint(xt[At-3],"",xt[At-1],xt[At],[]);break;case 48:Ft.addPoint(xt[At-4],xt[At-3],xt[At-1],xt[At],[]);break;case 49:Ft.addPoint(xt[At-4],"",xt[At-2],xt[At-1],xt[At]);break;case 50:Ft.addPoint(xt[At-5],xt[At-4],xt[At-2],xt[At-1],xt[At]);break;case 51:Ft.setXAxisLeftText(xt[At-2]),Ft.setXAxisRightText(xt[At]);break;case 52:xt[At-1].text+="  ",Ft.setXAxisLeftText(xt[At-1]);break;case 53:Ft.setXAxisLeftText(xt[At]);break;case 54:Ft.setYAxisBottomText(xt[At-2]),Ft.setYAxisTopText(xt[At]);break;case 55:xt[At-1].text+="  ",Ft.setYAxisBottomText(xt[At-1]);break;case 56:Ft.setYAxisBottomText(xt[At]);break;case 57:Ft.setQuadrant1Text(xt[At]);break;case 58:Ft.setQuadrant2Text(xt[At]);break;case 59:Ft.setQuadrant3Text(xt[At]);break;case 60:Ft.setQuadrant4Text(xt[At]);break;case 64:this.$={text:xt[At],type:"text"};break;case 65:this.$={text:xt[At-1].text+""+xt[At],type:xt[At-1].type};break;case 66:this.$={text:xt[At],type:"text"};break;case 67:this.$={text:xt[At],type:"markdown"};break;case 68:this.$=xt[At];break;case 69:this.$=xt[At-1]+""+xt[At];break}},"anonymous"),table:[{18:t,26:1,27:2,28:r,55:i,56:s,57:n},{1:[3]},{18:t,26:8,27:2,28:r,55:i,56:s,57:n},{18:t,26:9,27:2,28:r,55:i,56:s,57:n},e(a,[2,33],{29:10}),e(o,[2,61]),e(o,[2,62]),e(o,[2,63]),{1:[2,30]},{1:[2,31]},e(h,l,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:u,5:f,10:p,12:g,13:y,14:m,18:x,25:b,35:_,37:S,39:C,41:k,42:v,48:A,50:L,51:w,52:R,53:T,54:V,60:N,61:D,63:E,64:M,65:F,66:I,67:B}),e(a,[2,34]),{27:45,55:i,56:s,57:n},e(h,[2,37]),e(h,l,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:u,5:f,10:p,12:g,13:y,14:m,18:x,25:b,35:_,37:S,39:C,41:k,42:v,48:A,50:L,51:w,52:R,53:T,54:V,60:N,61:D,63:E,64:M,65:F,66:I,67:B}),e(h,[2,39]),e(h,[2,40]),e(h,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},e(h,[2,45]),e(h,[2,46]),{18:[1,50]},{4:u,5:f,10:p,12:g,13:y,14:m,43:51,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,10:p,12:g,13:y,14:m,43:52,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,10:p,12:g,13:y,14:m,43:53,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,10:p,12:g,13:y,14:m,43:54,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,10:p,12:g,13:y,14:m,43:55,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,10:p,12:g,13:y,14:m,43:56,58:31,60:N,61:D,63:E,64:M,65:F,66:I,67:B},{4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,44:[1,57],47:[1,58],58:60,59:59,63:E,64:M,65:F,66:I,67:B},e(G,[2,64]),e(G,[2,66]),e(G,[2,67]),e(G,[2,70]),e(G,[2,71]),e(G,[2,72]),e(G,[2,73]),e(G,[2,74]),e(G,[2,75]),e(G,[2,76]),e(G,[2,77]),e(G,[2,78]),e(G,[2,79]),e(G,[2,80]),e(a,[2,35]),e(h,[2,38]),e(h,[2,42]),e(h,[2,43]),e(h,[2,44]),{3:64,4:nt,5:ht,6:tt,7:dt,8:st,9:ot,10:K,11:lt,12:U,13:j,14:Q,15:W,21:63},e(h,[2,53],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,49:[1,77],63:E,64:M,65:F,66:I,67:B}),e(h,[2,56],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,49:[1,78],63:E,64:M,65:F,66:I,67:B}),e(h,[2,57],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),e(h,[2,58],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),e(h,[2,59],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),e(h,[2,60],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),{45:[1,79]},{44:[1,80]},e(G,[2,65]),e(G,[2,81]),e(G,[2,82]),e(G,[2,83]),{3:82,4:nt,5:ht,6:tt,7:dt,8:st,9:ot,10:K,11:lt,12:U,13:j,14:Q,15:W,18:[1,81]},e(et,[2,23]),e(et,[2,1]),e(et,[2,2]),e(et,[2,3]),e(et,[2,4]),e(et,[2,5]),e(et,[2,6]),e(et,[2,7]),e(et,[2,8]),e(et,[2,9]),e(et,[2,10]),e(et,[2,11]),e(et,[2,12]),e(h,[2,52],{58:31,43:83,4:u,5:f,10:p,12:g,13:y,14:m,60:N,61:D,63:E,64:M,65:F,66:I,67:B}),e(h,[2,55],{58:31,43:84,4:u,5:f,10:p,12:g,13:y,14:m,60:N,61:D,63:E,64:M,65:F,66:I,67:B}),{46:[1,85]},{45:[1,86]},{4:z,5:vt,6:O,8:Zt,11:J,13:Yt,16:89,17:It,18:se,19:gt,20:St,22:88,23:87},e(et,[2,24]),e(h,[2,51],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),e(h,[2,54],{59:59,58:60,4:u,5:f,8:X,10:p,12:g,13:y,14:m,18:$,63:E,64:M,65:F,66:I,67:B}),e(h,[2,47],{22:88,16:89,23:100,4:z,5:vt,6:O,8:Zt,11:J,13:Yt,17:It,18:se,19:gt,20:St}),{46:[1,101]},e(h,[2,29],{10:ut}),e(pt,[2,27],{16:103,4:z,5:vt,6:O,8:Zt,11:J,13:Yt,17:It,18:se,19:gt,20:St}),e(wt,[2,25]),e(wt,[2,13]),e(wt,[2,14]),e(wt,[2,15]),e(wt,[2,16]),e(wt,[2,17]),e(wt,[2,18]),e(wt,[2,19]),e(wt,[2,20]),e(wt,[2,21]),e(wt,[2,22]),e(h,[2,49],{10:ut}),e(h,[2,48],{22:88,16:89,23:104,4:z,5:vt,6:O,8:Zt,11:J,13:Yt,17:It,18:se,19:gt,20:St}),{4:z,5:vt,6:O,8:Zt,11:J,13:Yt,16:89,17:It,18:se,19:gt,20:St,22:105},e(wt,[2,26]),e(h,[2,50],{10:ut}),e(pt,[2,28],{16:103,4:z,5:vt,6:O,8:Zt,11:J,13:Yt,17:It,18:se,19:gt,20:St})],defaultActions:{8:[2,30],9:[2,31]},parseError:d(function(Y,Tt){if(Tt.recoverable)this.trace(Y);else{var ft=new Error(Y);throw ft.hash=Tt,ft}},"parseError"),parse:d(function(Y){var Tt=this,ft=[0],Ft=[],mt=[null],xt=[],re=this.table,At="",pe=0,ar=0,ae=2,_e=1,Ge=xt.slice.call(arguments,1),Kt=Object.create(this.lexer),Ce={yy:{}};for(var Se in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Se)&&(Ce.yy[Se]=this.yy[Se]);Kt.setInput(Y,Ce.yy),Ce.yy.lexer=Kt,Ce.yy.parser=this,typeof Kt.yylloc>"u"&&(Kt.yylloc={});var tr=Kt.yylloc;xt.push(tr);var Ht=Kt.options&&Kt.options.ranges;typeof Ce.yy.parseError=="function"?this.parseError=Ce.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ve(De){ft.length=ft.length-2*De,mt.length=mt.length-De,xt.length=xt.length-De}d(ve,"popStack");function Ot(){var De;return De=Ft.pop()||Kt.lex()||_e,typeof De!="number"&&(De instanceof Array&&(Ft=De,De=Ft.pop()),De=Tt.symbols_[De]||De),De}d(Ot,"lex");for(var oe,ee,Xt,Wt,le={},hr,ce,He,$r;;){if(ee=ft[ft.length-1],this.defaultActions[ee]?Xt=this.defaultActions[ee]:((oe===null||typeof oe>"u")&&(oe=Ot()),Xt=re[ee]&&re[ee][oe]),typeof Xt>"u"||!Xt.length||!Xt[0]){var Mr="";$r=[];for(hr in re[ee])this.terminals_[hr]&&hr>ae&&$r.push("'"+this.terminals_[hr]+"'");Kt.showPosition?Mr="Parse error on line "+(pe+1)+`:
`+Kt.showPosition()+`
Expecting `+$r.join(", ")+", got '"+(this.terminals_[oe]||oe)+"'":Mr="Parse error on line "+(pe+1)+": Unexpected "+(oe==_e?"end of input":"'"+(this.terminals_[oe]||oe)+"'"),this.parseError(Mr,{text:Kt.match,token:this.terminals_[oe]||oe,line:Kt.yylineno,loc:tr,expected:$r})}if(Xt[0]instanceof Array&&Xt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ee+", token: "+oe);switch(Xt[0]){case 1:ft.push(oe),mt.push(Kt.yytext),xt.push(Kt.yylloc),ft.push(Xt[1]),oe=null,ar=Kt.yyleng,At=Kt.yytext,pe=Kt.yylineno,tr=Kt.yylloc;break;case 2:if(ce=this.productions_[Xt[1]][1],le.$=mt[mt.length-ce],le._$={first_line:xt[xt.length-(ce||1)].first_line,last_line:xt[xt.length-1].last_line,first_column:xt[xt.length-(ce||1)].first_column,last_column:xt[xt.length-1].last_column},Ht&&(le._$.range=[xt[xt.length-(ce||1)].range[0],xt[xt.length-1].range[1]]),Wt=this.performAction.apply(le,[At,ar,pe,Ce.yy,Xt[1],mt,xt].concat(Ge)),typeof Wt<"u")return Wt;ce&&(ft=ft.slice(0,-1*ce*2),mt=mt.slice(0,-1*ce),xt=xt.slice(0,-1*ce)),ft.push(this.productions_[Xt[1]][0]),mt.push(le.$),xt.push(le._$),He=re[ft[ft.length-2]][ft[ft.length-1]],ft.push(He);break;case 3:return!0}}return!0},"parse")},bt=(function(){var Lt={EOF:1,parseError:d(function(Tt,ft){if(this.yy.parser)this.yy.parser.parseError(Tt,ft);else throw new Error(Tt)},"parseError"),setInput:d(function(Y,Tt){return this.yy=Tt||this.yy||{},this._input=Y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var Y=this._input[0];this.yytext+=Y,this.yyleng++,this.offset++,this.match+=Y,this.matched+=Y;var Tt=Y.match(/(?:\r\n?|\n).*/g);return Tt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Y},"input"),unput:d(function(Y){var Tt=Y.length,ft=Y.split(/(?:\r\n?|\n)/g);this._input=Y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Tt),this.offset-=Tt;var Ft=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ft.length-1&&(this.yylineno-=ft.length-1);var mt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ft?(ft.length===Ft.length?this.yylloc.first_column:0)+Ft[Ft.length-ft.length].length-ft[0].length:this.yylloc.first_column-Tt},this.options.ranges&&(this.yylloc.range=[mt[0],mt[0]+this.yyleng-Tt]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(Y){this.unput(this.match.slice(Y))},"less"),pastInput:d(function(){var Y=this.matched.substr(0,this.matched.length-this.match.length);return(Y.length>20?"...":"")+Y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var Y=this.match;return Y.length<20&&(Y+=this._input.substr(0,20-Y.length)),(Y.substr(0,20)+(Y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var Y=this.pastInput(),Tt=new Array(Y.length+1).join("-");return Y+this.upcomingInput()+`
`+Tt+"^"},"showPosition"),test_match:d(function(Y,Tt){var ft,Ft,mt;if(this.options.backtrack_lexer&&(mt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(mt.yylloc.range=this.yylloc.range.slice(0))),Ft=Y[0].match(/(?:\r\n?|\n).*/g),Ft&&(this.yylineno+=Ft.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ft?Ft[Ft.length-1].length-Ft[Ft.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Y[0].length},this.yytext+=Y[0],this.match+=Y[0],this.matches=Y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Y[0].length),this.matched+=Y[0],ft=this.performAction.call(this,this.yy,this,Tt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ft)return ft;if(this._backtrack){for(var xt in mt)this[xt]=mt[xt];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Y,Tt,ft,Ft;this._more||(this.yytext="",this.match="");for(var mt=this._currentRules(),xt=0;xt<mt.length;xt++)if(ft=this._input.match(this.rules[mt[xt]]),ft&&(!Tt||ft[0].length>Tt[0].length)){if(Tt=ft,Ft=xt,this.options.backtrack_lexer){if(Y=this.test_match(ft,mt[xt]),Y!==!1)return Y;if(this._backtrack){Tt=!1;continue}else return!1}else if(!this.options.flex)break}return Tt?(Y=this.test_match(Tt,mt[Ft]),Y!==!1?Y:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var Tt=this.next();return Tt||this.lex()},"lex"),begin:d(function(Tt){this.conditionStack.push(Tt)},"begin"),popState:d(function(){var Tt=this.conditionStack.length-1;return Tt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(Tt){return Tt=this.conditionStack.length-1-Math.abs(Tt||0),Tt>=0?this.conditionStack[Tt]:"INITIAL"},"topState"),pushState:d(function(Tt){this.begin(Tt)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(Tt,ft,Ft,mt){switch(Ft){case 0:break;case 1:break;case 2:return 55;case 3:break;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 23:this.popState();break;case 24:this.begin("string");break;case 25:this.popState();break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 31:this.popState();break;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:return 65;case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return Lt})();rt.lexer=bt;function q(){this.yy={}}return d(q,"Parser"),q.prototype=rt,rt.Parser=q,new q})();_1.parser=_1;var SF=_1,br=zh(),Na,CF=(Na=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var t,r,i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((t=ge.quadrantChart)==null?void 0:t.chartWidth)||500,chartWidth:((r=ge.quadrantChart)==null?void 0:r.chartHeight)||500,titlePadding:((i=ge.quadrantChart)==null?void 0:i.titlePadding)||10,titleFontSize:((s=ge.quadrantChart)==null?void 0:s.titleFontSize)||20,quadrantPadding:((n=ge.quadrantChart)==null?void 0:n.quadrantPadding)||5,xAxisLabelPadding:((a=ge.quadrantChart)==null?void 0:a.xAxisLabelPadding)||5,yAxisLabelPadding:((o=ge.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((h=ge.quadrantChart)==null?void 0:h.xAxisLabelFontSize)||16,yAxisLabelFontSize:((l=ge.quadrantChart)==null?void 0:l.yAxisLabelFontSize)||16,quadrantLabelFontSize:((u=ge.quadrantChart)==null?void 0:u.quadrantLabelFontSize)||16,quadrantTextTopPadding:((f=ge.quadrantChart)==null?void 0:f.quadrantTextTopPadding)||5,pointTextPadding:((p=ge.quadrantChart)==null?void 0:p.pointTextPadding)||5,pointLabelFontSize:((g=ge.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((y=ge.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((m=ge.quadrantChart)==null?void 0:m.xAxisPosition)||"top",yAxisPosition:((x=ge.quadrantChart)==null?void 0:x.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((b=ge.quadrantChart)==null?void 0:b.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((_=ge.quadrantChart)==null?void 0:_.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:br.quadrant1Fill,quadrant2Fill:br.quadrant2Fill,quadrant3Fill:br.quadrant3Fill,quadrant4Fill:br.quadrant4Fill,quadrant1TextFill:br.quadrant1TextFill,quadrant2TextFill:br.quadrant2TextFill,quadrant3TextFill:br.quadrant3TextFill,quadrant4TextFill:br.quadrant4TextFill,quadrantPointFill:br.quadrantPointFill,quadrantPointTextFill:br.quadrantPointTextFill,quadrantXAxisTextFill:br.quadrantXAxisTextFill,quadrantYAxisTextFill:br.quadrantYAxisTextFill,quadrantTitleFill:br.quadrantTitleFill,quadrantInternalBorderStrokeFill:br.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:br.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,P.info("clear called")}setData(t){this.data={...this.data,...t}}addPoints(t){this.data.points=[...t,...this.data.points]}addClass(t,r){this.classes.set(t,r)}setConfig(t){P.trace("setConfig called with: ",t),this.config={...this.config,...t}}setThemeConfig(t){P.trace("setThemeConfig called with: ",t),this.themeConfig={...this.themeConfig,...t}}calculateSpace(t,r,i,s){const n=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,a={top:t==="top"&&r?n:0,bottom:t==="bottom"&&r?n:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,h={left:this.config.yAxisPosition==="left"&&i?o:0,right:this.config.yAxisPosition==="right"&&i?o:0},l=this.config.titleFontSize+this.config.titlePadding*2,u={top:s?l:0},f=this.config.quadrantPadding+h.left,p=this.config.quadrantPadding+a.top+u.top,g=this.config.chartWidth-this.config.quadrantPadding*2-h.left-h.right,y=this.config.chartHeight-this.config.quadrantPadding*2-a.top-a.bottom-u.top,m=g/2,x=y/2;return{xAxisSpace:a,yAxisSpace:h,titleSpace:u,quadrantSpace:{quadrantLeft:f,quadrantTop:p,quadrantWidth:g,quadrantHalfWidth:m,quadrantHeight:y,quadrantHalfHeight:x}}}getAxisLabels(t,r,i,s){const{quadrantSpace:n,titleSpace:a}=s,{quadrantHalfHeight:o,quadrantHeight:h,quadrantLeft:l,quadrantHalfWidth:u,quadrantTop:f,quadrantWidth:p}=n,g=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,m=[];return this.data.xAxisLeftText&&r&&m.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:l+(g?u/2:0),y:t==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+h+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&r&&m.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:l+u+(g?u/2:0),y:t==="top"?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+f+h+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&i&&m.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+l+p+this.config.quadrantPadding,y:f+h-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&i&&m.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+l+p+this.config.quadrantPadding,y:f+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),m}getQuadrants(t){const{quadrantSpace:r}=t,{quadrantHalfHeight:i,quadrantLeft:s,quadrantHalfWidth:n,quadrantTop:a}=r,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a,width:n,height:i,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a,width:n,height:i,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s,y:a+i,width:n,height:i,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:s+n,y:a+i,width:n,height:i,fill:this.themeConfig.quadrant4Fill}];for(const h of o)h.text.x=h.x+h.width/2,this.data.points.length===0?(h.text.y=h.y+h.height/2,h.text.horizontalPos="middle"):(h.text.y=h.y+this.config.quadrantTextTopPadding,h.text.horizontalPos="top");return o}getQuadrantPoints(t){const{quadrantSpace:r}=t,{quadrantHeight:i,quadrantLeft:s,quadrantTop:n,quadrantWidth:a}=r,o=lo().domain([0,1]).range([s,a+s]),h=lo().domain([0,1]).range([i+n,n]);return this.data.points.map(u=>{const f=this.classes.get(u.className);return f&&(u={...f,...u}),{x:o(u.x),y:h(u.y),fill:u.color??this.themeConfig.quadrantPointFill,radius:u.radius??this.config.pointRadius,text:{text:u.text,fill:this.themeConfig.quadrantPointTextFill,x:o(u.x),y:h(u.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:u.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:u.strokeWidth??"0px"}})}getBorders(t){const r=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:i}=t,{quadrantHalfHeight:s,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:o,quadrantTop:h,quadrantWidth:l}=i;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-r,y1:h,x2:a+l+r,y2:h},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+l,y1:h+r,x2:a+l,y2:h+n-r},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-r,y1:h+n,x2:a+l+r,y2:h+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:h+r,x2:a,y2:h+n-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+o,y1:h+r,x2:a+o,y2:h+n-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+r,y1:h+s,x2:a+l-r,y2:h+s}]}getTitle(t){if(t)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const t=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),r=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),i=this.config.showTitle&&!!this.data.titleText,s=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(s,t,r,i);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(s,t,r,n),borderLines:this.getBorders(n),title:this.getTitle(i)}}},d(Na,"QuadrantBuilder"),Na),$a,cc=($a=class extends Error{constructor(t,r,i){super(`value for ${t} ${r} is invalid, please use a valid ${i}`),this.name="InvalidStyleError"}},d($a,"InvalidStyleError"),$a);function k1(e){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(e)}d(k1,"validateHexCode");function V5(e){return!/^\d+$/.test(e)}d(V5,"validateNumber");function z5(e){return!/^\d+px$/.test(e)}d(z5,"validateSizeInPixels");var EF=it();function Si(e){return me(e.trim(),EF)}d(Si,"textSanitizer");var cr=new CF;function W5(e){cr.setData({quadrant1Text:Si(e.text)})}d(W5,"setQuadrant1Text");function q5(e){cr.setData({quadrant2Text:Si(e.text)})}d(q5,"setQuadrant2Text");function Y5(e){cr.setData({quadrant3Text:Si(e.text)})}d(Y5,"setQuadrant3Text");function G5(e){cr.setData({quadrant4Text:Si(e.text)})}d(G5,"setQuadrant4Text");function H5(e){cr.setData({xAxisLeftText:Si(e.text)})}d(H5,"setXAxisLeftText");function U5(e){cr.setData({xAxisRightText:Si(e.text)})}d(U5,"setXAxisRightText");function j5(e){cr.setData({yAxisTopText:Si(e.text)})}d(j5,"setYAxisTopText");function X5(e){cr.setData({yAxisBottomText:Si(e.text)})}d(X5,"setYAxisBottomText");function fu(e){const t={};for(const r of e){const[i,s]=r.trim().split(/\s*:\s*/);if(i==="radius"){if(V5(s))throw new cc(i,s,"number");t.radius=parseInt(s)}else if(i==="color"){if(k1(s))throw new cc(i,s,"hex code");t.color=s}else if(i==="stroke-color"){if(k1(s))throw new cc(i,s,"hex code");t.strokeColor=s}else if(i==="stroke-width"){if(z5(s))throw new cc(i,s,"number of pixels (eg. 10px)");t.strokeWidth=s}else throw new Error(`style named ${i} is not supported.`)}return t}d(fu,"parseStyles");function K5(e,t,r,i,s){const n=fu(s);cr.addPoints([{x:r,y:i,text:Si(e.text),className:t,...n}])}d(K5,"addPoint");function Q5(e,t){cr.addClass(e,fu(t))}d(Q5,"addClass");function Z5(e){cr.setConfig({chartWidth:e})}d(Z5,"setWidth");function J5(e){cr.setConfig({chartHeight:e})}d(J5,"setHeight");function tv(){const e=it(),{themeVariables:t,quadrantChart:r}=e;return r&&cr.setConfig(r),cr.setThemeConfig({quadrant1Fill:t.quadrant1Fill,quadrant2Fill:t.quadrant2Fill,quadrant3Fill:t.quadrant3Fill,quadrant4Fill:t.quadrant4Fill,quadrant1TextFill:t.quadrant1TextFill,quadrant2TextFill:t.quadrant2TextFill,quadrant3TextFill:t.quadrant3TextFill,quadrant4TextFill:t.quadrant4TextFill,quadrantPointFill:t.quadrantPointFill,quadrantPointTextFill:t.quadrantPointTextFill,quadrantXAxisTextFill:t.quadrantXAxisTextFill,quadrantYAxisTextFill:t.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:t.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:t.quadrantInternalBorderStrokeFill,quadrantTitleFill:t.quadrantTitleFill}),cr.setData({titleText:Ye()}),cr.build()}d(tv,"getQuadrantData");var AF=d(function(){cr.clear(),qe()},"clear"),LF={setWidth:Z5,setHeight:J5,setQuadrant1Text:W5,setQuadrant2Text:q5,setQuadrant3Text:Y5,setQuadrant4Text:G5,setXAxisLeftText:H5,setXAxisRightText:U5,setYAxisTopText:j5,setYAxisBottomText:X5,parseStyles:fu,addPoint:K5,addClass:Q5,getQuadrantData:tv,clear:AF,setAccTitle:We,getAccTitle:Ke,setDiagramTitle:ir,getDiagramTitle:Ye,getAccDescription:Ze,setAccDescription:Qe},DF=d((e,t,r,i)=>{var L,w,R;function s(T){return T==="top"?"hanging":"middle"}d(s,"getDominantBaseLine");function n(T){return T==="left"?"start":"middle"}d(n,"getTextAnchor");function a(T){return`translate(${T.x}, ${T.y}) rotate(${T.rotation||0})`}d(a,"getTransformation");const o=it();P.debug(`Rendering quadrant chart
`+e);const h=o.securityLevel;let l;h==="sandbox"&&(l=_t("#i"+t));const f=_t(h==="sandbox"?l.nodes()[0].contentDocument.body:"body").select(`[id="${t}"]`),p=f.append("g").attr("class","main"),g=((L=o.quadrantChart)==null?void 0:L.chartWidth)??500,y=((w=o.quadrantChart)==null?void 0:w.chartHeight)??500;Er(f,y,g,((R=o.quadrantChart)==null?void 0:R.useMaxWidth)??!0),f.attr("viewBox","0 0 "+g+" "+y),i.db.setHeight(y),i.db.setWidth(g);const m=i.db.getQuadrantData(),x=p.append("g").attr("class","quadrants"),b=p.append("g").attr("class","border"),_=p.append("g").attr("class","data-points"),S=p.append("g").attr("class","labels"),C=p.append("g").attr("class","title");m.title&&C.append("text").attr("x",0).attr("y",0).attr("fill",m.title.fill).attr("font-size",m.title.fontSize).attr("dominant-baseline",s(m.title.horizontalPos)).attr("text-anchor",n(m.title.verticalPos)).attr("transform",a(m.title)).text(m.title.text),m.borderLines&&b.selectAll("line").data(m.borderLines).enter().append("line").attr("x1",T=>T.x1).attr("y1",T=>T.y1).attr("x2",T=>T.x2).attr("y2",T=>T.y2).style("stroke",T=>T.strokeFill).style("stroke-width",T=>T.strokeWidth);const k=x.selectAll("g.quadrant").data(m.quadrants).enter().append("g").attr("class","quadrant");k.append("rect").attr("x",T=>T.x).attr("y",T=>T.y).attr("width",T=>T.width).attr("height",T=>T.height).attr("fill",T=>T.fill),k.append("text").attr("x",0).attr("y",0).attr("fill",T=>T.text.fill).attr("font-size",T=>T.text.fontSize).attr("dominant-baseline",T=>s(T.text.horizontalPos)).attr("text-anchor",T=>n(T.text.verticalPos)).attr("transform",T=>a(T.text)).text(T=>T.text.text),S.selectAll("g.label").data(m.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(T=>T.text).attr("fill",T=>T.fill).attr("font-size",T=>T.fontSize).attr("dominant-baseline",T=>s(T.horizontalPos)).attr("text-anchor",T=>n(T.verticalPos)).attr("transform",T=>a(T));const A=_.selectAll("g.data-point").data(m.points).enter().append("g").attr("class","data-point");A.append("circle").attr("cx",T=>T.x).attr("cy",T=>T.y).attr("r",T=>T.radius).attr("fill",T=>T.fill).attr("stroke",T=>T.strokeColor).attr("stroke-width",T=>T.strokeWidth),A.append("text").attr("x",0).attr("y",0).text(T=>T.text.text).attr("fill",T=>T.text.fill).attr("font-size",T=>T.text.fontSize).attr("dominant-baseline",T=>s(T.text.horizontalPos)).attr("text-anchor",T=>n(T.text.verticalPos)).attr("transform",T=>a(T.text))},"draw"),RF={draw:DF},BF={parser:SF,db:LF,renderer:RF,styles:d(()=>"","styles")};const IF=Object.freeze(Object.defineProperty({__proto__:null,diagram:BF},Symbol.toStringTag,{value:"Module"}));var w1=(function(){var e=d(function(E,M,F,I){for(F=F||{},I=E.length;I--;F[E[I]]=M);return F},"o"),t=[1,10,12,14,16,18,19,21,23],r=[2,6],i=[1,3],s=[1,5],n=[1,6],a=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],h=[1,25],l=[1,26],u=[1,28],f=[1,29],p=[1,30],g=[1,31],y=[1,32],m=[1,33],x=[1,34],b=[1,35],_=[1,36],S=[1,37],C=[1,43],k=[1,42],v=[1,47],A=[1,50],L=[1,10,12,14,16,18,19,21,23,34,35,36],w=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],R=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],T=[1,64],V={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:d(function(M,F,I,B,X,$,G){var nt=$.length-1;switch(X){case 5:B.setOrientation($[nt]);break;case 9:B.setDiagramTitle($[nt].text.trim());break;case 12:B.setLineData({text:"",type:"text"},$[nt]);break;case 13:B.setLineData($[nt-1],$[nt]);break;case 14:B.setBarData({text:"",type:"text"},$[nt]);break;case 15:B.setBarData($[nt-1],$[nt]);break;case 16:this.$=$[nt].trim(),B.setAccTitle(this.$);break;case 17:case 18:this.$=$[nt].trim(),B.setAccDescription(this.$);break;case 19:this.$=$[nt-1];break;case 20:this.$=[Number($[nt-2]),...$[nt]];break;case 21:this.$=[Number($[nt])];break;case 22:B.setXAxisTitle($[nt]);break;case 23:B.setXAxisTitle($[nt-1]);break;case 24:B.setXAxisTitle({type:"text",text:""});break;case 25:B.setXAxisBand($[nt]);break;case 26:B.setXAxisRangeData(Number($[nt-2]),Number($[nt]));break;case 27:this.$=$[nt-1];break;case 28:this.$=[$[nt-2],...$[nt]];break;case 29:this.$=[$[nt]];break;case 30:B.setYAxisTitle($[nt]);break;case 31:B.setYAxisTitle($[nt-1]);break;case 32:B.setYAxisTitle({type:"text",text:""});break;case 33:B.setYAxisRangeData(Number($[nt-2]),Number($[nt]));break;case 37:this.$={text:$[nt],type:"text"};break;case 38:this.$={text:$[nt],type:"text"};break;case 39:this.$={text:$[nt],type:"markdown"};break;case 40:this.$=$[nt];break;case 41:this.$=$[nt-1]+""+$[nt];break}},"anonymous"),table:[e(t,r,{3:1,4:2,7:4,5:i,34:s,35:n,36:a}),{1:[3]},e(t,r,{4:2,7:4,3:8,5:i,34:s,35:n,36:a}),e(t,r,{4:2,7:4,6:9,3:10,5:i,8:[1,11],34:s,35:n,36:a}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},e(o,[2,34]),e(o,[2,35]),e(o,[2,36]),{1:[2,1]},e(t,r,{4:2,7:4,3:21,5:i,34:s,35:n,36:a}),{1:[2,3]},e(o,[2,5]),e(t,[2,7],{4:22,34:s,35:n,36:a}),{11:23,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},{11:39,13:38,24:C,27:k,29:40,30:41,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},{11:45,15:44,27:v,33:46,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},{11:49,17:48,24:A,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},{11:52,17:51,24:A,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},{20:[1,53]},{22:[1,54]},e(L,[2,18]),{1:[2,2]},e(L,[2,8]),e(L,[2,9]),e(w,[2,37],{40:55,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S}),e(w,[2,38]),e(w,[2,39]),e(R,[2,40]),e(R,[2,42]),e(R,[2,43]),e(R,[2,44]),e(R,[2,45]),e(R,[2,46]),e(R,[2,47]),e(R,[2,48]),e(R,[2,49]),e(R,[2,50]),e(R,[2,51]),e(L,[2,10]),e(L,[2,22],{30:41,29:56,24:C,27:k}),e(L,[2,24]),e(L,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},e(L,[2,11]),e(L,[2,30],{33:60,27:v}),e(L,[2,32]),{31:[1,61]},e(L,[2,12]),{17:62,24:A},{25:63,27:T},e(L,[2,14]),{17:65,24:A},e(L,[2,16]),e(L,[2,17]),e(R,[2,41]),e(L,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},e(L,[2,31]),{27:[1,69]},e(L,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},e(L,[2,15]),e(L,[2,26]),e(L,[2,27]),{11:59,32:72,37:24,38:h,39:l,40:27,41:u,42:f,43:p,44:g,45:y,46:m,47:x,48:b,49:_,50:S},e(L,[2,33]),e(L,[2,19]),{25:73,27:T},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:d(function(M,F){if(F.recoverable)this.trace(M);else{var I=new Error(M);throw I.hash=F,I}},"parseError"),parse:d(function(M){var F=this,I=[0],B=[],X=[null],$=[],G=this.table,nt="",ht=0,tt=0,dt=2,st=1,ot=$.slice.call(arguments,1),K=Object.create(this.lexer),lt={yy:{}};for(var U in this.yy)Object.prototype.hasOwnProperty.call(this.yy,U)&&(lt.yy[U]=this.yy[U]);K.setInput(M,lt.yy),lt.yy.lexer=K,lt.yy.parser=this,typeof K.yylloc>"u"&&(K.yylloc={});var j=K.yylloc;$.push(j);var Q=K.options&&K.options.ranges;typeof lt.yy.parseError=="function"?this.parseError=lt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function W(ut){I.length=I.length-2*ut,X.length=X.length-ut,$.length=$.length-ut}d(W,"popStack");function et(){var ut;return ut=B.pop()||K.lex()||st,typeof ut!="number"&&(ut instanceof Array&&(B=ut,ut=B.pop()),ut=F.symbols_[ut]||ut),ut}d(et,"lex");for(var z,vt,O,Zt,J={},Yt,It,se,gt;;){if(vt=I[I.length-1],this.defaultActions[vt]?O=this.defaultActions[vt]:((z===null||typeof z>"u")&&(z=et()),O=G[vt]&&G[vt][z]),typeof O>"u"||!O.length||!O[0]){var St="";gt=[];for(Yt in G[vt])this.terminals_[Yt]&&Yt>dt&&gt.push("'"+this.terminals_[Yt]+"'");K.showPosition?St="Parse error on line "+(ht+1)+`:
`+K.showPosition()+`
Expecting `+gt.join(", ")+", got '"+(this.terminals_[z]||z)+"'":St="Parse error on line "+(ht+1)+": Unexpected "+(z==st?"end of input":"'"+(this.terminals_[z]||z)+"'"),this.parseError(St,{text:K.match,token:this.terminals_[z]||z,line:K.yylineno,loc:j,expected:gt})}if(O[0]instanceof Array&&O.length>1)throw new Error("Parse Error: multiple actions possible at state: "+vt+", token: "+z);switch(O[0]){case 1:I.push(z),X.push(K.yytext),$.push(K.yylloc),I.push(O[1]),z=null,tt=K.yyleng,nt=K.yytext,ht=K.yylineno,j=K.yylloc;break;case 2:if(It=this.productions_[O[1]][1],J.$=X[X.length-It],J._$={first_line:$[$.length-(It||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(It||1)].first_column,last_column:$[$.length-1].last_column},Q&&(J._$.range=[$[$.length-(It||1)].range[0],$[$.length-1].range[1]]),Zt=this.performAction.apply(J,[nt,tt,ht,lt.yy,O[1],X,$].concat(ot)),typeof Zt<"u")return Zt;It&&(I=I.slice(0,-1*It*2),X=X.slice(0,-1*It),$=$.slice(0,-1*It)),I.push(this.productions_[O[1]][0]),X.push(J.$),$.push(J._$),se=G[I[I.length-2]][I[I.length-1]],I.push(se);break;case 3:return!0}}return!0},"parse")},N=(function(){var E={EOF:1,parseError:d(function(F,I){if(this.yy.parser)this.yy.parser.parseError(F,I);else throw new Error(F)},"parseError"),setInput:d(function(M,F){return this.yy=F||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var F=M.match(/(?:\r\n?|\n).*/g);return F?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},"input"),unput:d(function(M){var F=M.length,I=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-F),this.offset-=F;var B=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var X=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===B.length?this.yylloc.first_column:0)+B[B.length-I.length].length-I[0].length:this.yylloc.first_column-F},this.options.ranges&&(this.yylloc.range=[X[0],X[0]+this.yyleng-F]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(M){this.unput(this.match.slice(M))},"less"),pastInput:d(function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var M=this.pastInput(),F=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+F+"^"},"showPosition"),test_match:d(function(M,F){var I,B,X;if(this.options.backtrack_lexer&&(X={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(X.yylloc.range=this.yylloc.range.slice(0))),B=M[0].match(/(?:\r\n?|\n).*/g),B&&(this.yylineno+=B.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:B?B[B.length-1].length-B[B.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],I=this.performAction.call(this,this.yy,this,F,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var $ in X)this[$]=X[$];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,F,I,B;this._more||(this.yytext="",this.match="");for(var X=this._currentRules(),$=0;$<X.length;$++)if(I=this._input.match(this.rules[X[$]]),I&&(!F||I[0].length>F[0].length)){if(F=I,B=$,this.options.backtrack_lexer){if(M=this.test_match(I,X[$]),M!==!1)return M;if(this._backtrack){F=!1;continue}else return!1}else if(!this.options.flex)break}return F?(M=this.test_match(F,X[B]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var F=this.next();return F||this.lex()},"lex"),begin:d(function(F){this.conditionStack.push(F)},"begin"),popState:d(function(){var F=this.conditionStack.length-1;return F>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},"topState"),pushState:d(function(F){this.begin(F)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(F,I,B,X){switch(B){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 26:this.popState();break;case 27:this.pushState("string");break;case 28:this.popState();break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 44:break;case 45:return 35;case 46:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}};return E})();V.lexer=N;function D(){this.yy={}}return d(D,"Parser"),D.prototype=V,V.Parser=D,new D})();w1.parser=w1;var NF=w1;function T1(e){return e.type==="bar"}d(T1,"isBarPlot");function yp(e){return e.type==="band"}d(yp,"isBandAxisData");function ia(e){return e.type==="linear"}d(ia,"isLinearAxisData");var Ma,ev=(Ma=class{constructor(t){this.parentGroup=t}getMaxDimension(t,r){if(!this.parentGroup)return{width:t.reduce((n,a)=>Math.max(a.length,n),0)*r,height:r};const i={width:0,height:0},s=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",r);for(const n of t){const a=ib(s,1,n),o=a?a.width:n.length*r,h=a?a.height:r;i.width=Math.max(i.width,o),i.height=Math.max(i.height,h)}return s.remove(),i}},d(Ma,"TextDimensionCalculatorWithFont"),Ma),wg=.7,Tg=.2,Fa,rv=(Fa=class{constructor(t,r,i,s){this.axisConfig=t,this.title=r,this.textDimensionCalculator=i,this.axisThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(t){this.range=t,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=t[1]-t[0]:this.boundingRect.width=t[1]-t[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(t){this.axisPosition=t,this.setRange(this.range)}getTickDistance(){const t=this.getRange();return Math.abs(t[0]-t[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(t=>t.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){wg*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor(wg*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(t){let r=t.height;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const i=this.getLabelDimension(),s=Tg*t.width;this.outerPadding=Math.min(i.width/2,s);const n=i.height+this.axisConfig.labelPadding*2;this.labelTextHeight=i.height,n<=r&&(r-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const i=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=i.height+this.axisConfig.titlePadding*2;this.titleTextHeight=i.height,s<=r&&(r-=s,this.showTitle=!0)}this.boundingRect.width=t.width,this.boundingRect.height=t.height-r}calculateSpaceIfDrawnVertical(t){let r=t.width;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const i=this.getLabelDimension(),s=Tg*t.height;this.outerPadding=Math.min(i.height/2,s);const n=i.width+this.axisConfig.labelPadding*2;n<=r&&(r-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const i=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),s=i.height+this.axisConfig.titlePadding*2;this.titleTextHeight=i.height,s<=r&&(r-=s,this.showTitle=!0)}this.boundingRect.width=t.width-r,this.boundingRect.height=t.height}calculateSpace(t){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(t):this.calculateSpaceIfDrawnHorizontally(t),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}getDrawableElementsForLeftAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${r},${this.boundingRect.y} L ${r},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(r),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const r=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(i=>({path:`M ${r},${this.getScaleValue(i)} L ${r-this.axisConfig.tickLength},${this.getScaleValue(i)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForBottomAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(i=>({path:`M ${this.getScaleValue(i)},${r} L ${this.getScaleValue(i)},${r+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForTopAxis(){const t=[];if(this.showAxisLine){const r=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y;t.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(i=>({path:`M ${this.getScaleValue(i)},${r+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(i)},${r+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&t.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},d(Fa,"BaseAxis"),Fa),Pa,$F=(Pa=class extends rv{constructor(t,r,i,s,n){super(t,s,n,r),this.categories=i,this.scale=Bd().domain(this.categories).range(this.getRange())}setRange(t){super.setRange(t)}recalculateScale(){this.scale=Bd().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),P.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(t){return this.scale(t)??this.getRange()[0]}},d(Pa,"BandAxis"),Pa),Oa,MF=(Oa=class extends rv{constructor(t,r,i,s,n){super(t,s,n,r),this.domain=i,this.scale=lo().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const t=[...this.domain];this.axisPosition==="left"&&t.reverse(),this.scale=lo().domain(t).range(this.getRange())}getScaleValue(t){return this.scale(t)}},d(Oa,"LinearAxis"),Oa);function S1(e,t,r,i){const s=new ev(i);return yp(e)?new $F(t,r,e.categories,e.title,s):new MF(t,r,[e.min,e.max],e.title,s)}d(S1,"getAxis");var Va,FF=(Va=class{constructor(t,r,i,s){this.textDimensionCalculator=t,this.chartConfig=r,this.chartData=i,this.chartThemeConfig=s,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){const r=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),i=Math.max(r.width,t.width),s=r.height+2*this.chartConfig.titlePadding;return r.width<=i&&r.height<=s&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=i,this.boundingRect.height=s,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const t=[];return this.showChartTitle&&t.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),t}},d(Va,"ChartTitle"),Va);function iv(e,t,r,i){const s=new ev(i);return new FF(s,e,t,r)}d(iv,"getChartTitleComponent");var za,PF=(za=class{constructor(t,r,i,s,n){this.plotData=t,this.xAxis=r,this.yAxis=i,this.orientation=s,this.plotIndex=n}getDrawableElement(){const t=this.plotData.data.map(i=>[this.xAxis.getScaleValue(i[0]),this.yAxis.getScaleValue(i[1])]);let r;return this.orientation==="horizontal"?r=fl().y(i=>i[0]).x(i=>i[1])(t):r=fl().x(i=>i[0]).y(i=>i[1])(t),r?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:r,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},d(za,"LinePlot"),za),Wa,OF=(Wa=class{constructor(t,r,i,s,n,a){this.barData=t,this.boundingRect=r,this.xAxis=i,this.yAxis=s,this.orientation=n,this.plotIndex=a}getDrawableElement(){const t=this.barData.data.map(n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]),i=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),s=i/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(n=>({x:this.boundingRect.x,y:n[0]-s,height:i,width:n[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map(n=>({x:n[0]-s,y:n[1],width:i,height:this.boundingRect.y+this.boundingRect.height-n[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}},d(Wa,"BarPlot"),Wa),qa,VF=(qa=class{constructor(t,r,i){this.chartConfig=t,this.chartData=r,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(t,r){this.xAxis=t,this.yAxis=r}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){return this.boundingRect.width=t.width,this.boundingRect.height=t.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const t=[];for(const[r,i]of this.chartData.plots.entries())switch(i.type){case"line":{const s=new PF(i,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...s.getDrawableElement())}break;case"bar":{const s=new OF(i,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);t.push(...s.getDrawableElement())}break}return t}},d(qa,"BasePlot"),qa);function sv(e,t,r){return new VF(e,t,r)}d(sv,"getPlotComponent");var Ya,zF=(Ya=class{constructor(t,r,i,s){this.chartConfig=t,this.chartData=r,this.componentStore={title:iv(t,r,i,s),plot:sv(t,r,i),xAxis:S1(r.xAxis,t.xAxis,{titleColor:i.xAxisTitleColor,labelColor:i.xAxisLabelColor,tickColor:i.xAxisTickColor,axisLineColor:i.xAxisLineColor},s),yAxis:S1(r.yAxis,t.yAxis,{titleColor:i.yAxisTitleColor,labelColor:i.yAxisLabelColor,tickColor:i.yAxisTickColor,axisLineColor:i.yAxisLineColor},s)}}calculateVerticalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,i=0,s=0,n=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:n,height:a});t-=o.width,r-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),s=o.height,r-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:t,height:r}),r-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:t,height:r}),i=o.width,t-=o.width,t>0&&(n+=t,t=0),r>0&&(a+=r,r=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:i,y:s}),this.componentStore.xAxis.setRange([i,i+n]),this.componentStore.xAxis.setBoundingBoxXY({x:i,y:s+a}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(h=>T1(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let t=this.chartConfig.width,r=this.chartConfig.height,i=0,s=0,n=0,a=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),h=this.componentStore.plot.calculateSpace({width:a,height:o});t-=h.width,r-=h.height,h=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),i=h.height,r-=h.height,this.componentStore.xAxis.setAxisPosition("left"),h=this.componentStore.xAxis.calculateSpace({width:t,height:r}),t-=h.width,s=h.width,this.componentStore.yAxis.setAxisPosition("top"),h=this.componentStore.yAxis.calculateSpace({width:t,height:r}),r-=h.height,n=i+h.height,t>0&&(a+=t,t=0),r>0&&(o+=r,r=0),this.componentStore.plot.calculateSpace({width:a,height:o}),this.componentStore.plot.setBoundingBoxXY({x:s,y:n}),this.componentStore.yAxis.setRange([s,s+a]),this.componentStore.yAxis.setBoundingBoxXY({x:s,y:i}),this.componentStore.xAxis.setRange([n,n+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some(l=>T1(l))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const t=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const r of Object.values(this.componentStore))t.push(...r.getDrawableElements());return t}},d(Ya,"Orchestrator"),Ya),Ga,WF=(Ga=class{static build(t,r,i,s){return new zF(t,r,i,s).getDrawableElement()}},d(Ga,"XYChartBuilder"),Ga),wl=0,nv,Tl=bp(),Sl=xp(),ke=vp(),C1=Sl.plotColorPalette.split(",").map(e=>e.trim()),pu=!1,mp=!1;function xp(){const e=zh(),t=xe();return Cr(e.xyChart,t.themeVariables.xyChart)}d(xp,"getChartDefaultThemeConfig");function bp(){const e=xe();return Cr(ge.xyChart,e.xyChart)}d(bp,"getChartDefaultConfig");function vp(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}d(vp,"getChartDefaultData");function gu(e){const t=xe();return me(e.trim(),t)}d(gu,"textSanitizer");function av(e){nv=e}d(av,"setTmpSVGG");function ov(e){e==="horizontal"?Tl.chartOrientation="horizontal":Tl.chartOrientation="vertical"}d(ov,"setOrientation");function lv(e){ke.xAxis.title=gu(e.text)}d(lv,"setXAxisTitle");function _p(e,t){ke.xAxis={type:"linear",title:ke.xAxis.title,min:e,max:t},pu=!0}d(_p,"setXAxisRangeData");function cv(e){ke.xAxis={type:"band",title:ke.xAxis.title,categories:e.map(t=>gu(t.text))},pu=!0}d(cv,"setXAxisBand");function hv(e){ke.yAxis.title=gu(e.text)}d(hv,"setYAxisTitle");function uv(e,t){ke.yAxis={type:"linear",title:ke.yAxis.title,min:e,max:t},mp=!0}d(uv,"setYAxisRangeData");function dv(e){const t=Math.min(...e),r=Math.max(...e),i=ia(ke.yAxis)?ke.yAxis.min:1/0,s=ia(ke.yAxis)?ke.yAxis.max:-1/0;ke.yAxis={type:"linear",title:ke.yAxis.title,min:Math.min(i,t),max:Math.max(s,r)}}d(dv,"setYAxisRangeFromPlotData");function kp(e){let t=[];if(e.length===0)return t;if(!pu){const r=ia(ke.xAxis)?ke.xAxis.min:1/0,i=ia(ke.xAxis)?ke.xAxis.max:-1/0;_p(Math.min(r,1),Math.max(i,e.length))}if(mp||dv(e),yp(ke.xAxis)&&(t=ke.xAxis.categories.map((r,i)=>[r,e[i]])),ia(ke.xAxis)){const r=ke.xAxis.min,i=ke.xAxis.max,s=(i-r)/(e.length-1),n=[];for(let a=r;a<=i;a+=s)n.push(`${a}`);t=n.map((a,o)=>[a,e[o]])}return t}d(kp,"transformDataWithoutCategory");function wp(e){return C1[e===0?0:e%C1.length]}d(wp,"getPlotColorFromPalette");function fv(e,t){const r=kp(t);ke.plots.push({type:"line",strokeFill:wp(wl),strokeWidth:2,data:r}),wl++}d(fv,"setLineData");function pv(e,t){const r=kp(t);ke.plots.push({type:"bar",fill:wp(wl),data:r}),wl++}d(pv,"setBarData");function gv(){if(ke.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return ke.title=Ye(),WF.build(Tl,ke,Sl,nv)}d(gv,"getDrawableElem");function yv(){return Sl}d(yv,"getChartThemeConfig");function mv(){return Tl}d(mv,"getChartConfig");function xv(){return ke}d(xv,"getXYChartData");var qF=d(function(){qe(),wl=0,Tl=bp(),ke=vp(),Sl=xp(),C1=Sl.plotColorPalette.split(",").map(e=>e.trim()),pu=!1,mp=!1},"clear"),YF={getDrawableElem:gv,clear:qF,setAccTitle:We,getAccTitle:Ke,setDiagramTitle:ir,getDiagramTitle:Ye,getAccDescription:Ze,setAccDescription:Qe,setOrientation:ov,setXAxisTitle:lv,setXAxisRangeData:_p,setXAxisBand:cv,setYAxisTitle:hv,setYAxisRangeData:uv,setLineData:fv,setBarData:pv,setTmpSVGG:av,getChartThemeConfig:yv,getChartConfig:mv,getXYChartData:xv},GF=d((e,t,r,i)=>{const s=i.db,n=s.getChartThemeConfig(),a=s.getChartConfig(),o=s.getXYChartData().plots[0].data.map(b=>b[1]);function h(b){return b==="top"?"text-before-edge":"middle"}d(h,"getDominantBaseLine");function l(b){return b==="left"?"start":b==="right"?"end":"middle"}d(l,"getTextAnchor");function u(b){return`translate(${b.x}, ${b.y}) rotate(${b.rotation||0})`}d(u,"getTextTransformation"),P.debug(`Rendering xychart chart
`+e);const f=es(t),p=f.append("g").attr("class","main"),g=p.append("rect").attr("width",a.width).attr("height",a.height).attr("class","background");Er(f,a.height,a.width,!0),f.attr("viewBox",`0 0 ${a.width} ${a.height}`),g.attr("fill",n.backgroundColor),s.setTmpSVGG(f.append("g").attr("class","mermaid-tmp-group"));const y=s.getDrawableElem(),m={};function x(b){let _=p,S="";for(const[C]of b.entries()){let k=p;C>0&&m[S]&&(k=m[S]),S+=b[C],_=m[S],_||(_=m[S]=k.append("g").attr("class",b[C]))}return _}d(x,"getGroup");for(const b of y){if(b.data.length===0)continue;const _=x(b.groupTexts);switch(b.type){case"rect":if(_.selectAll("rect").data(b.data).enter().append("rect").attr("x",S=>S.x).attr("y",S=>S.y).attr("width",S=>S.width).attr("height",S=>S.height).attr("fill",S=>S.fill).attr("stroke",S=>S.strokeFill).attr("stroke-width",S=>S.strokeWidth),a.showDataLabel)if(a.chartOrientation==="horizontal"){let S=function(L,w){const{data:R,label:T}=L;return w*T.length*C<=R.width-10};d(S,"fitsHorizontally");const C=.7,k=b.data.map((L,w)=>({data:L,label:o[w].toString()})).filter(L=>L.data.width>0&&L.data.height>0),v=k.map(L=>{const{data:w}=L;let R=w.height*.7;for(;!S(L,R)&&R>0;)R-=1;return R}),A=Math.floor(Math.min(...v));_.selectAll("text").data(k).enter().append("text").attr("x",L=>L.data.x+L.data.width-10).attr("y",L=>L.data.y+L.data.height/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${A}px`).text(L=>L.label)}else{let S=function(L,w,R){const{data:T,label:V}=L,D=w*V.length*.7,E=T.x+T.width/2,M=E-D/2,F=E+D/2,I=M>=T.x&&F<=T.x+T.width,B=T.y+R+w<=T.y+T.height;return I&&B};d(S,"fitsInBar");const C=10,k=b.data.map((L,w)=>({data:L,label:o[w].toString()})).filter(L=>L.data.width>0&&L.data.height>0),v=k.map(L=>{const{data:w,label:R}=L;let T=w.width/(R.length*.7);for(;!S(L,T,C)&&T>0;)T-=1;return T}),A=Math.floor(Math.min(...v));_.selectAll("text").data(k).enter().append("text").attr("x",L=>L.data.x+L.data.width/2).attr("y",L=>L.data.y+C).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${A}px`).text(L=>L.label)}break;case"text":_.selectAll("text").data(b.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",S=>S.fill).attr("font-size",S=>S.fontSize).attr("dominant-baseline",S=>h(S.verticalPos)).attr("text-anchor",S=>l(S.horizontalPos)).attr("transform",S=>u(S)).text(S=>S.text);break;case"path":_.selectAll("path").data(b.data).enter().append("path").attr("d",S=>S.path).attr("fill",S=>S.fill?S.fill:"none").attr("stroke",S=>S.strokeFill).attr("stroke-width",S=>S.strokeWidth);break}}},"draw"),HF={draw:GF},UF={parser:NF,db:YF,renderer:HF};const jF=Object.freeze(Object.defineProperty({__proto__:null,diagram:UF},Symbol.toStringTag,{value:"Module"}));var E1=(function(){var e=d(function(rt,bt,q,Lt){for(q=q||{},Lt=rt.length;Lt--;q[rt[Lt]]=bt);return q},"o"),t=[1,3],r=[1,4],i=[1,5],s=[1,6],n=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],a=[1,22],o=[2,7],h=[1,26],l=[1,27],u=[1,28],f=[1,29],p=[1,33],g=[1,34],y=[1,35],m=[1,36],x=[1,37],b=[1,38],_=[1,24],S=[1,31],C=[1,32],k=[1,30],v=[1,39],A=[1,40],L=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],w=[1,61],R=[89,90],T=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],V=[27,29],N=[1,70],D=[1,71],E=[1,72],M=[1,73],F=[1,74],I=[1,75],B=[1,76],X=[1,83],$=[1,80],G=[1,84],nt=[1,85],ht=[1,86],tt=[1,87],dt=[1,88],st=[1,89],ot=[1,90],K=[1,91],lt=[1,92],U=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],j=[63,64],Q=[1,101],W=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],et=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],z=[1,110],vt=[1,106],O=[1,107],Zt=[1,108],J=[1,109],Yt=[1,111],It=[1,116],se=[1,117],gt=[1,114],St=[1,115],ut={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:d(function(bt,q,Lt,Y,Tt,ft,Ft){var mt=ft.length-1;switch(Tt){case 4:this.$=ft[mt].trim(),Y.setAccTitle(this.$);break;case 5:case 6:this.$=ft[mt].trim(),Y.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:Y.setDirection("TB");break;case 18:Y.setDirection("BT");break;case 19:Y.setDirection("RL");break;case 20:Y.setDirection("LR");break;case 21:Y.addRequirement(ft[mt-3],ft[mt-4]);break;case 22:Y.addRequirement(ft[mt-5],ft[mt-6]),Y.setClass([ft[mt-5]],ft[mt-3]);break;case 23:Y.setNewReqId(ft[mt-2]);break;case 24:Y.setNewReqText(ft[mt-2]);break;case 25:Y.setNewReqRisk(ft[mt-2]);break;case 26:Y.setNewReqVerifyMethod(ft[mt-2]);break;case 29:this.$=Y.RequirementType.REQUIREMENT;break;case 30:this.$=Y.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=Y.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=Y.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=Y.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=Y.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=Y.RiskLevel.LOW_RISK;break;case 36:this.$=Y.RiskLevel.MED_RISK;break;case 37:this.$=Y.RiskLevel.HIGH_RISK;break;case 38:this.$=Y.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=Y.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=Y.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=Y.VerifyType.VERIFY_TEST;break;case 42:Y.addElement(ft[mt-3]);break;case 43:Y.addElement(ft[mt-5]),Y.setClass([ft[mt-5]],ft[mt-3]);break;case 44:Y.setNewElementType(ft[mt-2]);break;case 45:Y.setNewElementDocRef(ft[mt-2]);break;case 48:Y.addRelationship(ft[mt-2],ft[mt],ft[mt-4]);break;case 49:Y.addRelationship(ft[mt-2],ft[mt-4],ft[mt]);break;case 50:this.$=Y.Relationships.CONTAINS;break;case 51:this.$=Y.Relationships.COPIES;break;case 52:this.$=Y.Relationships.DERIVES;break;case 53:this.$=Y.Relationships.SATISFIES;break;case 54:this.$=Y.Relationships.VERIFIES;break;case 55:this.$=Y.Relationships.REFINES;break;case 56:this.$=Y.Relationships.TRACES;break;case 57:this.$=ft[mt-2],Y.defineClass(ft[mt-1],ft[mt]);break;case 58:Y.setClass(ft[mt-1],ft[mt]);break;case 59:Y.setClass([ft[mt-2]],ft[mt]);break;case 60:case 62:this.$=[ft[mt]];break;case 61:case 63:this.$=ft[mt-2].concat([ft[mt]]);break;case 64:this.$=ft[mt-2],Y.setCssStyle(ft[mt-1],ft[mt]);break;case 65:this.$=[ft[mt]];break;case 66:ft[mt-2].push(ft[mt]),this.$=ft[mt-2];break;case 68:this.$=ft[mt-1]+ft[mt];break}},"anonymous"),table:[{3:1,4:2,6:t,9:r,11:i,13:s},{1:[3]},{3:8,4:2,5:[1,7],6:t,9:r,11:i,13:s},{5:[1,9]},{10:[1,10]},{12:[1,11]},e(n,[2,6]),{3:12,4:2,6:t,9:r,11:i,13:s},{1:[2,2]},{4:17,5:a,7:13,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},e(n,[2,4]),e(n,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:a,7:42,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:43,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:44,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:45,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:46,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:47,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:48,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:49,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{4:17,5:a,7:50,8:o,9:r,11:i,13:s,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:h,22:l,23:u,24:f,25:23,33:25,41:p,42:g,43:y,44:m,45:x,46:b,54:_,72:S,74:C,77:k,89:v,90:A},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},e(L,[2,17]),e(L,[2,18]),e(L,[2,19]),e(L,[2,20]),{30:60,33:62,75:w,89:v,90:A},{30:63,33:62,75:w,89:v,90:A},{30:64,33:62,75:w,89:v,90:A},e(R,[2,29]),e(R,[2,30]),e(R,[2,31]),e(R,[2,32]),e(R,[2,33]),e(R,[2,34]),e(T,[2,81]),e(T,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},e(V,[2,79]),e(V,[2,80]),{27:[1,67],29:[1,68]},e(V,[2,85]),e(V,[2,86]),{62:69,65:N,66:D,67:E,68:M,69:F,70:I,71:B},{62:77,65:N,66:D,67:E,68:M,69:F,70:I,71:B},{30:78,33:62,75:w,89:v,90:A},{73:79,75:X,76:$,78:81,79:82,80:G,81:nt,82:ht,83:tt,84:dt,85:st,86:ot,87:K,88:lt},e(U,[2,60]),e(U,[2,62]),{73:93,75:X,76:$,78:81,79:82,80:G,81:nt,82:ht,83:tt,84:dt,85:st,86:ot,87:K,88:lt},{30:94,33:62,75:w,76:$,89:v,90:A},{5:[1,95]},{30:96,33:62,75:w,89:v,90:A},{5:[1,97]},{30:98,33:62,75:w,89:v,90:A},{63:[1,99]},e(j,[2,50]),e(j,[2,51]),e(j,[2,52]),e(j,[2,53]),e(j,[2,54]),e(j,[2,55]),e(j,[2,56]),{64:[1,100]},e(L,[2,59],{76:$}),e(L,[2,64],{76:Q}),{33:103,75:[1,102],89:v,90:A},e(W,[2,65],{79:104,75:X,80:G,81:nt,82:ht,83:tt,84:dt,85:st,86:ot,87:K,88:lt}),e(et,[2,67]),e(et,[2,69]),e(et,[2,70]),e(et,[2,71]),e(et,[2,72]),e(et,[2,73]),e(et,[2,74]),e(et,[2,75]),e(et,[2,76]),e(et,[2,77]),e(et,[2,78]),e(L,[2,57],{76:Q}),e(L,[2,58],{76:$}),{5:z,28:105,31:vt,34:O,36:Zt,38:J,40:Yt},{27:[1,112],76:$},{5:It,40:se,56:113,57:gt,59:St},{27:[1,118],76:$},{33:119,89:v,90:A},{33:120,89:v,90:A},{75:X,78:121,79:82,80:G,81:nt,82:ht,83:tt,84:dt,85:st,86:ot,87:K,88:lt},e(U,[2,61]),e(U,[2,63]),e(et,[2,68]),e(L,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:z,28:126,31:vt,34:O,36:Zt,38:J,40:Yt},e(L,[2,28]),{5:[1,127]},e(L,[2,42]),{32:[1,128]},{32:[1,129]},{5:It,40:se,56:130,57:gt,59:St},e(L,[2,47]),{5:[1,131]},e(L,[2,48]),e(L,[2,49]),e(W,[2,66],{79:104,75:X,80:G,81:nt,82:ht,83:tt,84:dt,85:st,86:ot,87:K,88:lt}),{33:132,89:v,90:A},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},e(L,[2,27]),{5:z,28:145,31:vt,34:O,36:Zt,38:J,40:Yt},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},e(L,[2,46]),{5:It,40:se,56:152,57:gt,59:St},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},e(L,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},e(L,[2,43]),{5:z,28:159,31:vt,34:O,36:Zt,38:J,40:Yt},{5:z,28:160,31:vt,34:O,36:Zt,38:J,40:Yt},{5:z,28:161,31:vt,34:O,36:Zt,38:J,40:Yt},{5:z,28:162,31:vt,34:O,36:Zt,38:J,40:Yt},{5:It,40:se,56:163,57:gt,59:St},{5:It,40:se,56:164,57:gt,59:St},e(L,[2,23]),e(L,[2,24]),e(L,[2,25]),e(L,[2,26]),e(L,[2,44]),e(L,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:d(function(bt,q){if(q.recoverable)this.trace(bt);else{var Lt=new Error(bt);throw Lt.hash=q,Lt}},"parseError"),parse:d(function(bt){var q=this,Lt=[0],Y=[],Tt=[null],ft=[],Ft=this.table,mt="",xt=0,re=0,At=2,pe=1,ar=ft.slice.call(arguments,1),ae=Object.create(this.lexer),_e={yy:{}};for(var Ge in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ge)&&(_e.yy[Ge]=this.yy[Ge]);ae.setInput(bt,_e.yy),_e.yy.lexer=ae,_e.yy.parser=this,typeof ae.yylloc>"u"&&(ae.yylloc={});var Kt=ae.yylloc;ft.push(Kt);var Ce=ae.options&&ae.options.ranges;typeof _e.yy.parseError=="function"?this.parseError=_e.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Se(He){Lt.length=Lt.length-2*He,Tt.length=Tt.length-He,ft.length=ft.length-He}d(Se,"popStack");function tr(){var He;return He=Y.pop()||ae.lex()||pe,typeof He!="number"&&(He instanceof Array&&(Y=He,He=Y.pop()),He=q.symbols_[He]||He),He}d(tr,"lex");for(var Ht,ve,Ot,oe,ee={},Xt,Wt,le,hr;;){if(ve=Lt[Lt.length-1],this.defaultActions[ve]?Ot=this.defaultActions[ve]:((Ht===null||typeof Ht>"u")&&(Ht=tr()),Ot=Ft[ve]&&Ft[ve][Ht]),typeof Ot>"u"||!Ot.length||!Ot[0]){var ce="";hr=[];for(Xt in Ft[ve])this.terminals_[Xt]&&Xt>At&&hr.push("'"+this.terminals_[Xt]+"'");ae.showPosition?ce="Parse error on line "+(xt+1)+`:
`+ae.showPosition()+`
Expecting `+hr.join(", ")+", got '"+(this.terminals_[Ht]||Ht)+"'":ce="Parse error on line "+(xt+1)+": Unexpected "+(Ht==pe?"end of input":"'"+(this.terminals_[Ht]||Ht)+"'"),this.parseError(ce,{text:ae.match,token:this.terminals_[Ht]||Ht,line:ae.yylineno,loc:Kt,expected:hr})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ve+", token: "+Ht);switch(Ot[0]){case 1:Lt.push(Ht),Tt.push(ae.yytext),ft.push(ae.yylloc),Lt.push(Ot[1]),Ht=null,re=ae.yyleng,mt=ae.yytext,xt=ae.yylineno,Kt=ae.yylloc;break;case 2:if(Wt=this.productions_[Ot[1]][1],ee.$=Tt[Tt.length-Wt],ee._$={first_line:ft[ft.length-(Wt||1)].first_line,last_line:ft[ft.length-1].last_line,first_column:ft[ft.length-(Wt||1)].first_column,last_column:ft[ft.length-1].last_column},Ce&&(ee._$.range=[ft[ft.length-(Wt||1)].range[0],ft[ft.length-1].range[1]]),oe=this.performAction.apply(ee,[mt,re,xt,_e.yy,Ot[1],Tt,ft].concat(ar)),typeof oe<"u")return oe;Wt&&(Lt=Lt.slice(0,-1*Wt*2),Tt=Tt.slice(0,-1*Wt),ft=ft.slice(0,-1*Wt)),Lt.push(this.productions_[Ot[1]][0]),Tt.push(ee.$),ft.push(ee._$),le=Ft[Lt[Lt.length-2]][Lt[Lt.length-1]],Lt.push(le);break;case 3:return!0}}return!0},"parse")},pt=(function(){var rt={EOF:1,parseError:d(function(q,Lt){if(this.yy.parser)this.yy.parser.parseError(q,Lt);else throw new Error(q)},"parseError"),setInput:d(function(bt,q){return this.yy=q||this.yy||{},this._input=bt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var bt=this._input[0];this.yytext+=bt,this.yyleng++,this.offset++,this.match+=bt,this.matched+=bt;var q=bt.match(/(?:\r\n?|\n).*/g);return q?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),bt},"input"),unput:d(function(bt){var q=bt.length,Lt=bt.split(/(?:\r\n?|\n)/g);this._input=bt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-q),this.offset-=q;var Y=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Lt.length-1&&(this.yylineno-=Lt.length-1);var Tt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Lt?(Lt.length===Y.length?this.yylloc.first_column:0)+Y[Y.length-Lt.length].length-Lt[0].length:this.yylloc.first_column-q},this.options.ranges&&(this.yylloc.range=[Tt[0],Tt[0]+this.yyleng-q]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(bt){this.unput(this.match.slice(bt))},"less"),pastInput:d(function(){var bt=this.matched.substr(0,this.matched.length-this.match.length);return(bt.length>20?"...":"")+bt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var bt=this.match;return bt.length<20&&(bt+=this._input.substr(0,20-bt.length)),(bt.substr(0,20)+(bt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var bt=this.pastInput(),q=new Array(bt.length+1).join("-");return bt+this.upcomingInput()+`
`+q+"^"},"showPosition"),test_match:d(function(bt,q){var Lt,Y,Tt;if(this.options.backtrack_lexer&&(Tt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Tt.yylloc.range=this.yylloc.range.slice(0))),Y=bt[0].match(/(?:\r\n?|\n).*/g),Y&&(this.yylineno+=Y.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Y?Y[Y.length-1].length-Y[Y.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+bt[0].length},this.yytext+=bt[0],this.match+=bt[0],this.matches=bt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(bt[0].length),this.matched+=bt[0],Lt=this.performAction.call(this,this.yy,this,q,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Lt)return Lt;if(this._backtrack){for(var ft in Tt)this[ft]=Tt[ft];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var bt,q,Lt,Y;this._more||(this.yytext="",this.match="");for(var Tt=this._currentRules(),ft=0;ft<Tt.length;ft++)if(Lt=this._input.match(this.rules[Tt[ft]]),Lt&&(!q||Lt[0].length>q[0].length)){if(q=Lt,Y=ft,this.options.backtrack_lexer){if(bt=this.test_match(Lt,Tt[ft]),bt!==!1)return bt;if(this._backtrack){q=!1;continue}else return!1}else if(!this.options.flex)break}return q?(bt=this.test_match(q,Tt[Y]),bt!==!1?bt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var q=this.next();return q||this.lex()},"lex"),begin:d(function(q){this.conditionStack.push(q)},"begin"),popState:d(function(){var q=this.conditionStack.length-1;return q>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(q){return q=this.conditionStack.length-1-Math.abs(q||0),q>=0?this.conditionStack[q]:"INITIAL"},"topState"),pushState:d(function(q){this.begin(q)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(q,Lt,Y,Tt){switch(Y){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:break;case 14:break;case 15:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 56:break;case 57:this.begin("string");break;case 58:this.popState();break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 64:this.begin("string");break;case 65:this.popState();break;case 66:return"qString";case 67:return Lt.yytext=Lt.yytext.trim(),89;case 68:return 75;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};return rt})();ut.lexer=pt;function wt(){this.yy={}}return d(wt,"Parser"),wt.prototype=ut,ut.Parser=wt,new wt})();E1.parser=E1;var XF=E1,Ha,KF=(Ha=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=We,this.getAccTitle=Ke,this.setAccDescription=Qe,this.getAccDescription=Ze,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getConfig=d(()=>it().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(t){this.direction=t}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(t,r){return this.requirements.has(t)||this.requirements.set(t,{name:t,type:r,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(t)}getRequirements(){return this.requirements}setNewReqId(t){this.latestRequirement!==void 0&&(this.latestRequirement.requirementId=t)}setNewReqText(t){this.latestRequirement!==void 0&&(this.latestRequirement.text=t)}setNewReqRisk(t){this.latestRequirement!==void 0&&(this.latestRequirement.risk=t)}setNewReqVerifyMethod(t){this.latestRequirement!==void 0&&(this.latestRequirement.verifyMethod=t)}addElement(t){return this.elements.has(t)||(this.elements.set(t,{name:t,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),P.info("Added new element: ",t)),this.resetLatestElement(),this.elements.get(t)}getElements(){return this.elements}setNewElementType(t){this.latestElement!==void 0&&(this.latestElement.type=t)}setNewElementDocRef(t){this.latestElement!==void 0&&(this.latestElement.docRef=t)}addRelationship(t,r,i){this.relations.push({type:t,src:r,dst:i})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,qe()}setCssStyle(t,r){for(const i of t){const s=this.requirements.get(i)??this.elements.get(i);if(!r||!s)return;for(const n of r)n.includes(",")?s.cssStyles.push(...n.split(",")):s.cssStyles.push(n)}}setClass(t,r){var i;for(const s of t){const n=this.requirements.get(s)??this.elements.get(s);if(n)for(const a of r){n.classes.push(a);const o=(i=this.classes.get(a))==null?void 0:i.styles;o&&n.cssStyles.push(...o)}}}defineClass(t,r){for(const i of t){let s=this.classes.get(i);s===void 0&&(s={id:i,styles:[],textStyles:[]},this.classes.set(i,s)),r&&r.forEach(function(n){if(/color/.exec(n)){const a=n.replace("fill","bgFill");s.textStyles.push(a)}s.styles.push(n)}),this.requirements.forEach(n=>{n.classes.includes(i)&&n.cssStyles.push(...r.flatMap(a=>a.split(",")))}),this.elements.forEach(n=>{n.classes.includes(i)&&n.cssStyles.push(...r.flatMap(a=>a.split(",")))})}}getClasses(){return this.classes}getData(){var s,n,a,o;const t=it(),r=[],i=[];for(const h of this.requirements.values()){const l=h;l.id=h.name,l.cssStyles=h.cssStyles,l.cssClasses=h.classes.join(" "),l.shape="requirementBox",l.look=t.look,r.push(l)}for(const h of this.elements.values()){const l=h;l.shape="requirementBox",l.look=t.look,l.id=h.name,l.cssStyles=h.cssStyles,l.cssClasses=h.classes.join(" "),r.push(l)}for(const h of this.relations){let l=0;const u=h.type===this.Relationships.CONTAINS,f={id:`${h.src}-${h.dst}-${l}`,start:((s=this.requirements.get(h.src))==null?void 0:s.name)??((n=this.elements.get(h.src))==null?void 0:n.name),end:((a=this.requirements.get(h.dst))==null?void 0:a.name)??((o=this.elements.get(h.dst))==null?void 0:o.name),label:`&lt;&lt;${h.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",u?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:u?"normal":"dashed",arrowTypeStart:u?"requirement_contains":"",arrowTypeEnd:u?"":"requirement_arrow",look:t.look};i.push(f),l++}return{nodes:r,edges:i,other:{},config:t,direction:this.getDirection()}}},d(Ha,"RequirementDB"),Ha),QF=d(e=>`

  marker {
    fill: ${e.relationColor};
    stroke: ${e.relationColor};
  }

  marker.cross {
    stroke: ${e.lineColor};
  }

  svg {
    font-family: ${e.fontFamily};
    font-size: ${e.fontSize};
  }

  .reqBox {
    fill: ${e.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${e.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${e.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${e.requirementBorderColor};
    stroke-width: ${e.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${e.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${e.relationLabelColor};
  }
  .divider {
    stroke: ${e.nodeBorder};
    stroke-width: 1;
  }
  .label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .label text,span {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }
  .labelBkg {
    background-color: ${e.edgeLabelBackground};
  }

`,"getStyles"),ZF=QF,bv={};Ph(bv,{draw:()=>JF});var JF=d(async function(e,t,r,i){P.info("REF0:"),P.info("Drawing requirement diagram (unified)",t);const{securityLevel:s,state:n,layout:a}=it(),o=i.db.getData(),h=So(t,s);o.type=i.type,o.layoutAlgorithm=Wl(a),o.nodeSpacing=(n==null?void 0:n.nodeSpacing)??50,o.rankSpacing=(n==null?void 0:n.rankSpacing)??50,o.markers=["requirement_contains","requirement_arrow"],o.diagramId=t,await wo(o,h);const l=8;ie.insertTitle(h,"requirementDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,i.db.getDiagramTitle()),kn(h,l,"requirementDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),tP={parser:XF,get db(){return new KF},renderer:bv,styles:ZF};const eP=Object.freeze(Object.defineProperty({__proto__:null,diagram:tP},Symbol.toStringTag,{value:"Module"}));var A1=(function(){var e=d(function(lt,U,j,Q){for(j=j||{},Q=lt.length;Q--;j[lt[Q]]=U);return j},"o"),t=[1,2],r=[1,3],i=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,13],h=[1,14],l=[1,16],u=[1,17],f=[1,18],p=[1,24],g=[1,25],y=[1,26],m=[1,27],x=[1,28],b=[1,29],_=[1,30],S=[1,31],C=[1,32],k=[1,33],v=[1,34],A=[1,35],L=[1,36],w=[1,37],R=[1,38],T=[1,39],V=[1,41],N=[1,42],D=[1,43],E=[1,44],M=[1,45],F=[1,46],I=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],B=[2,71],X=[4,5,16,50,52,53],$=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],G=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],nt=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],ht=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],tt=[69,70,71],dt=[1,127],st={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:d(function(U,j,Q,W,et,z,vt){var O=z.length-1;switch(et){case 3:return W.apply(z[O]),z[O];case 4:case 9:this.$=[];break;case 5:case 10:z[O-1].push(z[O]),this.$=z[O-1];break;case 6:case 7:case 11:case 12:this.$=z[O];break;case 8:case 13:this.$=[];break;case 15:z[O].type="createParticipant",this.$=z[O];break;case 16:z[O-1].unshift({type:"boxStart",boxData:W.parseBoxData(z[O-2])}),z[O-1].push({type:"boxEnd",boxText:z[O-2]}),this.$=z[O-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(z[O-2]),sequenceIndexStep:Number(z[O-1]),sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(z[O-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:W.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:W.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:z[O-1].actor};break;case 23:this.$={type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:z[O-1].actor};break;case 29:W.setDiagramTitle(z[O].substring(6)),this.$=z[O].substring(6);break;case 30:W.setDiagramTitle(z[O].substring(7)),this.$=z[O].substring(7);break;case 31:this.$=z[O].trim(),W.setAccTitle(this.$);break;case 32:case 33:this.$=z[O].trim(),W.setAccDescription(this.$);break;case 34:z[O-1].unshift({type:"loopStart",loopText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.LOOP_START}),z[O-1].push({type:"loopEnd",loopText:z[O-2],signalType:W.LINETYPE.LOOP_END}),this.$=z[O-1];break;case 35:z[O-1].unshift({type:"rectStart",color:W.parseMessage(z[O-2]),signalType:W.LINETYPE.RECT_START}),z[O-1].push({type:"rectEnd",color:W.parseMessage(z[O-2]),signalType:W.LINETYPE.RECT_END}),this.$=z[O-1];break;case 36:z[O-1].unshift({type:"optStart",optText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.OPT_START}),z[O-1].push({type:"optEnd",optText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.OPT_END}),this.$=z[O-1];break;case 37:z[O-1].unshift({type:"altStart",altText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.ALT_START}),z[O-1].push({type:"altEnd",signalType:W.LINETYPE.ALT_END}),this.$=z[O-1];break;case 38:z[O-1].unshift({type:"parStart",parText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.PAR_START}),z[O-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=z[O-1];break;case 39:z[O-1].unshift({type:"parStart",parText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.PAR_OVER_START}),z[O-1].push({type:"parEnd",signalType:W.LINETYPE.PAR_END}),this.$=z[O-1];break;case 40:z[O-1].unshift({type:"criticalStart",criticalText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.CRITICAL_START}),z[O-1].push({type:"criticalEnd",signalType:W.LINETYPE.CRITICAL_END}),this.$=z[O-1];break;case 41:z[O-1].unshift({type:"breakStart",breakText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.BREAK_START}),z[O-1].push({type:"breakEnd",optText:W.parseMessage(z[O-2]),signalType:W.LINETYPE.BREAK_END}),this.$=z[O-1];break;case 43:this.$=z[O-3].concat([{type:"option",optionText:W.parseMessage(z[O-1]),signalType:W.LINETYPE.CRITICAL_OPTION},z[O]]);break;case 45:this.$=z[O-3].concat([{type:"and",parText:W.parseMessage(z[O-1]),signalType:W.LINETYPE.PAR_AND},z[O]]);break;case 47:this.$=z[O-3].concat([{type:"else",altText:W.parseMessage(z[O-1]),signalType:W.LINETYPE.ALT_ELSE},z[O]]);break;case 48:z[O-3].draw="participant",z[O-3].type="addParticipant",z[O-3].description=W.parseMessage(z[O-1]),this.$=z[O-3];break;case 49:z[O-1].draw="participant",z[O-1].type="addParticipant",this.$=z[O-1];break;case 50:z[O-3].draw="actor",z[O-3].type="addParticipant",z[O-3].description=W.parseMessage(z[O-1]),this.$=z[O-3];break;case 51:z[O-1].draw="actor",z[O-1].type="addParticipant",this.$=z[O-1];break;case 52:z[O-1].type="destroyParticipant",this.$=z[O-1];break;case 53:z[O-1].draw="participant",z[O-1].type="addParticipant",this.$=z[O-1];break;case 54:this.$=[z[O-1],{type:"addNote",placement:z[O-2],actor:z[O-1].actor,text:z[O]}];break;case 55:z[O-2]=[].concat(z[O-1],z[O-1]).slice(0,2),z[O-2][0]=z[O-2][0].actor,z[O-2][1]=z[O-2][1].actor,this.$=[z[O-1],{type:"addNote",placement:W.PLACEMENT.OVER,actor:z[O-2].slice(0,2),text:z[O]}];break;case 56:this.$=[z[O-1],{type:"addLinks",actor:z[O-1].actor,text:z[O]}];break;case 57:this.$=[z[O-1],{type:"addALink",actor:z[O-1].actor,text:z[O]}];break;case 58:this.$=[z[O-1],{type:"addProperties",actor:z[O-1].actor,text:z[O]}];break;case 59:this.$=[z[O-1],{type:"addDetails",actor:z[O-1].actor,text:z[O]}];break;case 62:this.$=[z[O-2],z[O]];break;case 63:this.$=z[O];break;case 64:this.$=W.PLACEMENT.LEFTOF;break;case 65:this.$=W.PLACEMENT.RIGHTOF;break;case 66:this.$=[z[O-4],z[O-1],{type:"addMessage",from:z[O-4].actor,to:z[O-1].actor,signalType:z[O-3],msg:z[O],activate:!0},{type:"activeStart",signalType:W.LINETYPE.ACTIVE_START,actor:z[O-1].actor}];break;case 67:this.$=[z[O-4],z[O-1],{type:"addMessage",from:z[O-4].actor,to:z[O-1].actor,signalType:z[O-3],msg:z[O]},{type:"activeEnd",signalType:W.LINETYPE.ACTIVE_END,actor:z[O-4].actor}];break;case 68:this.$=[z[O-3],z[O-1],{type:"addMessage",from:z[O-3].actor,to:z[O-1].actor,signalType:z[O-2],msg:z[O]}];break;case 69:this.$={type:"addParticipant",actor:z[O-1],config:z[O]};break;case 70:this.$=z[O-1].trim();break;case 71:this.$={type:"addParticipant",actor:z[O]};break;case 72:this.$=W.LINETYPE.SOLID_OPEN;break;case 73:this.$=W.LINETYPE.DOTTED_OPEN;break;case 74:this.$=W.LINETYPE.SOLID;break;case 75:this.$=W.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=W.LINETYPE.DOTTED;break;case 77:this.$=W.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=W.LINETYPE.SOLID_CROSS;break;case 79:this.$=W.LINETYPE.DOTTED_CROSS;break;case 80:this.$=W.LINETYPE.SOLID_POINT;break;case 81:this.$=W.LINETYPE.DOTTED_POINT;break;case 82:this.$=W.parseMessage(z[O].trim().substring(1));break}},"anonymous"),table:[{3:1,4:t,5:r,6:i},{1:[3]},{3:5,4:t,5:r,6:i},{3:6,4:t,5:r,6:i},e([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,12:12,13:o,14:h,17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},e(I,[2,5]),{9:47,12:12,13:o,14:h,17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},e(I,[2,7]),e(I,[2,8]),e(I,[2,14]),{12:48,50:w,52:R,53:T},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:F},{22:55,71:F},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},e(I,[2,29]),e(I,[2,30]),{32:[1,61]},{34:[1,62]},e(I,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:F},{22:75,71:F},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:F},{22:92,71:F},{22:93,71:F},{22:94,71:F},e([5,51,65,76,77,78,79,80,81,82,83,84,85,86],B),e(I,[2,6]),e(I,[2,15]),e(X,[2,9],{10:95}),e(I,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},e(I,[2,21]),{5:[1,99]},{5:[1,100]},e(I,[2,24]),e(I,[2,25]),e(I,[2,26]),e(I,[2,27]),e(I,[2,28]),e(I,[2,31]),e(I,[2,32]),e($,s,{7:101}),e($,s,{7:102}),e($,s,{7:103}),e(G,s,{40:104,7:105}),e(nt,s,{42:106,7:107}),e(nt,s,{7:107,42:108}),e(ht,s,{45:109,7:110}),e($,s,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},e([5,51],B,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:F},e(tt,[2,72]),e(tt,[2,73]),e(tt,[2,74]),e(tt,[2,75]),e(tt,[2,76]),e(tt,[2,77]),e(tt,[2,78]),e(tt,[2,79]),e(tt,[2,80]),e(tt,[2,81]),{22:123,71:F},{22:125,59:124,71:F},{71:[2,64]},{71:[2,65]},{57:126,86:dt},{57:128,86:dt},{57:129,86:dt},{57:130,86:dt},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:w,52:R,53:T},{5:[1,136]},e(I,[2,19]),e(I,[2,20]),e(I,[2,22]),e(I,[2,23]),{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[1,137],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[1,138],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[1,139],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{16:[1,140]},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[2,46],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,49:[1,141],50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{16:[1,142]},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[2,44],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,48:[1,143],50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{16:[1,144]},{16:[1,145]},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[2,42],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,47:[1,146],50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{4:n,5:a,8:8,9:10,12:12,13:o,14:h,16:[1,147],17:15,18:l,21:u,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:b,37:_,38:S,39:C,41:k,43:v,44:A,46:L,50:w,52:R,53:T,55:V,60:N,61:D,62:E,63:M,71:F},{15:[1,148]},e(I,[2,49]),e(I,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},e(I,[2,51]),e(I,[2,52]),{22:151,71:F},{22:152,71:F},{57:153,86:dt},{57:154,86:dt},{57:155,86:dt},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},e(I,[2,16]),e(X,[2,10]),{12:157,50:w,52:R,53:T},e(X,[2,12]),e(X,[2,13]),e(I,[2,18]),e(I,[2,34]),e(I,[2,35]),e(I,[2,36]),e(I,[2,37]),{15:[1,158]},e(I,[2,38]),{15:[1,159]},e(I,[2,39]),e(I,[2,40]),{15:[1,160]},e(I,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:dt},{57:165,86:dt},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:F},e(X,[2,11]),e(G,s,{7:105,40:167}),e(nt,s,{7:107,42:168}),e(ht,s,{7:110,45:169}),e(I,[2,48]),{5:[2,70]},e(I,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:d(function(U,j){if(j.recoverable)this.trace(U);else{var Q=new Error(U);throw Q.hash=j,Q}},"parseError"),parse:d(function(U){var j=this,Q=[0],W=[],et=[null],z=[],vt=this.table,O="",Zt=0,J=0,Yt=2,It=1,se=z.slice.call(arguments,1),gt=Object.create(this.lexer),St={yy:{}};for(var ut in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ut)&&(St.yy[ut]=this.yy[ut]);gt.setInput(U,St.yy),St.yy.lexer=gt,St.yy.parser=this,typeof gt.yylloc>"u"&&(gt.yylloc={});var pt=gt.yylloc;z.push(pt);var wt=gt.options&&gt.options.ranges;typeof St.yy.parseError=="function"?this.parseError=St.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function rt(pe){Q.length=Q.length-2*pe,et.length=et.length-pe,z.length=z.length-pe}d(rt,"popStack");function bt(){var pe;return pe=W.pop()||gt.lex()||It,typeof pe!="number"&&(pe instanceof Array&&(W=pe,pe=W.pop()),pe=j.symbols_[pe]||pe),pe}d(bt,"lex");for(var q,Lt,Y,Tt,ft={},Ft,mt,xt,re;;){if(Lt=Q[Q.length-1],this.defaultActions[Lt]?Y=this.defaultActions[Lt]:((q===null||typeof q>"u")&&(q=bt()),Y=vt[Lt]&&vt[Lt][q]),typeof Y>"u"||!Y.length||!Y[0]){var At="";re=[];for(Ft in vt[Lt])this.terminals_[Ft]&&Ft>Yt&&re.push("'"+this.terminals_[Ft]+"'");gt.showPosition?At="Parse error on line "+(Zt+1)+`:
`+gt.showPosition()+`
Expecting `+re.join(", ")+", got '"+(this.terminals_[q]||q)+"'":At="Parse error on line "+(Zt+1)+": Unexpected "+(q==It?"end of input":"'"+(this.terminals_[q]||q)+"'"),this.parseError(At,{text:gt.match,token:this.terminals_[q]||q,line:gt.yylineno,loc:pt,expected:re})}if(Y[0]instanceof Array&&Y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Lt+", token: "+q);switch(Y[0]){case 1:Q.push(q),et.push(gt.yytext),z.push(gt.yylloc),Q.push(Y[1]),q=null,J=gt.yyleng,O=gt.yytext,Zt=gt.yylineno,pt=gt.yylloc;break;case 2:if(mt=this.productions_[Y[1]][1],ft.$=et[et.length-mt],ft._$={first_line:z[z.length-(mt||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(mt||1)].first_column,last_column:z[z.length-1].last_column},wt&&(ft._$.range=[z[z.length-(mt||1)].range[0],z[z.length-1].range[1]]),Tt=this.performAction.apply(ft,[O,J,Zt,St.yy,Y[1],et,z].concat(se)),typeof Tt<"u")return Tt;mt&&(Q=Q.slice(0,-1*mt*2),et=et.slice(0,-1*mt),z=z.slice(0,-1*mt)),Q.push(this.productions_[Y[1]][0]),et.push(ft.$),z.push(ft._$),xt=vt[Q[Q.length-2]][Q[Q.length-1]],Q.push(xt);break;case 3:return!0}}return!0},"parse")},ot=(function(){var lt={EOF:1,parseError:d(function(j,Q){if(this.yy.parser)this.yy.parser.parseError(j,Q);else throw new Error(j)},"parseError"),setInput:d(function(U,j){return this.yy=j||this.yy||{},this._input=U,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var U=this._input[0];this.yytext+=U,this.yyleng++,this.offset++,this.match+=U,this.matched+=U;var j=U.match(/(?:\r\n?|\n).*/g);return j?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),U},"input"),unput:d(function(U){var j=U.length,Q=U.split(/(?:\r\n?|\n)/g);this._input=U+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var W=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Q.length-1&&(this.yylineno-=Q.length-1);var et=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Q?(Q.length===W.length?this.yylloc.first_column:0)+W[W.length-Q.length].length-Q[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[et[0],et[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(U){this.unput(this.match.slice(U))},"less"),pastInput:d(function(){var U=this.matched.substr(0,this.matched.length-this.match.length);return(U.length>20?"...":"")+U.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var U=this.match;return U.length<20&&(U+=this._input.substr(0,20-U.length)),(U.substr(0,20)+(U.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var U=this.pastInput(),j=new Array(U.length+1).join("-");return U+this.upcomingInput()+`
`+j+"^"},"showPosition"),test_match:d(function(U,j){var Q,W,et;if(this.options.backtrack_lexer&&(et={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(et.yylloc.range=this.yylloc.range.slice(0))),W=U[0].match(/(?:\r\n?|\n).*/g),W&&(this.yylineno+=W.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:W?W[W.length-1].length-W[W.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+U[0].length},this.yytext+=U[0],this.match+=U[0],this.matches=U,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(U[0].length),this.matched+=U[0],Q=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Q)return Q;if(this._backtrack){for(var z in et)this[z]=et[z];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var U,j,Q,W;this._more||(this.yytext="",this.match="");for(var et=this._currentRules(),z=0;z<et.length;z++)if(Q=this._input.match(this.rules[et[z]]),Q&&(!j||Q[0].length>j[0].length)){if(j=Q,W=z,this.options.backtrack_lexer){if(U=this.test_match(Q,et[z]),U!==!1)return U;if(this._backtrack){j=!1;continue}else return!1}else if(!this.options.flex)break}return j?(U=this.test_match(j,et[W]),U!==!1?U:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var j=this.next();return j||this.lex()},"lex"),begin:d(function(j){this.conditionStack.push(j)},"begin"),popState:d(function(){var j=this.conditionStack.length-1;return j>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(j){return j=this.conditionStack.length-1-Math.abs(j||0),j>=0?this.conditionStack[j]:"INITIAL"},"topState"),pushState:d(function(j){this.begin(j)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(j,Q,W,et){switch(W){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:return Q.yytext=Q.yytext.trim(),71;case 11:return Q.yytext=Q.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 17:return Q.yytext=Q.yytext.trim(),this.begin("ALIAS"),71;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 56:return 5;case 57:return Q.yytext=Q.yytext.trim(),71;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:return 86;case 69:return 86;case 70:return 69;case 71:return 70;case 72:return 5;case 73:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}};return lt})();st.lexer=ot;function K(){this.yy={}}return d(K,"Parser"),K.prototype=st,st.Parser=K,new K})();A1.parser=A1;var rP=A1,iP={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},sP={FILLED:0,OPEN:1},nP={LEFTOF:0,RIGHTOF:1,OVER:2},hc={ACTOR:"actor",CONTROL:"control",DATABASE:"database",ENTITY:"entity"},Ua,aP=(Ua=class{constructor(){this.state=new l5(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=We,this.setAccDescription=Qe,this.setDiagramTitle=ir,this.getAccTitle=Ke,this.getAccDescription=Ze,this.getDiagramTitle=Ye,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(it().wrap),this.LINETYPE=iP,this.ARROWTYPE=sP,this.PLACEMENT=nP}addBox(t){this.state.records.boxes.push({name:t.text,wrap:t.wrap??this.autoWrap(),fill:t.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(t,r,i,s,n){let a=this.state.records.currentBox,o;if(n!==void 0){let l;n.includes(`
`)?l=n+`
`:l=`{
`+n+`
}`,o=eu(l,{schema:tu})}s=(o==null?void 0:o.type)??s;const h=this.state.records.actors.get(t);if(h){if(this.state.records.currentBox&&h.box&&this.state.records.currentBox!==h.box)throw new Error(`A same participant should only be defined in one Box: ${h.name} can't be in '${h.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(a=h.box?h.box:this.state.records.currentBox,h.box=a,h&&r===h.name&&i==null)return}if((i==null?void 0:i.text)==null&&(i={text:r,type:s}),(s==null||i.text==null)&&(i={text:r,type:s}),this.state.records.actors.set(t,{box:a,name:r,description:i.text,wrap:i.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:s??"participant"}),this.state.records.prevActor){const l=this.state.records.actors.get(this.state.records.prevActor);l&&(l.nextActor=t)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(t),this.state.records.prevActor=t}activationCount(t){let r,i=0;if(!t)return 0;for(r=0;r<this.state.records.messages.length;r++)this.state.records.messages[r].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[r].from===t&&i++,this.state.records.messages[r].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[r].from===t&&i--;return i}addMessage(t,r,i,s){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:i.text,wrap:i.wrap??this.autoWrap(),answer:s})}addSignal(t,r,i,s,n=!1){if(s===this.LINETYPE.ACTIVE_END&&this.activationCount(t??"")<1){const o=new Error("Trying to inactivate an inactive participant ("+t+")");throw o.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},o}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:r,message:(i==null?void 0:i.text)??"",wrap:(i==null?void 0:i.wrap)??this.autoWrap(),type:s,activate:n}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(t=>t.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(t){return this.state.records.actors.get(t)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(t){this.state.records.wrapEnabled=t}extractWrap(t){if(t===void 0)return{};t=t.trim();const r=/^:?wrap:/.exec(t)!==null?!0:/^:?nowrap:/.exec(t)!==null?!1:void 0;return{cleanedText:(r===void 0?t:t.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:r}}autoWrap(){var t;return this.state.records.wrapEnabled!==void 0?this.state.records.wrapEnabled:((t=it().sequence)==null?void 0:t.wrap)??!1}clear(){this.state.reset(),qe()}parseMessage(t){const r=t.trim(),{wrap:i,cleanedText:s}=this.extractWrap(r),n={text:s,wrap:i};return P.debug(`parseMessage: ${JSON.stringify(n)}`),n}parseBoxData(t){const r=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(t);let i=r!=null&&r[1]?r[1].trim():"transparent",s=r!=null&&r[2]?r[2].trim():void 0;if(window!=null&&window.CSS)window.CSS.supports("color",i)||(i="transparent",s=t.trim());else{const o=new Option().style;o.color=i,o.color!==i&&(i="transparent",s=t.trim())}const{wrap:n,cleanedText:a}=this.extractWrap(s);return{text:a?me(a,it()):void 0,color:i,wrap:n}}addNote(t,r,i){const s={actor:t,placement:r,message:i.text,wrap:i.wrap??this.autoWrap()},n=[].concat(t,t);this.state.records.notes.push(s),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:n[0],to:n[1],message:i.text,wrap:i.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:r})}addLinks(t,r){const i=this.getActor(t);try{let s=me(r.text,it());s=s.replace(/&equals;/g,"="),s=s.replace(/&amp;/g,"&");const n=JSON.parse(s);this.insertLinks(i,n)}catch(s){P.error("error while parsing actor link text",s)}}addALink(t,r){const i=this.getActor(t);try{const s={};let n=me(r.text,it());const a=n.indexOf("@");n=n.replace(/&equals;/g,"="),n=n.replace(/&amp;/g,"&");const o=n.slice(0,a-1).trim(),h=n.slice(a+1).trim();s[o]=h,this.insertLinks(i,s)}catch(s){P.error("error while parsing actor link text",s)}}insertLinks(t,r){if(t.links==null)t.links=r;else for(const i in r)t.links[i]=r[i]}addProperties(t,r){const i=this.getActor(t);try{const s=me(r.text,it()),n=JSON.parse(s);this.insertProperties(i,n)}catch(s){P.error("error while parsing actor properties text",s)}}insertProperties(t,r){if(t.properties==null)t.properties=r;else for(const i in r)t.properties[i]=r[i]}boxEnd(){this.state.records.currentBox=void 0}addDetails(t,r){const i=this.getActor(t),s=document.getElementById(r.text);try{const n=s.innerHTML,a=JSON.parse(n);a.properties&&this.insertProperties(i,a.properties),a.links&&this.insertLinks(i,a.links)}catch(n){P.error("error while parsing actor details text",n)}}getActorProperty(t,r){if((t==null?void 0:t.properties)!==void 0)return t.properties[r]}apply(t){if(Array.isArray(t))t.forEach(r=>{this.apply(r)});else switch(t.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":this.addActor(t.actor,t.actor,t.description,t.draw,t.config);break;case"createParticipant":if(this.state.records.actors.has(t.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=t.actor,this.addActor(t.actor,t.actor,t.description,t.draw,t.config),this.state.records.createdActors.set(t.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=t.actor,this.state.records.destroyedActors.set(t.actor,this.state.records.messages.length);break;case"activeStart":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"addNote":this.addNote(t.actor,t.placement,t.text);break;case"addLinks":this.addLinks(t.actor,t.text);break;case"addALink":this.addALink(t.actor,t.text);break;case"addProperties":this.addProperties(t.actor,t.text);break;case"addDetails":this.addDetails(t.actor,t.text);break;case"addMessage":if(this.state.records.lastCreated){if(t.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(t.to!==this.state.records.lastDestroyed&&t.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":this.addBox(t.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"rectStart":this.addSignal(void 0,void 0,t.color,t.signalType);break;case"rectEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"optStart":this.addSignal(void 0,void 0,t.optText,t.signalType);break;case"optEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"altStart":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"else":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"altEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":We(t.text);break;case"parStart":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"and":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"parEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,t.criticalText,t.signalType);break;case"option":this.addSignal(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"breakStart":this.addSignal(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break}}getConfig(){return it().sequence}},d(Ua,"SequenceDB"),Ua),oP=d(e=>`.actor {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }

  text.actor > tspan {
    fill: ${e.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${e.actorLineColor};
  }
  
  .innerArc {
    stroke-width: 1.5;
    stroke-dasharray: none;
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${e.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${e.signalColor};
  }

  #arrowhead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .sequenceNumber {
    fill: ${e.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${e.signalColor};
  }

  #crosshead path {
    fill: ${e.signalColor};
    stroke: ${e.signalColor};
  }

  .messageText {
    fill: ${e.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${e.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${e.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${e.labelBoxBorderColor};
    fill: ${e.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${e.noteBorderColor};
    fill: ${e.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${e.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation1 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .activation2 {
    fill: ${e.activationBkgColor};
    stroke: ${e.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${e.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${e.actorBorder};
    fill: ${e.actorBkg};
    stroke-width: 2px;
  }

`,"getStyles"),lP=oP,Us=36,Ss="actor-top",Cs="actor-bottom",yu="actor-box",ms="actor-man",Cl=d(function(e,t){return cu(e,t)},"drawRect"),cP=d(function(e,t,r,i,s){if(t.links===void 0||t.links===null||Object.keys(t.links).length===0)return{height:0,width:0};const n=t.links,a=t.actorCnt,o=t.rectData;var h="none";s&&(h="block !important");const l=e.append("g");l.attr("id","actor"+a+"_popup"),l.attr("class","actorPopupMenu"),l.attr("display",h);var u="";o.class!==void 0&&(u=" "+o.class);let f=o.width>r?o.width:r;const p=l.append("rect");if(p.attr("class","actorPopupMenuPanel"+u),p.attr("x",o.x),p.attr("y",o.height),p.attr("fill",o.fill),p.attr("stroke",o.stroke),p.attr("width",f),p.attr("height",o.height),p.attr("rx",o.rx),p.attr("ry",o.ry),n!=null){var g=20;for(let x in n){var y=l.append("a"),m=dn.sanitizeUrl(n[x]);y.attr("xlink:href",m),y.attr("target","_blank"),RP(i)(x,y,o.x+10,o.height+g,f,20,{class:"actor"},i),g+=30}}return p.attr("height",g),{height:o.height+g,width:f}},"drawPopup"),mu=d(function(e){return"var pu = document.getElementById('"+e+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),Lh=d(async function(e,t,r=null){let i=e.append("foreignObject");const s=await $l(t.text,xe()),a=i.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(s).node().getBoundingClientRect();if(i.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),t.class==="noteText"){const o=e.node().firstChild;o.setAttribute("height",a.height+2*t.textMargin);const h=o.getBBox();i.attr("x",Math.round(h.x+h.width/2-a.width/2)).attr("y",Math.round(h.y+h.height/2-a.height/2))}else if(r){let{startx:o,stopx:h,starty:l}=r;if(o>h){const u=o;o=h,h=u}i.attr("x",Math.round(o+Math.abs(o-h)/2-a.width/2)),t.class==="loopText"?i.attr("y",Math.round(l)):i.attr("y",Math.round(l-a.height))}return[i]},"drawKatex"),yo=d(function(e,t){let r=0,i=0;const s=t.text.split(Ct.lineBreakRegex),[n,a]=vn(t.fontSize);let o=[],h=0,l=d(()=>t.y,"yfunc");if(t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0)switch(t.valign){case"top":case"start":l=d(()=>Math.round(t.y+t.textMargin),"yfunc");break;case"middle":case"center":l=d(()=>Math.round(t.y+(r+i+t.textMargin)/2),"yfunc");break;case"bottom":case"end":l=d(()=>Math.round(t.y+(r+i+2*t.textMargin)-t.textMargin),"yfunc");break}if(t.anchor!==void 0&&t.textMargin!==void 0&&t.width!==void 0)switch(t.anchor){case"left":case"start":t.x=Math.round(t.x+t.textMargin),t.anchor="start",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"middle":case"center":t.x=Math.round(t.x+t.width/2),t.anchor="middle",t.dominantBaseline="middle",t.alignmentBaseline="middle";break;case"right":case"end":t.x=Math.round(t.x+t.width-t.textMargin),t.anchor="end",t.dominantBaseline="middle",t.alignmentBaseline="middle";break}for(let[u,f]of s.entries()){t.textMargin!==void 0&&t.textMargin===0&&n!==void 0&&(h=u*n);const p=e.append("text");p.attr("x",t.x),p.attr("y",l()),t.anchor!==void 0&&p.attr("text-anchor",t.anchor).attr("dominant-baseline",t.dominantBaseline).attr("alignment-baseline",t.alignmentBaseline),t.fontFamily!==void 0&&p.style("font-family",t.fontFamily),a!==void 0&&p.style("font-size",a),t.fontWeight!==void 0&&p.style("font-weight",t.fontWeight),t.fill!==void 0&&p.attr("fill",t.fill),t.class!==void 0&&p.attr("class",t.class),t.dy!==void 0?p.attr("dy",t.dy):h!==0&&p.attr("dy",h);const g=f||Nx;if(t.tspan){const y=p.append("tspan");y.attr("x",t.x),t.fill!==void 0&&y.attr("fill",t.fill),y.text(g)}else p.text(g);t.valign!==void 0&&t.textMargin!==void 0&&t.textMargin>0&&(i+=(p._groups||p)[0][0].getBBox().height,r=i),o.push(p)}return o},"drawText"),vv=d(function(e,t){function r(s,n,a,o,h){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-h)+" "+(s+a-h*1.2)+","+(n+o)+" "+s+","+(n+o)}d(r,"genPoints");const i=e.append("polygon");return i.attr("points",r(t.x,t.y,t.width,t.height,7)),i.attr("class","labelBox"),t.y=t.y+t.height/2,yo(e,t),i},"drawLabel"),fe=-1,_v=d((e,t,r,i)=>{e.select&&r.forEach(s=>{const n=t.get(s),a=e.select("#actor"+n.actorCnt);!i.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):i.mirrorActors&&a.attr("y2",n.stopy)})},"fixLifeLineHeights"),hP=d(function(e,t,r,i){var g,y;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+t.height,o=e.append("g").lower();var h=o;i||(fe++,Object.keys(t.links||{}).length&&!r.forceMenus&&h.attr("onclick",mu(`actor${fe}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),h=o.append("g"),t.actorCnt=fe,t.links!=null&&h.attr("id","root-"+fe));const l=qr();var u="actor";(g=t.properties)!=null&&g.class?u=t.properties.class:l.fill="#eaeaea",i?u+=` ${Cs}`:u+=` ${Ss}`,l.x=t.x,l.y=s,l.width=t.width,l.height=t.height,l.class=u,l.rx=3,l.ry=3,l.name=t.name;const f=Cl(h,l);if(t.rectData=l,(y=t.properties)!=null&&y.icon){const m=t.properties.icon.trim();m.charAt(0)==="@"?Kf(h,l.x+l.width-20,l.y+10,m.substr(1)):Xf(h,l.x+l.width-20,l.y+10,m)}rs(r,Re(t.description))(t.description,h,l.x,l.y,l.width,l.height,{class:`actor ${yu}`},r);let p=t.height;if(f.node){const m=f.node().getBBox();t.height=m.height,p=m.height}return p},"drawActorTypeParticipant"),uP=d(function(e,t,r,i){var m,x;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+t.height,o=e.append("g").lower();var h=o;i||(fe++,Object.keys(t.links||{}).length&&!r.forceMenus&&h.attr("onclick",mu(`actor${fe}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),h=o.append("g"),t.actorCnt=fe,t.links!=null&&h.attr("id","root-"+fe));const l=qr();var u="actor";(m=t.properties)!=null&&m.class?u=t.properties.class:l.fill="#eaeaea",i?u+=` ${Cs}`:u+=` ${Ss}`,l.x=t.x,l.y=s,l.width=t.width,l.height=t.height,l.class=u,l.name=t.name;const f=6,p={...l,x:l.x+-f,y:l.y+ +f,class:"actor"},g=Cl(h,l);if(Cl(h,p),t.rectData=l,(x=t.properties)!=null&&x.icon){const b=t.properties.icon.trim();b.charAt(0)==="@"?Kf(h,l.x+l.width-20,l.y+10,b.substr(1)):Xf(h,l.x+l.width-20,l.y+10,b)}rs(r,Re(t.description))(t.description,h,l.x-f,l.y+f,l.width,l.height,{class:`actor ${yu}`},r);let y=t.height;if(g.node){const b=g.node().getBBox();t.height=b.height,y=b.height}return y},"drawActorTypeCollections"),dP=d(function(e,t,r,i){var b,_;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+t.height,o=e.append("g").lower();let h=o;i||(fe++,Object.keys(t.links||{}).length&&!r.forceMenus&&h.attr("onclick",mu(`actor${fe}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),h=o.append("g"),t.actorCnt=fe,t.links!=null&&h.attr("id","root-"+fe));const l=qr();let u="actor";(b=t.properties)!=null&&b.class?u=t.properties.class:l.fill="#eaeaea",i?u+=` ${Cs}`:u+=` ${Ss}`,l.x=t.x,l.y=s,l.width=t.width,l.height=t.height,l.class=u,l.name=t.name;const f=l.height/2,p=f/(2.5+l.height/50),g=h.append("g"),y=h.append("g");if(g.append("path").attr("d",`M ${l.x},${l.y+f}
    a ${p},${f} 0 0 0 0,${l.height}
    h ${l.width-2*p}
    a ${p},${f} 0 0 0 0,-${l.height}
    Z
  `).attr("class",u),y.append("path").attr("d",`M ${l.x},${l.y+f}
      a ${p},${f} 0 0 0 0,${l.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",u),g.attr("transform",`translate(${p}, ${-(l.height/2)})`),y.attr("transform",`translate(${l.width-p}, ${-l.height/2})`),t.rectData=l,(_=t.properties)!=null&&_.icon){const S=t.properties.icon.trim(),C=l.x+l.width-20,k=l.y+10;S.charAt(0)==="@"?Kf(h,C,k,S.substr(1)):Xf(h,C,k,S)}rs(r,Re(t.description))(t.description,h,l.x,l.y,l.width,l.height,{class:`actor ${yu}`},r);let m=t.height;const x=g.select("path:last-child");if(x.node()){const S=x.node().getBBox();t.height=S.height,m=S.height}return m},"drawActorTypeQueue"),fP=d(function(e,t,r,i){var m;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+75,o=e.append("g").lower();i||(fe++,o.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=fe);const h=e.append("g");let l=ms;i?l+=` ${Cs}`:l+=` ${Ss}`,h.attr("class",l),h.attr("name",t.name);const u=qr();u.x=t.x,u.y=s,u.fill="#eaeaea",u.width=t.width,u.height=t.height,u.class="actor";const f=t.x+t.width/2,p=s+30,g=18;h.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),h.append("circle").attr("cx",f).attr("cy",p).attr("r",g).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),h.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${f}, ${p-g})`);const y=h.node().getBBox();return t.height=y.height+2*(((m=r==null?void 0:r.sequence)==null?void 0:m.labelBoxHeight)??0),rs(r,Re(t.description))(t.description,h,u.x,u.y+g+(i?5:10),u.width,u.height,{class:`actor ${ms}`},r),t.height},"drawActorTypeControl"),pP=d(function(e,t,r,i){var m;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+75,o=e.append("g").lower(),h=e.append("g");let l=ms;i?l+=` ${Cs}`:l+=` ${Ss}`,h.attr("class",l),h.attr("name",t.name);const u=qr();u.x=t.x,u.y=s,u.fill="#eaeaea",u.width=t.width,u.height=t.height,u.class="actor";const f=t.x+t.width/2,p=s+(i?10:25),g=18;h.append("circle").attr("cx",f).attr("cy",p).attr("r",g).attr("width",t.width).attr("height",t.height),h.append("line").attr("x1",f-g).attr("x2",f+g).attr("y1",p+g).attr("y2",p+g).attr("stroke","#333").attr("stroke-width",2);const y=h.node().getBBox();return t.height=y.height+(((m=r==null?void 0:r.sequence)==null?void 0:m.labelBoxHeight)??0),i||(fe++,o.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=fe),rs(r,Re(t.description))(t.description,h,u.x,u.y+(i?(p-s+g-5)/2:(p+g-s)/2),u.width,u.height,{class:`actor ${ms}`},r),i?h.attr("transform",`translate(0, ${g/2})`):h.attr("transform",`translate(0, ${g/2})`),t.height},"drawActorTypeEntity"),gP=d(function(e,t,r,i){var _;const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+t.height+2*r.boxTextMargin,o=e.append("g").lower();let h=o;i||(fe++,Object.keys(t.links||{}).length&&!r.forceMenus&&h.attr("onclick",mu(`actor${fe}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),h=o.append("g"),t.actorCnt=fe,t.links!=null&&h.attr("id","root-"+fe));const l=qr();let u="actor";(_=t.properties)!=null&&_.class?u=t.properties.class:l.fill="#eaeaea",i?u+=` ${Cs}`:u+=` ${Ss}`,l.x=t.x,l.y=s,l.width=t.width,l.height=t.height,l.class=u,l.name=t.name,l.x=t.x,l.y=s;const f=l.width/4,p=l.width/4,g=f/2,y=g/(2.5+f/50),m=h.append("g"),x=`
  M ${l.x},${l.y+y}
  a ${g},${y} 0 0 0 ${f},0
  a ${g},${y} 0 0 0 -${f},0
  l 0,${p-2*y}
  a ${g},${y} 0 0 0 ${f},0
  l 0,-${p-2*y}
`;m.append("path").attr("d",x).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",u),i?m.attr("transform",`translate(${f*1.5}, ${l.height/4-2*y})`):m.attr("transform",`translate(${f*1.5}, ${(l.height+y)/4})`),t.rectData=l,rs(r,Re(t.description))(t.description,h,l.x,l.y+(i?(l.height+p)/4:(l.height+y)/2),l.width,l.height,{class:`actor ${yu}`},r);const b=m.select("path:last-child");if(b.node()){const S=b.node().getBBox();t.height=S.height+(r.sequence.labelBoxHeight??0)}return t.height},"drawActorTypeDatabase"),yP=d(function(e,t,r,i){const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+80,o=30,h=e.append("g").lower();i||(fe++,h.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=fe);const l=e.append("g");let u=ms;i?u+=` ${Cs}`:u+=` ${Ss}`,l.attr("class",u),l.attr("name",t.name);const f=qr();f.x=t.x,f.y=s,f.fill="#eaeaea",f.width=t.width,f.height=t.height,f.class="actor",l.append("line").attr("id","actor-man-torso"+fe).attr("x1",t.x+t.width/2-o*2.5).attr("y1",s+10).attr("x2",t.x+t.width/2-15).attr("y2",s+10),l.append("line").attr("id","actor-man-arms"+fe).attr("x1",t.x+t.width/2-o*2.5).attr("y1",s+0).attr("x2",t.x+t.width/2-o*2.5).attr("y2",s+20),l.append("circle").attr("cx",t.x+t.width/2).attr("cy",s+10).attr("r",o);const p=l.node().getBBox();return t.height=p.height+(r.sequence.labelBoxHeight??0),rs(r,Re(t.description))(t.description,l,f.x,f.y+(i?o/2-4:o/2+3),f.width,f.height,{class:`actor ${ms}`},r),i?l.attr("transform",`translate(0,${o/2+7})`):l.attr("transform",`translate(0,${o/2+7})`),t.height},"drawActorTypeBoundary"),mP=d(function(e,t,r,i){const s=i?t.stopy:t.starty,n=t.x+t.width/2,a=s+80,o=e.append("g").lower();i||(fe++,o.append("line").attr("id","actor"+fe).attr("x1",n).attr("y1",a).attr("x2",n).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",t.name),t.actorCnt=fe);const h=e.append("g");let l=ms;i?l+=` ${Cs}`:l+=` ${Ss}`,h.attr("class",l),h.attr("name",t.name);const u=qr();u.x=t.x,u.y=s,u.fill="#eaeaea",u.width=t.width,u.height=t.height,u.class="actor",u.rx=3,u.ry=3,h.append("line").attr("id","actor-man-torso"+fe).attr("x1",n).attr("y1",s+25).attr("x2",n).attr("y2",s+45),h.append("line").attr("id","actor-man-arms"+fe).attr("x1",n-Us/2).attr("y1",s+33).attr("x2",n+Us/2).attr("y2",s+33),h.append("line").attr("x1",n-Us/2).attr("y1",s+60).attr("x2",n).attr("y2",s+45),h.append("line").attr("x1",n).attr("y1",s+45).attr("x2",n+Us/2-2).attr("y2",s+60);const f=h.append("circle");f.attr("cx",t.x+t.width/2),f.attr("cy",s+10),f.attr("r",15),f.attr("width",t.width),f.attr("height",t.height);const p=h.node().getBBox();return t.height=p.height,rs(r,Re(t.description))(t.description,h,u.x,u.y+35,u.width,u.height,{class:`actor ${ms}`},r),t.height},"drawActorTypeActor"),xP=d(async function(e,t,r,i){switch(t.type){case"actor":return await mP(e,t,r,i);case"participant":return await hP(e,t,r,i);case"boundary":return await yP(e,t,r,i);case"control":return await fP(e,t,r,i);case"entity":return await pP(e,t,r,i);case"database":return await gP(e,t,r,i);case"collections":return await uP(e,t,r,i);case"queue":return await dP(e,t,r,i)}},"drawActor"),bP=d(function(e,t,r){const s=e.append("g");kv(s,t),t.name&&rs(r)(t.name,s,t.x,t.y+r.boxTextMargin+(t.textMaxHeight||0)/2,t.width,0,{class:"text"},r),s.lower()},"drawBox"),vP=d(function(e){return e.append("g")},"anchorElement"),_P=d(function(e,t,r,i,s){const n=qr(),a=t.anchored;n.x=t.startx,n.y=t.starty,n.class="activation"+s%3,n.width=t.stopx-t.startx,n.height=r-t.starty,Cl(a,n)},"drawActivation"),kP=d(async function(e,t,r,i){const{boxMargin:s,boxTextMargin:n,labelBoxHeight:a,labelBoxWidth:o,messageFontFamily:h,messageFontSize:l,messageFontWeight:u}=i,f=e.append("g"),p=d(function(m,x,b,_){return f.append("line").attr("x1",m).attr("y1",x).attr("x2",b).attr("y2",_).attr("class","loopLine")},"drawLoopLine");p(t.startx,t.starty,t.stopx,t.starty),p(t.stopx,t.starty,t.stopx,t.stopy),p(t.startx,t.stopy,t.stopx,t.stopy),p(t.startx,t.starty,t.startx,t.stopy),t.sections!==void 0&&t.sections.forEach(function(m){p(t.startx,m.y,t.stopx,m.y).style("stroke-dasharray","3, 3")});let g=Qf();g.text=r,g.x=t.startx,g.y=t.starty,g.fontFamily=h,g.fontSize=l,g.fontWeight=u,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=a||20,g.textMargin=n,g.class="labelText",vv(f,g),g=wv(),g.text=t.title,g.x=t.startx+o/2+(t.stopx-t.startx)/2,g.y=t.starty+s+n,g.anchor="middle",g.valign="middle",g.textMargin=n,g.class="loopText",g.fontFamily=h,g.fontSize=l,g.fontWeight=u,g.wrap=!0;let y=Re(g.text)?await Lh(f,g,t):yo(f,g);if(t.sectionTitles!==void 0){for(const[m,x]of Object.entries(t.sectionTitles))if(x.message){g.text=x.message,g.x=t.startx+(t.stopx-t.startx)/2,g.y=t.sections[m].y+s+n,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=h,g.fontSize=l,g.fontWeight=u,g.wrap=t.wrap,Re(g.text)?(t.starty=t.sections[m].y,await Lh(f,g,t)):yo(f,g);let b=Math.round(y.map(_=>(_._groups||_)[0][0].getBBox().height).reduce((_,S)=>_+S));t.sections[m].height+=b-(s+n)}}return t.height=Math.round(t.stopy-t.starty),f},"drawLoop"),kv=d(function(e,t){K4(e,t)},"drawBackgroundRect"),wP=d(function(e){e.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),TP=d(function(e){e.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),SP=d(function(e){e.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),CP=d(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),EP=d(function(e){e.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),AP=d(function(e){e.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),LP=d(function(e){e.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),wv=d(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),DP=d(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),rs=(function(){function e(n,a,o,h,l,u,f){const p=a.append("text").attr("x",o+l/2).attr("y",h+u/2+5).style("text-anchor","middle").text(n);s(p,f)}d(e,"byText");function t(n,a,o,h,l,u,f,p){const{actorFontSize:g,actorFontFamily:y,actorFontWeight:m}=p,[x,b]=vn(g),_=n.split(Ct.lineBreakRegex);for(let S=0;S<_.length;S++){const C=S*x-x*(_.length-1)/2,k=a.append("text").attr("x",o+l/2).attr("y",h).style("text-anchor","middle").style("font-size",b).style("font-weight",m).style("font-family",y);k.append("tspan").attr("x",o+l/2).attr("dy",C).text(_[S]),k.attr("y",h+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),s(k,f)}}d(t,"byTspan");function r(n,a,o,h,l,u,f,p){const g=a.append("switch"),m=g.append("foreignObject").attr("x",o).attr("y",h).attr("width",l).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(n),t(n,g,o,h,l,u,f,p),s(m,f)}d(r,"byFo");async function i(n,a,o,h,l,u,f,p){const g=await Nl(n,xe()),y=a.append("switch"),x=y.append("foreignObject").attr("x",o+l/2-g.width/2).attr("y",h+u/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");x.append("div").style("text-align","center").style("vertical-align","middle").html(await $l(n,xe())),t(n,y,o,h,l,u,f,p),s(x,f)}d(i,"byKatex");function s(n,a){for(const o in a)a.hasOwnProperty(o)&&n.attr(o,a[o])}return d(s,"_setTextAttrs"),function(n,a=!1){return a?i:n.textPlacement==="fo"?r:n.textPlacement==="old"?e:t}})(),RP=(function(){function e(s,n,a,o,h,l,u){const f=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").text(s);i(f,u)}d(e,"byText");function t(s,n,a,o,h,l,u,f){const{actorFontSize:p,actorFontFamily:g,actorFontWeight:y}=f,m=s.split(Ct.lineBreakRegex);for(let x=0;x<m.length;x++){const b=x*p-p*(m.length-1)/2,_=n.append("text").attr("x",a).attr("y",o).style("text-anchor","start").style("font-size",p).style("font-weight",y).style("font-family",g);_.append("tspan").attr("x",a).attr("dy",b).text(m[x]),_.attr("y",o+l/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(_,u)}}d(t,"byTspan");function r(s,n,a,o,h,l,u,f){const p=n.append("switch"),y=p.append("foreignObject").attr("x",a).attr("y",o).attr("width",h).attr("height",l).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),t(s,p,a,o,h,l,u,f),i(y,u)}d(r,"byFo");function i(s,n){for(const a in n)n.hasOwnProperty(a)&&s.attr(a,n[a])}return d(i,"_setTextAttrs"),function(s){return s.textPlacement==="fo"?r:s.textPlacement==="old"?e:t}})(),Ie={drawRect:Cl,drawText:yo,drawLabel:vv,drawActor:xP,drawBox:bP,drawPopup:cP,anchorElement:vP,drawActivation:_P,drawLoop:kP,drawBackgroundRect:kv,insertArrowHead:CP,insertArrowFilledHead:EP,insertSequenceNumber:AP,insertArrowCrossHead:LP,insertDatabaseIcon:wP,insertComputerIcon:TP,insertClockIcon:SP,getTextObj:wv,getNoteRect:DP,fixLifeLineHeights:_v,sanitizeUrl:dn.sanitizeUrl},at={},kt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:d(function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(e=>e.height||0))+(this.loops.length===0?0:this.loops.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.messages.length===0?0:this.messages.map(e=>e.height||0).reduce((e,t)=>e+t))+(this.notes.length===0?0:this.notes.map(e=>e.height||0).reduce((e,t)=>e+t))},"getHeight"),clear:d(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:d(function(e){this.boxes.push(e)},"addBox"),addActor:d(function(e){this.actors.push(e)},"addActor"),addLoop:d(function(e){this.loops.push(e)},"addLoop"),addMessage:d(function(e){this.messages.push(e)},"addMessage"),addNote:d(function(e){this.notes.push(e)},"addNote"),lastActor:d(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:d(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:d(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:d(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:d(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Cv(it())},"init"),updateVal:d(function(e,t,r,i){e[t]===void 0?e[t]=r:e[t]=i(r,e[t])},"updateVal"),updateBounds:d(function(e,t,r,i){const s=this;let n=0;function a(o){return d(function(l){n++;const u=s.sequenceItems.length-n+1;s.updateVal(l,"starty",t-u*at.boxMargin,Math.min),s.updateVal(l,"stopy",i+u*at.boxMargin,Math.max),s.updateVal(kt.data,"startx",e-u*at.boxMargin,Math.min),s.updateVal(kt.data,"stopx",r+u*at.boxMargin,Math.max),o!=="activation"&&(s.updateVal(l,"startx",e-u*at.boxMargin,Math.min),s.updateVal(l,"stopx",r+u*at.boxMargin,Math.max),s.updateVal(kt.data,"starty",t-u*at.boxMargin,Math.min),s.updateVal(kt.data,"stopy",i+u*at.boxMargin,Math.max))},"updateItemBounds")}d(a,"updateFn"),this.sequenceItems.forEach(a()),this.activations.forEach(a("activation"))},"updateBounds"),insert:d(function(e,t,r,i){const s=Ct.getMin(e,r),n=Ct.getMax(e,r),a=Ct.getMin(t,i),o=Ct.getMax(t,i);this.updateVal(kt.data,"startx",s,Math.min),this.updateVal(kt.data,"starty",a,Math.min),this.updateVal(kt.data,"stopx",n,Math.max),this.updateVal(kt.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},"insert"),newActivation:d(function(e,t,r){const i=r.get(e.from),s=xu(e.from).length||0,n=i.x+i.width/2+(s-1)*at.activationWidth/2;this.activations.push({startx:n,starty:this.verticalPos+2,stopx:n+at.activationWidth,stopy:void 0,actor:e.from,anchored:Ie.anchorElement(t)})},"newActivation"),endActivation:d(function(e){const t=this.activations.map(function(r){return r.actor}).lastIndexOf(e.from);return this.activations.splice(t,1)[0]},"endActivation"),createLoop:d(function(e={message:void 0,wrap:!1,width:void 0},t){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:e.message,wrap:e.wrap,width:e.width,height:0,fill:t}},"createLoop"),newLoop:d(function(e={message:void 0,wrap:!1,width:void 0},t){this.sequenceItems.push(this.createLoop(e,t))},"newLoop"),endLoop:d(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:d(function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},"isLoopOverlap"),addSectionToLoop:d(function(e){const t=this.sequenceItems.pop();t.sections=t.sections||[],t.sectionTitles=t.sectionTitles||[],t.sections.push({y:kt.getVerticalPos(),height:0}),t.sectionTitles.push(e),this.sequenceItems.push(t)},"addSectionToLoop"),saveVerticalPos:d(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:d(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:d(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=Ct.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:d(function(){return this.verticalPos},"getVerticalPos"),getBounds:d(function(){return{bounds:this.data,models:this.models}},"getBounds")},BP=d(async function(e,t){kt.bumpVerticalPos(at.boxMargin),t.height=at.boxMargin,t.starty=kt.getVerticalPos();const r=qr();r.x=t.startx,r.y=t.starty,r.width=t.width||at.width,r.class="note";const i=e.append("g"),s=Ie.drawRect(i,r),n=Qf();n.x=t.startx,n.y=t.starty,n.width=r.width,n.dy="1em",n.text=t.message,n.class="noteText",n.fontFamily=at.noteFontFamily,n.fontSize=at.noteFontSize,n.fontWeight=at.noteFontWeight,n.anchor=at.noteAlign,n.textMargin=at.noteMargin,n.valign="center";const a=Re(n.text)?await Lh(i,n):yo(i,n),o=Math.round(a.map(h=>(h._groups||h)[0][0].getBBox().height).reduce((h,l)=>h+l));s.attr("height",o+2*at.noteMargin),t.height+=o+2*at.noteMargin,kt.bumpVerticalPos(o+2*at.noteMargin),t.stopy=t.starty+o+2*at.noteMargin,t.stopx=t.startx+r.width,kt.insert(t.startx,t.starty,t.stopx,t.stopy),kt.models.addNote(t)},"drawNote"),un=d(e=>({fontFamily:e.messageFontFamily,fontSize:e.messageFontSize,fontWeight:e.messageFontWeight}),"messageFont"),Gn=d(e=>({fontFamily:e.noteFontFamily,fontSize:e.noteFontSize,fontWeight:e.noteFontWeight}),"noteFont"),L1=d(e=>({fontFamily:e.actorFontFamily,fontSize:e.actorFontSize,fontWeight:e.actorFontWeight}),"actorFont");async function Tv(e,t){kt.bumpVerticalPos(10);const{startx:r,stopx:i,message:s}=t,n=Ct.splitBreaks(s).length,a=Re(s),o=a?await Nl(s,it()):ie.calculateTextDimensions(s,un(at));if(!a){const f=o.height/n;t.height+=f,kt.bumpVerticalPos(f)}let h,l=o.height-10;const u=o.width;if(r===i){h=kt.getVerticalPos()+l,at.rightAngles||(l+=at.boxMargin,h=kt.getVerticalPos()+l),l+=30;const f=Ct.getMax(u/2,at.width/2);kt.insert(r-f,kt.getVerticalPos()-10+l,i+f,kt.getVerticalPos()+30+l)}else l+=at.boxMargin,h=kt.getVerticalPos()+l,kt.insert(r,h-10,i,h);return kt.bumpVerticalPos(l),t.height+=l,t.stopy=t.starty+t.height,kt.insert(t.fromBounds,t.starty,t.toBounds,t.stopy),h}d(Tv,"boundMessage");var IP=d(async function(e,t,r,i){const{startx:s,stopx:n,starty:a,message:o,type:h,sequenceIndex:l,sequenceVisible:u}=t,f=ie.calculateTextDimensions(o,un(at)),p=Qf();p.x=s,p.y=a+10,p.width=n-s,p.class="messageText",p.dy="1em",p.text=o,p.fontFamily=at.messageFontFamily,p.fontSize=at.messageFontSize,p.fontWeight=at.messageFontWeight,p.anchor=at.messageAlign,p.valign="center",p.textMargin=at.wrapPadding,p.tspan=!1,Re(p.text)?await Lh(e,p,{startx:s,stopx:n,starty:r}):yo(e,p);const g=f.width;let y;s===n?at.rightAngles?y=e.append("path").attr("d",`M  ${s},${r} H ${s+Ct.getMax(at.width/2,g/2)} V ${r+25} H ${s}`):y=e.append("path").attr("d","M "+s+","+r+" C "+(s+60)+","+(r-10)+" "+(s+60)+","+(r+30)+" "+s+","+(r+20)):(y=e.append("line"),y.attr("x1",s),y.attr("y1",r),y.attr("x2",n),y.attr("y2",r)),h===i.db.LINETYPE.DOTTED||h===i.db.LINETYPE.DOTTED_CROSS||h===i.db.LINETYPE.DOTTED_POINT||h===i.db.LINETYPE.DOTTED_OPEN||h===i.db.LINETYPE.BIDIRECTIONAL_DOTTED?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let m="";at.arrowMarkerAbsolute&&(m=qh(!0)),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(h===i.db.LINETYPE.SOLID||h===i.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+m+"#arrowhead)"),(h===i.db.LINETYPE.BIDIRECTIONAL_SOLID||h===i.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(y.attr("marker-start","url("+m+"#arrowhead)"),y.attr("marker-end","url("+m+"#arrowhead)")),(h===i.db.LINETYPE.SOLID_POINT||h===i.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+m+"#filled-head)"),(h===i.db.LINETYPE.SOLID_CROSS||h===i.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+m+"#crosshead)"),(u||at.showSequenceNumbers)&&((h===i.db.LINETYPE.BIDIRECTIONAL_SOLID||h===i.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(s<n?y.attr("x1",s+12):y.attr("x1",s+6)),e.append("line").attr("x1",s).attr("y1",r).attr("x2",s).attr("y2",r).attr("stroke-width",0).attr("marker-start","url("+m+"#sequencenumber)"),e.append("text").attr("x",s).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(l))},"drawMessage"),NP=d(function(e,t,r,i,s,n,a){let o=0,h=0,l,u=0;for(const f of i){const p=t.get(f),g=p.box;l&&l!=g&&(a||kt.models.addBox(l),h+=at.boxMargin+l.margin),g&&g!=l&&(a||(g.x=o+h,g.y=s),h+=g.margin),p.width=p.width||at.width,p.height=Ct.getMax(p.height||at.height,at.height),p.margin=p.margin||at.actorMargin,u=Ct.getMax(u,p.height),r.get(p.name)&&(h+=p.width/2),p.x=o+h,p.starty=kt.getVerticalPos(),kt.insert(p.x,s,p.x+p.width,p.height),o+=p.width+h,p.box&&(p.box.width=o+g.margin-p.box.x),h=p.margin,l=p.box,kt.models.addActor(p)}l&&!a&&kt.models.addBox(l),kt.bumpVerticalPos(u)},"addActorRenderingData"),D1=d(async function(e,t,r,i){if(i){let s=0;kt.bumpVerticalPos(at.boxMargin*2);for(const n of r){const a=t.get(n);a.stopy||(a.stopy=kt.getVerticalPos());const o=await Ie.drawActor(e,a,at,!0);s=Ct.getMax(s,o)}kt.bumpVerticalPos(s+at.boxMargin)}else for(const s of r){const n=t.get(s);await Ie.drawActor(e,n,at,!1)}},"drawActors"),Sv=d(function(e,t,r,i){let s=0,n=0;for(const a of r){const o=t.get(a),h=MP(o),l=Ie.drawPopup(e,o,h,at,at.forceMenus,i);l.height>s&&(s=l.height),l.width+o.x>n&&(n=l.width+o.x)}return{maxHeight:s,maxWidth:n}},"drawActorsPopup"),Cv=d(function(e){Fe(at,e),e.fontFamily&&(at.actorFontFamily=at.noteFontFamily=at.messageFontFamily=e.fontFamily),e.fontSize&&(at.actorFontSize=at.noteFontSize=at.messageFontSize=e.fontSize),e.fontWeight&&(at.actorFontWeight=at.noteFontWeight=at.messageFontWeight=e.fontWeight)},"setConf"),xu=d(function(e){return kt.activations.filter(function(t){return t.actor===e})},"actorActivations"),Sg=d(function(e,t){const r=t.get(e),i=xu(e),s=i.reduce(function(a,o){return Ct.getMin(a,o.startx)},r.x+r.width/2-1),n=i.reduce(function(a,o){return Ct.getMax(a,o.stopx)},r.x+r.width/2+1);return[s,n]},"activationBounds");function Jr(e,t,r,i,s){kt.bumpVerticalPos(r);let n=i;if(t.id&&t.message&&e[t.id]){const a=e[t.id].width,o=un(at);t.message=ie.wrapLabel(`[${t.message}]`,a-2*at.wrapPadding,o),t.width=a,t.wrap=!0;const h=ie.calculateTextDimensions(t.message,o),l=Ct.getMax(h.height,at.labelBoxHeight);n=i+l,P.debug(`${l} - ${t.message}`)}s(t),kt.bumpVerticalPos(n)}d(Jr,"adjustLoopHeightForWrap");function Ev(e,t,r,i,s,n,a){function o(u,f){u.x<s.get(e.from).x?(kt.insert(t.stopx-f,t.starty,t.startx,t.stopy+u.height/2+at.noteMargin),t.stopx=t.stopx+f):(kt.insert(t.startx,t.starty,t.stopx+f,t.stopy+u.height/2+at.noteMargin),t.stopx=t.stopx-f)}d(o,"receiverAdjustment");function h(u,f){u.x<s.get(e.to).x?(kt.insert(t.startx-f,t.starty,t.stopx,t.stopy+u.height/2+at.noteMargin),t.startx=t.startx+f):(kt.insert(t.stopx,t.starty,t.startx+f,t.stopy+u.height/2+at.noteMargin),t.startx=t.startx-f)}d(h,"senderAdjustment");const l=[hc.ACTOR,hc.CONTROL,hc.ENTITY,hc.DATABASE];if(n.get(e.to)==i){const u=s.get(e.to),f=l.includes(u.type)?Us/2+3:u.width/2+3;o(u,f),u.starty=r-u.height/2,kt.bumpVerticalPos(u.height/2)}else if(a.get(e.from)==i){const u=s.get(e.from);if(at.mirrorActors){const f=l.includes(u.type)?Us/2:u.width/2;h(u,f)}u.stopy=r-u.height/2,kt.bumpVerticalPos(u.height/2)}else if(a.get(e.to)==i){const u=s.get(e.to);if(at.mirrorActors){const f=l.includes(u.type)?Us/2+3:u.width/2+3;o(u,f)}u.stopy=r-u.height/2,kt.bumpVerticalPos(u.height/2)}}d(Ev,"adjustCreatedDestroyedData");var $P=d(async function(e,t,r,i){const{securityLevel:s,sequence:n}=it();at=n;let a;s==="sandbox"&&(a=_t("#i"+t));const o=_t(s==="sandbox"?a.nodes()[0].contentDocument.body:"body"),h=s==="sandbox"?a.nodes()[0].contentDocument:document;kt.init(),P.debug(i.db);const l=s==="sandbox"?o.select(`[id="${t}"]`):_t(`[id="${t}"]`),u=i.db.getActors(),f=i.db.getCreatedActors(),p=i.db.getDestroyedActors(),g=i.db.getBoxes();let y=i.db.getActorKeys();const m=i.db.getMessages(),x=i.db.getDiagramTitle(),b=i.db.hasAtLeastOneBox(),_=i.db.hasAtLeastOneBoxWithTitle(),S=await Av(u,m,i);if(at.height=await Lv(u,S,g),Ie.insertComputerIcon(l),Ie.insertDatabaseIcon(l),Ie.insertClockIcon(l),b&&(kt.bumpVerticalPos(at.boxMargin),_&&kt.bumpVerticalPos(g[0].textMaxHeight)),at.hideUnusedParticipants===!0){const I=new Set;m.forEach(B=>{I.add(B.from),I.add(B.to)}),y=y.filter(B=>I.has(B))}NP(l,u,f,y,0,m,!1);const C=await OP(m,u,S,i);Ie.insertArrowHead(l),Ie.insertArrowCrossHead(l),Ie.insertArrowFilledHead(l),Ie.insertSequenceNumber(l);function k(I,B){const X=kt.endActivation(I);X.starty+18>B&&(X.starty=B-6,B+=12),Ie.drawActivation(l,X,B,at,xu(I.from).length),kt.insert(X.startx,B-10,X.stopx,B)}d(k,"activeEnd");let v=1,A=1;const L=[],w=[];let R=0;for(const I of m){let B,X,$;switch(I.type){case i.db.LINETYPE.NOTE:kt.resetVerticalPos(),X=I.noteModel,await BP(l,X);break;case i.db.LINETYPE.ACTIVE_START:kt.newActivation(I,l,u);break;case i.db.LINETYPE.ACTIVE_END:k(I,kt.getVerticalPos());break;case i.db.LINETYPE.LOOP_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G));break;case i.db.LINETYPE.LOOP_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"loop",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;case i.db.LINETYPE.RECT_START:Jr(C,I,at.boxMargin,at.boxMargin,G=>kt.newLoop(void 0,G.message));break;case i.db.LINETYPE.RECT_END:B=kt.endLoop(),w.push(B),kt.models.addLoop(B),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos());break;case i.db.LINETYPE.OPT_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G));break;case i.db.LINETYPE.OPT_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"opt",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;case i.db.LINETYPE.ALT_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G));break;case i.db.LINETYPE.ALT_ELSE:Jr(C,I,at.boxMargin+at.boxTextMargin,at.boxMargin,G=>kt.addSectionToLoop(G));break;case i.db.LINETYPE.ALT_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"alt",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G)),kt.saveVerticalPos();break;case i.db.LINETYPE.PAR_AND:Jr(C,I,at.boxMargin+at.boxTextMargin,at.boxMargin,G=>kt.addSectionToLoop(G));break;case i.db.LINETYPE.PAR_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"par",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;case i.db.LINETYPE.AUTONUMBER:v=I.message.start||v,A=I.message.step||A,I.message.visible?i.db.enableSequenceNumbers():i.db.disableSequenceNumbers();break;case i.db.LINETYPE.CRITICAL_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G));break;case i.db.LINETYPE.CRITICAL_OPTION:Jr(C,I,at.boxMargin+at.boxTextMargin,at.boxMargin,G=>kt.addSectionToLoop(G));break;case i.db.LINETYPE.CRITICAL_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"critical",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;case i.db.LINETYPE.BREAK_START:Jr(C,I,at.boxMargin,at.boxMargin+at.boxTextMargin,G=>kt.newLoop(G));break;case i.db.LINETYPE.BREAK_END:B=kt.endLoop(),await Ie.drawLoop(l,B,"break",at),kt.bumpVerticalPos(B.stopy-kt.getVerticalPos()),kt.models.addLoop(B);break;default:try{$=I.msgModel,$.starty=kt.getVerticalPos(),$.sequenceIndex=v,$.sequenceVisible=i.db.showSequenceNumbers();const G=await Tv(l,$);Ev(I,$,G,R,u,f,p),L.push({messageModel:$,lineStartY:G}),kt.models.addMessage($)}catch(G){P.error("error while drawing message",G)}}[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT,i.db.LINETYPE.BIDIRECTIONAL_SOLID,i.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(I.type)&&(v=v+A),R++}P.debug("createdActors",f),P.debug("destroyedActors",p),await D1(l,u,y,!1);for(const I of L)await IP(l,I.messageModel,I.lineStartY,i);at.mirrorActors&&await D1(l,u,y,!0),w.forEach(I=>Ie.drawBackgroundRect(l,I)),_v(l,u,y,at);for(const I of kt.models.boxes){I.height=kt.getVerticalPos()-I.y,kt.insert(I.x,I.y,I.x+I.width,I.height);const B=at.boxMargin*2;I.startx=I.x-B,I.starty=I.y-B*.25,I.stopx=I.startx+I.width+2*B,I.stopy=I.starty+I.height+B*.75,I.stroke="rgb(0,0,0, 0.5)",Ie.drawBox(l,I,at)}b&&kt.bumpVerticalPos(at.boxMargin);const T=Sv(l,u,y,h),{bounds:V}=kt.getBounds();V.startx===void 0&&(V.startx=0),V.starty===void 0&&(V.starty=0),V.stopx===void 0&&(V.stopx=0),V.stopy===void 0&&(V.stopy=0);let N=V.stopy-V.starty;N<T.maxHeight&&(N=T.maxHeight);let D=N+2*at.diagramMarginY;at.mirrorActors&&(D=D-at.boxMargin+at.bottomMarginAdj);let E=V.stopx-V.startx;E<T.maxWidth&&(E=T.maxWidth);const M=E+2*at.diagramMarginX;x&&l.append("text").text(x).attr("x",(V.stopx-V.startx)/2-2*at.diagramMarginX).attr("y",-25),Er(l,D,M,at.useMaxWidth);const F=x?40:0;l.attr("viewBox",V.startx-at.diagramMarginX+" -"+(at.diagramMarginY+F)+" "+M+" "+(D+F)),P.debug("models:",kt.models)},"draw");async function Av(e,t,r){const i={};for(const s of t)if(e.get(s.to)&&e.get(s.from)){const n=e.get(s.to);if(s.placement===r.db.PLACEMENT.LEFTOF&&!n.prevActor||s.placement===r.db.PLACEMENT.RIGHTOF&&!n.nextActor)continue;const a=s.placement!==void 0,o=!a,h=a?Gn(at):un(at),l=s.wrap?ie.wrapLabel(s.message,at.width-2*at.wrapPadding,h):s.message,f=(Re(l)?await Nl(s.message,it()):ie.calculateTextDimensions(l,h)).width+2*at.wrapPadding;o&&s.from===n.nextActor?i[s.to]=Ct.getMax(i[s.to]||0,f):o&&s.from===n.prevActor?i[s.from]=Ct.getMax(i[s.from]||0,f):o&&s.from===s.to?(i[s.from]=Ct.getMax(i[s.from]||0,f/2),i[s.to]=Ct.getMax(i[s.to]||0,f/2)):s.placement===r.db.PLACEMENT.RIGHTOF?i[s.from]=Ct.getMax(i[s.from]||0,f):s.placement===r.db.PLACEMENT.LEFTOF?i[n.prevActor]=Ct.getMax(i[n.prevActor]||0,f):s.placement===r.db.PLACEMENT.OVER&&(n.prevActor&&(i[n.prevActor]=Ct.getMax(i[n.prevActor]||0,f/2)),n.nextActor&&(i[s.from]=Ct.getMax(i[s.from]||0,f/2)))}return P.debug("maxMessageWidthPerActor:",i),i}d(Av,"getMaxMessageWidthPerActor");var MP=d(function(e){let t=0;const r=L1(at);for(const i in e.links){const n=ie.calculateTextDimensions(i,r).width+2*at.wrapPadding+2*at.boxMargin;t<n&&(t=n)}return t},"getRequiredPopupWidth");async function Lv(e,t,r){let i=0;for(const n of e.keys()){const a=e.get(n);a.wrap&&(a.description=ie.wrapLabel(a.description,at.width-2*at.wrapPadding,L1(at)));const o=Re(a.description)?await Nl(a.description,it()):ie.calculateTextDimensions(a.description,L1(at));a.width=a.wrap?at.width:Ct.getMax(at.width,o.width+2*at.wrapPadding),a.height=a.wrap?Ct.getMax(o.height,at.height):at.height,i=Ct.getMax(i,a.height)}for(const n in t){const a=e.get(n);if(!a)continue;const o=e.get(a.nextActor);if(!o){const f=t[n]+at.actorMargin-a.width/2;a.margin=Ct.getMax(f,at.actorMargin);continue}const l=t[n]+at.actorMargin-a.width/2-o.width/2;a.margin=Ct.getMax(l,at.actorMargin)}let s=0;return r.forEach(n=>{const a=un(at);let o=n.actorKeys.reduce((f,p)=>f+=e.get(p).width+(e.get(p).margin||0),0);const h=at.boxMargin*8;o+=h,o-=2*at.boxTextMargin,n.wrap&&(n.name=ie.wrapLabel(n.name,o-2*at.wrapPadding,a));const l=ie.calculateTextDimensions(n.name,a);s=Ct.getMax(l.height,s);const u=Ct.getMax(o,l.width+2*at.wrapPadding);if(n.margin=at.boxTextMargin,o<u){const f=(u-o)/2;n.margin+=f}}),r.forEach(n=>n.textMaxHeight=s),Ct.getMax(i,at.height)}d(Lv,"calculateActorMargins");var FP=d(async function(e,t,r){const i=t.get(e.from),s=t.get(e.to),n=i.x,a=s.x,o=e.wrap&&e.message;let h=Re(e.message)?await Nl(e.message,it()):ie.calculateTextDimensions(o?ie.wrapLabel(e.message,at.width,Gn(at)):e.message,Gn(at));const l={width:o?at.width:Ct.getMax(at.width,h.width+2*at.noteMargin),height:0,startx:i.x,stopx:0,starty:0,stopy:0,message:e.message};return e.placement===r.db.PLACEMENT.RIGHTOF?(l.width=o?Ct.getMax(at.width,h.width):Ct.getMax(i.width/2+s.width/2,h.width+2*at.noteMargin),l.startx=n+(i.width+at.actorMargin)/2):e.placement===r.db.PLACEMENT.LEFTOF?(l.width=o?Ct.getMax(at.width,h.width+2*at.noteMargin):Ct.getMax(i.width/2+s.width/2,h.width+2*at.noteMargin),l.startx=n-l.width+(i.width-at.actorMargin)/2):e.to===e.from?(h=ie.calculateTextDimensions(o?ie.wrapLabel(e.message,Ct.getMax(at.width,i.width),Gn(at)):e.message,Gn(at)),l.width=o?Ct.getMax(at.width,i.width):Ct.getMax(i.width,at.width,h.width+2*at.noteMargin),l.startx=n+(i.width-l.width)/2):(l.width=Math.abs(n+i.width/2-(a+s.width/2))+at.actorMargin,l.startx=n<a?n+i.width/2-at.actorMargin/2:a+s.width/2-at.actorMargin/2),o&&(l.message=ie.wrapLabel(e.message,l.width-2*at.wrapPadding,Gn(at))),P.debug(`NM:[${l.startx},${l.stopx},${l.starty},${l.stopy}:${l.width},${l.height}=${e.message}]`),l},"buildNoteModel"),PP=d(function(e,t,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type))return{};const[i,s]=Sg(e.from,t),[n,a]=Sg(e.to,t),o=i<=n;let h=o?s:i,l=o?n:a;const u=Math.abs(n-a)>2,f=d(m=>o?-m:m,"adjustValue");e.from===e.to?l=h:(e.activate&&!u&&(l+=f(at.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(e.type)||(l+=f(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(e.type)&&(h-=f(3)));const p=[i,s,n,a],g=Math.abs(h-l);e.wrap&&e.message&&(e.message=ie.wrapLabel(e.message,Ct.getMax(g+2*at.wrapPadding,at.width),un(at)));const y=ie.calculateTextDimensions(e.message,un(at));return{width:Ct.getMax(e.wrap?0:y.width+2*at.wrapPadding,g+2*at.wrapPadding,at.width),height:0,startx:h,stopx:l,starty:0,stopy:0,message:e.message,type:e.type,wrap:e.wrap,fromBounds:Math.min.apply(null,p),toBounds:Math.max.apply(null,p)}},"buildMessageModel"),OP=d(async function(e,t,r,i){const s={},n=[];let a,o,h;for(const l of e){switch(l.type){case i.db.LINETYPE.LOOP_START:case i.db.LINETYPE.ALT_START:case i.db.LINETYPE.OPT_START:case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:case i.db.LINETYPE.CRITICAL_START:case i.db.LINETYPE.BREAK_START:n.push({id:l.id,msg:l.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case i.db.LINETYPE.ALT_ELSE:case i.db.LINETYPE.PAR_AND:case i.db.LINETYPE.CRITICAL_OPTION:l.message&&(a=n.pop(),s[a.id]=a,s[l.id]=a,n.push(a));break;case i.db.LINETYPE.LOOP_END:case i.db.LINETYPE.ALT_END:case i.db.LINETYPE.OPT_END:case i.db.LINETYPE.PAR_END:case i.db.LINETYPE.CRITICAL_END:case i.db.LINETYPE.BREAK_END:a=n.pop(),s[a.id]=a;break;case i.db.LINETYPE.ACTIVE_START:{const f=t.get(l.from?l.from:l.to.actor),p=xu(l.from?l.from:l.to.actor).length,g=f.x+f.width/2+(p-1)*at.activationWidth/2,y={startx:g,stopx:g+at.activationWidth,actor:l.from,enabled:!0};kt.activations.push(y)}break;case i.db.LINETYPE.ACTIVE_END:{const f=kt.activations.map(p=>p.actor).lastIndexOf(l.from);kt.activations.splice(f,1).splice(0,1)}break}l.placement!==void 0?(o=await FP(l,t,i),l.noteModel=o,n.forEach(f=>{a=f,a.from=Ct.getMin(a.from,o.startx),a.to=Ct.getMax(a.to,o.startx+o.width),a.width=Ct.getMax(a.width,Math.abs(a.from-a.to))-at.labelBoxWidth})):(h=PP(l,t,i),l.msgModel=h,h.startx&&h.stopx&&n.length>0&&n.forEach(f=>{if(a=f,h.startx===h.stopx){const p=t.get(l.from),g=t.get(l.to);a.from=Ct.getMin(p.x-h.width/2,p.x-p.width/2,a.from),a.to=Ct.getMax(g.x+h.width/2,g.x+p.width/2,a.to),a.width=Ct.getMax(a.width,Math.abs(a.to-a.from))-at.labelBoxWidth}else a.from=Ct.getMin(h.startx,a.from),a.to=Ct.getMax(h.stopx,a.to),a.width=Ct.getMax(a.width,h.width)-at.labelBoxWidth}))}return kt.activations=[],P.debug("Loop type widths:",s),s},"calculateLoopBounds"),VP={bounds:kt,drawActors:D1,drawActorsPopup:Sv,setConf:Cv,draw:$P},zP={parser:rP,get db(){return new aP},renderer:VP,styles:lP,init:d(e=>{e.sequence||(e.sequence={}),e.wrap&&(e.sequence.wrap=e.wrap,md({sequence:{wrap:e.wrap}}))},"init")};const WP=Object.freeze(Object.defineProperty({__proto__:null,diagram:zP},Symbol.toStringTag,{value:"Module"}));var R1=(function(){var e=d(function(St,ut,pt,wt){for(pt=pt||{},wt=St.length;wt--;pt[St[wt]]=ut);return pt},"o"),t=[1,18],r=[1,19],i=[1,20],s=[1,41],n=[1,42],a=[1,26],o=[1,24],h=[1,25],l=[1,32],u=[1,33],f=[1,34],p=[1,45],g=[1,35],y=[1,36],m=[1,37],x=[1,38],b=[1,27],_=[1,28],S=[1,29],C=[1,30],k=[1,31],v=[1,44],A=[1,46],L=[1,43],w=[1,47],R=[1,9],T=[1,8,9],V=[1,58],N=[1,59],D=[1,60],E=[1,61],M=[1,62],F=[1,63],I=[1,64],B=[1,8,9,41],X=[1,76],$=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],G=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],nt=[13,60,86,100,102,103],ht=[13,60,73,74,86,100,102,103],tt=[13,60,68,69,70,71,72,86,100,102,103],dt=[1,100],st=[1,117],ot=[1,113],K=[1,109],lt=[1,115],U=[1,110],j=[1,111],Q=[1,112],W=[1,114],et=[1,116],z=[22,48,60,61,82,86,87,88,89,90],vt=[1,8,9,39,41,44],O=[1,8,9,22],Zt=[1,145],J=[1,8,9,61],Yt=[1,8,9,22,48,60,61,82,86,87,88,89,90],It={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:d(function(ut,pt,wt,rt,bt,q,Lt){var Y=q.length-1;switch(bt){case 8:this.$=q[Y-1];break;case 9:case 10:case 13:case 15:this.$=q[Y];break;case 11:case 14:this.$=q[Y-2]+"."+q[Y];break;case 12:case 16:this.$=q[Y-1]+q[Y];break;case 17:case 18:this.$=q[Y-1]+"~"+q[Y]+"~";break;case 19:rt.addRelation(q[Y]);break;case 20:q[Y-1].title=rt.cleanupLabel(q[Y]),rt.addRelation(q[Y-1]);break;case 31:this.$=q[Y].trim(),rt.setAccTitle(this.$);break;case 32:case 33:this.$=q[Y].trim(),rt.setAccDescription(this.$);break;case 34:rt.addClassesToNamespace(q[Y-3],q[Y-1]);break;case 35:rt.addClassesToNamespace(q[Y-4],q[Y-1]);break;case 36:this.$=q[Y],rt.addNamespace(q[Y]);break;case 37:this.$=[q[Y]];break;case 38:this.$=[q[Y-1]];break;case 39:q[Y].unshift(q[Y-2]),this.$=q[Y];break;case 41:rt.setCssClass(q[Y-2],q[Y]);break;case 42:rt.addMembers(q[Y-3],q[Y-1]);break;case 44:rt.setCssClass(q[Y-5],q[Y-3]),rt.addMembers(q[Y-5],q[Y-1]);break;case 45:this.$=q[Y],rt.addClass(q[Y]);break;case 46:this.$=q[Y-1],rt.addClass(q[Y-1]),rt.setClassLabel(q[Y-1],q[Y]);break;case 50:rt.addAnnotation(q[Y],q[Y-2]);break;case 51:case 64:this.$=[q[Y]];break;case 52:q[Y].push(q[Y-1]),this.$=q[Y];break;case 53:break;case 54:rt.addMember(q[Y-1],rt.cleanupLabel(q[Y]));break;case 55:break;case 56:break;case 57:this.$={id1:q[Y-2],id2:q[Y],relation:q[Y-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:q[Y-3],id2:q[Y],relation:q[Y-1],relationTitle1:q[Y-2],relationTitle2:"none"};break;case 59:this.$={id1:q[Y-3],id2:q[Y],relation:q[Y-2],relationTitle1:"none",relationTitle2:q[Y-1]};break;case 60:this.$={id1:q[Y-4],id2:q[Y],relation:q[Y-2],relationTitle1:q[Y-3],relationTitle2:q[Y-1]};break;case 61:rt.addNote(q[Y],q[Y-1]);break;case 62:rt.addNote(q[Y]);break;case 63:this.$=q[Y-2],rt.defineClass(q[Y-1],q[Y]);break;case 65:this.$=q[Y-2].concat([q[Y]]);break;case 66:rt.setDirection("TB");break;case 67:rt.setDirection("BT");break;case 68:rt.setDirection("RL");break;case 69:rt.setDirection("LR");break;case 70:this.$={type1:q[Y-2],type2:q[Y],lineType:q[Y-1]};break;case 71:this.$={type1:"none",type2:q[Y],lineType:q[Y-1]};break;case 72:this.$={type1:q[Y-1],type2:"none",lineType:q[Y]};break;case 73:this.$={type1:"none",type2:"none",lineType:q[Y]};break;case 74:this.$=rt.relationType.AGGREGATION;break;case 75:this.$=rt.relationType.EXTENSION;break;case 76:this.$=rt.relationType.COMPOSITION;break;case 77:this.$=rt.relationType.DEPENDENCY;break;case 78:this.$=rt.relationType.LOLLIPOP;break;case 79:this.$=rt.lineType.LINE;break;case 80:this.$=rt.lineType.DOTTED_LINE;break;case 81:case 87:this.$=q[Y-2],rt.setClickEvent(q[Y-1],q[Y]);break;case 82:case 88:this.$=q[Y-3],rt.setClickEvent(q[Y-2],q[Y-1]),rt.setTooltip(q[Y-2],q[Y]);break;case 83:this.$=q[Y-2],rt.setLink(q[Y-1],q[Y]);break;case 84:this.$=q[Y-3],rt.setLink(q[Y-2],q[Y-1],q[Y]);break;case 85:this.$=q[Y-3],rt.setLink(q[Y-2],q[Y-1]),rt.setTooltip(q[Y-2],q[Y]);break;case 86:this.$=q[Y-4],rt.setLink(q[Y-3],q[Y-2],q[Y]),rt.setTooltip(q[Y-3],q[Y-1]);break;case 89:this.$=q[Y-3],rt.setClickEvent(q[Y-2],q[Y-1],q[Y]);break;case 90:this.$=q[Y-4],rt.setClickEvent(q[Y-3],q[Y-2],q[Y-1]),rt.setTooltip(q[Y-3],q[Y]);break;case 91:this.$=q[Y-3],rt.setLink(q[Y-2],q[Y]);break;case 92:this.$=q[Y-4],rt.setLink(q[Y-3],q[Y-1],q[Y]);break;case 93:this.$=q[Y-4],rt.setLink(q[Y-3],q[Y-1]),rt.setTooltip(q[Y-3],q[Y]);break;case 94:this.$=q[Y-5],rt.setLink(q[Y-4],q[Y-2],q[Y]),rt.setTooltip(q[Y-4],q[Y-1]);break;case 95:this.$=q[Y-2],rt.setCssStyle(q[Y-1],q[Y]);break;case 96:rt.setCssClass(q[Y-1],q[Y]);break;case 97:this.$=[q[Y]];break;case 98:q[Y-2].push(q[Y]),this.$=q[Y-2];break;case 100:this.$=q[Y-1]+q[Y];break}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:i,38:22,42:s,43:23,46:n,49:a,51:o,52:h,54:l,56:u,57:f,60:p,62:g,63:y,64:m,65:x,75:b,76:_,78:S,82:C,83:k,86:v,100:A,102:L,103:w},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},e(R,[2,5],{8:[1,48]}),{8:[1,49]},e(T,[2,19],{22:[1,50]}),e(T,[2,21]),e(T,[2,22]),e(T,[2,23]),e(T,[2,24]),e(T,[2,25]),e(T,[2,26]),e(T,[2,27]),e(T,[2,28]),e(T,[2,29]),e(T,[2,30]),{34:[1,51]},{36:[1,52]},e(T,[2,33]),e(T,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:V,69:N,70:D,71:E,72:M,73:F,74:I}),{39:[1,65]},e(B,[2,40],{39:[1,67],44:[1,66]}),e(T,[2,55]),e(T,[2,56]),{16:68,60:p,86:v,100:A,102:L},{16:39,17:40,19:69,60:p,86:v,100:A,102:L,103:w},{16:39,17:40,19:70,60:p,86:v,100:A,102:L,103:w},{16:39,17:40,19:71,60:p,86:v,100:A,102:L,103:w},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:p,86:v,100:A,102:L,103:w},{13:X,55:75},{58:77,60:[1,78]},e(T,[2,66]),e(T,[2,67]),e(T,[2,68]),e(T,[2,69]),e($,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:p,86:v,100:A,102:L,103:w}),e($,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:p,86:v,100:A,102:L,103:w},{16:39,17:40,19:86,60:p,86:v,100:A,102:L,103:w},e(G,[2,123]),e(G,[2,124]),e(G,[2,125]),e(G,[2,126]),e([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),e(R,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:t,35:r,37:i,42:s,46:n,49:a,51:o,52:h,54:l,56:u,57:f,60:p,62:g,63:y,64:m,65:x,75:b,76:_,78:S,82:C,83:k,86:v,100:A,102:L,103:w}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:t,35:r,37:i,38:22,42:s,43:23,46:n,49:a,51:o,52:h,54:l,56:u,57:f,60:p,62:g,63:y,64:m,65:x,75:b,76:_,78:S,82:C,83:k,86:v,100:A,102:L,103:w},e(T,[2,20]),e(T,[2,31]),e(T,[2,32]),{13:[1,90],16:39,17:40,19:89,60:p,86:v,100:A,102:L,103:w},{53:91,66:56,67:57,68:V,69:N,70:D,71:E,72:M,73:F,74:I},e(T,[2,54]),{67:92,73:F,74:I},e(nt,[2,73],{66:93,68:V,69:N,70:D,71:E,72:M}),e(ht,[2,74]),e(ht,[2,75]),e(ht,[2,76]),e(ht,[2,77]),e(ht,[2,78]),e(tt,[2,79]),e(tt,[2,80]),{8:[1,95],24:96,40:94,43:23,46:n},{16:97,60:p,86:v,100:A,102:L},{41:[1,99],45:98,51:dt},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:st,48:ot,59:106,60:K,82:lt,84:107,85:108,86:U,87:j,88:Q,89:W,90:et},{60:[1,118]},{13:X,55:119},e(T,[2,62]),e(T,[2,128]),{22:st,48:ot,59:120,60:K,61:[1,121],82:lt,84:107,85:108,86:U,87:j,88:Q,89:W,90:et},e(z,[2,64]),{16:39,17:40,19:122,60:p,86:v,100:A,102:L,103:w},e($,[2,16]),e($,[2,17]),e($,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:p,86:v,100:A,102:L,103:w},{39:[2,10]},e(vt,[2,45],{11:125,12:[1,126]}),e(R,[2,7]),{9:[1,127]},e(O,[2,57]),{16:39,17:40,19:128,60:p,86:v,100:A,102:L,103:w},{13:[1,130],16:39,17:40,19:129,60:p,86:v,100:A,102:L,103:w},e(nt,[2,72],{66:131,68:V,69:N,70:D,71:E,72:M}),e(nt,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:n},{8:[1,134],41:[2,37]},e(B,[2,41],{39:[1,135]}),{41:[1,136]},e(B,[2,43]),{41:[2,51],45:137,51:dt},{16:39,17:40,19:138,60:p,86:v,100:A,102:L,103:w},e(T,[2,81],{13:[1,139]}),e(T,[2,83],{13:[1,141],77:[1,140]}),e(T,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},e(T,[2,95],{61:Zt}),e(J,[2,97],{85:146,22:st,48:ot,60:K,82:lt,86:U,87:j,88:Q,89:W,90:et}),e(Yt,[2,99]),e(Yt,[2,101]),e(Yt,[2,102]),e(Yt,[2,103]),e(Yt,[2,104]),e(Yt,[2,105]),e(Yt,[2,106]),e(Yt,[2,107]),e(Yt,[2,108]),e(Yt,[2,109]),e(T,[2,96]),e(T,[2,61]),e(T,[2,63],{61:Zt}),{60:[1,147]},e($,[2,14]),{15:148,16:84,17:85,60:p,86:v,100:A,102:L,103:w},{39:[2,12]},e(vt,[2,46]),{13:[1,149]},{1:[2,4]},e(O,[2,59]),e(O,[2,58]),{16:39,17:40,19:150,60:p,86:v,100:A,102:L,103:w},e(nt,[2,70]),e(T,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:n},{45:153,51:dt},e(B,[2,42]),{41:[2,52]},e(T,[2,50]),e(T,[2,82]),e(T,[2,84]),e(T,[2,85],{77:[1,154]}),e(T,[2,88]),e(T,[2,89],{13:[1,155]}),e(T,[2,91],{13:[1,157],77:[1,156]}),{22:st,48:ot,60:K,82:lt,84:158,85:108,86:U,87:j,88:Q,89:W,90:et},e(Yt,[2,100]),e(z,[2,65]),{39:[2,11]},{14:[1,159]},e(O,[2,60]),e(T,[2,35]),{41:[2,39]},{41:[1,160]},e(T,[2,86]),e(T,[2,90]),e(T,[2,92]),e(T,[2,93],{77:[1,161]}),e(J,[2,98],{85:146,22:st,48:ot,60:K,82:lt,86:U,87:j,88:Q,89:W,90:et}),e(vt,[2,8]),e(B,[2,44]),e(T,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:d(function(ut,pt){if(pt.recoverable)this.trace(ut);else{var wt=new Error(ut);throw wt.hash=pt,wt}},"parseError"),parse:d(function(ut){var pt=this,wt=[0],rt=[],bt=[null],q=[],Lt=this.table,Y="",Tt=0,ft=0,Ft=2,mt=1,xt=q.slice.call(arguments,1),re=Object.create(this.lexer),At={yy:{}};for(var pe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pe)&&(At.yy[pe]=this.yy[pe]);re.setInput(ut,At.yy),At.yy.lexer=re,At.yy.parser=this,typeof re.yylloc>"u"&&(re.yylloc={});var ar=re.yylloc;q.push(ar);var ae=re.options&&re.options.ranges;typeof At.yy.parseError=="function"?this.parseError=At.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function _e(Wt){wt.length=wt.length-2*Wt,bt.length=bt.length-Wt,q.length=q.length-Wt}d(_e,"popStack");function Ge(){var Wt;return Wt=rt.pop()||re.lex()||mt,typeof Wt!="number"&&(Wt instanceof Array&&(rt=Wt,Wt=rt.pop()),Wt=pt.symbols_[Wt]||Wt),Wt}d(Ge,"lex");for(var Kt,Ce,Se,tr,Ht={},ve,Ot,oe,ee;;){if(Ce=wt[wt.length-1],this.defaultActions[Ce]?Se=this.defaultActions[Ce]:((Kt===null||typeof Kt>"u")&&(Kt=Ge()),Se=Lt[Ce]&&Lt[Ce][Kt]),typeof Se>"u"||!Se.length||!Se[0]){var Xt="";ee=[];for(ve in Lt[Ce])this.terminals_[ve]&&ve>Ft&&ee.push("'"+this.terminals_[ve]+"'");re.showPosition?Xt="Parse error on line "+(Tt+1)+`:
`+re.showPosition()+`
Expecting `+ee.join(", ")+", got '"+(this.terminals_[Kt]||Kt)+"'":Xt="Parse error on line "+(Tt+1)+": Unexpected "+(Kt==mt?"end of input":"'"+(this.terminals_[Kt]||Kt)+"'"),this.parseError(Xt,{text:re.match,token:this.terminals_[Kt]||Kt,line:re.yylineno,loc:ar,expected:ee})}if(Se[0]instanceof Array&&Se.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ce+", token: "+Kt);switch(Se[0]){case 1:wt.push(Kt),bt.push(re.yytext),q.push(re.yylloc),wt.push(Se[1]),Kt=null,ft=re.yyleng,Y=re.yytext,Tt=re.yylineno,ar=re.yylloc;break;case 2:if(Ot=this.productions_[Se[1]][1],Ht.$=bt[bt.length-Ot],Ht._$={first_line:q[q.length-(Ot||1)].first_line,last_line:q[q.length-1].last_line,first_column:q[q.length-(Ot||1)].first_column,last_column:q[q.length-1].last_column},ae&&(Ht._$.range=[q[q.length-(Ot||1)].range[0],q[q.length-1].range[1]]),tr=this.performAction.apply(Ht,[Y,ft,Tt,At.yy,Se[1],bt,q].concat(xt)),typeof tr<"u")return tr;Ot&&(wt=wt.slice(0,-1*Ot*2),bt=bt.slice(0,-1*Ot),q=q.slice(0,-1*Ot)),wt.push(this.productions_[Se[1]][0]),bt.push(Ht.$),q.push(Ht._$),oe=Lt[wt[wt.length-2]][wt[wt.length-1]],wt.push(oe);break;case 3:return!0}}return!0},"parse")},se=(function(){var St={EOF:1,parseError:d(function(pt,wt){if(this.yy.parser)this.yy.parser.parseError(pt,wt);else throw new Error(pt)},"parseError"),setInput:d(function(ut,pt){return this.yy=pt||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var pt=ut.match(/(?:\r\n?|\n).*/g);return pt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},"input"),unput:d(function(ut){var pt=ut.length,wt=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pt),this.offset-=pt;var rt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),wt.length-1&&(this.yylineno-=wt.length-1);var bt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:wt?(wt.length===rt.length?this.yylloc.first_column:0)+rt[rt.length-wt.length].length-wt[0].length:this.yylloc.first_column-pt},this.options.ranges&&(this.yylloc.range=[bt[0],bt[0]+this.yyleng-pt]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(ut){this.unput(this.match.slice(ut))},"less"),pastInput:d(function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var ut=this.pastInput(),pt=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+pt+"^"},"showPosition"),test_match:d(function(ut,pt){var wt,rt,bt;if(this.options.backtrack_lexer&&(bt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(bt.yylloc.range=this.yylloc.range.slice(0))),rt=ut[0].match(/(?:\r\n?|\n).*/g),rt&&(this.yylineno+=rt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:rt?rt[rt.length-1].length-rt[rt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],wt=this.performAction.call(this,this.yy,this,pt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),wt)return wt;if(this._backtrack){for(var q in bt)this[q]=bt[q];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,pt,wt,rt;this._more||(this.yytext="",this.match="");for(var bt=this._currentRules(),q=0;q<bt.length;q++)if(wt=this._input.match(this.rules[bt[q]]),wt&&(!pt||wt[0].length>pt[0].length)){if(pt=wt,rt=q,this.options.backtrack_lexer){if(ut=this.test_match(wt,bt[q]),ut!==!1)return ut;if(this._backtrack){pt=!1;continue}else return!1}else if(!this.options.flex)break}return pt?(ut=this.test_match(pt,bt[rt]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var pt=this.next();return pt||this.lex()},"lex"),begin:d(function(pt){this.conditionStack.push(pt)},"begin"),popState:d(function(){var pt=this.conditionStack.length-1;return pt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(pt){return pt=this.conditionStack.length-1-Math.abs(pt||0),pt>=0?this.conditionStack[pt]:"INITIAL"},"topState"),pushState:d(function(pt){this.begin(pt)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:d(function(pt,wt,rt,bt){switch(rt){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:break;case 5:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 22:this.popState();break;case 23:return 80;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:return this.popState(),8;case 31:break;case 32:return this.begin("namespace-body"),39;case 33:return this.popState(),41;case 34:return"EOF_IN_STRUCT";case 35:return 8;case 36:break;case 37:return"EDGE_STATE";case 38:return this.begin("class"),46;case 39:return this.popState(),8;case 40:break;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 43:return this.popState(),41;case 44:return"EOF_IN_STRUCT";case 45:return"EDGE_STATE";case 46:return"OPEN_IN_STRUCT";case 47:break;case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 58:this.popState();break;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 61:this.popState();break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:return 77;case 65:return 77;case 66:return 77;case 67:return 77;case 68:return 69;case 69:return 69;case 70:return 71;case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:return 89;case 85:return 89;case 86:return 90;case 87:return"EQUALS";case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:return 48;case 96:return 48;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return St})();It.lexer=se;function gt(){this.yy={}}return d(gt,"Parser"),gt.prototype=It,It.Parser=gt,new gt})();R1.parser=R1;var Dv=R1,Cg=["#","+","~","-",""],ja,Eg=(ja=class{constructor(t,r){this.memberType=r,this.visibility="",this.classifier="",this.text="";const i=me(t,it());this.parseMember(i)}getDisplayDetails(){let t=this.visibility+ss(this.id);this.memberType==="method"&&(t+=`(${ss(this.parameters.trim())})`,this.returnType&&(t+=" : "+ss(this.returnType))),t=t.trim();const r=this.parseClassifier();return{displayText:t,cssStyle:r}}parseMember(t){let r="";if(this.memberType==="method"){const n=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(t);if(n){const a=n[1]?n[1].trim():"";if(Cg.includes(a)&&(this.visibility=a),this.id=n[2],this.parameters=n[3]?n[3].trim():"",r=n[4]?n[4].trim():"",this.returnType=n[5]?n[5].trim():"",r===""){const o=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(o)&&(r=o,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const s=t.length,n=t.substring(0,1),a=t.substring(s-1);Cg.includes(n)&&(this.visibility=n),/[$*]/.exec(a)&&(r=a),this.id=t.substring(this.visibility===""?0:1,r===""?s:s-1)}this.classifier=r,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const i=`${this.visibility?"\\"+this.visibility:""}${ss(this.id)}${this.memberType==="method"?`(${ss(this.parameters)})${this.returnType?" : "+ss(this.returnType):""}`:""}`;this.text=i.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},d(ja,"ClassMember"),ja),uc="classId-",Ag=0,Is=d(e=>Ct.sanitizeText(e,it()),"sanitizeText"),Xa,Rv=(Xa=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=d(t=>{let r=_t(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=_t("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),_t(t).select("svg").selectAll("g.node").on("mouseover",n=>{const a=_t(n.currentTarget);if(a.attr("title")===null)return;const h=this.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(a.attr("title")).style("left",window.scrollX+h.left+(h.right-h.left)/2+"px").style("top",window.scrollY+h.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),a.classed("hover",!0)}).on("mouseout",n=>{r.transition().duration(500).style("opacity",0),_t(n.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=We,this.getAccTitle=Ke,this.setAccDescription=Qe,this.getAccDescription=Ze,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getConfig=d(()=>it().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(t){const r=Ct.sanitizeText(t,it());let i="",s=r;if(r.indexOf("~")>0){const n=r.split("~");s=Is(n[0]),i=Is(n[1])}return{className:s,type:i}}setClassLabel(t,r){const i=Ct.sanitizeText(t,it());r&&(r=Is(r));const{className:s}=this.splitClassNameAndType(i);this.classes.get(s).label=r,this.classes.get(s).text=`${r}${this.classes.get(s).type?`<${this.classes.get(s).type}>`:""}`}addClass(t){const r=Ct.sanitizeText(t,it()),{className:i,type:s}=this.splitClassNameAndType(r);if(this.classes.has(i))return;const n=Ct.sanitizeText(i,it());this.classes.set(n,{id:n,type:s,label:n,text:`${n}${s?`&lt;${s}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:uc+n+"-"+Ag}),Ag++}addInterface(t,r){const i={id:`interface${this.interfaces.length}`,label:t,classId:r};this.interfaces.push(i)}lookUpDomId(t){const r=Ct.sanitizeText(t,it());if(this.classes.has(r))return this.classes.get(r).domId;throw new Error("Class not found: "+r)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",qe()}getClass(t){return this.classes.get(t)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(t){P.debug("Adding relation: "+JSON.stringify(t));const r=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];t.relation.type1===this.relationType.LOLLIPOP&&!r.includes(t.relation.type2)?(this.addClass(t.id2),this.addInterface(t.id1,t.id2),t.id1=`interface${this.interfaces.length-1}`):t.relation.type2===this.relationType.LOLLIPOP&&!r.includes(t.relation.type1)?(this.addClass(t.id1),this.addInterface(t.id2,t.id1),t.id2=`interface${this.interfaces.length-1}`):(this.addClass(t.id1),this.addClass(t.id2)),t.id1=this.splitClassNameAndType(t.id1).className,t.id2=this.splitClassNameAndType(t.id2).className,t.relationTitle1=Ct.sanitizeText(t.relationTitle1.trim(),it()),t.relationTitle2=Ct.sanitizeText(t.relationTitle2.trim(),it()),this.relations.push(t)}addAnnotation(t,r){const i=this.splitClassNameAndType(t).className;this.classes.get(i).annotations.push(r)}addMember(t,r){this.addClass(t);const i=this.splitClassNameAndType(t).className,s=this.classes.get(i);if(typeof r=="string"){const n=r.trim();n.startsWith("<<")&&n.endsWith(">>")?s.annotations.push(Is(n.substring(2,n.length-2))):n.indexOf(")")>0?s.methods.push(new Eg(n,"method")):n&&s.members.push(new Eg(n,"attribute"))}}addMembers(t,r){Array.isArray(r)&&(r.reverse(),r.forEach(i=>this.addMember(t,i)))}addNote(t,r){const i={id:`note${this.notes.length}`,class:r,text:t};this.notes.push(i)}cleanupLabel(t){return t.startsWith(":")&&(t=t.substring(1)),Is(t.trim())}setCssClass(t,r){t.split(",").forEach(i=>{let s=i;/\d/.exec(i[0])&&(s=uc+s);const n=this.classes.get(s);n&&(n.cssClasses+=" "+r)})}defineClass(t,r){for(const i of t){let s=this.styleClasses.get(i);s===void 0&&(s={id:i,styles:[],textStyles:[]},this.styleClasses.set(i,s)),r&&r.forEach(n=>{if(/color/.exec(n)){const a=n.replace("fill","bgFill");s.textStyles.push(a)}s.styles.push(n)}),this.classes.forEach(n=>{n.cssClasses.includes(i)&&n.styles.push(...r.flatMap(a=>a.split(",")))})}}setTooltip(t,r){t.split(",").forEach(i=>{r!==void 0&&(this.classes.get(i).tooltip=Is(r))})}getTooltip(t,r){return r&&this.namespaces.has(r)?this.namespaces.get(r).classes.get(t).tooltip:this.classes.get(t).tooltip}setLink(t,r,i){const s=it();t.split(",").forEach(n=>{let a=n;/\d/.exec(n[0])&&(a=uc+a);const o=this.classes.get(a);o&&(o.link=ie.formatUrl(r,s),s.securityLevel==="sandbox"?o.linkTarget="_top":typeof i=="string"?o.linkTarget=Is(i):o.linkTarget="_blank")}),this.setCssClass(t,"clickable")}setClickEvent(t,r,i){t.split(",").forEach(s=>{this.setClickFunc(s,r,i),this.classes.get(s).haveCallback=!0}),this.setCssClass(t,"clickable")}setClickFunc(t,r,i){const s=Ct.sanitizeText(t,it());if(it().securityLevel!=="loose"||r===void 0)return;const a=s;if(this.classes.has(a)){const o=this.lookUpDomId(a);let h=[];if(typeof i=="string"){h=i.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let l=0;l<h.length;l++){let u=h[l].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),h[l]=u}}h.length===0&&h.push(o),this.functions.push(()=>{const l=document.querySelector(`[id="${o}"]`);l!==null&&l.addEventListener("click",()=>{ie.runFunc(r,...h)},!1)})}}bindFunctions(t){this.functions.forEach(r=>{r(t)})}getDirection(){return this.direction}setDirection(t){this.direction=t}addNamespace(t){this.namespaces.has(t)||(this.namespaces.set(t,{id:t,classes:new Map,children:{},domId:uc+t+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(t){return this.namespaces.get(t)}getNamespaces(){return this.namespaces}addClassesToNamespace(t,r){if(this.namespaces.has(t))for(const i of r){const{className:s}=this.splitClassNameAndType(i);this.classes.get(s).parent=t,this.namespaces.get(t).classes.set(s,this.classes.get(s))}}setCssStyle(t,r){const i=this.classes.get(t);if(!(!r||!i))for(const s of r)s.includes(",")?i.styles.push(...s.split(",")):i.styles.push(s)}getArrowMarker(t){let r;switch(t){case 0:r="aggregation";break;case 1:r="extension";break;case 2:r="composition";break;case 3:r="dependency";break;case 4:r="lollipop";break;default:r="none"}return r}getData(){var n;const t=[],r=[],i=it();for(const a of this.namespaces.keys()){const o=this.namespaces.get(a);if(o){const h={id:o.id,label:o.id,isGroup:!0,padding:i.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:i.look};t.push(h)}}for(const a of this.classes.keys()){const o=this.classes.get(a);if(o){const h=o;h.parentId=o.parent,h.look=i.look,t.push(h)}}let s=0;for(const a of this.notes){s++;const o={id:a.id,label:a.text,isGroup:!1,shape:"note",padding:i.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${i.themeVariables.noteBkgColor}`,`stroke: ${i.themeVariables.noteBorderColor}`],look:i.look};t.push(o);const h=((n=this.classes.get(a.class))==null?void 0:n.id)??"";if(h){const l={id:`edgeNote${s}`,start:a.id,end:h,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:i.look};r.push(l)}}for(const a of this.interfaces){const o={id:a.id,label:a.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:i.look};t.push(o)}s=0;for(const a of this.relations){s++;const o={id:ea(a.id1,a.id2,{prefix:"id",counter:s}),start:a.id1,end:a.id2,type:"normal",label:a.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(a.relation.type1),arrowTypeEnd:this.getArrowMarker(a.relation.type2),startLabelRight:a.relationTitle1==="none"?"":a.relationTitle1,endLabelLeft:a.relationTitle2==="none"?"":a.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:a.style||"",pattern:a.relation.lineType==1?"dashed":"solid",look:i.look};r.push(o)}return{nodes:t,edges:r,other:{},config:i,direction:this.getDirection()}}},d(Xa,"ClassDB"),Xa),qP=d(e=>`g.classGroup text {
  fill: ${e.nodeBorder||e.classText};
  stroke: none;
  font-family: ${e.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${e.classText};
}
.edgeLabel .label rect {
  fill: ${e.mainBkg};
}
.label text {
  fill: ${e.classText};
}

.labelBkg {
  background: ${e.mainBkg};
}
.edgeLabel .label span {
  background: ${e.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.classGroup line {
  stroke: ${e.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${e.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${e.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${e.lineColor} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${e.mainBkg} !important;
  stroke: ${e.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
  ${ql()}
`,"getStyles"),Bv=qP,YP=d((e,t="TB")=>{if(!e.doc)return t;let r=t;for(const i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir"),GP=d(function(e,t){return t.db.getClasses()},"getClasses"),HP=d(async function(e,t,r,i){P.info("REF0:"),P.info("Drawing class diagram (v3)",t);const{securityLevel:s,state:n,layout:a}=it(),o=i.db.getData(),h=So(t,s);o.type=i.type,o.layoutAlgorithm=Wl(a),o.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,o.rankSpacing=(n==null?void 0:n.rankSpacing)||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=t,await wo(o,h);const l=8;ie.insertTitle(h,"classDiagramTitleText",(n==null?void 0:n.titleTopMargin)??25,i.db.getDiagramTitle()),kn(h,l,"classDiagram",(n==null?void 0:n.useMaxWidth)??!0)},"draw"),Iv={getClasses:GP,draw:HP,getDir:YP},UP={parser:Dv,get db(){return new Rv},renderer:Iv,styles:Bv,init:d(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const jP=Object.freeze(Object.defineProperty({__proto__:null,diagram:UP},Symbol.toStringTag,{value:"Module"}));var XP={parser:Dv,get db(){return new Rv},renderer:Iv,styles:Bv,init:d(e=>{e.class||(e.class={}),e.class.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const KP=Object.freeze(Object.defineProperty({__proto__:null,diagram:XP},Symbol.toStringTag,{value:"Module"}));var B1=(function(){var e=d(function(B,X,$,G){for($=$||{},G=B.length;G--;$[B[G]]=X);return $},"o"),t=[1,2],r=[1,3],i=[1,4],s=[2,4],n=[1,9],a=[1,11],o=[1,16],h=[1,17],l=[1,18],u=[1,19],f=[1,33],p=[1,20],g=[1,21],y=[1,22],m=[1,23],x=[1,24],b=[1,26],_=[1,27],S=[1,28],C=[1,29],k=[1,30],v=[1,31],A=[1,32],L=[1,35],w=[1,36],R=[1,37],T=[1,38],V=[1,34],N=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],D=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],E=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],M={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:d(function(X,$,G,nt,ht,tt,dt){var st=tt.length-1;switch(ht){case 3:return nt.setRootDoc(tt[st]),tt[st];case 4:this.$=[];break;case 5:tt[st]!="nl"&&(tt[st-1].push(tt[st]),this.$=tt[st-1]);break;case 6:case 7:this.$=tt[st];break;case 8:this.$="nl";break;case 12:this.$=tt[st];break;case 13:const U=tt[st-1];U.description=nt.trimColon(tt[st]),this.$=U;break;case 14:this.$={stmt:"relation",state1:tt[st-2],state2:tt[st]};break;case 15:const j=nt.trimColon(tt[st]);this.$={stmt:"relation",state1:tt[st-3],state2:tt[st-1],description:j};break;case 19:this.$={stmt:"state",id:tt[st-3],type:"default",description:"",doc:tt[st-1]};break;case 20:var ot=tt[st],K=tt[st-2].trim();if(tt[st].match(":")){var lt=tt[st].split(":");ot=lt[0],K=[K,lt[1]]}this.$={stmt:"state",id:ot,type:"default",description:K};break;case 21:this.$={stmt:"state",id:tt[st-3],type:"default",description:tt[st-5],doc:tt[st-1]};break;case 22:this.$={stmt:"state",id:tt[st],type:"fork"};break;case 23:this.$={stmt:"state",id:tt[st],type:"join"};break;case 24:this.$={stmt:"state",id:tt[st],type:"choice"};break;case 25:this.$={stmt:"state",id:nt.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:tt[st-1].trim(),note:{position:tt[st-2].trim(),text:tt[st].trim()}};break;case 29:this.$=tt[st].trim(),nt.setAccTitle(this.$);break;case 30:case 31:this.$=tt[st].trim(),nt.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:tt[st-3],url:tt[st-2],tooltip:tt[st-1]};break;case 33:this.$={stmt:"click",id:tt[st-3],url:tt[st-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:tt[st-1].trim(),classes:tt[st].trim()};break;case 36:this.$={stmt:"style",id:tt[st-1].trim(),styleClass:tt[st].trim()};break;case 37:this.$={stmt:"applyClass",id:tt[st-1].trim(),styleClass:tt[st].trim()};break;case 38:nt.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:nt.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:nt.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:nt.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:tt[st].trim(),type:"default",description:""};break;case 46:this.$={stmt:"state",id:tt[st-2].trim(),classes:[tt[st].trim()],type:"default",description:""};break;case 47:this.$={stmt:"state",id:tt[st-2].trim(),classes:[tt[st].trim()],type:"default",description:""};break}},"anonymous"),table:[{3:1,4:t,5:r,6:i},{1:[3]},{3:5,4:t,5:r,6:i},{3:6,4:t,5:r,6:i},e([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],s,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:n,5:a,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:l,22:u,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:b,35:_,37:S,38:C,41:k,45:v,48:A,51:L,52:w,53:R,54:T,57:V},e(N,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:o,17:h,19:l,22:u,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:b,35:_,37:S,38:C,41:k,45:v,48:A,51:L,52:w,53:R,54:T,57:V},e(N,[2,7]),e(N,[2,8]),e(N,[2,9]),e(N,[2,10]),e(N,[2,11]),e(N,[2,12],{14:[1,40],15:[1,41]}),e(N,[2,16]),{18:[1,42]},e(N,[2,18],{20:[1,43]}),{23:[1,44]},e(N,[2,22]),e(N,[2,23]),e(N,[2,24]),e(N,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},e(N,[2,28]),{34:[1,49]},{36:[1,50]},e(N,[2,31]),{13:51,24:f,57:V},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},e(D,[2,44],{58:[1,56]}),e(D,[2,45],{58:[1,57]}),e(N,[2,38]),e(N,[2,39]),e(N,[2,40]),e(N,[2,41]),e(N,[2,6]),e(N,[2,13]),{13:58,24:f,57:V},e(N,[2,17]),e(E,s,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},e(N,[2,29]),e(N,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},e(N,[2,14],{14:[1,71]}),{4:n,5:a,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:l,21:[1,72],22:u,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:b,35:_,37:S,38:C,41:k,45:v,48:A,51:L,52:w,53:R,54:T,57:V},e(N,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},e(N,[2,34]),e(N,[2,35]),e(N,[2,36]),e(N,[2,37]),e(D,[2,46]),e(D,[2,47]),e(N,[2,15]),e(N,[2,19]),e(E,s,{7:78}),e(N,[2,26]),e(N,[2,27]),{5:[1,79]},{5:[1,80]},{4:n,5:a,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:l,21:[1,81],22:u,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:b,35:_,37:S,38:C,41:k,45:v,48:A,51:L,52:w,53:R,54:T,57:V},e(N,[2,32]),e(N,[2,33]),e(N,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:d(function(X,$){if($.recoverable)this.trace(X);else{var G=new Error(X);throw G.hash=$,G}},"parseError"),parse:d(function(X){var $=this,G=[0],nt=[],ht=[null],tt=[],dt=this.table,st="",ot=0,K=0,lt=2,U=1,j=tt.slice.call(arguments,1),Q=Object.create(this.lexer),W={yy:{}};for(var et in this.yy)Object.prototype.hasOwnProperty.call(this.yy,et)&&(W.yy[et]=this.yy[et]);Q.setInput(X,W.yy),W.yy.lexer=Q,W.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var z=Q.yylloc;tt.push(z);var vt=Q.options&&Q.options.ranges;typeof W.yy.parseError=="function"?this.parseError=W.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function O(bt){G.length=G.length-2*bt,ht.length=ht.length-bt,tt.length=tt.length-bt}d(O,"popStack");function Zt(){var bt;return bt=nt.pop()||Q.lex()||U,typeof bt!="number"&&(bt instanceof Array&&(nt=bt,bt=nt.pop()),bt=$.symbols_[bt]||bt),bt}d(Zt,"lex");for(var J,Yt,It,se,gt={},St,ut,pt,wt;;){if(Yt=G[G.length-1],this.defaultActions[Yt]?It=this.defaultActions[Yt]:((J===null||typeof J>"u")&&(J=Zt()),It=dt[Yt]&&dt[Yt][J]),typeof It>"u"||!It.length||!It[0]){var rt="";wt=[];for(St in dt[Yt])this.terminals_[St]&&St>lt&&wt.push("'"+this.terminals_[St]+"'");Q.showPosition?rt="Parse error on line "+(ot+1)+`:
`+Q.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[J]||J)+"'":rt="Parse error on line "+(ot+1)+": Unexpected "+(J==U?"end of input":"'"+(this.terminals_[J]||J)+"'"),this.parseError(rt,{text:Q.match,token:this.terminals_[J]||J,line:Q.yylineno,loc:z,expected:wt})}if(It[0]instanceof Array&&It.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Yt+", token: "+J);switch(It[0]){case 1:G.push(J),ht.push(Q.yytext),tt.push(Q.yylloc),G.push(It[1]),J=null,K=Q.yyleng,st=Q.yytext,ot=Q.yylineno,z=Q.yylloc;break;case 2:if(ut=this.productions_[It[1]][1],gt.$=ht[ht.length-ut],gt._$={first_line:tt[tt.length-(ut||1)].first_line,last_line:tt[tt.length-1].last_line,first_column:tt[tt.length-(ut||1)].first_column,last_column:tt[tt.length-1].last_column},vt&&(gt._$.range=[tt[tt.length-(ut||1)].range[0],tt[tt.length-1].range[1]]),se=this.performAction.apply(gt,[st,K,ot,W.yy,It[1],ht,tt].concat(j)),typeof se<"u")return se;ut&&(G=G.slice(0,-1*ut*2),ht=ht.slice(0,-1*ut),tt=tt.slice(0,-1*ut)),G.push(this.productions_[It[1]][0]),ht.push(gt.$),tt.push(gt._$),pt=dt[G[G.length-2]][G[G.length-1]],G.push(pt);break;case 3:return!0}}return!0},"parse")},F=(function(){var B={EOF:1,parseError:d(function($,G){if(this.yy.parser)this.yy.parser.parseError($,G);else throw new Error($)},"parseError"),setInput:d(function(X,$){return this.yy=$||this.yy||{},this._input=X,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var X=this._input[0];this.yytext+=X,this.yyleng++,this.offset++,this.match+=X,this.matched+=X;var $=X.match(/(?:\r\n?|\n).*/g);return $?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),X},"input"),unput:d(function(X){var $=X.length,G=X.split(/(?:\r\n?|\n)/g);this._input=X+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$),this.offset-=$;var nt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var ht=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===nt.length?this.yylloc.first_column:0)+nt[nt.length-G.length].length-G[0].length:this.yylloc.first_column-$},this.options.ranges&&(this.yylloc.range=[ht[0],ht[0]+this.yyleng-$]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(X){this.unput(this.match.slice(X))},"less"),pastInput:d(function(){var X=this.matched.substr(0,this.matched.length-this.match.length);return(X.length>20?"...":"")+X.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var X=this.match;return X.length<20&&(X+=this._input.substr(0,20-X.length)),(X.substr(0,20)+(X.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var X=this.pastInput(),$=new Array(X.length+1).join("-");return X+this.upcomingInput()+`
`+$+"^"},"showPosition"),test_match:d(function(X,$){var G,nt,ht;if(this.options.backtrack_lexer&&(ht={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ht.yylloc.range=this.yylloc.range.slice(0))),nt=X[0].match(/(?:\r\n?|\n).*/g),nt&&(this.yylineno+=nt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:nt?nt[nt.length-1].length-nt[nt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+X[0].length},this.yytext+=X[0],this.match+=X[0],this.matches=X,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(X[0].length),this.matched+=X[0],G=this.performAction.call(this,this.yy,this,$,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),G)return G;if(this._backtrack){for(var tt in ht)this[tt]=ht[tt];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var X,$,G,nt;this._more||(this.yytext="",this.match="");for(var ht=this._currentRules(),tt=0;tt<ht.length;tt++)if(G=this._input.match(this.rules[ht[tt]]),G&&(!$||G[0].length>$[0].length)){if($=G,nt=tt,this.options.backtrack_lexer){if(X=this.test_match(G,ht[tt]),X!==!1)return X;if(this._backtrack){$=!1;continue}else return!1}else if(!this.options.flex)break}return $?(X=this.test_match($,ht[nt]),X!==!1?X:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var $=this.next();return $||this.lex()},"lex"),begin:d(function($){this.conditionStack.push($)},"begin"),popState:d(function(){var $=this.conditionStack.length-1;return $>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function($){return $=this.conditionStack.length-1-Math.abs($||0),$>=0?this.conditionStack[$]:"INITIAL"},"topState"),pushState:d(function($){this.begin($)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function($,G,nt,ht){switch(nt){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:return 51;case 5:return 52;case 6:return 53;case 7:return 54;case 8:break;case 9:break;case 10:return 5;case 11:break;case 12:break;case 13:break;case 14:break;case 15:return this.pushState("SCALE"),17;case 16:return 18;case 17:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 23:this.popState();break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 35:return this.pushState("SCALE"),17;case 36:return 18;case 37:this.popState();break;case 38:this.pushState("STATE");break;case 39:return this.popState(),G.yytext=G.yytext.slice(0,-8).trim(),25;case 40:return this.popState(),G.yytext=G.yytext.slice(0,-8).trim(),26;case 41:return this.popState(),G.yytext=G.yytext.slice(0,-10).trim(),27;case 42:return this.popState(),G.yytext=G.yytext.slice(0,-8).trim(),25;case 43:return this.popState(),G.yytext=G.yytext.slice(0,-8).trim(),26;case 44:return this.popState(),G.yytext=G.yytext.slice(0,-10).trim(),27;case 45:return 51;case 46:return 52;case 47:return 53;case 48:return 54;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:return this.popState(),"ID";case 52:this.popState();break;case 53:return"STATE_DESCR";case 54:return 19;case 55:this.popState();break;case 56:return this.popState(),this.pushState("struct"),20;case 57:break;case 58:return this.popState(),21;case 59:break;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 65:break;case 66:return"NOTE_TEXT";case 67:return this.popState(),"ID";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),G.yytext=G.yytext.substr(2).trim(),31;case 70:return this.popState(),G.yytext=G.yytext.slice(0,-8).trim(),31;case 71:return 6;case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return G.yytext=G.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 80:return 5;case 81:return"INVALID"}},"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}};return B})();M.lexer=F;function I(){this.yy={}}return d(I,"Parser"),I.prototype=M,M.Parser=I,new I})();B1.parser=B1;var Nv=B1,QP="TB",$v="TB",Lg="dir",Hn="state",$n="root",I1="relation",ZP="classDef",JP="style",tO="applyClass",rl="default",Mv="divider",Fv="fill:none",Pv="fill: #333",Ov="c",Vv="text",zv="normal",ad="rect",od="rectWithTitle",eO="stateStart",rO="stateEnd",Dg="divider",Rg="roundedWithTitle",iO="note",sO="noteGroup",Ul="statediagram",nO="state",aO=`${Ul}-${nO}`,Wv="transition",oO="note",lO="note-edge",cO=`${Wv} ${lO}`,hO=`${Ul}-${oO}`,uO="cluster",dO=`${Ul}-${uO}`,fO="cluster-alt",pO=`${Ul}-${fO}`,qv="parent",Yv="note",gO="state",Tp="----",yO=`${Tp}${Yv}`,Bg=`${Tp}${qv}`,Gv=d((e,t=$v)=>{if(!e.doc)return t;let r=t;for(const i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir"),mO=d(function(e,t){return t.db.getClasses()},"getClasses"),xO=d(async function(e,t,r,i){P.info("REF0:"),P.info("Drawing state diagram (v2)",t);const{securityLevel:s,state:n,layout:a}=it();i.db.extract(i.db.getRootDocV2());const o=i.db.getData(),h=So(t,s);o.type=i.type,o.layoutAlgorithm=a,o.nodeSpacing=(n==null?void 0:n.nodeSpacing)||50,o.rankSpacing=(n==null?void 0:n.rankSpacing)||50,o.markers=["barb"],o.diagramId=t,await wo(o,h);const l=8;try{(typeof i.db.getLinks=="function"?i.db.getLinks():new Map).forEach((f,p)=>{var S;const g=typeof p=="string"?p:typeof(p==null?void 0:p.id)=="string"?p.id:"";if(!g){P.warn(" Invalid or missing stateId from key:",JSON.stringify(p));return}const y=(S=h.node())==null?void 0:S.querySelectorAll("g");let m;if(y==null||y.forEach(C=>{var v;((v=C.textContent)==null?void 0:v.trim())===g&&(m=C)}),!m){P.warn(" Could not find node matching text:",g);return}const x=m.parentNode;if(!x){P.warn(" Node has no parent, cannot wrap:",g);return}const b=document.createElementNS("http://www.w3.org/2000/svg","a"),_=f.url.replace(/^"+|"+$/g,"");if(b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_),b.setAttribute("target","_blank"),f.tooltip){const C=f.tooltip.replace(/^"+|"+$/g,"");b.setAttribute("title",C)}x.replaceChild(b,m),b.appendChild(m),P.info(" Wrapped node in <a> tag for:",g,f.url)})}catch(u){P.error(" Error injecting clickable links:",u)}ie.insertTitle(h,"statediagramTitleText",(n==null?void 0:n.titleTopMargin)??25,i.db.getDiagramTitle()),kn(h,l,Ul,(n==null?void 0:n.useMaxWidth)??!0)},"draw"),bO={getClasses:mO,draw:xO,getDir:Gv},Dc=new Map,os=0;function Rc(e="",t=0,r="",i=Tp){const s=r!==null&&r.length>0?`${i}${r}`:"";return`${gO}-${e}${s}-${t}`}d(Rc,"stateDomId");var vO=d((e,t,r,i,s,n,a,o)=>{P.trace("items",t),t.forEach(h=>{switch(h.stmt){case Hn:Ko(e,h,r,i,s,n,a,o);break;case rl:Ko(e,h,r,i,s,n,a,o);break;case I1:{Ko(e,h.state1,r,i,s,n,a,o),Ko(e,h.state2,r,i,s,n,a,o);const l={id:"edge"+os,start:h.state1.id,end:h.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Fv,labelStyle:"",label:Ct.sanitizeText(h.description??"",it()),arrowheadStyle:Pv,labelpos:Ov,labelType:Vv,thickness:zv,classes:Wv,look:a};s.push(l),os++}break}})},"setupDoc"),Ig=d((e,t=$v)=>{let r=t;if(e.doc)for(const i of e.doc)i.stmt==="dir"&&(r=i.value);return r},"getDir");function Xo(e,t,r){if(!t.id||t.id==="</join></fork>"||t.id==="</choice>")return;t.cssClasses&&(Array.isArray(t.cssCompiledStyles)||(t.cssCompiledStyles=[]),t.cssClasses.split(" ").forEach(s=>{const n=r.get(s);n&&(t.cssCompiledStyles=[...t.cssCompiledStyles??[],...n.styles])}));const i=e.find(s=>s.id===t.id);i?Object.assign(i,t):e.push(t)}d(Xo,"insertOrUpdateNode");function Hv(e){var t;return((t=e==null?void 0:e.classes)==null?void 0:t.join(" "))??""}d(Hv,"getClassesFromDbInfo");function Uv(e){return(e==null?void 0:e.styles)??[]}d(Uv,"getStylesFromDbInfo");var Ko=d((e,t,r,i,s,n,a,o)=>{var g,y,m;const h=t.id,l=r.get(h),u=Hv(l),f=Uv(l),p=it();if(P.info("dataFetcher parsedItem",t,l,f),h!=="root"){let x=ad;t.start===!0?x=eO:t.start===!1&&(x=rO),t.type!==rl&&(x=t.type),Dc.get(h)||Dc.set(h,{id:h,shape:x,description:Ct.sanitizeText(h,p),cssClasses:`${u} ${aO}`,cssStyles:f});const b=Dc.get(h);t.description&&(Array.isArray(b.description)?(b.shape=od,b.description.push(t.description)):(g=b.description)!=null&&g.length&&b.description.length>0?(b.shape=od,b.description===h?b.description=[t.description]:b.description=[b.description,t.description]):(b.shape=ad,b.description=t.description),b.description=Ct.sanitizeTextOrArray(b.description,p)),((y=b.description)==null?void 0:y.length)===1&&b.shape===od&&(b.type==="group"?b.shape=Rg:b.shape=ad),!b.type&&t.doc&&(P.info("Setting cluster for XCX",h,Ig(t)),b.type="group",b.isGroup=!0,b.dir=Ig(t),b.shape=t.type===Mv?Dg:Rg,b.cssClasses=`${b.cssClasses} ${dO} ${n?pO:""}`);const _={labelStyle:"",shape:b.shape,label:b.description,cssClasses:b.cssClasses,cssCompiledStyles:[],cssStyles:b.cssStyles,id:h,dir:b.dir,domId:Rc(h,os),type:b.type,isGroup:b.type==="group",padding:8,rx:10,ry:10,look:a};if(_.shape===Dg&&(_.label=""),e&&e.id!=="root"&&(P.trace("Setting node ",h," to be child of its parent ",e.id),_.parentId=e.id),_.centerLabel=!0,t.note){const S={labelStyle:"",shape:iO,label:t.note.text,cssClasses:hO,cssStyles:[],cssCompiledStyles:[],id:h+yO+"-"+os,domId:Rc(h,os,Yv),type:b.type,isGroup:b.type==="group",padding:(m=p.flowchart)==null?void 0:m.padding,look:a,position:t.note.position},C=h+Bg,k={labelStyle:"",shape:sO,label:t.note.text,cssClasses:b.cssClasses,cssStyles:[],id:h+Bg,domId:Rc(h,os,qv),type:"group",isGroup:!0,padding:16,look:a,position:t.note.position};os++,k.id=C,S.parentId=C,Xo(i,k,o),Xo(i,S,o),Xo(i,_,o);let v=h,A=S.id;t.note.position==="left of"&&(v=S.id,A=h),s.push({id:v+"-"+A,start:v,end:A,arrowhead:"none",arrowTypeEnd:"",style:Fv,labelStyle:"",classes:cO,arrowheadStyle:Pv,labelpos:Ov,labelType:Vv,thickness:zv,look:a})}else Xo(i,_,o)}t.doc&&(P.trace("Adding nodes children "),vO(t,t.doc,r,i,s,!n,a,o))},"dataFetcher"),_O=d(()=>{Dc.clear(),os=0},"reset"),vr={START_NODE:"[*]",START_TYPE:"start",END_NODE:"[*]",END_TYPE:"end",COLOR_KEYWORD:"color",FILL_KEYWORD:"fill",BG_FILL:"bgFill",STYLECLASS_SEP:","},Ng=d(()=>new Map,"newClassesList"),$g=d(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),dc=d(e=>JSON.parse(JSON.stringify(e)),"clone"),Js,Vs=(Js=class{constructor(t){this.version=t,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=Ng(),this.documents={root:$g()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=Ke,this.setAccTitle=We,this.getAccDescription=Ze,this.setAccDescription=Qe,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}extract(t){this.clear(!0);for(const s of Array.isArray(t)?t:t.doc)switch(s.stmt){case Hn:this.addState(s.id.trim(),s.type,s.doc,s.description,s.note);break;case I1:this.addRelation(s.state1,s.state2,s.description);break;case ZP:this.addStyleClass(s.id.trim(),s.classes);break;case JP:this.handleStyleDef(s);break;case tO:this.setCssClass(s.id.trim(),s.styleClass);break;case"click":this.addLink(s.id,s.url,s.tooltip);break}const r=this.getStates(),i=it();_O(),Ko(void 0,this.getRootDocV2(),r,this.nodes,this.edges,!0,i.look,this.classes);for(const s of this.nodes)if(Array.isArray(s.label)){if(s.description=s.label.slice(1),s.isGroup&&s.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${s.id}]`);s.label=s.label[0]}}handleStyleDef(t){const r=t.id.trim().split(","),i=t.styleClass.split(",");for(const s of r){let n=this.getState(s);if(!n){const a=s.trim();this.addState(a),n=this.getState(a)}n&&(n.styles=i.map(a=>{var o;return(o=a.replace(/;/g,""))==null?void 0:o.trim()}))}}setRootDoc(t){P.info("Setting root doc",t),this.rootDoc=t,this.version===1?this.extract(t):this.extract(this.getRootDocV2())}docTranslator(t,r,i){if(r.stmt===I1){this.docTranslator(t,r.state1,!0),this.docTranslator(t,r.state2,!1);return}if(r.stmt===Hn&&(r.id===vr.START_NODE?(r.id=t.id+(i?"_start":"_end"),r.start=i):r.id=r.id.trim()),r.stmt!==$n&&r.stmt!==Hn||!r.doc)return;const s=[];let n=[];for(const a of r.doc)if(a.type===Mv){const o=dc(a);o.doc=dc(n),s.push(o),n=[]}else n.push(a);if(s.length>0&&n.length>0){const a={stmt:Hn,id:Vx(),type:"divider",doc:dc(n)};s.push(dc(a)),r.doc=s}r.doc.forEach(a=>this.docTranslator(r,a,!0))}getRootDocV2(){return this.docTranslator({id:$n,stmt:$n},{id:$n,stmt:$n,doc:this.rootDoc},!0),{id:$n,doc:this.rootDoc}}addState(t,r=rl,i=void 0,s=void 0,n=void 0,a=void 0,o=void 0,h=void 0){const l=t==null?void 0:t.trim();if(!this.currentDocument.states.has(l))P.info("Adding state ",l,s),this.currentDocument.states.set(l,{stmt:Hn,id:l,descriptions:[],type:r,doc:i,note:n,classes:[],styles:[],textStyles:[]});else{const u=this.currentDocument.states.get(l);if(!u)throw new Error(`State not found: ${l}`);u.doc||(u.doc=i),u.type||(u.type=r)}if(s&&(P.info("Setting state description",l,s),(Array.isArray(s)?s:[s]).forEach(f=>this.addDescription(l,f.trim()))),n){const u=this.currentDocument.states.get(l);if(!u)throw new Error(`State not found: ${l}`);u.note=n,u.note.text=Ct.sanitizeText(u.note.text,it())}a&&(P.info("Setting state classes",l,a),(Array.isArray(a)?a:[a]).forEach(f=>this.setCssClass(l,f.trim()))),o&&(P.info("Setting state styles",l,o),(Array.isArray(o)?o:[o]).forEach(f=>this.setStyle(l,f.trim()))),h&&(P.info("Setting state styles",l,o),(Array.isArray(h)?h:[h]).forEach(f=>this.setTextStyle(l,f.trim())))}clear(t){this.nodes=[],this.edges=[],this.documents={root:$g()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=Ng(),t||(this.links=new Map,qe())}getState(t){return this.currentDocument.states.get(t)}getStates(){return this.currentDocument.states}logDocuments(){P.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(t,r,i){this.links.set(t,{url:r,tooltip:i}),P.warn("Adding link",t,r,i)}getLinks(){return this.links}startIdIfNeeded(t=""){return t===vr.START_NODE?(this.startEndCount++,`${vr.START_TYPE}${this.startEndCount}`):t}startTypeIfNeeded(t="",r=rl){return t===vr.START_NODE?vr.START_TYPE:r}endIdIfNeeded(t=""){return t===vr.END_NODE?(this.startEndCount++,`${vr.END_TYPE}${this.startEndCount}`):t}endTypeIfNeeded(t="",r=rl){return t===vr.END_NODE?vr.END_TYPE:r}addRelationObjs(t,r,i=""){const s=this.startIdIfNeeded(t.id.trim()),n=this.startTypeIfNeeded(t.id.trim(),t.type),a=this.startIdIfNeeded(r.id.trim()),o=this.startTypeIfNeeded(r.id.trim(),r.type);this.addState(s,n,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),this.addState(a,o,r.doc,r.description,r.note,r.classes,r.styles,r.textStyles),this.currentDocument.relations.push({id1:s,id2:a,relationTitle:Ct.sanitizeText(i,it())})}addRelation(t,r,i){if(typeof t=="object"&&typeof r=="object")this.addRelationObjs(t,r,i);else if(typeof t=="string"&&typeof r=="string"){const s=this.startIdIfNeeded(t.trim()),n=this.startTypeIfNeeded(t),a=this.endIdIfNeeded(r.trim()),o=this.endTypeIfNeeded(r);this.addState(s,n),this.addState(a,o),this.currentDocument.relations.push({id1:s,id2:a,relationTitle:i?Ct.sanitizeText(i,it()):void 0})}}addDescription(t,r){var n;const i=this.currentDocument.states.get(t),s=r.startsWith(":")?r.replace(":","").trim():r;(n=i==null?void 0:i.descriptions)==null||n.push(Ct.sanitizeText(s,it()))}cleanupLabel(t){return t.startsWith(":")?t.slice(2).trim():t.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(t,r=""){this.classes.has(t)||this.classes.set(t,{id:t,styles:[],textStyles:[]});const i=this.classes.get(t);r&&i&&r.split(vr.STYLECLASS_SEP).forEach(s=>{const n=s.replace(/([^;]*);/,"$1").trim();if(RegExp(vr.COLOR_KEYWORD).exec(s)){const o=n.replace(vr.FILL_KEYWORD,vr.BG_FILL).replace(vr.COLOR_KEYWORD,vr.FILL_KEYWORD);i.textStyles.push(o)}i.styles.push(n)})}getClasses(){return this.classes}setCssClass(t,r){t.split(",").forEach(i=>{var n;let s=this.getState(i);if(!s){const a=i.trim();this.addState(a),s=this.getState(a)}(n=s==null?void 0:s.classes)==null||n.push(r)})}setStyle(t,r){var i,s;(s=(i=this.getState(t))==null?void 0:i.styles)==null||s.push(r)}setTextStyle(t,r){var i,s;(s=(i=this.getState(t))==null?void 0:i.textStyles)==null||s.push(r)}getDirectionStatement(){return this.rootDoc.find(t=>t.stmt===Lg)}getDirection(){var t;return((t=this.getDirectionStatement())==null?void 0:t.value)??QP}setDirection(t){const r=this.getDirectionStatement();r?r.value=t:this.rootDoc.unshift({stmt:Lg,value:t})}trimColon(t){return t.startsWith(":")?t.slice(1).trim():t.trim()}getData(){const t=it();return{nodes:this.nodes,edges:this.edges,other:{},config:t,direction:Gv(this.getRootDocV2())}}getConfig(){return it().state}},d(Js,"StateDB"),Js.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Js),kO=d(e=>`
defs #statediagram-barbEnd {
    fill: ${e.transitionColor};
    stroke: ${e.transitionColor};
  }
g.stateGroup text {
  fill: ${e.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${e.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${e.stateLabelColor};
}

g.stateGroup rect {
  fill: ${e.mainBkg};
  stroke: ${e.nodeBorder};
}

g.stateGroup line {
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${e.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${e.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${e.noteBorderColor};
  fill: ${e.noteBkgColor};

  text {
    fill: ${e.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${e.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${e.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${e.edgeLabelBackground};
  p {
    background-color: ${e.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${e.edgeLabelBackground};
    fill: ${e.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${e.transitionLabelColor||e.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${e.transitionLabelColor||e.tertiaryTextColor};
}

.stateLabel text {
  fill: ${e.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node .fork-join {
  fill: ${e.specialStateColor};
  stroke: ${e.specialStateColor};
}

.node circle.state-end {
  fill: ${e.innerEndBackground};
  stroke: ${e.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${e.compositeBackground||e.background};
  // stroke: ${e.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${e.stateBkg||e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${e.mainBkg};
  stroke: ${e.stateBorder||e.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${e.lineColor};
}

.statediagram-cluster rect {
  fill: ${e.compositeTitleBackground};
  stroke: ${e.stateBorder||e.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${e.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${e.stateBorder||e.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${e.compositeBackground||e.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${e.altBackground?e.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${e.noteBkgColor};
  stroke: ${e.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${e.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${e.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${e.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${e.lineColor};
  stroke: ${e.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${e.textColor};
}
`,"getStyles"),jv=kO,wO=d(e=>e.append("circle").attr("class","start-state").attr("r",it().state.sizeUnit).attr("cx",it().state.padding+it().state.sizeUnit).attr("cy",it().state.padding+it().state.sizeUnit),"drawStartState"),TO=d(e=>e.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",it().state.textHeight).attr("class","divider").attr("x2",it().state.textHeight*2).attr("y1",0).attr("y2",0),"drawDivider"),SO=d((e,t)=>{const r=e.append("text").attr("x",2*it().state.padding).attr("y",it().state.textHeight+2*it().state.padding).attr("font-size",it().state.fontSize).attr("class","state-title").text(t.id),i=r.node().getBBox();return e.insert("rect",":first-child").attr("x",it().state.padding).attr("y",it().state.padding).attr("width",i.width+2*it().state.padding).attr("height",i.height+2*it().state.padding).attr("rx",it().state.radius),r},"drawSimpleState"),CO=d((e,t)=>{const r=d(function(p,g,y){const m=p.append("tspan").attr("x",2*it().state.padding).text(g);y||m.attr("dy",it().state.textHeight)},"addTspan"),s=e.append("text").attr("x",2*it().state.padding).attr("y",it().state.textHeight+1.3*it().state.padding).attr("font-size",it().state.fontSize).attr("class","state-title").text(t.descriptions[0]).node().getBBox(),n=s.height,a=e.append("text").attr("x",it().state.padding).attr("y",n+it().state.padding*.4+it().state.dividerMargin+it().state.textHeight).attr("class","state-description");let o=!0,h=!0;t.descriptions.forEach(function(p){o||(r(a,p,h),h=!1),o=!1});const l=e.append("line").attr("x1",it().state.padding).attr("y1",it().state.padding+n+it().state.dividerMargin/2).attr("y2",it().state.padding+n+it().state.dividerMargin/2).attr("class","descr-divider"),u=a.node().getBBox(),f=Math.max(u.width,s.width);return l.attr("x2",f+3*it().state.padding),e.insert("rect",":first-child").attr("x",it().state.padding).attr("y",it().state.padding).attr("width",f+2*it().state.padding).attr("height",u.height+n+2*it().state.padding).attr("rx",it().state.radius),e},"drawDescrState"),EO=d((e,t,r)=>{const i=it().state.padding,s=2*it().state.padding,n=e.node().getBBox(),a=n.width,o=n.x,h=e.append("text").attr("x",0).attr("y",it().state.titleShift).attr("font-size",it().state.fontSize).attr("class","state-title").text(t.id),u=h.node().getBBox().width+s;let f=Math.max(u,a);f===a&&(f=f+s);let p;const g=e.node().getBBox();t.doc,p=o-i,u>a&&(p=(a-f)/2+i),Math.abs(o-g.x)<i&&u>a&&(p=o-(u-a)/2);const y=1-it().state.textHeight;return e.insert("rect",":first-child").attr("x",p).attr("y",y).attr("class",r?"alt-composit":"composit").attr("width",f).attr("height",g.height+it().state.textHeight+it().state.titleShift+1).attr("rx","0"),h.attr("x",p+i),u<=a&&h.attr("x",o+(f-s)/2-u/2+i),e.insert("rect",":first-child").attr("x",p).attr("y",it().state.titleShift-it().state.textHeight-it().state.padding).attr("width",f).attr("height",it().state.textHeight*3).attr("rx",it().state.radius),e.insert("rect",":first-child").attr("x",p).attr("y",it().state.titleShift-it().state.textHeight-it().state.padding).attr("width",f).attr("height",g.height+3+2*it().state.textHeight).attr("rx",it().state.radius),e},"addTitleAndBox"),AO=d(e=>(e.append("circle").attr("class","end-state-outer").attr("r",it().state.sizeUnit+it().state.miniPadding).attr("cx",it().state.padding+it().state.sizeUnit+it().state.miniPadding).attr("cy",it().state.padding+it().state.sizeUnit+it().state.miniPadding),e.append("circle").attr("class","end-state-inner").attr("r",it().state.sizeUnit).attr("cx",it().state.padding+it().state.sizeUnit+2).attr("cy",it().state.padding+it().state.sizeUnit+2)),"drawEndState"),LO=d((e,t)=>{let r=it().state.forkWidth,i=it().state.forkHeight;if(t.parentId){let s=r;r=i,i=s}return e.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",i).attr("x",it().state.padding).attr("y",it().state.padding)},"drawForkJoinState"),DO=d((e,t,r,i)=>{let s=0;const n=i.append("text");n.style("text-anchor","start"),n.attr("class","noteText");let a=e.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");const o=a.split(Ct.lineBreakRegex);let h=1.25*it().state.noteMargin;for(const l of o){const u=l.trim();if(u.length>0){const f=n.append("tspan");if(f.text(u),h===0){const p=f.node().getBBox();h+=p.height}s+=h,f.attr("x",t+it().state.noteMargin),f.attr("y",r+s+1.25*it().state.noteMargin)}}return{textWidth:n.node().getBBox().width,textHeight:s}},"_drawLongText"),RO=d((e,t)=>{t.attr("class","state-note");const r=t.append("rect").attr("x",0).attr("y",it().state.padding),i=t.append("g"),{textWidth:s,textHeight:n}=DO(e,0,0,i);return r.attr("height",n+2*it().state.noteMargin),r.attr("width",s+it().state.noteMargin*2),r},"drawNote"),Mg=d(function(e,t){const r=t.id,i={id:r,label:t.id,width:0,height:0},s=e.append("g").attr("id",r).attr("class","stateGroup");t.type==="start"&&wO(s),t.type==="end"&&AO(s),(t.type==="fork"||t.type==="join")&&LO(s,t),t.type==="note"&&RO(t.note.text,s),t.type==="divider"&&TO(s),t.type==="default"&&t.descriptions.length===0&&SO(s,t),t.type==="default"&&t.descriptions.length>0&&CO(s,t);const n=s.node().getBBox();return i.width=n.width+2*it().state.padding,i.height=n.height+2*it().state.padding,i},"drawState"),Fg=0,BO=d(function(e,t,r){const i=d(function(h){switch(h){case Vs.relationType.AGGREGATION:return"aggregation";case Vs.relationType.EXTENSION:return"extension";case Vs.relationType.COMPOSITION:return"composition";case Vs.relationType.DEPENDENCY:return"dependency"}},"getRelationType");t.points=t.points.filter(h=>!Number.isNaN(h.y));const s=t.points,n=fl().x(function(h){return h.x}).y(function(h){return h.y}).curve(ta),a=e.append("path").attr("d",n(s)).attr("id","edge"+Fg).attr("class","transition");let o="";if(it().state.arrowMarkerAbsolute&&(o=qh(!0)),a.attr("marker-end","url("+o+"#"+i(Vs.relationType.DEPENDENCY)+"End)"),r.title!==void 0){const h=e.append("g").attr("class","stateLabel"),{x:l,y:u}=ie.calcLabelPosition(t.points),f=Ct.getRows(r.title);let p=0;const g=[];let y=0,m=0;for(let _=0;_<=f.length;_++){const S=h.append("text").attr("text-anchor","middle").text(f[_]).attr("x",l).attr("y",u+p),C=S.node().getBBox();y=Math.max(y,C.width),m=Math.min(m,C.x),P.info(C.x,l,u+p),p===0&&(p=S.node().getBBox().height,P.info("Title height",p,u)),g.push(S)}let x=p*f.length;if(f.length>1){const _=(f.length-1)*p*.5;g.forEach((S,C)=>S.attr("y",u+C*p-_)),x=p*f.length}const b=h.node().getBBox();h.insert("rect",":first-child").attr("class","box").attr("x",l-y/2-it().state.padding/2).attr("y",u-x/2-it().state.padding/2-3.5).attr("width",y+it().state.padding).attr("height",x+it().state.padding),P.info(b)}Fg++},"drawEdge"),Or,ld={},IO=d(function(){},"setConf"),NO=d(function(e){e.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),$O=d(function(e,t,r,i){Or=it().state;const s=it().securityLevel;let n;s==="sandbox"&&(n=_t("#i"+t));const a=_t(s==="sandbox"?n.nodes()[0].contentDocument.body:"body"),o=s==="sandbox"?n.nodes()[0].contentDocument:document;P.debug("Rendering diagram "+e);const h=a.select(`[id='${t}']`);NO(h);const l=i.db.getRootDoc();Xv(l,h,void 0,!1,a,o,i);const u=Or.padding,f=h.node().getBBox(),p=f.width+u*2,g=f.height+u*2,y=p*1.75;Er(h,g,y,Or.useMaxWidth),h.attr("viewBox",`${f.x-Or.padding}  ${f.y-Or.padding} `+p+" "+g)},"draw"),MO=d(e=>e?e.length*Or.fontSizeFactor:1,"getLabelWidth"),Xv=d((e,t,r,i,s,n,a)=>{const o=new Nr({compound:!0,multigraph:!0});let h,l=!0;for(h=0;h<e.length;h++)if(e[h].stmt==="relation"){l=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:l?1:Or.edgeLengthFactor,nodeSep:l?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:l?1:Or.edgeLengthFactor,nodeSep:l?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}});const u=a.db.getStates(),f=a.db.getRelations(),p=Object.keys(u);for(const b of p){const _=u[b];r&&(_.parentId=r);let S;if(_.doc){let C=t.append("g").attr("id",_.id).attr("class","stateGroup");S=Xv(_.doc,C,_.id,!i,s,n,a);{C=EO(C,_,i);let k=C.node().getBBox();S.width=k.width,S.height=k.height+Or.padding/2,ld[_.id]={y:Or.compositTitleSize}}}else S=Mg(t,_,o);if(_.note){const C={descriptions:[],id:_.id+"-note",note:_.note,type:"note"},k=Mg(t,C,o);_.note.position==="left of"?(o.setNode(S.id+"-note",k),o.setNode(S.id,S)):(o.setNode(S.id,S),o.setNode(S.id+"-note",k)),o.setParent(S.id,S.id+"-group"),o.setParent(S.id+"-note",S.id+"-group")}else o.setNode(S.id,S)}P.debug("Count=",o.nodeCount(),o);let g=0;f.forEach(function(b){g++,P.debug("Setting edge",b),o.setEdge(b.id1,b.id2,{relation:b,width:MO(b.title),height:Or.labelHeight*Ct.getRows(b.title).length,labelpos:"c"},"id"+g)}),M4(o),P.debug("Graph after layout",o.nodes());const y=t.node();o.nodes().forEach(function(b){b!==void 0&&o.node(b)!==void 0?(P.warn("Node "+b+": "+JSON.stringify(o.node(b))),s.select("#"+y.id+" #"+b).attr("transform","translate("+(o.node(b).x-o.node(b).width/2)+","+(o.node(b).y+(ld[b]?ld[b].y:0)-o.node(b).height/2)+" )"),s.select("#"+y.id+" #"+b).attr("data-x-shift",o.node(b).x-o.node(b).width/2),n.querySelectorAll("#"+y.id+" #"+b+" .divider").forEach(S=>{const C=S.parentElement;let k=0,v=0;C&&(C.parentElement&&(k=C.parentElement.getBBox().width),v=parseInt(C.getAttribute("data-x-shift"),10),Number.isNaN(v)&&(v=0)),S.setAttribute("x1",0-v+8),S.setAttribute("x2",k-v-8)})):P.debug("No Node "+b+": "+JSON.stringify(o.node(b)))});let m=y.getBBox();o.edges().forEach(function(b){b!==void 0&&o.edge(b)!==void 0&&(P.debug("Edge "+b.v+" -> "+b.w+": "+JSON.stringify(o.edge(b))),BO(t,o.edge(b),o.edge(b).relation))}),m=y.getBBox();const x={id:r||"root",label:r||"root",width:0,height:0};return x.width=m.width+2*Or.padding,x.height=m.height+2*Or.padding,P.debug("Doc rendered",x,o),x},"renderDoc"),FO={setConf:IO,draw:$O},PO={parser:Nv,get db(){return new Vs(1)},renderer:FO,styles:jv,init:d(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const OO=Object.freeze(Object.defineProperty({__proto__:null,diagram:PO},Symbol.toStringTag,{value:"Module"}));var VO={parser:Nv,get db(){return new Vs(2)},renderer:bO,styles:jv,init:d(e=>{e.state||(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute},"init")};const zO=Object.freeze(Object.defineProperty({__proto__:null,diagram:VO},Symbol.toStringTag,{value:"Module"}));var N1=(function(){var e=d(function(f,p,g,y){for(g=g||{},y=f.length;y--;g[f[y]]=p);return g},"o"),t=[6,8,10,11,12,14,16,17,18],r=[1,9],i=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,14],h={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:d(function(p,g,y,m,x,b,_){var S=b.length-1;switch(x){case 1:return b[S-1];case 2:this.$=[];break;case 3:b[S-1].push(b[S]),this.$=b[S-1];break;case 4:case 5:this.$=b[S];break;case 6:case 7:this.$=[];break;case 8:m.setDiagramTitle(b[S].substr(6)),this.$=b[S].substr(6);break;case 9:this.$=b[S].trim(),m.setAccTitle(this.$);break;case 10:case 11:this.$=b[S].trim(),m.setAccDescription(this.$);break;case 12:m.addSection(b[S].substr(8)),this.$=b[S].substr(8);break;case 13:m.addTask(b[S-1],b[S]),this.$="task";break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:s,16:n,17:a,18:o},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:15,11:r,12:i,14:s,16:n,17:a,18:o},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,16]},{15:[1,17]},e(t,[2,11]),e(t,[2,12]),{19:[1,18]},e(t,[2,4]),e(t,[2,9]),e(t,[2,10]),e(t,[2,13])],defaultActions:{},parseError:d(function(p,g){if(g.recoverable)this.trace(p);else{var y=new Error(p);throw y.hash=g,y}},"parseError"),parse:d(function(p){var g=this,y=[0],m=[],x=[null],b=[],_=this.table,S="",C=0,k=0,v=2,A=1,L=b.slice.call(arguments,1),w=Object.create(this.lexer),R={yy:{}};for(var T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(R.yy[T]=this.yy[T]);w.setInput(p,R.yy),R.yy.lexer=w,R.yy.parser=this,typeof w.yylloc>"u"&&(w.yylloc={});var V=w.yylloc;b.push(V);var N=w.options&&w.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function D(dt){y.length=y.length-2*dt,x.length=x.length-dt,b.length=b.length-dt}d(D,"popStack");function E(){var dt;return dt=m.pop()||w.lex()||A,typeof dt!="number"&&(dt instanceof Array&&(m=dt,dt=m.pop()),dt=g.symbols_[dt]||dt),dt}d(E,"lex");for(var M,F,I,B,X={},$,G,nt,ht;;){if(F=y[y.length-1],this.defaultActions[F]?I=this.defaultActions[F]:((M===null||typeof M>"u")&&(M=E()),I=_[F]&&_[F][M]),typeof I>"u"||!I.length||!I[0]){var tt="";ht=[];for($ in _[F])this.terminals_[$]&&$>v&&ht.push("'"+this.terminals_[$]+"'");w.showPosition?tt="Parse error on line "+(C+1)+`:
`+w.showPosition()+`
Expecting `+ht.join(", ")+", got '"+(this.terminals_[M]||M)+"'":tt="Parse error on line "+(C+1)+": Unexpected "+(M==A?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(tt,{text:w.match,token:this.terminals_[M]||M,line:w.yylineno,loc:V,expected:ht})}if(I[0]instanceof Array&&I.length>1)throw new Error("Parse Error: multiple actions possible at state: "+F+", token: "+M);switch(I[0]){case 1:y.push(M),x.push(w.yytext),b.push(w.yylloc),y.push(I[1]),M=null,k=w.yyleng,S=w.yytext,C=w.yylineno,V=w.yylloc;break;case 2:if(G=this.productions_[I[1]][1],X.$=x[x.length-G],X._$={first_line:b[b.length-(G||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(G||1)].first_column,last_column:b[b.length-1].last_column},N&&(X._$.range=[b[b.length-(G||1)].range[0],b[b.length-1].range[1]]),B=this.performAction.apply(X,[S,k,C,R.yy,I[1],x,b].concat(L)),typeof B<"u")return B;G&&(y=y.slice(0,-1*G*2),x=x.slice(0,-1*G),b=b.slice(0,-1*G)),y.push(this.productions_[I[1]][0]),x.push(X.$),b.push(X._$),nt=_[y[y.length-2]][y[y.length-1]],y.push(nt);break;case 3:return!0}}return!0},"parse")},l=(function(){var f={EOF:1,parseError:d(function(g,y){if(this.yy.parser)this.yy.parser.parseError(g,y);else throw new Error(g)},"parseError"),setInput:d(function(p,g){return this.yy=g||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var g=p.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},"input"),unput:d(function(p){var g=p.length,y=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===m.length?this.yylloc.first_column:0)+m[m.length-y.length].length-y[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(p){this.unput(this.match.slice(p))},"less"),pastInput:d(function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var p=this.pastInput(),g=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+g+"^"},"showPosition"),test_match:d(function(p,g){var y,m,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),m=p[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],y=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var b in x)this[b]=x[b];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,g,y,m;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),b=0;b<x.length;b++)if(y=this._input.match(this.rules[x[b]]),y&&(!g||y[0].length>g[0].length)){if(g=y,m=b,this.options.backtrack_lexer){if(p=this.test_match(y,x[b]),p!==!1)return p;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(p=this.test_match(g,x[m]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var g=this.next();return g||this.lex()},"lex"),begin:d(function(g){this.conditionStack.push(g)},"begin"),popState:d(function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},"topState"),pushState:d(function(g){this.begin(g)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(g,y,m,x){switch(m){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return f})();h.lexer=l;function u(){this.yy={}}return d(u,"Parser"),u.prototype=h,h.Parser=u,new u})();N1.parser=N1;var WO=N1,mo="",Sp=[],El=[],Al=[],qO=d(function(){Sp.length=0,El.length=0,mo="",Al.length=0,qe()},"clear"),YO=d(function(e){mo=e,Sp.push(e)},"addSection"),GO=d(function(){return Sp},"getSections"),HO=d(function(){let e=Pg();const t=100;let r=0;for(;!e&&r<t;)e=Pg(),r++;return El.push(...Al),El},"getTasks"),UO=d(function(){const e=[];return El.forEach(r=>{r.people&&e.push(...r.people)}),[...new Set(e)].sort()},"updateActors"),jO=d(function(e,t){const r=t.substr(1).split(":");let i=0,s=[];r.length===1?(i=Number(r[0]),s=[]):(i=Number(r[0]),s=r[1].split(","));const n=s.map(o=>o.trim()),a={section:mo,type:mo,people:n,task:e,score:i};Al.push(a)},"addTask"),XO=d(function(e){const t={section:mo,type:mo,description:e,task:e,classes:[]};El.push(t)},"addTaskOrg"),Pg=d(function(){const e=d(function(r){return Al[r].processed},"compileTask");let t=!0;for(const[r,i]of Al.entries())e(r),t=t&&i.processed;return t},"compileTasks"),KO=d(function(){return UO()},"getActors"),Og={getConfig:d(()=>it().journey,"getConfig"),clear:qO,setDiagramTitle:ir,getDiagramTitle:Ye,setAccTitle:We,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addSection:YO,getSections:GO,getTasks:HO,addTask:jO,addTaskOrg:XO,getActors:KO},QO=d(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${e.textColor}
  }

  .legend {
    fill: ${e.textColor};
    font-family: ${e.fontFamily};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${e.textColor}
  }

  .face {
    ${e.faceColor?`fill: ${e.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${e.fillType0?`fill: ${e.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${e.fillType0?`fill: ${e.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${e.fillType0?`fill: ${e.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${e.fillType0?`fill: ${e.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${e.fillType0?`fill: ${e.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${e.fillType0?`fill: ${e.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${e.fillType0?`fill: ${e.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${e.fillType0?`fill: ${e.fillType7}`:""};
  }

  .actor-0 {
    ${e.actor0?`fill: ${e.actor0}`:""};
  }
  .actor-1 {
    ${e.actor1?`fill: ${e.actor1}`:""};
  }
  .actor-2 {
    ${e.actor2?`fill: ${e.actor2}`:""};
  }
  .actor-3 {
    ${e.actor3?`fill: ${e.actor3}`:""};
  }
  .actor-4 {
    ${e.actor4?`fill: ${e.actor4}`:""};
  }
  .actor-5 {
    ${e.actor5?`fill: ${e.actor5}`:""};
  }
  ${ql()}
`,"getStyles"),ZO=QO,Cp=d(function(e,t){return cu(e,t)},"drawRect"),JO=d(function(e,t){const i=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=e.append("g");s.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(h){const l=uo().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}d(n,"smile");function a(h){const l=uo().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}d(a,"sad");function o(h){h.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return d(o,"ambivalent"),t.score>3?n(s):t.score<3?a(s):o(s),i},"drawFace"),Kv=d(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),Qv=d(function(e,t){return rI(e,t)},"drawText"),tV=d(function(e,t){function r(s,n,a,o,h){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-h)+" "+(s+a-h*1.2)+","+(n+o)+" "+s+","+(n+o)}d(r,"genPoints");const i=e.append("polygon");i.attr("points",r(t.x,t.y,50,20,7)),i.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,Qv(e,t)},"drawLabel"),eV=d(function(e,t,r){const i=e.append("g"),s=qr();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width*t.taskCount+r.diagramMarginX*(t.taskCount-1),s.height=r.height,s.class="journey-section section-type-"+t.num,s.rx=3,s.ry=3,Cp(i,s),Zv(r)(t.text,i,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),Vg=-1,rV=d(function(e,t,r){const i=t.x+r.width/2,s=e.append("g");Vg++,s.append("line").attr("id","task"+Vg).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),JO(s,{cx:i,cy:300+(5-t.score)*30,score:t.score});const a=qr();a.x=t.x,a.y=t.y,a.fill=t.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+t.num,a.rx=3,a.ry=3,Cp(s,a);let o=t.x+14;t.people.forEach(h=>{const l=t.actors[h].color,u={cx:o,cy:t.y,r:7,fill:l,stroke:"#000",title:h,pos:t.actors[h].position};Kv(s,u),o+=10}),Zv(r)(t.task,s,a.x,a.y,a.width,a.height,{class:"task"},r,t.colour)},"drawTask"),iV=d(function(e,t){K4(e,t)},"drawBackgroundRect"),Zv=(function(){function e(s,n,a,o,h,l,u,f){const p=n.append("text").attr("x",a+h/2).attr("y",o+l/2+5).style("font-color",f).style("text-anchor","middle").text(s);i(p,u)}d(e,"byText");function t(s,n,a,o,h,l,u,f,p){const{taskFontSize:g,taskFontFamily:y}=f,m=s.split(/<br\s*\/?>/gi);for(let x=0;x<m.length;x++){const b=x*g-g*(m.length-1)/2,_=n.append("text").attr("x",a+h/2).attr("y",o).attr("fill",p).style("text-anchor","middle").style("font-size",g).style("font-family",y);_.append("tspan").attr("x",a+h/2).attr("dy",b).text(m[x]),_.attr("y",o+l/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(_,u)}}d(t,"byTspan");function r(s,n,a,o,h,l,u,f){const p=n.append("switch"),y=p.append("foreignObject").attr("x",a).attr("y",o).attr("width",h).attr("height",l).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),t(s,p,a,o,h,l,u,f),i(y,u)}d(r,"byFo");function i(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return d(i,"_setTextAttrs"),function(s){return s.textPlacement==="fo"?r:s.textPlacement==="old"?e:t}})(),sV=d(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),Ll={drawRect:Cp,drawCircle:Kv,drawSection:eV,drawText:Qv,drawLabel:tV,drawTask:rV,drawBackgroundRect:iV,initGraphics:sV},nV=d(function(e){Object.keys(e).forEach(function(r){ti[r]=e[r]})},"setConf"),Ui={},Bc=0;function Jv(e){const t=it().journey,r=t.maxLabelWidth;Bc=0;let i=60;Object.keys(Ui).forEach(s=>{const n=Ui[s].color,a={cx:20,cy:i,r:7,fill:n,stroke:"#000",pos:Ui[s].position};Ll.drawCircle(e,a);let o=e.append("text").attr("visibility","hidden").text(s);const h=o.node().getBoundingClientRect().width;o.remove();let l=[];if(h<=r)l=[s];else{const u=s.split(" ");let f="";o=e.append("text").attr("visibility","hidden"),u.forEach(p=>{const g=f?`${f} ${p}`:p;if(o.text(g),o.node().getBoundingClientRect().width>r){if(f&&l.push(f),f=p,o.text(p),o.node().getBoundingClientRect().width>r){let m="";for(const x of p)m+=x,o.text(m+"-"),o.node().getBoundingClientRect().width>r&&(l.push(m.slice(0,-1)+"-"),m=x);f=m}}else f=g}),f&&l.push(f),o.remove()}l.forEach((u,f)=>{const p={x:40,y:i+7+f*20,fill:"#666",text:u,textMargin:t.boxTextMargin??5},y=Ll.drawText(e,p).node().getBoundingClientRect().width;y>Bc&&y>t.leftMargin-y&&(Bc=y)}),i+=Math.max(20,l.length*20)})}d(Jv,"drawActorLegend");var ti=it().journey,ns=0,aV=d(function(e,t,r,i){const s=it(),n=s.journey.titleColor,a=s.journey.titleFontSize,o=s.journey.titleFontFamily,h=s.securityLevel;let l;h==="sandbox"&&(l=_t("#i"+t));const u=_t(h==="sandbox"?l.nodes()[0].contentDocument.body:"body");jr.init();const f=u.select("#"+t);Ll.initGraphics(f);const p=i.db.getTasks(),g=i.db.getDiagramTitle(),y=i.db.getActors();for(const C in Ui)delete Ui[C];let m=0;y.forEach(C=>{Ui[C]={color:ti.actorColours[m%ti.actorColours.length],position:m},m++}),Jv(f),ns=ti.leftMargin+Bc,jr.insert(0,0,ns,Object.keys(Ui).length*50),oV(f,p,0);const x=jr.getBounds();g&&f.append("text").text(g).attr("x",ns).attr("font-size",a).attr("font-weight","bold").attr("y",25).attr("fill",n).attr("font-family",o);const b=x.stopy-x.starty+2*ti.diagramMarginY,_=ns+x.stopx+2*ti.diagramMarginX;Er(f,b,_,ti.useMaxWidth),f.append("line").attr("x1",ns).attr("y1",ti.height*4).attr("x2",_-ns-4).attr("y2",ti.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const S=g?70:0;f.attr("viewBox",`${x.startx} -25 ${_} ${b+S}`),f.attr("preserveAspectRatio","xMinYMin meet"),f.attr("height",b+S+25)},"draw"),jr={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:d(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:d(function(e,t,r,i){e[t]===void 0?e[t]=r:e[t]=i(r,e[t])},"updateVal"),updateBounds:d(function(e,t,r,i){const s=it().journey,n=this;let a=0;function o(h){return d(function(u){a++;const f=n.sequenceItems.length-a+1;n.updateVal(u,"starty",t-f*s.boxMargin,Math.min),n.updateVal(u,"stopy",i+f*s.boxMargin,Math.max),n.updateVal(jr.data,"startx",e-f*s.boxMargin,Math.min),n.updateVal(jr.data,"stopx",r+f*s.boxMargin,Math.max),h!=="activation"&&(n.updateVal(u,"startx",e-f*s.boxMargin,Math.min),n.updateVal(u,"stopx",r+f*s.boxMargin,Math.max),n.updateVal(jr.data,"starty",t-f*s.boxMargin,Math.min),n.updateVal(jr.data,"stopy",i+f*s.boxMargin,Math.max))},"updateItemBounds")}d(o,"updateFn"),this.sequenceItems.forEach(o())},"updateBounds"),insert:d(function(e,t,r,i){const s=Math.min(e,r),n=Math.max(e,r),a=Math.min(t,i),o=Math.max(t,i);this.updateVal(jr.data,"startx",s,Math.min),this.updateVal(jr.data,"starty",a,Math.min),this.updateVal(jr.data,"stopx",n,Math.max),this.updateVal(jr.data,"stopy",o,Math.max),this.updateBounds(s,a,n,o)},"insert"),bumpVerticalPos:d(function(e){this.verticalPos=this.verticalPos+e,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:d(function(){return this.verticalPos},"getVerticalPos"),getBounds:d(function(){return this.data},"getBounds")},cd=ti.sectionFills,zg=ti.sectionColours,oV=d(function(e,t,r){const i=it().journey;let s="";const n=i.height*2+i.diagramMarginY,a=r+n;let o=0,h="#CCC",l="black",u=0;for(const[f,p]of t.entries()){if(s!==p.section){h=cd[o%cd.length],u=o%cd.length,l=zg[o%zg.length];let y=0;const m=p.section;for(let b=f;b<t.length&&t[b].section==m;b++)y=y+1;const x={x:f*i.taskMargin+f*i.width+ns,y:50,text:p.section,fill:h,num:u,colour:l,taskCount:y};Ll.drawSection(e,x,i),s=p.section,o++}const g=p.people.reduce((y,m)=>(Ui[m]&&(y[m]=Ui[m]),y),{});p.x=f*i.taskMargin+f*i.width+ns,p.y=a,p.width=i.diagramMarginX,p.height=i.diagramMarginY,p.colour=l,p.fill=h,p.num=u,p.actors=g,Ll.drawTask(e,p,i),jr.insert(p.x,p.y,p.x+p.width+i.taskMargin,450)}},"drawTasks"),Wg={setConf:nV,draw:aV},lV={parser:WO,db:Og,renderer:Wg,styles:ZO,init:d(e=>{Wg.setConf(e.journey),Og.clear()},"init")};const cV=Object.freeze(Object.defineProperty({__proto__:null,diagram:lV},Symbol.toStringTag,{value:"Module"}));var $1=(function(){var e=d(function(p,g,y,m){for(y=y||{},m=p.length;m--;y[p[m]]=g);return y},"o"),t=[6,8,10,11,12,14,16,17,20,21],r=[1,9],i=[1,10],s=[1,11],n=[1,12],a=[1,13],o=[1,16],h=[1,17],l={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:d(function(g,y,m,x,b,_,S){var C=_.length-1;switch(b){case 1:return _[C-1];case 2:this.$=[];break;case 3:_[C-1].push(_[C]),this.$=_[C-1];break;case 4:case 5:this.$=_[C];break;case 6:case 7:this.$=[];break;case 8:x.getCommonDb().setDiagramTitle(_[C].substr(6)),this.$=_[C].substr(6);break;case 9:this.$=_[C].trim(),x.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=_[C].trim(),x.getCommonDb().setAccDescription(this.$);break;case 12:x.addSection(_[C].substr(8)),this.$=_[C].substr(8);break;case 15:x.addTask(_[C],0,""),this.$=_[C];break;case 16:x.addEvent(_[C].substr(2)),this.$=_[C];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:s,16:n,17:a,18:14,19:15,20:o,21:h},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:18,11:r,12:i,14:s,16:n,17:a,18:14,19:15,20:o,21:h},e(t,[2,5]),e(t,[2,6]),e(t,[2,8]),{13:[1,19]},{15:[1,20]},e(t,[2,11]),e(t,[2,12]),e(t,[2,13]),e(t,[2,14]),e(t,[2,15]),e(t,[2,16]),e(t,[2,4]),e(t,[2,9]),e(t,[2,10])],defaultActions:{},parseError:d(function(g,y){if(y.recoverable)this.trace(g);else{var m=new Error(g);throw m.hash=y,m}},"parseError"),parse:d(function(g){var y=this,m=[0],x=[],b=[null],_=[],S=this.table,C="",k=0,v=0,A=2,L=1,w=_.slice.call(arguments,1),R=Object.create(this.lexer),T={yy:{}};for(var V in this.yy)Object.prototype.hasOwnProperty.call(this.yy,V)&&(T.yy[V]=this.yy[V]);R.setInput(g,T.yy),T.yy.lexer=R,T.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var N=R.yylloc;_.push(N);var D=R.options&&R.options.ranges;typeof T.yy.parseError=="function"?this.parseError=T.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function E(st){m.length=m.length-2*st,b.length=b.length-st,_.length=_.length-st}d(E,"popStack");function M(){var st;return st=x.pop()||R.lex()||L,typeof st!="number"&&(st instanceof Array&&(x=st,st=x.pop()),st=y.symbols_[st]||st),st}d(M,"lex");for(var F,I,B,X,$={},G,nt,ht,tt;;){if(I=m[m.length-1],this.defaultActions[I]?B=this.defaultActions[I]:((F===null||typeof F>"u")&&(F=M()),B=S[I]&&S[I][F]),typeof B>"u"||!B.length||!B[0]){var dt="";tt=[];for(G in S[I])this.terminals_[G]&&G>A&&tt.push("'"+this.terminals_[G]+"'");R.showPosition?dt="Parse error on line "+(k+1)+`:
`+R.showPosition()+`
Expecting `+tt.join(", ")+", got '"+(this.terminals_[F]||F)+"'":dt="Parse error on line "+(k+1)+": Unexpected "+(F==L?"end of input":"'"+(this.terminals_[F]||F)+"'"),this.parseError(dt,{text:R.match,token:this.terminals_[F]||F,line:R.yylineno,loc:N,expected:tt})}if(B[0]instanceof Array&&B.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+F);switch(B[0]){case 1:m.push(F),b.push(R.yytext),_.push(R.yylloc),m.push(B[1]),F=null,v=R.yyleng,C=R.yytext,k=R.yylineno,N=R.yylloc;break;case 2:if(nt=this.productions_[B[1]][1],$.$=b[b.length-nt],$._$={first_line:_[_.length-(nt||1)].first_line,last_line:_[_.length-1].last_line,first_column:_[_.length-(nt||1)].first_column,last_column:_[_.length-1].last_column},D&&($._$.range=[_[_.length-(nt||1)].range[0],_[_.length-1].range[1]]),X=this.performAction.apply($,[C,v,k,T.yy,B[1],b,_].concat(w)),typeof X<"u")return X;nt&&(m=m.slice(0,-1*nt*2),b=b.slice(0,-1*nt),_=_.slice(0,-1*nt)),m.push(this.productions_[B[1]][0]),b.push($.$),_.push($._$),ht=S[m[m.length-2]][m[m.length-1]],m.push(ht);break;case 3:return!0}}return!0},"parse")},u=(function(){var p={EOF:1,parseError:d(function(y,m){if(this.yy.parser)this.yy.parser.parseError(y,m);else throw new Error(y)},"parseError"),setInput:d(function(g,y){return this.yy=y||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var y=g.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},"input"),unput:d(function(g){var y=g.length,m=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===x.length?this.yylloc.first_column:0)+x[x.length-m.length].length-m[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(g){this.unput(this.match.slice(g))},"less"),pastInput:d(function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var g=this.pastInput(),y=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+y+"^"},"showPosition"),test_match:d(function(g,y){var m,x,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),x=g[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],m=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var _ in b)this[_]=b[_];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,y,m,x;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),_=0;_<b.length;_++)if(m=this._input.match(this.rules[b[_]]),m&&(!y||m[0].length>y[0].length)){if(y=m,x=_,this.options.backtrack_lexer){if(g=this.test_match(m,b[_]),g!==!1)return g;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(g=this.test_match(y,b[x]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var y=this.next();return y||this.lex()},"lex"),begin:d(function(y){this.conditionStack.push(y)},"begin"),popState:d(function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},"topState"),pushState:d(function(y){this.begin(y)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(y,m,x,b){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return p})();l.lexer=u;function f(){this.yy={}}return d(f,"Parser"),f.prototype=l,l.Parser=f,new f})();$1.parser=$1;var hV=$1,t_={};Ph(t_,{addEvent:()=>l_,addSection:()=>s_,addTask:()=>o_,addTaskOrg:()=>c_,clear:()=>i_,default:()=>uV,getCommonDb:()=>r_,getSections:()=>n_,getTasks:()=>a_});var xo="",e_=0,Ep=[],Dh=[],bo=[],r_=d(()=>sf,"getCommonDb"),i_=d(function(){Ep.length=0,Dh.length=0,xo="",bo.length=0,qe()},"clear"),s_=d(function(e){xo=e,Ep.push(e)},"addSection"),n_=d(function(){return Ep},"getSections"),a_=d(function(){let e=qg();const t=100;let r=0;for(;!e&&r<t;)e=qg(),r++;return Dh.push(...bo),Dh},"getTasks"),o_=d(function(e,t,r){const i={id:e_++,section:xo,type:xo,task:e,score:t||0,events:r?[r]:[]};bo.push(i)},"addTask"),l_=d(function(e){bo.find(r=>r.id===e_-1).events.push(e)},"addEvent"),c_=d(function(e){const t={section:xo,type:xo,description:e,task:e,classes:[]};Dh.push(t)},"addTaskOrg"),qg=d(function(){const e=d(function(r){return bo[r].processed},"compileTask");let t=!0;for(const[r,i]of bo.entries())e(r),t=t&&i.processed;return t},"compileTasks"),uV={clear:i_,getCommonDb:r_,addSection:s_,getSections:n_,getTasks:a_,addTask:o_,addTaskOrg:c_,addEvent:l_},dV=12,bu=d(function(e,t){const r=e.append("rect");return r.attr("x",t.x),r.attr("y",t.y),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("width",t.width),r.attr("height",t.height),r.attr("rx",t.rx),r.attr("ry",t.ry),t.class!==void 0&&r.attr("class",t.class),r},"drawRect"),fV=d(function(e,t){const i=e.append("circle").attr("cx",t.cx).attr("cy",t.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),s=e.append("g");s.append("circle").attr("cx",t.cx-15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),s.append("circle").attr("cx",t.cx+15/3).attr("cy",t.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function n(h){const l=uo().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+t.cx+","+(t.cy+2)+")")}d(n,"smile");function a(h){const l=uo().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",l).attr("transform","translate("+t.cx+","+(t.cy+7)+")")}d(a,"sad");function o(h){h.append("line").attr("class","mouth").attr("stroke",2).attr("x1",t.cx-5).attr("y1",t.cy+7).attr("x2",t.cx+5).attr("y2",t.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return d(o,"ambivalent"),t.score>3?n(s):t.score<3?a(s):o(s),i},"drawFace"),pV=d(function(e,t){const r=e.append("circle");return r.attr("cx",t.cx),r.attr("cy",t.cy),r.attr("class","actor-"+t.pos),r.attr("fill",t.fill),r.attr("stroke",t.stroke),r.attr("r",t.r),r.class!==void 0&&r.attr("class",r.class),t.title!==void 0&&r.append("title").text(t.title),r},"drawCircle"),h_=d(function(e,t){const r=t.text.replace(/<br\s*\/?>/gi," "),i=e.append("text");i.attr("x",t.x),i.attr("y",t.y),i.attr("class","legend"),i.style("text-anchor",t.anchor),t.class!==void 0&&i.attr("class",t.class);const s=i.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.text(r),i},"drawText"),gV=d(function(e,t){function r(s,n,a,o,h){return s+","+n+" "+(s+a)+","+n+" "+(s+a)+","+(n+o-h)+" "+(s+a-h*1.2)+","+(n+o)+" "+s+","+(n+o)}d(r,"genPoints");const i=e.append("polygon");i.attr("points",r(t.x,t.y,50,20,7)),i.attr("class","labelBox"),t.y=t.y+t.labelMargin,t.x=t.x+.5*t.labelMargin,h_(e,t)},"drawLabel"),yV=d(function(e,t,r){const i=e.append("g"),s=Ap();s.x=t.x,s.y=t.y,s.fill=t.fill,s.width=r.width,s.height=r.height,s.class="journey-section section-type-"+t.num,s.rx=3,s.ry=3,bu(i,s),u_(r)(t.text,i,s.x,s.y,s.width,s.height,{class:"journey-section section-type-"+t.num},r,t.colour)},"drawSection"),Yg=-1,mV=d(function(e,t,r){const i=t.x+r.width/2,s=e.append("g");Yg++,s.append("line").attr("id","task"+Yg).attr("x1",i).attr("y1",t.y).attr("x2",i).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),fV(s,{cx:i,cy:300+(5-t.score)*30,score:t.score});const a=Ap();a.x=t.x,a.y=t.y,a.fill=t.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+t.num,a.rx=3,a.ry=3,bu(s,a),u_(r)(t.task,s,a.x,a.y,a.width,a.height,{class:"task"},r,t.colour)},"drawTask"),xV=d(function(e,t){bu(e,{x:t.startx,y:t.starty,width:t.stopx-t.startx,height:t.stopy-t.starty,fill:t.fill,class:"rect"}).lower()},"drawBackgroundRect"),bV=d(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),Ap=d(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),u_=(function(){function e(s,n,a,o,h,l,u,f){const p=n.append("text").attr("x",a+h/2).attr("y",o+l/2+5).style("font-color",f).style("text-anchor","middle").text(s);i(p,u)}d(e,"byText");function t(s,n,a,o,h,l,u,f,p){const{taskFontSize:g,taskFontFamily:y}=f,m=s.split(/<br\s*\/?>/gi);for(let x=0;x<m.length;x++){const b=x*g-g*(m.length-1)/2,_=n.append("text").attr("x",a+h/2).attr("y",o).attr("fill",p).style("text-anchor","middle").style("font-size",g).style("font-family",y);_.append("tspan").attr("x",a+h/2).attr("dy",b).text(m[x]),_.attr("y",o+l/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(_,u)}}d(t,"byTspan");function r(s,n,a,o,h,l,u,f){const p=n.append("switch"),y=p.append("foreignObject").attr("x",a).attr("y",o).attr("width",h).attr("height",l).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),t(s,p,a,o,h,l,u,f),i(y,u)}d(r,"byFo");function i(s,n){for(const a in n)a in n&&s.attr(a,n[a])}return d(i,"_setTextAttrs"),function(s){return s.textPlacement==="fo"?r:s.textPlacement==="old"?e:t}})(),vV=d(function(e){e.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function Lp(e,t){e.each(function(){var r=_t(this),i=r.text().split(/(\s+|<br>)/).reverse(),s,n=[],a=1.1,o=r.attr("y"),h=parseFloat(r.attr("dy")),l=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",h+"em");for(let u=0;u<i.length;u++)s=i[i.length-1-u],n.push(s),l.text(n.join(" ").trim()),(l.node().getComputedTextLength()>t||s==="<br>")&&(n.pop(),l.text(n.join(" ").trim()),s==="<br>"?n=[""]:n=[s],l=r.append("tspan").attr("x",0).attr("y",o).attr("dy",a+"em").text(s))})}d(Lp,"wrap");var _V=d(function(e,t,r,i){var f;const s=r%dV-1,n=e.append("g");t.section=s,n.attr("class",(t.class?t.class+" ":"")+"timeline-node "+("section-"+s));const a=n.append("g"),o=n.append("g"),l=o.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Lp,t.width).node().getBBox(),u=(f=i.fontSize)!=null&&f.replace?i.fontSize.replace("px",""):i.fontSize;return t.height=l.height+u*1.1*.5+t.padding,t.height=Math.max(t.height,t.maxHeight),t.width=t.width+2*t.padding,o.attr("transform","translate("+t.width/2+", "+t.padding/2+")"),wV(a,t,s,i),t},"drawNode"),kV=d(function(e,t,r){var o;const i=e.append("g"),n=i.append("text").text(t.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Lp,t.width).node().getBBox(),a=(o=r.fontSize)!=null&&o.replace?r.fontSize.replace("px",""):r.fontSize;return i.remove(),n.height+a*1.1*.5+t.padding},"getVirtualNodeHeight"),wV=d(function(e,t,r){e.append("path").attr("id","node-"+t.id).attr("class","node-bkg node-"+t.type).attr("d",`M0 ${t.height-5} v${-t.height+10} q0,-5 5,-5 h${t.width-10} q5,0 5,5 v${t.height-5} H0 Z`),e.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",t.height).attr("x2",t.width).attr("y2",t.height)},"defaultBkg"),zs={drawRect:bu,drawCircle:pV,drawSection:yV,drawText:h_,drawLabel:gV,drawTask:mV,drawBackgroundRect:xV,getTextObj:bV,getNoteRect:Ap,initGraphics:vV,drawNode:_V,getVirtualNodeHeight:kV},TV=d(function(e,t,r,i){var w,R,T;const s=it(),n=((w=s.timeline)==null?void 0:w.leftMargin)??50;P.debug("timeline",i.db);const a=s.securityLevel;let o;a==="sandbox"&&(o=_t("#i"+t));const l=_t(a==="sandbox"?o.nodes()[0].contentDocument.body:"body").select("#"+t);l.append("g");const u=i.db.getTasks(),f=i.db.getCommonDb().getDiagramTitle();P.debug("task",u),zs.initGraphics(l);const p=i.db.getSections();P.debug("sections",p);let g=0,y=0,m=0,x=0,b=50+n,_=50;x=50;let S=0,C=!0;p.forEach(function(V){const N={number:S,descr:V,section:S,width:150,padding:20,maxHeight:g},D=zs.getVirtualNodeHeight(l,N,s);P.debug("sectionHeight before draw",D),g=Math.max(g,D+20)});let k=0,v=0;P.debug("tasks.length",u.length);for(const[V,N]of u.entries()){const D={number:V,descr:N,section:N.section,width:150,padding:20,maxHeight:y},E=zs.getVirtualNodeHeight(l,D,s);P.debug("taskHeight before draw",E),y=Math.max(y,E+20),k=Math.max(k,N.events.length);let M=0;for(const F of N.events){const I={descr:F,section:N.section,number:N.section,width:150,padding:20,maxHeight:50};M+=zs.getVirtualNodeHeight(l,I,s)}N.events.length>0&&(M+=(N.events.length-1)*10),v=Math.max(v,M)}P.debug("maxSectionHeight before draw",g),P.debug("maxTaskHeight before draw",y),p&&p.length>0?p.forEach(V=>{const N=u.filter(F=>F.section===V),D={number:S,descr:V,section:S,width:200*Math.max(N.length,1)-50,padding:20,maxHeight:g};P.debug("sectionNode",D);const E=l.append("g"),M=zs.drawNode(E,D,S,s);P.debug("sectionNode output",M),E.attr("transform",`translate(${b}, ${x})`),_+=g+50,N.length>0&&Gg(l,N,S,b,_,y,s,k,v,g,!1),b+=200*Math.max(N.length,1),_=x,S++}):(C=!1,Gg(l,u,S,b,_,y,s,k,v,g,!0));const A=l.node().getBBox();P.debug("bounds",A),f&&l.append("text").text(f).attr("x",A.width/2-n).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),m=C?g+y+150:y+100,l.append("g").attr("class","lineWrapper").append("line").attr("x1",n).attr("y1",m).attr("x2",A.width+3*n).attr("y2",m).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),Ml(void 0,l,((R=s.timeline)==null?void 0:R.padding)??50,((T=s.timeline)==null?void 0:T.useMaxWidth)??!1)},"draw"),Gg=d(function(e,t,r,i,s,n,a,o,h,l,u){var f;for(const p of t){const g={descr:p.task,section:r,number:r,width:150,padding:20,maxHeight:n};P.debug("taskNode",g);const y=e.append("g").attr("class","taskWrapper"),x=zs.drawNode(y,g,r,a).height;if(P.debug("taskHeight after draw",x),y.attr("transform",`translate(${i}, ${s})`),n=Math.max(n,x),p.events){const b=e.append("g").attr("class","lineWrapper");let _=n;s+=100,_=_+SV(e,p.events,r,i,s,a),s-=100,b.append("line").attr("x1",i+190/2).attr("y1",s+n).attr("x2",i+190/2).attr("y2",s+n+100+h+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}i=i+200,u&&!((f=a.timeline)!=null&&f.disableMulticolor)&&r++}s=s-10},"drawTasks"),SV=d(function(e,t,r,i,s,n){let a=0;const o=s;s=s+100;for(const h of t){const l={descr:h,section:r,number:r,width:150,padding:20,maxHeight:50};P.debug("eventNode",l);const u=e.append("g").attr("class","eventWrapper"),p=zs.drawNode(u,l,r,n).height;a=a+p,u.attr("transform",`translate(${i}, ${s})`),s=s+10+p}return s=o,a},"drawEvents"),CV={setConf:d(()=>{},"setConf"),draw:TV},EV=d(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],bs(e["lineColor"+r])?e["lineColor"+r]=Mt(e["lineColor"+r],20):e["lineColor"+r]=Gt(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const i=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${i};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${e["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),AV=d(e=>`
  .edge {
    stroke-width: 3;
  }
  ${EV(e)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,"getStyles"),LV=AV,DV={db:t_,renderer:CV,parser:hV,styles:LV};const RV=Object.freeze(Object.defineProperty({__proto__:null,diagram:DV},Symbol.toStringTag,{value:"Module"}));var M1=(function(){var e=d(function(C,k,v,A){for(v=v||{},A=C.length;A--;v[C[A]]=k);return v},"o"),t=[1,4],r=[1,13],i=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],h=[6,7,8],l=[1,26],u=[1,24],f=[1,25],p=[6,7,11],g=[1,6,13,15,16,19,22],y=[1,33],m=[1,34],x=[1,6,7,11,13,15,16,19,22],b={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:d(function(k,v,A,L,w,R,T){var V=R.length-1;switch(w){case 6:case 7:return L;case 8:L.getLogger().trace("Stop NL ");break;case 9:L.getLogger().trace("Stop EOF ");break;case 11:L.getLogger().trace("Stop NL2 ");break;case 12:L.getLogger().trace("Stop EOF2 ");break;case 15:L.getLogger().info("Node: ",R[V].id),L.addNode(R[V-1].length,R[V].id,R[V].descr,R[V].type);break;case 16:L.getLogger().trace("Icon: ",R[V]),L.decorateNode({icon:R[V]});break;case 17:case 21:L.decorateNode({class:R[V]});break;case 18:L.getLogger().trace("SPACELIST");break;case 19:L.getLogger().trace("Node: ",R[V].id),L.addNode(0,R[V].id,R[V].descr,R[V].type);break;case 20:L.decorateNode({icon:R[V]});break;case 25:L.getLogger().trace("node found ..",R[V-2]),this.$={id:R[V-1],descr:R[V-1],type:L.getType(R[V-2],R[V])};break;case 26:this.$={id:R[V],descr:R[V],type:L.nodeType.DEFAULT};break;case 27:L.getLogger().trace("node found ..",R[V-3]),this.$={id:R[V-3],descr:R[V-1],type:L.getType(R[V-2],R[V])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:i,14:14,15:s,16:n,17:17,18:18,19:a,22:o},e(h,[2,3]),{1:[2,2]},e(h,[2,4]),e(h,[2,5]),{1:[2,6],6:r,12:21,13:i,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:r,9:22,12:11,13:i,14:14,15:s,16:n,17:17,18:18,19:a,22:o},{6:l,7:u,10:23,11:f},e(p,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:a,22:o}),e(p,[2,18]),e(p,[2,19]),e(p,[2,20]),e(p,[2,21]),e(p,[2,23]),e(p,[2,24]),e(p,[2,26],{19:[1,30]}),{20:[1,31]},{6:l,7:u,10:32,11:f},{1:[2,7],6:r,12:21,13:i,14:14,15:s,16:n,17:17,18:18,19:a,22:o},e(g,[2,14],{7:y,11:m}),e(x,[2,8]),e(x,[2,9]),e(x,[2,10]),e(p,[2,15]),e(p,[2,16]),e(p,[2,17]),{20:[1,35]},{21:[1,36]},e(g,[2,13],{7:y,11:m}),e(x,[2,11]),e(x,[2,12]),{21:[1,37]},e(p,[2,25]),e(p,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:d(function(k,v){if(v.recoverable)this.trace(k);else{var A=new Error(k);throw A.hash=v,A}},"parseError"),parse:d(function(k){var v=this,A=[0],L=[],w=[null],R=[],T=this.table,V="",N=0,D=0,E=2,M=1,F=R.slice.call(arguments,1),I=Object.create(this.lexer),B={yy:{}};for(var X in this.yy)Object.prototype.hasOwnProperty.call(this.yy,X)&&(B.yy[X]=this.yy[X]);I.setInput(k,B.yy),B.yy.lexer=I,B.yy.parser=this,typeof I.yylloc>"u"&&(I.yylloc={});var $=I.yylloc;R.push($);var G=I.options&&I.options.ranges;typeof B.yy.parseError=="function"?this.parseError=B.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function nt(et){A.length=A.length-2*et,w.length=w.length-et,R.length=R.length-et}d(nt,"popStack");function ht(){var et;return et=L.pop()||I.lex()||M,typeof et!="number"&&(et instanceof Array&&(L=et,et=L.pop()),et=v.symbols_[et]||et),et}d(ht,"lex");for(var tt,dt,st,ot,K={},lt,U,j,Q;;){if(dt=A[A.length-1],this.defaultActions[dt]?st=this.defaultActions[dt]:((tt===null||typeof tt>"u")&&(tt=ht()),st=T[dt]&&T[dt][tt]),typeof st>"u"||!st.length||!st[0]){var W="";Q=[];for(lt in T[dt])this.terminals_[lt]&&lt>E&&Q.push("'"+this.terminals_[lt]+"'");I.showPosition?W="Parse error on line "+(N+1)+`:
`+I.showPosition()+`
Expecting `+Q.join(", ")+", got '"+(this.terminals_[tt]||tt)+"'":W="Parse error on line "+(N+1)+": Unexpected "+(tt==M?"end of input":"'"+(this.terminals_[tt]||tt)+"'"),this.parseError(W,{text:I.match,token:this.terminals_[tt]||tt,line:I.yylineno,loc:$,expected:Q})}if(st[0]instanceof Array&&st.length>1)throw new Error("Parse Error: multiple actions possible at state: "+dt+", token: "+tt);switch(st[0]){case 1:A.push(tt),w.push(I.yytext),R.push(I.yylloc),A.push(st[1]),tt=null,D=I.yyleng,V=I.yytext,N=I.yylineno,$=I.yylloc;break;case 2:if(U=this.productions_[st[1]][1],K.$=w[w.length-U],K._$={first_line:R[R.length-(U||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(U||1)].first_column,last_column:R[R.length-1].last_column},G&&(K._$.range=[R[R.length-(U||1)].range[0],R[R.length-1].range[1]]),ot=this.performAction.apply(K,[V,D,N,B.yy,st[1],w,R].concat(F)),typeof ot<"u")return ot;U&&(A=A.slice(0,-1*U*2),w=w.slice(0,-1*U),R=R.slice(0,-1*U)),A.push(this.productions_[st[1]][0]),w.push(K.$),R.push(K._$),j=T[A[A.length-2]][A[A.length-1]],A.push(j);break;case 3:return!0}}return!0},"parse")},_=(function(){var C={EOF:1,parseError:d(function(v,A){if(this.yy.parser)this.yy.parser.parseError(v,A);else throw new Error(v)},"parseError"),setInput:d(function(k,v){return this.yy=v||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var v=k.match(/(?:\r\n?|\n).*/g);return v?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k},"input"),unput:d(function(k){var v=k.length,A=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-v),this.offset-=v;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var w=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===L.length?this.yylloc.first_column:0)+L[L.length-A.length].length-A[0].length:this.yylloc.first_column-v},this.options.ranges&&(this.yylloc.range=[w[0],w[0]+this.yyleng-v]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(k){this.unput(this.match.slice(k))},"less"),pastInput:d(function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var k=this.pastInput(),v=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+v+"^"},"showPosition"),test_match:d(function(k,v){var A,L,w;if(this.options.backtrack_lexer&&(w={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(w.yylloc.range=this.yylloc.range.slice(0))),L=k[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],A=this.performAction.call(this,this.yy,this,v,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var R in w)this[R]=w[R];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k,v,A,L;this._more||(this.yytext="",this.match="");for(var w=this._currentRules(),R=0;R<w.length;R++)if(A=this._input.match(this.rules[w[R]]),A&&(!v||A[0].length>v[0].length)){if(v=A,L=R,this.options.backtrack_lexer){if(k=this.test_match(A,w[R]),k!==!1)return k;if(this._backtrack){v=!1;continue}else return!1}else if(!this.options.flex)break}return v?(k=this.test_match(v,w[L]),k!==!1?k:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var v=this.next();return v||this.lex()},"lex"),begin:d(function(v){this.conditionStack.push(v)},"begin"),popState:d(function(){var v=this.conditionStack.length-1;return v>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(v){return v=this.conditionStack.length-1-Math.abs(v||0),v>=0?this.conditionStack[v]:"INITIAL"},"topState"),pushState:d(function(v){this.begin(v)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(v,A,L,w){switch(L){case 0:return v.getLogger().trace("Found comment",A.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:v.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return v.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:v.getLogger().trace("end icon"),this.popState();break;case 10:return v.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return v.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return v.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return v.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:v.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return v.getLogger().trace("description:",A.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),v.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),v.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),v.getLogger().trace("node end ...",A.yytext),"NODE_DEND";case 30:return this.popState(),v.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),v.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),v.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),v.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),v.getLogger().trace("node end (("),"NODE_DEND";case 35:return v.getLogger().trace("Long description:",A.yytext),20;case 36:return v.getLogger().trace("Long description:",A.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return C})();b.lexer=_;function S(){this.yy={}}return d(S,"Parser"),S.prototype=b,b.Parser=S,new S})();M1.parser=M1;var BV=M1,Mi={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},Ka,IV=(Ka=class{constructor(){this.nodes=[],this.count=0,this.elements={},this.getLogger=this.getLogger.bind(this),this.nodeType=Mi,this.clear(),this.getType=this.getType.bind(this),this.getElementById=this.getElementById.bind(this),this.getParent=this.getParent.bind(this),this.getMindmap=this.getMindmap.bind(this),this.addNode=this.addNode.bind(this),this.decorateNode=this.decorateNode.bind(this)}clear(){this.nodes=[],this.count=0,this.elements={},this.baseLevel=void 0}getParent(t){for(let r=this.nodes.length-1;r>=0;r--)if(this.nodes[r].level<t)return this.nodes[r];return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(t,r,i,s){var u,f;P.info("addNode",t,r,i,s);let n=!1;this.nodes.length===0?(this.baseLevel=t,t=0,n=!0):this.baseLevel!==void 0&&(t=t-this.baseLevel,n=!1);const a=it();let o=((u=a.mindmap)==null?void 0:u.padding)??ge.mindmap.padding;switch(s){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:o*=2;break}const h={id:this.count++,nodeId:me(r,a),level:t,descr:me(i,a),type:s,children:[],width:((f=a.mindmap)==null?void 0:f.maxNodeWidth)??ge.mindmap.maxNodeWidth,padding:o,isRoot:n},l=this.getParent(t);if(l)l.children.push(h),this.nodes.push(h);else if(n)this.nodes.push(h);else throw new Error(`There can be only one root. No parent could be found for ("${h.descr}")`)}getType(t,r){switch(P.debug("In get type",t,r),t){case"[":return this.nodeType.RECT;case"(":return r===")"?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(t,r){this.elements[t]=r}getElementById(t){return this.elements[t]}decorateNode(t){if(!t)return;const r=it(),i=this.nodes[this.nodes.length-1];t.icon&&(i.icon=me(t.icon,r)),t.class&&(i.class=me(t.class,r))}type2Str(t){switch(t){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}assignSections(t,r){if(t.level===0?t.section=void 0:t.section=r,t.children)for(const[i,s]of t.children.entries()){const n=t.level===0?i:r;this.assignSections(s,n)}}flattenNodes(t,r){const i=["mindmap-node"];t.isRoot===!0?i.push("section-root","section--1"):t.section!==void 0&&i.push(`section-${t.section}`),t.class&&i.push(t.class);const s=i.join(" "),n=d(o=>{switch(o){case Mi.CIRCLE:return"mindmapCircle";case Mi.RECT:return"rect";case Mi.ROUNDED_RECT:return"rounded";case Mi.CLOUD:return"cloud";case Mi.BANG:return"bang";case Mi.HEXAGON:return"hexagon";case Mi.DEFAULT:return"defaultMindmapNode";case Mi.NO_BORDER:default:return"rect"}},"getShapeFromType"),a={id:t.id.toString(),domId:"node_"+t.id.toString(),label:t.descr,isGroup:!1,shape:n(t.type),width:t.width,height:t.height??0,padding:t.padding,cssClasses:s,cssStyles:[],look:"default",icon:t.icon,x:t.x,y:t.y,level:t.level,nodeId:t.nodeId,type:t.type,section:t.section};if(r.push(a),t.children)for(const o of t.children)this.flattenNodes(o,r)}generateEdges(t,r){if(t.children)for(const i of t.children){let s="edge";i.section!==void 0&&(s+=` section-edge-${i.section}`);const n=t.level+1;s+=` edge-depth-${n}`;const a={id:`edge_${t.id}_${i.id}`,start:t.id.toString(),end:i.id.toString(),type:"normal",curve:"basis",thickness:"normal",look:"default",classes:s,depth:t.level,section:i.section};r.push(a),this.generateEdges(i,r)}}getData(){const t=this.getMindmap(),r=it(),s=rw().layout!==void 0,n=r;if(s||(n.layout="cose-bilkent"),!t)return{nodes:[],edges:[],config:n};P.debug("getData: mindmapRoot",t,r),this.assignSections(t);const a=[],o=[];this.flattenNodes(t,a),this.generateEdges(t,o),P.debug(`getData: processed ${a.length} nodes and ${o.length} edges`);const h=new Map;for(const l of a)h.set(l.id,{shape:l.shape,width:l.width,height:l.height,padding:l.padding});return{nodes:a,edges:o,config:n,rootNode:t,markers:["point"],direction:"TB",nodeSpacing:50,rankSpacing:50,shapes:Object.fromEntries(h),type:"mindmap",diagramId:"mindmap-"+vk()}}getLogger(){return P}},d(Ka,"MindmapDB"),Ka),NV=d(async(e,t,r,i)=>{var h,l;P.debug(`Rendering mindmap diagram
`+e);const s=i.db,n=s.getData(),a=So(t,n.config.securityLevel);n.type=i.type,n.layoutAlgorithm=Wl(n.config.layout,{fallback:"cose-bilkent"}),n.diagramId=t,s.getMindmap()&&(n.nodes.forEach(u=>{u.shape==="rounded"?(u.radius=15,u.taper=15,u.stroke="none",u.width=0,u.padding=15):u.shape==="circle"?u.padding=10:u.shape==="rect"&&(u.width=0,u.padding=10)}),await wo(n,a),kn(a,((h=n.config.mindmap)==null?void 0:h.padding)??ge.mindmap.padding,"mindmapDiagram",((l=n.config.mindmap)==null?void 0:l.useMaxWidth)??ge.mindmap.useMaxWidth))},"draw"),$V={draw:NV},MV=d(e=>{let t="";for(let r=0;r<e.THEME_COLOR_LIMIT;r++)e["lineColor"+r]=e["lineColor"+r]||e["cScaleInv"+r],bs(e["lineColor"+r])?e["lineColor"+r]=Mt(e["lineColor"+r],20):e["lineColor"+r]=Gt(e["lineColor"+r],20);for(let r=0;r<e.THEME_COLOR_LIMIT;r++){const i=""+(17-3*r);t+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${e["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${e["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${e["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${i};
    }
    .section-${r-1} line {
      stroke: ${e["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return t},"genSections"),FV=d(e=>`
  .edge {
    stroke-width: 3;
  }
  ${MV(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .section-root span {
    color: ${e.gitBranchLabel0};
  }
  .section-2 span {
    color: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),PV=FV,OV={get db(){return new IV},renderer:$V,parser:BV,styles:PV};const VV=Object.freeze(Object.defineProperty({__proto__:null,diagram:OV},Symbol.toStringTag,{value:"Module"}));var F1=(function(){var e=d(function(A,L,w,R){for(w=w||{},R=A.length;R--;w[A[R]]=L);return w},"o"),t=[1,4],r=[1,13],i=[1,12],s=[1,15],n=[1,16],a=[1,20],o=[1,19],h=[6,7,8],l=[1,26],u=[1,24],f=[1,25],p=[6,7,11],g=[1,31],y=[6,7,11,24],m=[1,6,13,16,17,20,23],x=[1,35],b=[1,36],_=[1,6,7,11,13,16,17,20,23],S=[1,38],C={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:d(function(L,w,R,T,V,N,D){var E=N.length-1;switch(V){case 6:case 7:return T;case 8:T.getLogger().trace("Stop NL ");break;case 9:T.getLogger().trace("Stop EOF ");break;case 11:T.getLogger().trace("Stop NL2 ");break;case 12:T.getLogger().trace("Stop EOF2 ");break;case 15:T.getLogger().info("Node: ",N[E-1].id),T.addNode(N[E-2].length,N[E-1].id,N[E-1].descr,N[E-1].type,N[E]);break;case 16:T.getLogger().info("Node: ",N[E].id),T.addNode(N[E-1].length,N[E].id,N[E].descr,N[E].type);break;case 17:T.getLogger().trace("Icon: ",N[E]),T.decorateNode({icon:N[E]});break;case 18:case 23:T.decorateNode({class:N[E]});break;case 19:T.getLogger().trace("SPACELIST");break;case 20:T.getLogger().trace("Node: ",N[E-1].id),T.addNode(0,N[E-1].id,N[E-1].descr,N[E-1].type,N[E]);break;case 21:T.getLogger().trace("Node: ",N[E].id),T.addNode(0,N[E].id,N[E].descr,N[E].type);break;case 22:T.decorateNode({icon:N[E]});break;case 27:T.getLogger().trace("node found ..",N[E-2]),this.$={id:N[E-1],descr:N[E-1],type:T.getType(N[E-2],N[E])};break;case 28:this.$={id:N[E],descr:N[E],type:0};break;case 29:T.getLogger().trace("node found ..",N[E-3]),this.$={id:N[E-3],descr:N[E-1],type:T.getType(N[E-2],N[E])};break;case 30:this.$=N[E-1]+N[E];break;case 31:this.$=N[E];break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:r,7:[1,10],9:9,12:11,13:i,14:14,16:s,17:n,18:17,19:18,20:a,23:o},e(h,[2,3]),{1:[2,2]},e(h,[2,4]),e(h,[2,5]),{1:[2,6],6:r,12:21,13:i,14:14,16:s,17:n,18:17,19:18,20:a,23:o},{6:r,9:22,12:11,13:i,14:14,16:s,17:n,18:17,19:18,20:a,23:o},{6:l,7:u,10:23,11:f},e(p,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:a,23:o}),e(p,[2,19]),e(p,[2,21],{15:30,24:g}),e(p,[2,22]),e(p,[2,23]),e(y,[2,25]),e(y,[2,26]),e(y,[2,28],{20:[1,32]}),{21:[1,33]},{6:l,7:u,10:34,11:f},{1:[2,7],6:r,12:21,13:i,14:14,16:s,17:n,18:17,19:18,20:a,23:o},e(m,[2,14],{7:x,11:b}),e(_,[2,8]),e(_,[2,9]),e(_,[2,10]),e(p,[2,16],{15:37,24:g}),e(p,[2,17]),e(p,[2,18]),e(p,[2,20],{24:S}),e(y,[2,31]),{21:[1,39]},{22:[1,40]},e(m,[2,13],{7:x,11:b}),e(_,[2,11]),e(_,[2,12]),e(p,[2,15],{24:S}),e(y,[2,30]),{22:[1,41]},e(y,[2,27]),e(y,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:d(function(L,w){if(w.recoverable)this.trace(L);else{var R=new Error(L);throw R.hash=w,R}},"parseError"),parse:d(function(L){var w=this,R=[0],T=[],V=[null],N=[],D=this.table,E="",M=0,F=0,I=2,B=1,X=N.slice.call(arguments,1),$=Object.create(this.lexer),G={yy:{}};for(var nt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,nt)&&(G.yy[nt]=this.yy[nt]);$.setInput(L,G.yy),G.yy.lexer=$,G.yy.parser=this,typeof $.yylloc>"u"&&($.yylloc={});var ht=$.yylloc;N.push(ht);var tt=$.options&&$.options.ranges;typeof G.yy.parseError=="function"?this.parseError=G.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function dt(O){R.length=R.length-2*O,V.length=V.length-O,N.length=N.length-O}d(dt,"popStack");function st(){var O;return O=T.pop()||$.lex()||B,typeof O!="number"&&(O instanceof Array&&(T=O,O=T.pop()),O=w.symbols_[O]||O),O}d(st,"lex");for(var ot,K,lt,U,j={},Q,W,et,z;;){if(K=R[R.length-1],this.defaultActions[K]?lt=this.defaultActions[K]:((ot===null||typeof ot>"u")&&(ot=st()),lt=D[K]&&D[K][ot]),typeof lt>"u"||!lt.length||!lt[0]){var vt="";z=[];for(Q in D[K])this.terminals_[Q]&&Q>I&&z.push("'"+this.terminals_[Q]+"'");$.showPosition?vt="Parse error on line "+(M+1)+`:
`+$.showPosition()+`
Expecting `+z.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":vt="Parse error on line "+(M+1)+": Unexpected "+(ot==B?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(vt,{text:$.match,token:this.terminals_[ot]||ot,line:$.yylineno,loc:ht,expected:z})}if(lt[0]instanceof Array&&lt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+ot);switch(lt[0]){case 1:R.push(ot),V.push($.yytext),N.push($.yylloc),R.push(lt[1]),ot=null,F=$.yyleng,E=$.yytext,M=$.yylineno,ht=$.yylloc;break;case 2:if(W=this.productions_[lt[1]][1],j.$=V[V.length-W],j._$={first_line:N[N.length-(W||1)].first_line,last_line:N[N.length-1].last_line,first_column:N[N.length-(W||1)].first_column,last_column:N[N.length-1].last_column},tt&&(j._$.range=[N[N.length-(W||1)].range[0],N[N.length-1].range[1]]),U=this.performAction.apply(j,[E,F,M,G.yy,lt[1],V,N].concat(X)),typeof U<"u")return U;W&&(R=R.slice(0,-1*W*2),V=V.slice(0,-1*W),N=N.slice(0,-1*W)),R.push(this.productions_[lt[1]][0]),V.push(j.$),N.push(j._$),et=D[R[R.length-2]][R[R.length-1]],R.push(et);break;case 3:return!0}}return!0},"parse")},k=(function(){var A={EOF:1,parseError:d(function(w,R){if(this.yy.parser)this.yy.parser.parseError(w,R);else throw new Error(w)},"parseError"),setInput:d(function(L,w){return this.yy=w||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var w=L.match(/(?:\r\n?|\n).*/g);return w?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},"input"),unput:d(function(L){var w=L.length,R=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-w),this.offset-=w;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),R.length-1&&(this.yylineno-=R.length-1);var V=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:R?(R.length===T.length?this.yylloc.first_column:0)+T[T.length-R.length].length-R[0].length:this.yylloc.first_column-w},this.options.ranges&&(this.yylloc.range=[V[0],V[0]+this.yyleng-w]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(L){this.unput(this.match.slice(L))},"less"),pastInput:d(function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var L=this.pastInput(),w=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+w+"^"},"showPosition"),test_match:d(function(L,w){var R,T,V;if(this.options.backtrack_lexer&&(V={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(V.yylloc.range=this.yylloc.range.slice(0))),T=L[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],R=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var N in V)this[N]=V[N];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,w,R,T;this._more||(this.yytext="",this.match="");for(var V=this._currentRules(),N=0;N<V.length;N++)if(R=this._input.match(this.rules[V[N]]),R&&(!w||R[0].length>w[0].length)){if(w=R,T=N,this.options.backtrack_lexer){if(L=this.test_match(R,V[N]),L!==!1)return L;if(this._backtrack){w=!1;continue}else return!1}else if(!this.options.flex)break}return w?(L=this.test_match(w,V[T]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var w=this.next();return w||this.lex()},"lex"),begin:d(function(w){this.conditionStack.push(w)},"begin"),popState:d(function(){var w=this.conditionStack.length-1;return w>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(w){return w=this.conditionStack.length-1-Math.abs(w||0),w>=0?this.conditionStack[w]:"INITIAL"},"topState"),pushState:d(function(w){this.begin(w)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(w,R,T,V){switch(T){case 0:return this.pushState("shapeData"),R.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const N=/\n\s*/g;return R.yytext=R.yytext.replace(N,"<br/>"),24;case 4:return 24;case 5:this.popState();break;case 6:return w.getLogger().trace("Found comment",R.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 10:this.popState();break;case 11:w.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return w.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:w.getLogger().trace("end icon"),this.popState();break;case 16:return w.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return w.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return w.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return w.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:return this.begin("NODE"),20;case 21:return this.begin("NODE"),20;case 22:return this.begin("NODE"),20;case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 29:this.popState();break;case 30:w.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return w.getLogger().trace("description:",R.yytext),"NODE_DESCR";case 32:this.popState();break;case 33:return this.popState(),w.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),w.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),w.getLogger().trace("node end ...",R.yytext),"NODE_DEND";case 36:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 37:return this.popState(),w.getLogger().trace("node end (-"),"NODE_DEND";case 38:return this.popState(),w.getLogger().trace("node end (-"),"NODE_DEND";case 39:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 40:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 41:return w.getLogger().trace("Long description:",R.yytext),21;case 42:return w.getLogger().trace("Long description:",R.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return A})();C.lexer=k;function v(){this.yy={}}return d(v,"Parser"),v.prototype=C,C.Parser=v,new v})();F1.parser=F1;var zV=F1,Xr=[],Dp=[],P1=0,Rp={},WV=d(()=>{Xr=[],Dp=[],P1=0,Rp={}},"clear"),qV=d(e=>{if(Xr.length===0)return null;const t=Xr[0].level;let r=null;for(let i=Xr.length-1;i>=0;i--)if(Xr[i].level===t&&!r&&(r=Xr[i]),Xr[i].level<t)throw new Error('Items without section detected, found section ("'+Xr[i].label+'")');return e===(r==null?void 0:r.level)?null:r},"getSection"),d_=d(function(){return Dp},"getSections"),YV=d(function(){const e=[],t=[],r=d_(),i=it();for(const s of r){const n={id:s.id,label:me(s.label??"",i),isGroup:!0,ticket:s.ticket,shape:"kanbanSection",level:s.level,look:i.look};t.push(n);const a=Xr.filter(o=>o.parentId===s.id);for(const o of a){const h={id:o.id,parentId:s.id,label:me(o.label??"",i),isGroup:!1,ticket:o==null?void 0:o.ticket,priority:o==null?void 0:o.priority,assigned:o==null?void 0:o.assigned,icon:o==null?void 0:o.icon,shape:"kanbanItem",level:o.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(h)}}return{nodes:t,edges:e,other:{},config:it()}},"getData"),GV=d((e,t,r,i,s)=>{var l,u;const n=it();let a=((l=n.mindmap)==null?void 0:l.padding)??ge.mindmap.padding;switch(i){case je.ROUNDED_RECT:case je.RECT:case je.HEXAGON:a*=2}const o={id:me(t,n)||"kbn"+P1++,level:e,label:me(r,n),width:((u=n.mindmap)==null?void 0:u.maxNodeWidth)??ge.mindmap.maxNodeWidth,padding:a,isGroup:!1};if(s!==void 0){let f;s.includes(`
`)?f=s+`
`:f=`{
`+s+`
}`;const p=eu(f,{schema:tu});if(p.shape&&(p.shape!==p.shape.toLowerCase()||p.shape.includes("_")))throw new Error(`No such shape: ${p.shape}. Shape names should be lowercase.`);p!=null&&p.shape&&p.shape==="kanbanItem"&&(o.shape=p==null?void 0:p.shape),p!=null&&p.label&&(o.label=p==null?void 0:p.label),p!=null&&p.icon&&(o.icon=p==null?void 0:p.icon.toString()),p!=null&&p.assigned&&(o.assigned=p==null?void 0:p.assigned.toString()),p!=null&&p.ticket&&(o.ticket=p==null?void 0:p.ticket.toString()),p!=null&&p.priority&&(o.priority=p==null?void 0:p.priority)}const h=qV(e);h?o.parentId=h.id||"kbn"+P1++:Dp.push(o),Xr.push(o)},"addNode"),je={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},HV=d((e,t)=>{switch(P.debug("In get type",e,t),e){case"[":return je.RECT;case"(":return t===")"?je.ROUNDED_RECT:je.CLOUD;case"((":return je.CIRCLE;case")":return je.CLOUD;case"))":return je.BANG;case"{{":return je.HEXAGON;default:return je.DEFAULT}},"getType"),UV=d((e,t)=>{Rp[e]=t},"setElementForId"),jV=d(e=>{if(!e)return;const t=it(),r=Xr[Xr.length-1];e.icon&&(r.icon=me(e.icon,t)),e.class&&(r.cssClasses=me(e.class,t))},"decorateNode"),XV=d(e=>{switch(e){case je.DEFAULT:return"no-border";case je.RECT:return"rect";case je.ROUNDED_RECT:return"rounded-rect";case je.CIRCLE:return"circle";case je.CLOUD:return"cloud";case je.BANG:return"bang";case je.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),KV=d(()=>P,"getLogger"),QV=d(e=>Rp[e],"getElementById"),ZV={clear:WV,addNode:GV,getSections:d_,getData:YV,nodeType:je,getType:HV,setElementForId:UV,decorateNode:jV,type2Str:XV,getLogger:KV,getElementById:QV},JV=ZV,tz=d(async(e,t,r,i)=>{var x,b,_,S,C;P.debug(`Rendering kanban diagram
`+e);const n=i.db.getData(),a=it();a.htmlLabels=!1;const o=es(t),h=o.append("g");h.attr("class","sections");const l=o.append("g");l.attr("class","items");const u=n.nodes.filter(k=>k.isGroup);let f=0;const p=10,g=[];let y=25;for(const k of u){const v=((x=a==null?void 0:a.kanban)==null?void 0:x.sectionWidth)||200;f=f+1,k.x=v*f+(f-1)*p/2,k.width=v,k.y=0,k.height=v*3,k.rx=5,k.ry=5,k.cssClasses=k.cssClasses+" section-"+f;const A=await zf(h,k);y=Math.max(y,(b=A==null?void 0:A.labelBBox)==null?void 0:b.height),g.push(A)}let m=0;for(const k of u){const v=g[m];m=m+1;const A=((_=a==null?void 0:a.kanban)==null?void 0:_.sectionWidth)||200,L=-A*3/2+y;let w=L;const R=n.nodes.filter(N=>N.parentId===k.id);for(const N of R){if(N.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");N.x=k.x,N.width=A-1.5*p;const E=(await au(l,N,{config:a})).node().getBBox();N.y=w+E.height/2,await Jd(N),w=N.y+E.height/2+p/2}const T=v.cluster.select("rect"),V=Math.max(w-L+3*p,50)+(y-25);T.attr("height",V)}Ml(void 0,o,((S=a.mindmap)==null?void 0:S.padding)??ge.kanban.padding,((C=a.mindmap)==null?void 0:C.useMaxWidth)??ge.kanban.useMaxWidth)},"draw"),ez={draw:tz},rz=d(e=>{let t="";for(let i=0;i<e.THEME_COLOR_LIMIT;i++)e["lineColor"+i]=e["lineColor"+i]||e["cScaleInv"+i],bs(e["lineColor"+i])?e["lineColor"+i]=Mt(e["lineColor"+i],20):e["lineColor"+i]=Gt(e["lineColor"+i],20);const r=d((i,s)=>e.darkMode?Gt(i,s):Mt(i,s),"adjuster");for(let i=0;i<e.THEME_COLOR_LIMIT;i++){const s=""+(17-3*i);t+=`
    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {
      fill: ${r(e["cScale"+i],10)};
      stroke: ${r(e["cScale"+i],10)};

    }
    .section-${i-1} text {
     fill: ${e["cScaleLabel"+i]};
    }
    .node-icon-${i-1} {
      font-size: 40px;
      color: ${e["cScaleLabel"+i]};
    }
    .section-edge-${i-1}{
      stroke: ${e["cScale"+i]};
    }
    .edge-depth-${i-1}{
      stroke-width: ${s};
    }
    .section-${i-1} line {
      stroke: ${e["cScaleInv"+i]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${e.background};
    stroke: ${e.nodeBorder};
    text-decoration: underline;
  }
    `}return t},"genSections"),iz=d(e=>`
  .edge {
    stroke-width: 3;
  }
  ${rz(e)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${e.git0};
  }
  .section-root text {
    fill: ${e.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${e.textColor};
    fill: ${e.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
    ${ql()}
`,"getStyles"),sz=iz,nz={db:JV,renderer:ez,parser:zV,styles:sz};const az=Object.freeze(Object.defineProperty({__proto__:null,diagram:nz},Symbol.toStringTag,{value:"Module"}));function Hg(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function f_(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function hd(e,t){let r=0;if(t===void 0)for(let i of e)(i=+i)&&(r+=i);else{let i=-1;for(let s of e)(s=+t(s,++i,e))&&(r+=s)}return r}function oz(e){return e.target.depth}function lz(e){return e.depth}function cz(e,t){return t-1-e.height}function p_(e,t){return e.sourceLinks.length?e.depth:t-1}function hz(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?f_(e.sourceLinks,oz)-1:0}function fc(e){return function(){return e}}function Ug(e,t){return Rh(e.source,t.source)||e.index-t.index}function jg(e,t){return Rh(e.target,t.target)||e.index-t.index}function Rh(e,t){return e.y0-t.y0}function ud(e){return e.value}function uz(e){return e.index}function dz(e){return e.nodes}function fz(e){return e.links}function Xg(e,t){const r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function Kg({nodes:e}){for(const t of e){let r=t.y0,i=r;for(const s of t.sourceLinks)s.y0=r+s.width/2,r+=s.width;for(const s of t.targetLinks)s.y1=i+s.width/2,i+=s.width}}function pz(){let e=0,t=0,r=1,i=1,s=24,n=8,a,o=uz,h=p_,l,u,f=dz,p=fz,g=6;function y(){const E={nodes:f.apply(null,arguments),links:p.apply(null,arguments)};return m(E),x(E),b(E),_(E),k(E),Kg(E),E}y.update=function(E){return Kg(E),E},y.nodeId=function(E){return arguments.length?(o=typeof E=="function"?E:fc(E),y):o},y.nodeAlign=function(E){return arguments.length?(h=typeof E=="function"?E:fc(E),y):h},y.nodeSort=function(E){return arguments.length?(l=E,y):l},y.nodeWidth=function(E){return arguments.length?(s=+E,y):s},y.nodePadding=function(E){return arguments.length?(n=a=+E,y):n},y.nodes=function(E){return arguments.length?(f=typeof E=="function"?E:fc(E),y):f},y.links=function(E){return arguments.length?(p=typeof E=="function"?E:fc(E),y):p},y.linkSort=function(E){return arguments.length?(u=E,y):u},y.size=function(E){return arguments.length?(e=t=0,r=+E[0],i=+E[1],y):[r-e,i-t]},y.extent=function(E){return arguments.length?(e=+E[0][0],r=+E[1][0],t=+E[0][1],i=+E[1][1],y):[[e,t],[r,i]]},y.iterations=function(E){return arguments.length?(g=+E,y):g};function m({nodes:E,links:M}){for(const[I,B]of E.entries())B.index=I,B.sourceLinks=[],B.targetLinks=[];const F=new Map(E.map((I,B)=>[o(I,B,E),I]));for(const[I,B]of M.entries()){B.index=I;let{source:X,target:$}=B;typeof X!="object"&&(X=B.source=Xg(F,X)),typeof $!="object"&&($=B.target=Xg(F,$)),X.sourceLinks.push(B),$.targetLinks.push(B)}if(u!=null)for(const{sourceLinks:I,targetLinks:B}of E)I.sort(u),B.sort(u)}function x({nodes:E}){for(const M of E)M.value=M.fixedValue===void 0?Math.max(hd(M.sourceLinks,ud),hd(M.targetLinks,ud)):M.fixedValue}function b({nodes:E}){const M=E.length;let F=new Set(E),I=new Set,B=0;for(;F.size;){for(const X of F){X.depth=B;for(const{target:$}of X.sourceLinks)I.add($)}if(++B>M)throw new Error("circular link");F=I,I=new Set}}function _({nodes:E}){const M=E.length;let F=new Set(E),I=new Set,B=0;for(;F.size;){for(const X of F){X.height=B;for(const{source:$}of X.targetLinks)I.add($)}if(++B>M)throw new Error("circular link");F=I,I=new Set}}function S({nodes:E}){const M=Hg(E,B=>B.depth)+1,F=(r-e-s)/(M-1),I=new Array(M);for(const B of E){const X=Math.max(0,Math.min(M-1,Math.floor(h.call(null,B,M))));B.layer=X,B.x0=e+X*F,B.x1=B.x0+s,I[X]?I[X].push(B):I[X]=[B]}if(l)for(const B of I)B.sort(l);return I}function C(E){const M=f_(E,F=>(i-t-(F.length-1)*a)/hd(F,ud));for(const F of E){let I=t;for(const B of F){B.y0=I,B.y1=I+B.value*M,I=B.y1+a;for(const X of B.sourceLinks)X.width=X.value*M}I=(i-I+a)/(F.length+1);for(let B=0;B<F.length;++B){const X=F[B];X.y0+=I*(B+1),X.y1+=I*(B+1)}V(F)}}function k(E){const M=S(E);a=Math.min(n,(i-t)/(Hg(M,F=>F.length)-1)),C(M);for(let F=0;F<g;++F){const I=Math.pow(.99,F),B=Math.max(1-I,(F+1)/g);A(M,I,B),v(M,I,B)}}function v(E,M,F){for(let I=1,B=E.length;I<B;++I){const X=E[I];for(const $ of X){let G=0,nt=0;for(const{source:tt,value:dt}of $.targetLinks){let st=dt*($.layer-tt.layer);G+=N(tt,$)*st,nt+=st}if(!(nt>0))continue;let ht=(G/nt-$.y0)*M;$.y0+=ht,$.y1+=ht,T($)}l===void 0&&X.sort(Rh),L(X,F)}}function A(E,M,F){for(let I=E.length,B=I-2;B>=0;--B){const X=E[B];for(const $ of X){let G=0,nt=0;for(const{target:tt,value:dt}of $.sourceLinks){let st=dt*(tt.layer-$.layer);G+=D($,tt)*st,nt+=st}if(!(nt>0))continue;let ht=(G/nt-$.y0)*M;$.y0+=ht,$.y1+=ht,T($)}l===void 0&&X.sort(Rh),L(X,F)}}function L(E,M){const F=E.length>>1,I=E[F];R(E,I.y0-a,F-1,M),w(E,I.y1+a,F+1,M),R(E,i,E.length-1,M),w(E,t,0,M)}function w(E,M,F,I){for(;F<E.length;++F){const B=E[F],X=(M-B.y0)*I;X>1e-6&&(B.y0+=X,B.y1+=X),M=B.y1+a}}function R(E,M,F,I){for(;F>=0;--F){const B=E[F],X=(B.y1-M)*I;X>1e-6&&(B.y0-=X,B.y1-=X),M=B.y0-a}}function T({sourceLinks:E,targetLinks:M}){if(u===void 0){for(const{source:{sourceLinks:F}}of M)F.sort(jg);for(const{target:{targetLinks:F}}of E)F.sort(Ug)}}function V(E){if(u===void 0)for(const{sourceLinks:M,targetLinks:F}of E)M.sort(jg),F.sort(Ug)}function N(E,M){let F=E.y0-(E.sourceLinks.length-1)*a/2;for(const{target:I,width:B}of E.sourceLinks){if(I===M)break;F+=B+a}for(const{source:I,width:B}of M.targetLinks){if(I===E)break;F-=B}return F}function D(E,M){let F=M.y0-(M.targetLinks.length-1)*a/2;for(const{source:I,width:B}of M.targetLinks){if(I===E)break;F+=B+a}for(const{target:I,width:B}of E.sourceLinks){if(I===M)break;F-=B}return F}return y}var O1=Math.PI,V1=2*O1,Fs=1e-6,gz=V1-Fs;function z1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function g_(){return new z1}z1.prototype=g_.prototype={constructor:z1,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+i)},bezierCurveTo:function(e,t,r,i,s,n){this._+="C"+ +e+","+ +t+","+ +r+","+ +i+","+(this._x1=+s)+","+(this._y1=+n)},arcTo:function(e,t,r,i,s){e=+e,t=+t,r=+r,i=+i,s=+s;var n=this._x1,a=this._y1,o=r-e,h=i-t,l=n-e,u=a-t,f=l*l+u*u;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Fs)if(!(Math.abs(u*o-h*l)>Fs)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=r-n,g=i-a,y=o*o+h*h,m=p*p+g*g,x=Math.sqrt(y),b=Math.sqrt(f),_=s*Math.tan((O1-Math.acos((y+f-m)/(2*x*b)))/2),S=_/b,C=_/x;Math.abs(S-1)>Fs&&(this._+="L"+(e+S*l)+","+(t+S*u)),this._+="A"+s+","+s+",0,0,"+ +(u*p>l*g)+","+(this._x1=e+C*o)+","+(this._y1=t+C*h)}},arc:function(e,t,r,i,s,n){e=+e,t=+t,r=+r,n=!!n;var a=r*Math.cos(i),o=r*Math.sin(i),h=e+a,l=t+o,u=1^n,f=n?i-s:s-i;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+h+","+l:(Math.abs(this._x1-h)>Fs||Math.abs(this._y1-l)>Fs)&&(this._+="L"+h+","+l),r&&(f<0&&(f=f%V1+V1),f>gz?this._+="A"+r+","+r+",0,1,"+u+","+(e-a)+","+(t-o)+"A"+r+","+r+",0,1,"+u+","+(this._x1=h)+","+(this._y1=l):f>Fs&&(this._+="A"+r+","+r+",0,"+ +(f>=O1)+","+u+","+(this._x1=e+r*Math.cos(s))+","+(this._y1=t+r*Math.sin(s))))},rect:function(e,t,r,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +i+"h"+-r+"Z"},toString:function(){return this._}};function Qg(e){return function(){return e}}function yz(e){return e[0]}function mz(e){return e[1]}var xz=Array.prototype.slice;function bz(e){return e.source}function vz(e){return e.target}function _z(e){var t=bz,r=vz,i=yz,s=mz,n=null;function a(){var o,h=xz.call(arguments),l=t.apply(this,h),u=r.apply(this,h);if(n||(n=o=g_()),e(n,+i.apply(this,(h[0]=l,h)),+s.apply(this,h),+i.apply(this,(h[0]=u,h)),+s.apply(this,h)),o)return n=null,o+""||null}return a.source=function(o){return arguments.length?(t=o,a):t},a.target=function(o){return arguments.length?(r=o,a):r},a.x=function(o){return arguments.length?(i=typeof o=="function"?o:Qg(+o),a):i},a.y=function(o){return arguments.length?(s=typeof o=="function"?o:Qg(+o),a):s},a.context=function(o){return arguments.length?(n=o??null,a):n},a}function kz(e,t,r,i,s){e.moveTo(t,r),e.bezierCurveTo(t=(t+i)/2,r,t,s,i,s)}function wz(){return _z(kz)}function Tz(e){return[e.source.x1,e.y0]}function Sz(e){return[e.target.x0,e.y1]}function Cz(){return wz().source(Tz).target(Sz)}var W1=(function(){var e=d(function(o,h,l,u){for(l=l||{},u=o.length;u--;l[o[u]]=h);return l},"o"),t=[1,9],r=[1,10],i=[1,5,10,12],s={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:d(function(h,l,u,f,p,g,y){var m=g.length-1;switch(p){case 7:const x=f.findOrCreateNode(g[m-4].trim().replaceAll('""','"')),b=f.findOrCreateNode(g[m-2].trim().replaceAll('""','"')),_=parseFloat(g[m].trim());f.addLink(x,b,_);break;case 8:case 9:case 11:this.$=g[m];break;case 10:this.$=g[m-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:t,20:r},{1:[2,6],7:11,10:[1,12]},e(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},e(i,[2,8]),e(i,[2,9]),{19:[1,16]},e(i,[2,11]),{1:[2,1]},{1:[2,5]},e(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:t,20:r},{15:18,16:7,17:8,18:t,20:r},{18:[1,19]},e(r,[2,3]),{12:[1,20]},e(i,[2,10]),{15:21,16:7,17:8,18:t,20:r},e([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:d(function(h,l){if(l.recoverable)this.trace(h);else{var u=new Error(h);throw u.hash=l,u}},"parseError"),parse:d(function(h){var l=this,u=[0],f=[],p=[null],g=[],y=this.table,m="",x=0,b=0,_=2,S=1,C=g.slice.call(arguments,1),k=Object.create(this.lexer),v={yy:{}};for(var A in this.yy)Object.prototype.hasOwnProperty.call(this.yy,A)&&(v.yy[A]=this.yy[A]);k.setInput(h,v.yy),v.yy.lexer=k,v.yy.parser=this,typeof k.yylloc>"u"&&(k.yylloc={});var L=k.yylloc;g.push(L);var w=k.options&&k.options.ranges;typeof v.yy.parseError=="function"?this.parseError=v.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function R(G){u.length=u.length-2*G,p.length=p.length-G,g.length=g.length-G}d(R,"popStack");function T(){var G;return G=f.pop()||k.lex()||S,typeof G!="number"&&(G instanceof Array&&(f=G,G=f.pop()),G=l.symbols_[G]||G),G}d(T,"lex");for(var V,N,D,E,M={},F,I,B,X;;){if(N=u[u.length-1],this.defaultActions[N]?D=this.defaultActions[N]:((V===null||typeof V>"u")&&(V=T()),D=y[N]&&y[N][V]),typeof D>"u"||!D.length||!D[0]){var $="";X=[];for(F in y[N])this.terminals_[F]&&F>_&&X.push("'"+this.terminals_[F]+"'");k.showPosition?$="Parse error on line "+(x+1)+`:
`+k.showPosition()+`
Expecting `+X.join(", ")+", got '"+(this.terminals_[V]||V)+"'":$="Parse error on line "+(x+1)+": Unexpected "+(V==S?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError($,{text:k.match,token:this.terminals_[V]||V,line:k.yylineno,loc:L,expected:X})}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+N+", token: "+V);switch(D[0]){case 1:u.push(V),p.push(k.yytext),g.push(k.yylloc),u.push(D[1]),V=null,b=k.yyleng,m=k.yytext,x=k.yylineno,L=k.yylloc;break;case 2:if(I=this.productions_[D[1]][1],M.$=p[p.length-I],M._$={first_line:g[g.length-(I||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(I||1)].first_column,last_column:g[g.length-1].last_column},w&&(M._$.range=[g[g.length-(I||1)].range[0],g[g.length-1].range[1]]),E=this.performAction.apply(M,[m,b,x,v.yy,D[1],p,g].concat(C)),typeof E<"u")return E;I&&(u=u.slice(0,-1*I*2),p=p.slice(0,-1*I),g=g.slice(0,-1*I)),u.push(this.productions_[D[1]][0]),p.push(M.$),g.push(M._$),B=y[u[u.length-2]][u[u.length-1]],u.push(B);break;case 3:return!0}}return!0},"parse")},n=(function(){var o={EOF:1,parseError:d(function(l,u){if(this.yy.parser)this.yy.parser.parseError(l,u);else throw new Error(l)},"parseError"),setInput:d(function(h,l){return this.yy=l||this.yy||{},this._input=h,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var h=this._input[0];this.yytext+=h,this.yyleng++,this.offset++,this.match+=h,this.matched+=h;var l=h.match(/(?:\r\n?|\n).*/g);return l?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),h},"input"),unput:d(function(h){var l=h.length,u=h.split(/(?:\r\n?|\n)/g);this._input=h+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-l),this.offset-=l;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var p=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===f.length?this.yylloc.first_column:0)+f[f.length-u.length].length-u[0].length:this.yylloc.first_column-l},this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-l]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(h){this.unput(this.match.slice(h))},"less"),pastInput:d(function(){var h=this.matched.substr(0,this.matched.length-this.match.length);return(h.length>20?"...":"")+h.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var h=this.match;return h.length<20&&(h+=this._input.substr(0,20-h.length)),(h.substr(0,20)+(h.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var h=this.pastInput(),l=new Array(h.length+1).join("-");return h+this.upcomingInput()+`
`+l+"^"},"showPosition"),test_match:d(function(h,l){var u,f,p;if(this.options.backtrack_lexer&&(p={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(p.yylloc.range=this.yylloc.range.slice(0))),f=h[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+h[0].length},this.yytext+=h[0],this.match+=h[0],this.matches=h,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(h[0].length),this.matched+=h[0],u=this.performAction.call(this,this.yy,this,l,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),u)return u;if(this._backtrack){for(var g in p)this[g]=p[g];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var h,l,u,f;this._more||(this.yytext="",this.match="");for(var p=this._currentRules(),g=0;g<p.length;g++)if(u=this._input.match(this.rules[p[g]]),u&&(!l||u[0].length>l[0].length)){if(l=u,f=g,this.options.backtrack_lexer){if(h=this.test_match(u,p[g]),h!==!1)return h;if(this._backtrack){l=!1;continue}else return!1}else if(!this.options.flex)break}return l?(h=this.test_match(l,p[f]),h!==!1?h:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var l=this.next();return l||this.lex()},"lex"),begin:d(function(l){this.conditionStack.push(l)},"begin"),popState:d(function(){var l=this.conditionStack.length-1;return l>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(l){return l=this.conditionStack.length-1-Math.abs(l||0),l>=0?this.conditionStack[l]:"INITIAL"},"topState"),pushState:d(function(l){this.begin(l)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:d(function(l,u,f,p){switch(f){case 0:return this.pushState("csv"),4;case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}};return o})();s.lexer=n;function a(){this.yy={}}return d(a,"Parser"),a.prototype=s,s.Parser=a,new a})();W1.parser=W1;var Bh=W1,vu=[],_u=[],Ih=new Map,Ez=d(()=>{vu=[],_u=[],Ih=new Map,qe()},"clear"),Qa,Az=(Qa=class{constructor(t,r,i=0){this.source=t,this.target=r,this.value=i}},d(Qa,"SankeyLink"),Qa),Lz=d((e,t,r)=>{vu.push(new Az(e,t,r))},"addLink"),Za,Dz=(Za=class{constructor(t){this.ID=t}},d(Za,"SankeyNode"),Za),Rz=d(e=>{e=Ct.sanitizeText(e,it());let t=Ih.get(e);return t===void 0&&(t=new Dz(e),Ih.set(e,t),_u.push(t)),t},"findOrCreateNode"),Bz=d(()=>_u,"getNodes"),Iz=d(()=>vu,"getLinks"),Nz=d(()=>({nodes:_u.map(e=>({id:e.ID})),links:vu.map(e=>({source:e.source.ID,target:e.target.ID,value:e.value}))}),"getGraph"),$z={nodesMap:Ih,getConfig:d(()=>it().sankey,"getConfig"),getNodes:Bz,getLinks:Iz,getGraph:Nz,addLink:Lz,findOrCreateNode:Rz,getAccTitle:Ke,setAccTitle:We,getAccDescription:Ze,setAccDescription:Qe,getDiagramTitle:Ye,setDiagramTitle:ir,clear:Ez},ji,Zg=(ji=class{static next(t){return new ji(t+ ++ji.count)}constructor(t){this.id=t,this.href=`#${t}`}toString(){return"url("+this.href+")"}},d(ji,"Uid"),ji.count=0,ji),Mz={left:lz,right:cz,center:hz,justify:p_},Fz=d(function(e,t,r,i){const{securityLevel:s,sankey:n}=it(),a=B2.sankey;let o;s==="sandbox"&&(o=_t("#i"+t));const h=_t(s==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=s==="sandbox"?h.select(`[id="${t}"]`):_t(`[id="${t}"]`),u=(n==null?void 0:n.width)??a.width,f=(n==null?void 0:n.height)??a.width,p=(n==null?void 0:n.useMaxWidth)??a.useMaxWidth,g=(n==null?void 0:n.nodeAlignment)??a.nodeAlignment,y=(n==null?void 0:n.prefix)??a.prefix,m=(n==null?void 0:n.suffix)??a.suffix,x=(n==null?void 0:n.showValues)??a.showValues,b=i.db.getGraph(),_=Mz[g];pz().nodeId(R=>R.id).nodeWidth(10).nodePadding(10+(x?15:0)).nodeAlign(_).extent([[0,0],[u,f]])(b);const k=Ks(E7);l.append("g").attr("class","nodes").selectAll(".node").data(b.nodes).join("g").attr("class","node").attr("id",R=>(R.uid=Zg.next("node-")).id).attr("transform",function(R){return"translate("+R.x0+","+R.y0+")"}).attr("x",R=>R.x0).attr("y",R=>R.y0).append("rect").attr("height",R=>R.y1-R.y0).attr("width",R=>R.x1-R.x0).attr("fill",R=>k(R.id));const v=d(({id:R,value:T})=>x?`${R}
${y}${Math.round(T*100)/100}${m}`:R,"getText");l.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(b.nodes).join("text").attr("x",R=>R.x0<u/2?R.x1+6:R.x0-6).attr("y",R=>(R.y1+R.y0)/2).attr("dy",`${x?"0":"0.35"}em`).attr("text-anchor",R=>R.x0<u/2?"start":"end").text(v);const A=l.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(b.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),L=(n==null?void 0:n.linkColor)??"gradient";if(L==="gradient"){const R=A.append("linearGradient").attr("id",T=>(T.uid=Zg.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",T=>T.source.x1).attr("x2",T=>T.target.x0);R.append("stop").attr("offset","0%").attr("stop-color",T=>k(T.source.id)),R.append("stop").attr("offset","100%").attr("stop-color",T=>k(T.target.id))}let w;switch(L){case"gradient":w=d(R=>R.uid,"coloring");break;case"source":w=d(R=>k(R.source.id),"coloring");break;case"target":w=d(R=>k(R.target.id),"coloring");break;default:w=L}A.append("path").attr("d",Cz()).attr("stroke",w).attr("stroke-width",R=>Math.max(1,R.width)),Ml(void 0,l,0,p)},"draw"),Pz={draw:Fz},Oz=d(e=>e.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),Vz=d(e=>`.label {
      font-family: ${e.fontFamily};
    }`,"getStyles"),zz=Vz,Wz=Bh.parse.bind(Bh);Bh.parse=e=>Wz(Oz(e));var qz={styles:zz,parser:Bh,db:$z,renderer:Pz};const Yz=Object.freeze(Object.defineProperty({__proto__:null,diagram:qz},Symbol.toStringTag,{value:"Module"}));var Gz=ge.packet,Ja,y_=(Ja=class{constructor(){this.packet=[],this.setAccTitle=We,this.getAccTitle=Ke,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getAccDescription=Ze,this.setAccDescription=Qe}getConfig(){const t=Cr({...Gz,...xe().packet});return t.showBits&&(t.paddingY+=10),t}getPacket(){return this.packet}pushWord(t){t.length>0&&this.packet.push(t)}clear(){qe(),this.packet=[]}},d(Ja,"PacketDB"),Ja),Hz=1e4,Uz=d((e,t)=>{wn(e,t);let r=-1,i=[],s=1;const{bitsPerRow:n}=t.getConfig();for(let{start:a,end:o,bits:h,label:l}of e.blocks){if(a!==void 0&&o!==void 0&&o<a)throw new Error(`Packet block ${a} - ${o} is invalid. End must be greater than start.`);if(a??(a=r+1),a!==r+1)throw new Error(`Packet block ${a} - ${o??a} is not contiguous. It should start from ${r+1}.`);if(h===0)throw new Error(`Packet block ${a} is invalid. Cannot have a zero bit field.`);for(o??(o=a+(h??1)-1),h??(h=o-a+1),r=o,P.debug(`Packet block ${a} - ${r} with label ${l}`);i.length<=n+1&&t.getPacket().length<Hz;){const[u,f]=jz({start:a,end:o,bits:h,label:l},s,n);if(i.push(u),u.end+1===s*n&&(t.pushWord(i),i=[],s++),!f)break;({start:a,end:o,bits:h,label:l}=f)}}t.pushWord(i)},"populate"),jz=d((e,t,r)=>{if(e.start===void 0)throw new Error("start should have been set during first phase");if(e.end===void 0)throw new Error("end should have been set during first phase");if(e.start>e.end)throw new Error(`Block start ${e.start} is greater than block end ${e.end}.`);if(e.end+1<=t*r)return[e,void 0];const i=t*r-1,s=t*r;return[{start:e.start,end:i,label:e.label,bits:i-e.start},{start:s,end:e.end,label:e.label,bits:e.end-s}]},"getNextFittingBlock"),m_={parser:{yy:void 0},parse:d(async e=>{var i;const t=await Ts("packet",e),r=(i=m_.parser)==null?void 0:i.yy;if(!(r instanceof y_))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");P.debug(t),Uz(t,r)},"parse")},Xz=d((e,t,r,i)=>{const s=i.db,n=s.getConfig(),{rowHeight:a,paddingY:o,bitWidth:h,bitsPerRow:l}=n,u=s.getPacket(),f=s.getDiagramTitle(),p=a+o,g=p*(u.length+1)-(f?0:a),y=h*l+2,m=es(t);m.attr("viewbox",`0 0 ${y} ${g}`),Er(m,g,y,n.useMaxWidth);for(const[x,b]of u.entries())Kz(m,b,x,n);m.append("text").text(f).attr("x",y/2).attr("y",g-p/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),Kz=d((e,t,r,{rowHeight:i,paddingX:s,paddingY:n,bitWidth:a,bitsPerRow:o,showBits:h})=>{const l=e.append("g"),u=r*(i+n)+n;for(const f of t){const p=f.start%o*a+1,g=(f.end-f.start+1)*a-s;if(l.append("rect").attr("x",p).attr("y",u).attr("width",g).attr("height",i).attr("class","packetBlock"),l.append("text").attr("x",p+g/2).attr("y",u+i/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(f.label),!h)continue;const y=f.end===f.start,m=u-2;l.append("text").attr("x",p+(y?g/2:0)).attr("y",m).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",y?"middle":"start").text(f.start),y||l.append("text").attr("x",p+g).attr("y",m).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(f.end)}},"drawWord"),Qz={draw:Xz},Zz={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},Jz=d(({packet:e}={})=>{const t=Cr(Zz,e);return`
	.packetByte {
		font-size: ${t.byteFontSize};
	}
	.packetByte.start {
		fill: ${t.startByteColor};
	}
	.packetByte.end {
		fill: ${t.endByteColor};
	}
	.packetLabel {
		fill: ${t.labelColor};
		font-size: ${t.labelFontSize};
	}
	.packetTitle {
		fill: ${t.titleColor};
		font-size: ${t.titleFontSize};
	}
	.packetBlock {
		stroke: ${t.blockStrokeColor};
		stroke-width: ${t.blockStrokeWidth};
		fill: ${t.blockFillColor};
	}
	`},"styles"),tW={parser:m_,get db(){return new y_},renderer:Qz,styles:Jz};const eW=Object.freeze(Object.defineProperty({__proto__:null,diagram:tW},Symbol.toStringTag,{value:"Module"}));var Un={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},x_={axes:[],curves:[],options:Un},En=structuredClone(x_),rW=ge.radar,iW=d(()=>Cr({...rW,...xe().radar}),"getConfig"),b_=d(()=>En.axes,"getAxes"),sW=d(()=>En.curves,"getCurves"),nW=d(()=>En.options,"getOptions"),aW=d(e=>{En.axes=e.map(t=>({name:t.name,label:t.label??t.name}))},"setAxes"),oW=d(e=>{En.curves=e.map(t=>({name:t.name,label:t.label??t.name,entries:lW(t.entries)}))},"setCurves"),lW=d(e=>{if(e[0].axis==null)return e.map(r=>r.value);const t=b_();if(t.length===0)throw new Error("Axes must be populated before curves for reference entries");return t.map(r=>{const i=e.find(s=>{var n;return((n=s.axis)==null?void 0:n.$refText)===r.name});if(i===void 0)throw new Error("Missing entry for axis "+r.label);return i.value})},"computeCurveEntries"),cW=d(e=>{var r,i,s,n,a;const t=e.reduce((o,h)=>(o[h.name]=h,o),{});En.options={showLegend:((r=t.showLegend)==null?void 0:r.value)??Un.showLegend,ticks:((i=t.ticks)==null?void 0:i.value)??Un.ticks,max:((s=t.max)==null?void 0:s.value)??Un.max,min:((n=t.min)==null?void 0:n.value)??Un.min,graticule:((a=t.graticule)==null?void 0:a.value)??Un.graticule}},"setOptions"),hW=d(()=>{qe(),En=structuredClone(x_)},"clear"),Qo={getAxes:b_,getCurves:sW,getOptions:nW,setAxes:aW,setCurves:oW,setOptions:cW,getConfig:iW,clear:hW,setAccTitle:We,getAccTitle:Ke,setDiagramTitle:ir,getDiagramTitle:Ye,getAccDescription:Ze,setAccDescription:Qe},uW=d(e=>{wn(e,Qo);const{axes:t,curves:r,options:i}=e;Qo.setAxes(t),Qo.setCurves(r),Qo.setOptions(i)},"populate"),dW={parse:d(async e=>{const t=await Ts("radar",e);P.debug(t),uW(t)},"parse")},fW=d((e,t,r,i)=>{const s=i.db,n=s.getAxes(),a=s.getCurves(),o=s.getOptions(),h=s.getConfig(),l=s.getDiagramTitle(),u=es(t),f=pW(u,h),p=o.max??Math.max(...a.map(m=>Math.max(...m.entries))),g=o.min,y=Math.min(h.width,h.height)/2;gW(f,n,y,o.ticks,o.graticule),yW(f,n,y,h),v_(f,n,a,g,p,o.graticule,h),w_(f,a,o.showLegend,h),f.append("text").attr("class","radarTitle").text(l).attr("x",0).attr("y",-h.height/2-h.marginTop)},"draw"),pW=d((e,t)=>{const r=t.width+t.marginLeft+t.marginRight,i=t.height+t.marginTop+t.marginBottom,s={x:t.marginLeft+t.width/2,y:t.marginTop+t.height/2};return e.attr("viewbox",`0 0 ${r} ${i}`).attr("width",r).attr("height",i),e.append("g").attr("transform",`translate(${s.x}, ${s.y})`)},"drawFrame"),gW=d((e,t,r,i,s)=>{if(s==="circle")for(let n=0;n<i;n++){const a=r*(n+1)/i;e.append("circle").attr("r",a).attr("class","radarGraticule")}else if(s==="polygon"){const n=t.length;for(let a=0;a<i;a++){const o=r*(a+1)/i,h=t.map((l,u)=>{const f=2*u*Math.PI/n-Math.PI/2,p=o*Math.cos(f),g=o*Math.sin(f);return`${p},${g}`}).join(" ");e.append("polygon").attr("points",h).attr("class","radarGraticule")}}},"drawGraticule"),yW=d((e,t,r,i)=>{const s=t.length;for(let n=0;n<s;n++){const a=t[n].label,o=2*n*Math.PI/s-Math.PI/2;e.append("line").attr("x1",0).attr("y1",0).attr("x2",r*i.axisScaleFactor*Math.cos(o)).attr("y2",r*i.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),e.append("text").text(a).attr("x",r*i.axisLabelFactor*Math.cos(o)).attr("y",r*i.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}},"drawAxes");function v_(e,t,r,i,s,n,a){const o=t.length,h=Math.min(a.width,a.height)/2;r.forEach((l,u)=>{if(l.entries.length!==o)return;const f=l.entries.map((p,g)=>{const y=2*Math.PI*g/o-Math.PI/2,m=__(p,i,s,h),x=m*Math.cos(y),b=m*Math.sin(y);return{x,y:b}});n==="circle"?e.append("path").attr("d",k_(f,a.curveTension)).attr("class",`radarCurve-${u}`):n==="polygon"&&e.append("polygon").attr("points",f.map(p=>`${p.x},${p.y}`).join(" ")).attr("class",`radarCurve-${u}`)})}d(v_,"drawCurves");function __(e,t,r,i){const s=Math.min(Math.max(e,t),r);return i*(s-t)/(r-t)}d(__,"relativeRadius");function k_(e,t){const r=e.length;let i=`M${e[0].x},${e[0].y}`;for(let s=0;s<r;s++){const n=e[(s-1+r)%r],a=e[s],o=e[(s+1)%r],h=e[(s+2)%r],l={x:a.x+(o.x-n.x)*t,y:a.y+(o.y-n.y)*t},u={x:o.x-(h.x-a.x)*t,y:o.y-(h.y-a.y)*t};i+=` C${l.x},${l.y} ${u.x},${u.y} ${o.x},${o.y}`}return`${i} Z`}d(k_,"closedRoundCurve");function w_(e,t,r,i){if(!r)return;const s=(i.width/2+i.marginRight)*3/4,n=-(i.height/2+i.marginTop)*3/4,a=20;t.forEach((o,h)=>{const l=e.append("g").attr("transform",`translate(${s}, ${n+h*a})`);l.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${h}`),l.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(o.label)})}d(w_,"drawLegend");var mW={draw:fW},xW=d((e,t)=>{let r="";for(let i=0;i<e.THEME_COLOR_LIMIT;i++){const s=e[`cScale${i}`];r+=`
		.radarCurve-${i} {
			color: ${s};
			fill: ${s};
			fill-opacity: ${t.curveOpacity};
			stroke: ${s};
			stroke-width: ${t.curveStrokeWidth};
		}
		.radarLegendBox-${i} {
			fill: ${s};
			fill-opacity: ${t.curveOpacity};
			stroke: ${s};
		}
		`}return r},"genIndexStyles"),bW=d(e=>{const t=zh(),r=xe(),i=Cr(t,r.themeVariables),s=Cr(i.radar,e);return{themeVariables:i,radarOptions:s}},"buildRadarStyleOptions"),vW=d(({radar:e}={})=>{const{themeVariables:t,radarOptions:r}=bW(e);return`
	.radarTitle {
		font-size: ${t.fontSize};
		color: ${t.titleColor};
		dominant-baseline: hanging;
		text-anchor: middle;
	}
	.radarAxisLine {
		stroke: ${r.axisColor};
		stroke-width: ${r.axisStrokeWidth};
	}
	.radarAxisLabel {
		dominant-baseline: middle;
		text-anchor: middle;
		font-size: ${r.axisLabelFontSize}px;
		color: ${r.axisColor};
	}
	.radarGraticule {
		fill: ${r.graticuleColor};
		fill-opacity: ${r.graticuleOpacity};
		stroke: ${r.graticuleColor};
		stroke-width: ${r.graticuleStrokeWidth};
	}
	.radarLegendText {
		text-anchor: start;
		font-size: ${r.legendFontSize}px;
		dominant-baseline: hanging;
	}
	${xW(t,r)}
	`},"styles"),_W={parser:dW,db:Qo,renderer:mW,styles:vW};const kW=Object.freeze(Object.defineProperty({__proto__:null,diagram:_W},Symbol.toStringTag,{value:"Module"}));var q1=(function(){var e=d(function(S,C,k,v){for(k=k||{},v=S.length;v--;k[S[v]]=C);return k},"o"),t=[1,15],r=[1,7],i=[1,13],s=[1,14],n=[1,19],a=[1,16],o=[1,17],h=[1,18],l=[8,30],u=[8,10,21,28,29,30,31,39,43,46],f=[1,23],p=[1,24],g=[8,10,15,16,21,28,29,30,31,39,43,46],y=[8,10,15,16,21,27,28,29,30,31,39,43,46],m=[1,49],x={trace:d(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:d(function(C,k,v,A,L,w,R){var T=w.length-1;switch(L){case 4:A.getLogger().debug("Rule: separator (NL) ");break;case 5:A.getLogger().debug("Rule: separator (Space) ");break;case 6:A.getLogger().debug("Rule: separator (EOF) ");break;case 7:A.getLogger().debug("Rule: hierarchy: ",w[T-1]),A.setHierarchy(w[T-1]);break;case 8:A.getLogger().debug("Stop NL ");break;case 9:A.getLogger().debug("Stop EOF ");break;case 10:A.getLogger().debug("Stop NL2 ");break;case 11:A.getLogger().debug("Stop EOF2 ");break;case 12:A.getLogger().debug("Rule: statement: ",w[T]),typeof w[T].length=="number"?this.$=w[T]:this.$=[w[T]];break;case 13:A.getLogger().debug("Rule: statement #2: ",w[T-1]),this.$=[w[T-1]].concat(w[T]);break;case 14:A.getLogger().debug("Rule: link: ",w[T],C),this.$={edgeTypeStr:w[T],label:""};break;case 15:A.getLogger().debug("Rule: LABEL link: ",w[T-3],w[T-1],w[T]),this.$={edgeTypeStr:w[T],label:w[T-1]};break;case 18:const V=parseInt(w[T]),N=A.generateId();this.$={id:N,type:"space",label:"",width:V,children:[]};break;case 23:A.getLogger().debug("Rule: (nodeStatement link node) ",w[T-2],w[T-1],w[T]," typestr: ",w[T-1].edgeTypeStr);const D=A.edgeStrToEdgeData(w[T-1].edgeTypeStr);this.$=[{id:w[T-2].id,label:w[T-2].label,type:w[T-2].type,directions:w[T-2].directions},{id:w[T-2].id+"-"+w[T].id,start:w[T-2].id,end:w[T].id,label:w[T-1].label,type:"edge",directions:w[T].directions,arrowTypeEnd:D,arrowTypeStart:"arrow_open"},{id:w[T].id,label:w[T].label,type:A.typeStr2Type(w[T].typeStr),directions:w[T].directions}];break;case 24:A.getLogger().debug("Rule: nodeStatement (abc88 node size) ",w[T-1],w[T]),this.$={id:w[T-1].id,label:w[T-1].label,type:A.typeStr2Type(w[T-1].typeStr),directions:w[T-1].directions,widthInColumns:parseInt(w[T],10)};break;case 25:A.getLogger().debug("Rule: nodeStatement (node) ",w[T]),this.$={id:w[T].id,label:w[T].label,type:A.typeStr2Type(w[T].typeStr),directions:w[T].directions,widthInColumns:1};break;case 26:A.getLogger().debug("APA123",this?this:"na"),A.getLogger().debug("COLUMNS: ",w[T]),this.$={type:"column-setting",columns:w[T]==="auto"?-1:parseInt(w[T])};break;case 27:A.getLogger().debug("Rule: id-block statement : ",w[T-2],w[T-1]),A.generateId(),this.$={...w[T-2],type:"composite",children:w[T-1]};break;case 28:A.getLogger().debug("Rule: blockStatement : ",w[T-2],w[T-1],w[T]);const E=A.generateId();this.$={id:E,type:"composite",label:"",children:w[T-1]};break;case 29:A.getLogger().debug("Rule: node (NODE_ID separator): ",w[T]),this.$={id:w[T]};break;case 30:A.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",w[T-1],w[T]),this.$={id:w[T-1],label:w[T].label,typeStr:w[T].typeStr,directions:w[T].directions};break;case 31:A.getLogger().debug("Rule: dirList: ",w[T]),this.$=[w[T]];break;case 32:A.getLogger().debug("Rule: dirList: ",w[T-1],w[T]),this.$=[w[T-1]].concat(w[T]);break;case 33:A.getLogger().debug("Rule: nodeShapeNLabel: ",w[T-2],w[T-1],w[T]),this.$={typeStr:w[T-2]+w[T],label:w[T-1]};break;case 34:A.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",w[T-3],w[T-2]," #3:",w[T-1],w[T]),this.$={typeStr:w[T-3]+w[T],label:w[T-2],directions:w[T-1]};break;case 35:case 36:this.$={type:"classDef",id:w[T-1].trim(),css:w[T].trim()};break;case 37:this.$={type:"applyClass",id:w[T-1].trim(),styleClass:w[T].trim()};break;case 38:this.$={type:"applyStyles",id:w[T-1].trim(),stylesStr:w[T].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:t,11:3,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:s,31:n,39:a,43:o,46:h},{8:[1,20]},e(l,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:t,21:r,28:i,29:s,31:n,39:a,43:o,46:h}),e(u,[2,16],{14:22,15:f,16:p}),e(u,[2,17]),e(u,[2,18]),e(u,[2,19]),e(u,[2,20]),e(u,[2,21]),e(u,[2,22]),e(g,[2,25],{27:[1,25]}),e(u,[2,26]),{19:26,26:12,31:n},{10:t,11:27,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:s,31:n,39:a,43:o,46:h},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},e(y,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},e(l,[2,13]),{26:35,31:n},{31:[2,14]},{17:[1,36]},e(g,[2,24]),{10:t,11:37,13:4,14:22,15:f,16:p,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:s,31:n,39:a,43:o,46:h},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},e(y,[2,30]),{18:[1,43]},{18:[1,44]},e(g,[2,23]),{18:[1,45]},{30:[1,46]},e(u,[2,28]),e(u,[2,35]),e(u,[2,36]),e(u,[2,37]),e(u,[2,38]),{36:[1,47]},{33:48,34:m},{15:[1,50]},e(u,[2,27]),e(y,[2,33]),{38:[1,51]},{33:52,34:m,38:[2,31]},{31:[2,15]},e(y,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:d(function(C,k){if(k.recoverable)this.trace(C);else{var v=new Error(C);throw v.hash=k,v}},"parseError"),parse:d(function(C){var k=this,v=[0],A=[],L=[null],w=[],R=this.table,T="",V=0,N=0,D=2,E=1,M=w.slice.call(arguments,1),F=Object.create(this.lexer),I={yy:{}};for(var B in this.yy)Object.prototype.hasOwnProperty.call(this.yy,B)&&(I.yy[B]=this.yy[B]);F.setInput(C,I.yy),I.yy.lexer=F,I.yy.parser=this,typeof F.yylloc>"u"&&(F.yylloc={});var X=F.yylloc;w.push(X);var $=F.options&&F.options.ranges;typeof I.yy.parseError=="function"?this.parseError=I.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function G(W){v.length=v.length-2*W,L.length=L.length-W,w.length=w.length-W}d(G,"popStack");function nt(){var W;return W=A.pop()||F.lex()||E,typeof W!="number"&&(W instanceof Array&&(A=W,W=A.pop()),W=k.symbols_[W]||W),W}d(nt,"lex");for(var ht,tt,dt,st,ot={},K,lt,U,j;;){if(tt=v[v.length-1],this.defaultActions[tt]?dt=this.defaultActions[tt]:((ht===null||typeof ht>"u")&&(ht=nt()),dt=R[tt]&&R[tt][ht]),typeof dt>"u"||!dt.length||!dt[0]){var Q="";j=[];for(K in R[tt])this.terminals_[K]&&K>D&&j.push("'"+this.terminals_[K]+"'");F.showPosition?Q="Parse error on line "+(V+1)+`:
`+F.showPosition()+`
Expecting `+j.join(", ")+", got '"+(this.terminals_[ht]||ht)+"'":Q="Parse error on line "+(V+1)+": Unexpected "+(ht==E?"end of input":"'"+(this.terminals_[ht]||ht)+"'"),this.parseError(Q,{text:F.match,token:this.terminals_[ht]||ht,line:F.yylineno,loc:X,expected:j})}if(dt[0]instanceof Array&&dt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+tt+", token: "+ht);switch(dt[0]){case 1:v.push(ht),L.push(F.yytext),w.push(F.yylloc),v.push(dt[1]),ht=null,N=F.yyleng,T=F.yytext,V=F.yylineno,X=F.yylloc;break;case 2:if(lt=this.productions_[dt[1]][1],ot.$=L[L.length-lt],ot._$={first_line:w[w.length-(lt||1)].first_line,last_line:w[w.length-1].last_line,first_column:w[w.length-(lt||1)].first_column,last_column:w[w.length-1].last_column},$&&(ot._$.range=[w[w.length-(lt||1)].range[0],w[w.length-1].range[1]]),st=this.performAction.apply(ot,[T,N,V,I.yy,dt[1],L,w].concat(M)),typeof st<"u")return st;lt&&(v=v.slice(0,-1*lt*2),L=L.slice(0,-1*lt),w=w.slice(0,-1*lt)),v.push(this.productions_[dt[1]][0]),L.push(ot.$),w.push(ot._$),U=R[v[v.length-2]][v[v.length-1]],v.push(U);break;case 3:return!0}}return!0},"parse")},b=(function(){var S={EOF:1,parseError:d(function(k,v){if(this.yy.parser)this.yy.parser.parseError(k,v);else throw new Error(k)},"parseError"),setInput:d(function(C,k){return this.yy=k||this.yy||{},this._input=C,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:d(function(){var C=this._input[0];this.yytext+=C,this.yyleng++,this.offset++,this.match+=C,this.matched+=C;var k=C.match(/(?:\r\n?|\n).*/g);return k?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),C},"input"),unput:d(function(C){var k=C.length,v=C.split(/(?:\r\n?|\n)/g);this._input=C+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),v.length-1&&(this.yylineno-=v.length-1);var L=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:v?(v.length===A.length?this.yylloc.first_column:0)+A[A.length-v.length].length-v[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[L[0],L[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this},"unput"),more:d(function(){return this._more=!0,this},"more"),reject:d(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:d(function(C){this.unput(this.match.slice(C))},"less"),pastInput:d(function(){var C=this.matched.substr(0,this.matched.length-this.match.length);return(C.length>20?"...":"")+C.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:d(function(){var C=this.match;return C.length<20&&(C+=this._input.substr(0,20-C.length)),(C.substr(0,20)+(C.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:d(function(){var C=this.pastInput(),k=new Array(C.length+1).join("-");return C+this.upcomingInput()+`
`+k+"^"},"showPosition"),test_match:d(function(C,k){var v,A,L;if(this.options.backtrack_lexer&&(L={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(L.yylloc.range=this.yylloc.range.slice(0))),A=C[0].match(/(?:\r\n?|\n).*/g),A&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+C[0].length},this.yytext+=C[0],this.match+=C[0],this.matches=C,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(C[0].length),this.matched+=C[0],v=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),v)return v;if(this._backtrack){for(var w in L)this[w]=L[w];return!1}return!1},"test_match"),next:d(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var C,k,v,A;this._more||(this.yytext="",this.match="");for(var L=this._currentRules(),w=0;w<L.length;w++)if(v=this._input.match(this.rules[L[w]]),v&&(!k||v[0].length>k[0].length)){if(k=v,A=w,this.options.backtrack_lexer){if(C=this.test_match(v,L[w]),C!==!1)return C;if(this._backtrack){k=!1;continue}else return!1}else if(!this.options.flex)break}return k?(C=this.test_match(k,L[A]),C!==!1?C:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:d(function(){var k=this.next();return k||this.lex()},"lex"),begin:d(function(k){this.conditionStack.push(k)},"begin"),popState:d(function(){var k=this.conditionStack.length-1;return k>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:d(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:d(function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},"topState"),pushState:d(function(k){this.begin(k)},"pushState"),stateStackSize:d(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:d(function(k,v,A,L){switch(A){case 0:return k.getLogger().debug("Found block-beta"),10;case 1:return k.getLogger().debug("Found id-block"),29;case 2:return k.getLogger().debug("Found block"),10;case 3:k.getLogger().debug(".",v.yytext);break;case 4:k.getLogger().debug("_",v.yytext);break;case 5:return 5;case 6:return v.yytext=-1,28;case 7:return v.yytext=v.yytext.replace(/columns\s+/,""),k.getLogger().debug("COLUMNS (LEX)",v.yytext),28;case 8:this.pushState("md_string");break;case 9:return"MD_STR";case 10:this.popState();break;case 11:this.pushState("string");break;case 12:k.getLogger().debug("LEX: POPPING STR:",v.yytext),this.popState();break;case 13:return k.getLogger().debug("LEX: STR end:",v.yytext),"STR";case 14:return v.yytext=v.yytext.replace(/space\:/,""),k.getLogger().debug("SPACE NUM (LEX)",v.yytext),21;case 15:return v.yytext="1",k.getLogger().debug("COLUMNS (LEX)",v.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 34:this.popState();break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 38:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),k.getLogger().debug("Lex: ))"),"NODE_DEND";case 40:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 41:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),k.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),k.getLogger().debug("Lex: -)"),"NODE_DEND";case 44:return this.popState(),k.getLogger().debug("Lex: (("),"NODE_DEND";case 45:return this.popState(),k.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),k.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),k.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:return this.popState(),k.getLogger().debug("Lex: /]"),"NODE_DEND";case 49:return this.popState(),k.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),k.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),k.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),k.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),k.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return k.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return k.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return k.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return k.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 59:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 60:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 61:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 62:return k.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return k.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 64:return k.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 65:return this.pushState("NODE"),35;case 66:return this.pushState("NODE"),35;case 67:return this.pushState("NODE"),35;case 68:return this.pushState("NODE"),35;case 69:return this.pushState("NODE"),35;case 70:return this.pushState("NODE"),35;case 71:return this.pushState("NODE"),35;case 72:return k.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),k.getLogger().debug("LEX ARR START"),37;case 74:return k.getLogger().debug("Lex: NODE_ID",v.yytext),31;case 75:return k.getLogger().debug("Lex: EOF",v.yytext),8;case 76:this.pushState("md_string");break;case 77:this.pushState("md_string");break;case 78:return"NODE_DESCR";case 79:this.popState();break;case 80:k.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:k.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return k.getLogger().debug("LEX: NODE_DESCR:",v.yytext),"NODE_DESCR";case 83:k.getLogger().debug("LEX POPPING"),this.popState();break;case 84:k.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (right): dir:",v.yytext),"DIR";case 86:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (left):",v.yytext),"DIR";case 87:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (x):",v.yytext),"DIR";case 88:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (y):",v.yytext),"DIR";case 89:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (up):",v.yytext),"DIR";case 90:return v.yytext=v.yytext.replace(/^,\s*/,""),k.getLogger().debug("Lex (down):",v.yytext),"DIR";case 91:return v.yytext="]>",k.getLogger().debug("Lex (ARROW_DIR end):",v.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return k.getLogger().debug("Lex: LINK","#"+v.yytext+"#"),15;case 93:return k.getLogger().debug("Lex: LINK",v.yytext),15;case 94:return k.getLogger().debug("Lex: LINK",v.yytext),15;case 95:return k.getLogger().debug("Lex: LINK",v.yytext),15;case 96:return k.getLogger().debug("Lex: START_LINK",v.yytext),this.pushState("LLABEL"),16;case 97:return k.getLogger().debug("Lex: START_LINK",v.yytext),this.pushState("LLABEL"),16;case 98:return k.getLogger().debug("Lex: START_LINK",v.yytext),this.pushState("LLABEL"),16;case 99:this.pushState("md_string");break;case 100:return k.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),k.getLogger().debug("Lex: LINK","#"+v.yytext+"#"),15;case 102:return this.popState(),k.getLogger().debug("Lex: LINK",v.yytext),15;case 103:return this.popState(),k.getLogger().debug("Lex: LINK",v.yytext),15;case 104:return k.getLogger().debug("Lex: COLON",v.yytext),v.yytext=v.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}};return S})();x.lexer=b;function _(){this.yy={}}return d(_,"Parser"),_.prototype=x,x.Parser=_,new _})();q1.parser=q1;var wW=q1,ni=new Map,Bp=[],Y1=new Map,Jg="color",t2="fill",TW="bgFill",T_=",",SW=it(),Nh=new Map,CW=d(e=>Ct.sanitizeText(e,SW),"sanitizeText"),EW=d(function(e,t=""){let r=Nh.get(e);r||(r={id:e,styles:[],textStyles:[]},Nh.set(e,r)),t!=null&&t.split(T_).forEach(i=>{const s=i.replace(/([^;]*);/,"$1").trim();if(RegExp(Jg).exec(i)){const a=s.replace(t2,TW).replace(Jg,t2);r.textStyles.push(a)}r.styles.push(s)})},"addStyleClass"),AW=d(function(e,t=""){const r=ni.get(e);t!=null&&(r.styles=t.split(T_))},"addStyle2Node"),LW=d(function(e,t){e.split(",").forEach(function(r){let i=ni.get(r);if(i===void 0){const s=r.trim();i={id:s,type:"na",children:[]},ni.set(s,i)}i.classes||(i.classes=[]),i.classes.push(t)})},"setCssClass"),S_=d((e,t)=>{const r=e.flat(),i=[],s=r.find(a=>(a==null?void 0:a.type)==="column-setting"),n=(s==null?void 0:s.columns)??-1;for(const a of r){if(typeof n=="number"&&n>0&&a.type!=="column-setting"&&typeof a.widthInColumns=="number"&&a.widthInColumns>n&&P.warn(`Block ${a.id} width ${a.widthInColumns} exceeds configured column width ${n}`),a.label&&(a.label=CW(a.label)),a.type==="classDef"){EW(a.id,a.css);continue}if(a.type==="applyClass"){LW(a.id,(a==null?void 0:a.styleClass)??"");continue}if(a.type==="applyStyles"){a!=null&&a.stylesStr&&AW(a.id,a==null?void 0:a.stylesStr);continue}if(a.type==="column-setting")t.columns=a.columns??-1;else if(a.type==="edge"){const o=(Y1.get(a.id)??0)+1;Y1.set(a.id,o),a.id=o+"-"+a.id,Bp.push(a)}else{a.label||(a.type==="composite"?a.label="":a.label=a.id);const o=ni.get(a.id);if(o===void 0?ni.set(a.id,a):(a.type!=="na"&&(o.type=a.type),a.label!==a.id&&(o.label=a.label)),a.children&&S_(a.children,a),a.type==="space"){const h=a.width??1;for(let l=0;l<h;l++){const u=x2(a);u.id=u.id+"-"+l,ni.set(u.id,u),i.push(u)}}else o===void 0&&i.push(a)}}t.children=i},"populateBlockDatabase"),Ip=[],il={id:"root",type:"composite",children:[],columns:-1},DW=d(()=>{P.debug("Clear called"),qe(),il={id:"root",type:"composite",children:[],columns:-1},ni=new Map([["root",il]]),Ip=[],Nh=new Map,Bp=[],Y1=new Map},"clear");function C_(e){switch(P.debug("typeStr2Type",e),e){case"[]":return"square";case"()":return P.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}d(C_,"typeStr2Type");function E_(e){switch(P.debug("typeStr2Type",e),e){case"==":return"thick";default:return"normal"}}d(E_,"edgeTypeStr2Type");function A_(e){switch(e.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}d(A_,"edgeStrToEdgeData");var e2=0,RW=d(()=>(e2++,"id-"+Math.random().toString(36).substr(2,12)+"-"+e2),"generateId"),BW=d(e=>{il.children=e,S_(e,il),Ip=il.children},"setHierarchy"),IW=d(e=>{const t=ni.get(e);return t?t.columns?t.columns:t.children?t.children.length:-1:-1},"getColumns"),NW=d(()=>[...ni.values()],"getBlocksFlat"),$W=d(()=>Ip||[],"getBlocks"),MW=d(()=>Bp,"getEdges"),FW=d(e=>ni.get(e),"getBlock"),PW=d(e=>{ni.set(e.id,e)},"setBlock"),OW=d(()=>P,"getLogger"),VW=d(function(){return Nh},"getClasses"),zW={getConfig:d(()=>xe().block,"getConfig"),typeStr2Type:C_,edgeTypeStr2Type:E_,edgeStrToEdgeData:A_,getLogger:OW,getBlocksFlat:NW,getBlocks:$W,getEdges:MW,setHierarchy:BW,getBlock:FW,setBlock:PW,getColumns:IW,getClasses:VW,clear:DW,generateId:RW},WW=zW,pc=d((e,t)=>{const r=K1,i=r(e,"r"),s=r(e,"g"),n=r(e,"b");return js(i,s,n,t)},"fade"),qW=d(e=>`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }



  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${pc(e.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${pc(e.mainBkg,.5)};
    fill: ${pc(e.clusterBkg,.5)};
    stroke: ${pc(e.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
  ${ql()}
`,"getStyles"),YW=qW,GW=d((e,t,r,i)=>{t.forEach(s=>{eq[s](e,r,i)})},"insertMarkers"),HW=d((e,t,r)=>{P.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),UW=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),jW=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),XW=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),KW=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),QW=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),ZW=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),JW=d((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),tq=d((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),eq={extension:HW,composition:UW,aggregation:jW,dependency:XW,lollipop:KW,point:QW,circle:ZW,cross:JW,barb:tq},rq=GW,f2,p2,Ne=((p2=(f2=it())==null?void 0:f2.block)==null?void 0:p2.padding)??8;function L_(e,t){if(e===0||!Number.isInteger(e))throw new Error("Columns must be an integer !== 0.");if(t<0||!Number.isInteger(t))throw new Error("Position must be a non-negative integer."+t);if(e<0)return{px:t,py:0};if(e===1)return{px:0,py:t};const r=t%e,i=Math.floor(t/e);return{px:r,py:i}}d(L_,"calculateBlockPosition");var iq=d(e=>{let t=0,r=0;for(const i of e.children){const{width:s,height:n,x:a,y:o}=i.size??{width:0,height:0,x:0,y:0};P.debug("getMaxChildSize abc95 child:",i.id,"width:",s,"height:",n,"x:",a,"y:",o,i.type),i.type!=="space"&&(s>t&&(t=s/(e.widthInColumns??1)),n>r&&(r=n))}return{width:t,height:r}},"getMaxChildSize");function $h(e,t,r=0,i=0){var a,o,h,l,u,f,p,g,y,m,x;P.debug("setBlockSizes abc95 (start)",e.id,(a=e==null?void 0:e.size)==null?void 0:a.x,"block width =",e==null?void 0:e.size,"siblingWidth",r),(o=e==null?void 0:e.size)!=null&&o.width||(e.size={width:r,height:i,x:0,y:0});let s=0,n=0;if(((h=e.children)==null?void 0:h.length)>0){for(const L of e.children)$h(L,t);const b=iq(e);s=b.width,n=b.height,P.debug("setBlockSizes abc95 maxWidth of",e.id,":s children is ",s,n);for(const L of e.children)L.size&&(P.debug(`abc95 Setting size of children of ${e.id} id=${L.id} ${s} ${n} ${JSON.stringify(L.size)}`),L.size.width=s*(L.widthInColumns??1)+Ne*((L.widthInColumns??1)-1),L.size.height=n,L.size.x=0,L.size.y=0,P.debug(`abc95 updating size of ${e.id} children child:${L.id} maxWidth:${s} maxHeight:${n}`));for(const L of e.children)$h(L,t,s,n);const _=e.columns??-1;let S=0;for(const L of e.children)S+=L.widthInColumns??1;let C=e.children.length;_>0&&_<S&&(C=_);const k=Math.ceil(S/C);let v=C*(s+Ne)+Ne,A=k*(n+Ne)+Ne;if(v<r){P.debug(`Detected to small sibling: abc95 ${e.id} siblingWidth ${r} siblingHeight ${i} width ${v}`),v=r,A=i;const L=(r-C*Ne-Ne)/C,w=(i-k*Ne-Ne)/k;P.debug("Size indata abc88",e.id,"childWidth",L,"maxWidth",s),P.debug("Size indata abc88",e.id,"childHeight",w,"maxHeight",n),P.debug("Size indata abc88 xSize",C,"padding",Ne);for(const R of e.children)R.size&&(R.size.width=L,R.size.height=w,R.size.x=0,R.size.y=0)}if(P.debug(`abc95 (finale calc) ${e.id} xSize ${C} ySize ${k} columns ${_}${e.children.length} width=${Math.max(v,((l=e.size)==null?void 0:l.width)||0)}`),v<(((u=e==null?void 0:e.size)==null?void 0:u.width)||0)){v=((f=e==null?void 0:e.size)==null?void 0:f.width)||0;const L=_>0?Math.min(e.children.length,_):e.children.length;if(L>0){const w=(v-L*Ne-Ne)/L;P.debug("abc95 (growing to fit) width",e.id,v,(p=e.size)==null?void 0:p.width,w);for(const R of e.children)R.size&&(R.size.width=w)}}e.size={width:v,height:A,x:0,y:0}}P.debug("setBlockSizes abc94 (done)",e.id,(g=e==null?void 0:e.size)==null?void 0:g.x,(y=e==null?void 0:e.size)==null?void 0:y.width,(m=e==null?void 0:e.size)==null?void 0:m.y,(x=e==null?void 0:e.size)==null?void 0:x.height)}d($h,"setBlockSizes");function Np(e,t){var i,s,n,a,o,h,l,u,f,p,g,y,m,x,b,_,S;P.debug(`abc85 layout blocks (=>layoutBlocks) ${e.id} x: ${(i=e==null?void 0:e.size)==null?void 0:i.x} y: ${(s=e==null?void 0:e.size)==null?void 0:s.y} width: ${(n=e==null?void 0:e.size)==null?void 0:n.width}`);const r=e.columns??-1;if(P.debug("layoutBlocks columns abc95",e.id,"=>",r,e),e.children&&e.children.length>0){const C=((o=(a=e==null?void 0:e.children[0])==null?void 0:a.size)==null?void 0:o.width)??0,k=e.children.length*C+(e.children.length-1)*Ne;P.debug("widthOfChildren 88",k,"posX");let v=0;P.debug("abc91 block?.size?.x",e.id,(h=e==null?void 0:e.size)==null?void 0:h.x);let A=(l=e==null?void 0:e.size)!=null&&l.x?((u=e==null?void 0:e.size)==null?void 0:u.x)+(-((f=e==null?void 0:e.size)==null?void 0:f.width)/2||0):-Ne,L=0;for(const w of e.children){const R=e;if(!w.size)continue;const{width:T,height:V}=w.size,{px:N,py:D}=L_(r,v);if(D!=L&&(L=D,A=(p=e==null?void 0:e.size)!=null&&p.x?((g=e==null?void 0:e.size)==null?void 0:g.x)+(-((y=e==null?void 0:e.size)==null?void 0:y.width)/2||0):-Ne,P.debug("New row in layout for block",e.id," and child ",w.id,L)),P.debug(`abc89 layout blocks (child) id: ${w.id} Pos: ${v} (px, py) ${N},${D} (${(m=R==null?void 0:R.size)==null?void 0:m.x},${(x=R==null?void 0:R.size)==null?void 0:x.y}) parent: ${R.id} width: ${T}${Ne}`),R.size){const M=T/2;w.size.x=A+Ne+M,P.debug(`abc91 layout blocks (calc) px, pyid:${w.id} startingPos=X${A} new startingPosX${w.size.x} ${M} padding=${Ne} width=${T} halfWidth=${M} => x:${w.size.x} y:${w.size.y} ${w.widthInColumns} (width * (child?.w || 1)) / 2 ${T*((w==null?void 0:w.widthInColumns)??1)/2}`),A=w.size.x+M,w.size.y=R.size.y-R.size.height/2+D*(V+Ne)+V/2+Ne,P.debug(`abc88 layout blocks (calc) px, pyid:${w.id}startingPosX${A}${Ne}${M}=>x:${w.size.x}y:${w.size.y}${w.widthInColumns}(width * (child?.w || 1)) / 2${T*((w==null?void 0:w.widthInColumns)??1)/2}`)}w.children&&Np(w);let E=(w==null?void 0:w.widthInColumns)??1;r>0&&(E=Math.min(E,r-v%r)),v+=E,P.debug("abc88 columnsPos",w,v)}}P.debug(`layout blocks (<==layoutBlocks) ${e.id} x: ${(b=e==null?void 0:e.size)==null?void 0:b.x} y: ${(_=e==null?void 0:e.size)==null?void 0:_.y} width: ${(S=e==null?void 0:e.size)==null?void 0:S.width}`)}d(Np,"layoutBlocks");function $p(e,{minX:t,minY:r,maxX:i,maxY:s}={minX:0,minY:0,maxX:0,maxY:0}){if(e.size&&e.id!=="root"){const{x:n,y:a,width:o,height:h}=e.size;n-o/2<t&&(t=n-o/2),a-h/2<r&&(r=a-h/2),n+o/2>i&&(i=n+o/2),a+h/2>s&&(s=a+h/2)}if(e.children)for(const n of e.children)({minX:t,minY:r,maxX:i,maxY:s}=$p(n,{minX:t,minY:r,maxX:i,maxY:s}));return{minX:t,minY:r,maxX:i,maxY:s}}d($p,"findBounds");function D_(e){const t=e.getBlock("root");if(!t)return;$h(t,e,0,0),Np(t),P.debug("getBlocks",JSON.stringify(t,null,2));const{minX:r,minY:i,maxX:s,maxY:n}=$p(t),a=n-i,o=s-r;return{x:r,y:i,width:o,height:a}}d(D_,"layout");function G1(e,t){t&&e.attr("style",t)}d(G1,"applyStyle");function R_(e,t){const r=_t(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=r.append("xhtml:div"),s=e.label,n=e.isNode?"nodeLabel":"edgeLabel",a=i.append("span");return a.html(me(s,t)),G1(a,e.labelStyle),a.attr("class",n),G1(i,e.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),r.node()}d(R_,"addHtmlLabel");var sq=d(async(e,t,r,i)=>{let s=e||"";typeof s=="object"&&(s=s[0]);const n=it();if(Te(n.flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),P.debug("vertexText"+s);const a=await Vf(ki(s)),o={isNode:i,label:a,labelStyle:t.replace("fill:","color:")};return R_(o,n)}else{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof s=="string"?o=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?o=s:o=[];for(const h of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=h.trim(),a.appendChild(l)}return a}},"createLabel"),Kr=sq,nq=d((e,t,r,i,s)=>{t.arrowTypeStart&&r2(e,"start",t.arrowTypeStart,r,i,s),t.arrowTypeEnd&&r2(e,"end",t.arrowTypeEnd,r,i,s)},"addEdgeMarkers"),aq={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},r2=d((e,t,r,i,s,n)=>{const a=aq[r];if(!a){P.warn(`Unknown arrow type: ${r}`);return}const o=t==="start"?"Start":"End";e.attr(`marker-${t}`,`url(${i}#${s}_${n}-${a}${o})`)},"addEdgeMarker"),H1={},pr={},oq=d(async(e,t)=>{const r=it(),i=Te(r.flowchart.htmlLabels),s=t.labelType==="markdown"?Wr(e,t.label,{style:t.labelStyle,useHtmlLabels:i,addSvgBackground:!0},r):await Kr(t.label,t.labelStyle),n=e.insert("g").attr("class","edgeLabel"),a=n.insert("g").attr("class","label");a.node().appendChild(s);let o=s.getBBox();if(i){const l=s.children[0],u=_t(s);o=l.getBoundingClientRect(),u.attr("width",o.width),u.attr("height",o.height)}a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),H1[t.id]=n,t.width=o.width,t.height=o.height;let h;if(t.startLabelLeft){const l=await Kr(t.startLabelLeft,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),pr[t.id]||(pr[t.id]={}),pr[t.id].startLeft=u,Zo(h,t.startLabelLeft)}if(t.startLabelRight){const l=await Kr(t.startLabelRight,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=u.node().appendChild(l),f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),pr[t.id]||(pr[t.id]={}),pr[t.id].startRight=u,Zo(h,t.startLabelRight)}if(t.endLabelLeft){const l=await Kr(t.endLabelLeft,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),u.node().appendChild(l),pr[t.id]||(pr[t.id]={}),pr[t.id].endLeft=u,Zo(h,t.endLabelLeft)}if(t.endLabelRight){const l=await Kr(t.endLabelRight,t.labelStyle),u=e.insert("g").attr("class","edgeTerminals"),f=u.insert("g").attr("class","inner");h=f.node().appendChild(l);const p=l.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),u.node().appendChild(l),pr[t.id]||(pr[t.id]={}),pr[t.id].endRight=u,Zo(h,t.endLabelRight)}return s},"insertEdgeLabel");function Zo(e,t){it().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}d(Zo,"setTerminalWidth");var lq=d((e,t)=>{P.debug("Moving label abc88 ",e.id,e.label,H1[e.id],t);let r=t.updatedPath?t.updatedPath:t.originalPath;const i=it(),{subGraphTitleTotalMargin:s}=zl(i);if(e.label){const n=H1[e.id];let a=e.x,o=e.y;if(r){const h=ie.calcLabelPosition(r);P.debug("Moving label "+e.label+" from (",a,",",o,") to (",h.x,",",h.y,") abc88"),t.updatedPath&&(a=h.x,o=h.y)}n.attr("transform",`translate(${a}, ${o+s/2})`)}if(e.startLabelLeft){const n=pr[e.id].startLeft;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.startLabelRight){const n=pr[e.id].startRight;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelLeft){const n=pr[e.id].endLeft;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}if(e.endLabelRight){const n=pr[e.id].endRight;let a=e.x,o=e.y;if(r){const h=ie.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);a=h.x,o=h.y}n.attr("transform",`translate(${a}, ${o})`)}},"positionEdgeLabel"),cq=d((e,t)=>{const r=e.x,i=e.y,s=Math.abs(t.x-r),n=Math.abs(t.y-i),a=e.width/2,o=e.height/2;return s>=a||n>=o},"outsideNode"),hq=d((e,t,r)=>{P.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,s=e.y,n=Math.abs(i-r.x),a=e.width/2;let o=r.x<t.x?a-n:a+n;const h=e.height/2,l=Math.abs(t.y-r.y),u=Math.abs(t.x-r.x);if(Math.abs(s-t.y)*a>Math.abs(i-t.x)*h){let f=r.y<t.y?t.y-h-s:s-h-t.y;o=u*f/l;const p={x:r.x<t.x?r.x+o:r.x-u+o,y:r.y<t.y?r.y+l-f:r.y-l+f};return o===0&&(p.x=t.x,p.y=t.y),u===0&&(p.x=t.x),l===0&&(p.y=t.y),P.debug(`abc89 topp/bott calc, Q ${l}, q ${f}, R ${u}, r ${o}`,p),p}else{r.x<t.x?o=t.x-a-i:o=i-a-t.x;let f=l*o/u,p=r.x<t.x?r.x+u-o:r.x-u+o,g=r.y<t.y?r.y+f:r.y-f;return P.debug(`sides calc abc89, Q ${l}, q ${f}, R ${u}, r ${o}`,{_x:p,_y:g}),o===0&&(p=t.x,g=t.y),u===0&&(p=t.x),l===0&&(g=t.y),{x:p,y:g}}},"intersection"),i2=d((e,t)=>{P.debug("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],s=!1;return e.forEach(n=>{if(!cq(t,n)&&!s){const a=hq(t,i,n);let o=!1;r.forEach(h=>{o=o||h.x===a.x&&h.y===a.y}),r.some(h=>h.x===a.x&&h.y===a.y)||r.push(a),s=!0}else i=n,s||r.push(n)}),r},"cutPathAtIntersect"),uq=d(function(e,t,r,i,s,n,a){let o=r.points;P.debug("abc88 InsertEdge: edge=",r,"e=",t);let h=!1;const l=n.node(t.v);var u=n.node(t.w);u!=null&&u.intersect&&(l!=null&&l.intersect)&&(o=o.slice(1,r.points.length-1),o.unshift(l.intersect(o[0])),o.push(u.intersect(o[o.length-1]))),r.toCluster&&(P.debug("to cluster abc88",i[r.toCluster]),o=i2(r.points,i[r.toCluster].node),h=!0),r.fromCluster&&(P.debug("from cluster abc88",i[r.fromCluster]),o=i2(o.reverse(),i[r.fromCluster].node).reverse(),h=!0);const f=o.filter(C=>!Number.isNaN(C.y));let p=ta;r.curve&&(s==="graph"||s==="flowchart")&&(p=r.curve);const{x:g,y}=Ix(r),m=fl().x(g).y(y).curve(p);let x;switch(r.thickness){case"normal":x="edge-thickness-normal";break;case"thick":x="edge-thickness-thick";break;case"invisible":x="edge-thickness-thick";break;default:x=""}switch(r.pattern){case"solid":x+=" edge-pattern-solid";break;case"dotted":x+=" edge-pattern-dotted";break;case"dashed":x+=" edge-pattern-dashed";break}const b=e.append("path").attr("d",m(f)).attr("id",r.id).attr("class"," "+x+(r.classes?" "+r.classes:"")).attr("style",r.style);let _="";(it().flowchart.arrowMarkerAbsolute||it().state.arrowMarkerAbsolute)&&(_=qh(!0)),nq(b,r,_,a,s);let S={};return h&&(S.updatedPath=o),S.originalPath=r.points,S},"insertEdge"),dq=d(e=>{const t=new Set;for(const r of e)switch(r){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(r);break}return t},"expandAndDeduplicateDirections"),fq=d((e,t,r)=>{const i=dq(e),s=2,n=t.height+2*r.padding,a=n/s,o=t.width+2*a+r.padding,h=r.padding/2;return i.has("right")&&i.has("left")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:a,y:0},{x:o/2,y:2*h},{x:o-a,y:0},{x:o,y:0},{x:o,y:-n/3},{x:o+2*h,y:-n/2},{x:o,y:-2*n/3},{x:o,y:-n},{x:o-a,y:-n},{x:o/2,y:-n-2*h},{x:a,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*h,y:-n/2},{x:0,y:-n/3}]:i.has("right")&&i.has("left")&&i.has("up")?[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}]:i.has("right")&&i.has("left")&&i.has("down")?[{x:0,y:0},{x:a,y:-n},{x:o-a,y:-n},{x:o,y:0}]:i.has("right")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:o,y:-a},{x:o,y:-n+a},{x:0,y:-n}]:i.has("left")&&i.has("up")&&i.has("down")?[{x:o,y:0},{x:0,y:-a},{x:0,y:-n+a},{x:o,y:-n}]:i.has("right")&&i.has("left")?[{x:a,y:0},{x:a,y:-h},{x:o-a,y:-h},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+h},{x:a,y:-n+h},{x:a,y:-n},{x:0,y:-n/2}]:i.has("up")&&i.has("down")?[{x:o/2,y:0},{x:0,y:-h},{x:a,y:-h},{x:a,y:-n+h},{x:0,y:-n+h},{x:o/2,y:-n},{x:o,y:-n+h},{x:o-a,y:-n+h},{x:o-a,y:-h},{x:o,y:-h}]:i.has("right")&&i.has("up")?[{x:0,y:0},{x:o,y:-a},{x:0,y:-n}]:i.has("right")&&i.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-n}]:i.has("left")&&i.has("up")?[{x:o,y:0},{x:0,y:-a},{x:o,y:-n}]:i.has("left")&&i.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-n}]:i.has("right")?[{x:a,y:-h},{x:a,y:-h},{x:o-a,y:-h},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:o-a,y:-n+h},{x:a,y:-n+h},{x:a,y:-n+h}]:i.has("left")?[{x:a,y:0},{x:a,y:-h},{x:o-a,y:-h},{x:o-a,y:-n+h},{x:a,y:-n+h},{x:a,y:-n},{x:0,y:-n/2}]:i.has("up")?[{x:a,y:-h},{x:a,y:-n+h},{x:0,y:-n+h},{x:o/2,y:-n},{x:o,y:-n+h},{x:o-a,y:-n+h},{x:o-a,y:-h}]:i.has("down")?[{x:o/2,y:0},{x:0,y:-h},{x:a,y:-h},{x:a,y:-n+h},{x:o-a,y:-n+h},{x:o-a,y:-h},{x:o,y:-h}]:[{x:0,y:0}]},"getArrowPoints");function B_(e,t){return e.intersect(t)}d(B_,"intersectNode");var pq=B_;function I_(e,t,r,i){var s=e.x,n=e.y,a=s-i.x,o=n-i.y,h=Math.sqrt(t*t*o*o+r*r*a*a),l=Math.abs(t*r*a/h);i.x<s&&(l=-l);var u=Math.abs(t*r*o/h);return i.y<n&&(u=-u),{x:s+l,y:n+u}}d(I_,"intersectEllipse");var N_=I_;function $_(e,t,r){return N_(e,t,t,r)}d($_,"intersectCircle");var gq=$_;function M_(e,t,r,i){var s,n,a,o,h,l,u,f,p,g,y,m,x,b,_;if(s=t.y-e.y,a=e.x-t.x,h=t.x*e.y-e.x*t.y,p=s*r.x+a*r.y+h,g=s*i.x+a*i.y+h,!(p!==0&&g!==0&&U1(p,g))&&(n=i.y-r.y,o=r.x-i.x,l=i.x*r.y-r.x*i.y,u=n*e.x+o*e.y+l,f=n*t.x+o*t.y+l,!(u!==0&&f!==0&&U1(u,f))&&(y=s*o-n*a,y!==0)))return m=Math.abs(y/2),x=a*l-o*h,b=x<0?(x-m)/y:(x+m)/y,x=n*h-s*l,_=x<0?(x-m)/y:(x+m)/y,{x:b,y:_}}d(M_,"intersectLine");function U1(e,t){return e*t>0}d(U1,"sameSign");var yq=M_,mq=F_;function F_(e,t,r){var i=e.x,s=e.y,n=[],a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(y){a=Math.min(a,y.x),o=Math.min(o,y.y)}):(a=Math.min(a,t.x),o=Math.min(o,t.y));for(var h=i-e.width/2-a,l=s-e.height/2-o,u=0;u<t.length;u++){var f=t[u],p=t[u<t.length-1?u+1:0],g=yq(e,r,{x:h+f.x,y:l+f.y},{x:h+p.x,y:l+p.y});g&&n.push(g)}return n.length?(n.length>1&&n.sort(function(y,m){var x=y.x-r.x,b=y.y-r.y,_=Math.sqrt(x*x+b*b),S=m.x-r.x,C=m.y-r.y,k=Math.sqrt(S*S+C*C);return _<k?-1:_===k?0:1}),n[0]):e}d(F_,"intersectPolygon");var xq=d((e,t)=>{var r=e.x,i=e.y,s=t.x-r,n=t.y-i,a=e.width/2,o=e.height/2,h,l;return Math.abs(n)*a>Math.abs(s)*o?(n<0&&(o=-o),h=n===0?0:o*s/n,l=o):(s<0&&(a=-a),h=a,l=s===0?0:a*n/s),{x:r+h,y:i+l}},"intersectRect"),bq=xq,Le={node:pq,circle:gq,ellipse:N_,polygon:mq,rect:bq},nr=d(async(e,t,r,i)=>{const s=it();let n;const a=t.useHtmlLabels||Te(s.flowchart.htmlLabels);r?n=r:n="node default";const o=e.insert("g").attr("class",n).attr("id",t.domId||t.id),h=o.insert("g").attr("class","label").attr("style",t.labelStyle);let l;t.labelText===void 0?l="":l=typeof t.labelText=="string"?t.labelText:t.labelText[0];const u=h.node();let f;t.labelType==="markdown"?f=Wr(h,me(ki(l),s),{useHtmlLabels:a,width:t.width||s.flowchart.wrappingWidth,classes:"markdown-node-label"},s):f=u.appendChild(await Kr(me(ki(l),s),t.labelStyle,!1,i));let p=f.getBBox();const g=t.padding/2;if(Te(s.flowchart.htmlLabels)){const y=f.children[0],m=_t(f),x=y.getElementsByTagName("img");if(x){const b=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(_=>new Promise(S=>{function C(){if(_.style.display="flex",_.style.flexDirection="column",b){const k=s.fontSize?s.fontSize:window.getComputedStyle(document.body).fontSize,A=parseInt(k,10)*5+"px";_.style.minWidth=A,_.style.maxWidth=A}else _.style.width="100%";S(_)}d(C,"setupImage"),setTimeout(()=>{_.complete&&C()}),_.addEventListener("error",C),_.addEventListener("load",C)})))}p=y.getBoundingClientRect(),m.attr("width",p.width),m.attr("height",p.height)}return a?h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):h.attr("transform","translate(0, "+-p.height/2+")"),t.centerLabel&&h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.insert("rect",":first-child"),{shapeSvg:o,bbox:p,halfPadding:g,label:h}},"labelHelper"),Be=d((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds");function ci(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}d(ci,"insertPolygonShape");var vq=d(async(e,t)=>{t.useHtmlLabels||it().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:i,bbox:s,halfPadding:n}=await nr(e,t,"node "+t.classes,!0);P.info("Classes = ",t.classes);const a=i.insert("rect",":first-child");return a.attr("rx",t.rx).attr("ry",t.ry).attr("x",-s.width/2-n).attr("y",-s.height/2-n).attr("width",s.width+t.padding).attr("height",s.height+t.padding),Be(t,a),t.intersect=function(o){return Le.rect(t,o)},i},"note"),_q=vq,s2=d(e=>e?" "+e:"","formatClass"),Yr=d((e,t)=>`${t||"node default"}${s2(e.classes)} ${s2(e.class)}`,"getClassesFromNode"),n2=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=s+n,o=[{x:a/2,y:0},{x:a,y:-a/2},{x:a/2,y:-a},{x:0,y:-a/2}];P.info("Question main (Circle)");const h=ci(r,a,a,o);return h.attr("style",t.style),Be(t,h),t.intersect=function(l){return P.warn("Intersect called"),Le.polygon(t,o,l)},r},"question"),kq=d((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=28,s=[{x:0,y:i/2},{x:i/2,y:0},{x:0,y:-i/2},{x:-i/2,y:0}];return r.insert("polygon",":first-child").attr("points",s.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(a){return Le.circle(t,14,a)},r},"choice"),wq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=4,n=i.height+t.padding,a=n/s,o=i.width+2*a+t.padding,h=[{x:a,y:0},{x:o-a,y:0},{x:o,y:-n/2},{x:o-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],l=ci(r,o,n,h);return l.attr("style",t.style),Be(t,l),t.intersect=function(u){return Le.polygon(t,h,u)},r},"hexagon"),Tq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,void 0,!0),s=2,n=i.height+2*t.padding,a=n/s,o=i.width+2*a+t.padding,h=fq(t.directions,i,t),l=ci(r,o,n,h);return l.attr("style",t.style),Be(t,l),t.intersect=function(u){return Le.polygon(t,h,u)},r},"block_arrow"),Sq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-n/2,y:0},{x:s,y:0},{x:s,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return ci(r,s,n,a).attr("style",t.style),t.width=s+n,t.height=n,t.intersect=function(h){return Le.polygon(t,a,h)},r},"rect_left_inv_arrow"),Cq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:n/6,y:-n}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"lean_right"),Eq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:2*n/6,y:0},{x:s+n/6,y:0},{x:s-2*n/6,y:-n},{x:-n/6,y:-n}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"lean_left"),Aq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:-2*n/6,y:0},{x:s+2*n/6,y:0},{x:s-n/6,y:-n},{x:n/6,y:-n}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"trapezoid"),Lq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:n/6,y:0},{x:s-n/6,y:0},{x:s+2*n/6,y:-n},{x:-2*n/6,y:-n}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"inv_trapezoid"),Dq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:0,y:0},{x:s+n/2,y:0},{x:s,y:-n/2},{x:s+n/2,y:-n},{x:0,y:-n}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"rect_right_inv_arrow"),Rq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=s/2,a=n/(2.5+s/50),o=i.height+a+t.padding,h="M 0,"+a+" a "+n+","+a+" 0,0,0 "+s+" 0 a "+n+","+a+" 0,0,0 "+-s+" 0 l 0,"+o+" a "+n+","+a+" 0,0,0 "+s+" 0 l 0,"+-o,l=r.attr("label-offset-y",a).insert("path",":first-child").attr("style",t.style).attr("d",h).attr("transform","translate("+-s/2+","+-(o/2+a)+")");return Be(t,l),t.intersect=function(u){const f=Le.rect(t,u),p=f.x-t.x;if(n!=0&&(Math.abs(p)<t.width/2||Math.abs(p)==t.width/2&&Math.abs(f.y-t.y)>t.height/2-a)){let g=a*a*(1-p*p/(n*n));g!=0&&(g=Math.sqrt(g)),g=a-g,u.y-t.y>0&&(g=-g),f.y+=g}return f},r},"cylinder"),Bq=d(async(e,t)=>{const{shapeSvg:r,bbox:i,halfPadding:s}=await nr(e,t,"node "+t.classes+" "+t.class,!0),n=r.insert("rect",":first-child"),a=t.positioned?t.width:i.width+t.padding,o=t.positioned?t.height:i.height+t.padding,h=t.positioned?-a/2:-i.width/2-s,l=t.positioned?-o/2:-i.height/2-s;if(n.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",h).attr("y",l).attr("width",a).attr("height",o),t.props){const u=new Set(Object.keys(t.props));t.props.borders&&(ku(n,t.props.borders,a,o),u.delete("borders")),u.forEach(f=>{P.warn(`Unknown node property ${f}`)})}return Be(t,n),t.intersect=function(u){return Le.rect(t,u)},r},"rect"),Iq=d(async(e,t)=>{const{shapeSvg:r,bbox:i,halfPadding:s}=await nr(e,t,"node "+t.classes,!0),n=r.insert("rect",":first-child"),a=t.positioned?t.width:i.width+t.padding,o=t.positioned?t.height:i.height+t.padding,h=t.positioned?-a/2:-i.width/2-s,l=t.positioned?-o/2:-i.height/2-s;if(n.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",h).attr("y",l).attr("width",a).attr("height",o),t.props){const u=new Set(Object.keys(t.props));t.props.borders&&(ku(n,t.props.borders,a,o),u.delete("borders")),u.forEach(f=>{P.warn(`Unknown node property ${f}`)})}return Be(t,n),t.intersect=function(u){return Le.rect(t,u)},r},"composite"),Nq=d(async(e,t)=>{const{shapeSvg:r}=await nr(e,t,"label",!0);P.trace("Classes = ",t.class);const i=r.insert("rect",":first-child"),s=0,n=0;if(i.attr("width",s).attr("height",n),r.attr("class","label edgeLabel"),t.props){const a=new Set(Object.keys(t.props));t.props.borders&&(ku(i,t.props.borders,s,n),a.delete("borders")),a.forEach(o=>{P.warn(`Unknown node property ${o}`)})}return Be(t,i),t.intersect=function(a){return Le.rect(t,a)},r},"labelRect");function ku(e,t,r,i){const s=[],n=d(o=>{s.push(o,0)},"addBorder"),a=d(o=>{s.push(0,o)},"skipBorder");t.includes("t")?(P.debug("add top border"),n(r)):a(r),t.includes("r")?(P.debug("add right border"),n(i)):a(i),t.includes("b")?(P.debug("add bottom border"),n(r)):a(r),t.includes("l")?(P.debug("add left border"),n(i)):a(i),e.attr("stroke-dasharray",s.join(" "))}d(ku,"applyNodePropertyBorders");var $q=d(async(e,t)=>{let r;t.classes?r="node "+t.classes:r="node default";const i=e.insert("g").attr("class",r).attr("id",t.domId||t.id),s=i.insert("rect",":first-child"),n=i.insert("line"),a=i.insert("g").attr("class","label"),o=t.labelText.flat?t.labelText.flat():t.labelText;let h="";typeof o=="object"?h=o[0]:h=o,P.info("Label text abc79",h,o,typeof o=="object");const l=a.node().appendChild(await Kr(h,t.labelStyle,!0,!0));let u={width:0,height:0};if(Te(it().flowchart.htmlLabels)){const m=l.children[0],x=_t(l);u=m.getBoundingClientRect(),x.attr("width",u.width),x.attr("height",u.height)}P.info("Text 2",o);const f=o.slice(1,o.length);let p=l.getBBox();const g=a.node().appendChild(await Kr(f.join?f.join("<br/>"):f,t.labelStyle,!0,!0));if(Te(it().flowchart.htmlLabels)){const m=g.children[0],x=_t(g);u=m.getBoundingClientRect(),x.attr("width",u.width),x.attr("height",u.height)}const y=t.padding/2;return _t(g).attr("transform","translate( "+(u.width>p.width?0:(p.width-u.width)/2)+", "+(p.height+y+5)+")"),_t(l).attr("transform","translate( "+(u.width<p.width?0:-(p.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-y+3)+")"),s.attr("class","outer title-state").attr("x",-u.width/2-y).attr("y",-u.height/2-y).attr("width",u.width+t.padding).attr("height",u.height+t.padding),n.attr("class","divider").attr("x1",-u.width/2-y).attr("x2",u.width/2+y).attr("y1",-u.height/2-y+p.height+y).attr("y2",-u.height/2-y+p.height+y),Be(t,s),t.intersect=function(m){return Le.rect(t,m)},i},"rectWithTitle"),Mq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.height+t.padding,n=i.width+s/4+t.padding,a=r.insert("rect",":first-child").attr("style",t.style).attr("rx",s/2).attr("ry",s/2).attr("x",-n/2).attr("y",-s/2).attr("width",n).attr("height",s);return Be(t,a),t.intersect=function(o){return Le.rect(t,o)},r},"stadium"),Fq=d(async(e,t)=>{const{shapeSvg:r,bbox:i,halfPadding:s}=await nr(e,t,Yr(t,void 0),!0),n=r.insert("circle",":first-child");return n.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+s).attr("width",i.width+t.padding).attr("height",i.height+t.padding),P.info("Circle main"),Be(t,n),t.intersect=function(a){return P.info("Circle intersect",t,i.width/2+s,a),Le.circle(t,i.width/2+s,a)},r},"circle"),Pq=d(async(e,t)=>{const{shapeSvg:r,bbox:i,halfPadding:s}=await nr(e,t,Yr(t,void 0),!0),n=5,a=r.insert("g",":first-child"),o=a.insert("circle"),h=a.insert("circle");return a.attr("class",t.class),o.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+s+n).attr("width",i.width+t.padding+n*2).attr("height",i.height+t.padding+n*2),h.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",i.width/2+s).attr("width",i.width+t.padding).attr("height",i.height+t.padding),P.info("DoubleCircle main"),Be(t,o),t.intersect=function(l){return P.info("DoubleCircle intersect",t,i.width/2+s+n,l),Le.circle(t,i.width/2+s+n,l)},r},"doublecircle"),Oq=d(async(e,t)=>{const{shapeSvg:r,bbox:i}=await nr(e,t,Yr(t,void 0),!0),s=i.width+t.padding,n=i.height+t.padding,a=[{x:0,y:0},{x:s,y:0},{x:s,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],o=ci(r,s,n,a);return o.attr("style",t.style),Be(t,o),t.intersect=function(h){return Le.polygon(t,a,h)},r},"subroutine"),Vq=d((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Be(t,i),t.intersect=function(s){return Le.circle(t,7,s)},r},"start"),a2=d((e,t,r)=>{const i=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s=70,n=10;r==="LR"&&(s=10,n=70);const a=i.append("rect").attr("x",-1*s/2).attr("y",-1*n/2).attr("width",s).attr("height",n).attr("class","fork-join");return Be(t,a),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(o){return Le.rect(t,o)},i},"forkJoin"),zq=d((e,t)=>{const r=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),i=r.insert("circle",":first-child"),s=r.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),i.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Be(t,s),t.intersect=function(n){return Le.circle(t,7,n)},r},"end"),Wq=d(async(e,t)=>{var L;const r=t.padding/2,i=4,s=8;let n;t.classes?n="node "+t.classes:n="node default";const a=e.insert("g").attr("class",n).attr("id",t.domId||t.id),o=a.insert("rect",":first-child"),h=a.insert("line"),l=a.insert("line");let u=0,f=i;const p=a.insert("g").attr("class","label");let g=0;const y=(L=t.classData.annotations)==null?void 0:L[0],m=t.classData.annotations[0]?""+t.classData.annotations[0]+"":"",x=p.node().appendChild(await Kr(m,t.labelStyle,!0,!0));let b=x.getBBox();if(Te(it().flowchart.htmlLabels)){const w=x.children[0],R=_t(x);b=w.getBoundingClientRect(),R.attr("width",b.width),R.attr("height",b.height)}t.classData.annotations[0]&&(f+=b.height+i,u+=b.width);let _=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&(it().flowchart.htmlLabels?_+="&lt;"+t.classData.type+"&gt;":_+="<"+t.classData.type+">");const S=p.node().appendChild(await Kr(_,t.labelStyle,!0,!0));_t(S).attr("class","classTitle");let C=S.getBBox();if(Te(it().flowchart.htmlLabels)){const w=S.children[0],R=_t(S);C=w.getBoundingClientRect(),R.attr("width",C.width),R.attr("height",C.height)}f+=C.height+i,C.width>u&&(u=C.width);const k=[];t.classData.members.forEach(async w=>{const R=w.getDisplayDetails();let T=R.displayText;it().flowchart.htmlLabels&&(T=T.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const V=p.node().appendChild(await Kr(T,R.cssStyle?R.cssStyle:t.labelStyle,!0,!0));let N=V.getBBox();if(Te(it().flowchart.htmlLabels)){const D=V.children[0],E=_t(V);N=D.getBoundingClientRect(),E.attr("width",N.width),E.attr("height",N.height)}N.width>u&&(u=N.width),f+=N.height+i,k.push(V)}),f+=s;const v=[];if(t.classData.methods.forEach(async w=>{const R=w.getDisplayDetails();let T=R.displayText;it().flowchart.htmlLabels&&(T=T.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const V=p.node().appendChild(await Kr(T,R.cssStyle?R.cssStyle:t.labelStyle,!0,!0));let N=V.getBBox();if(Te(it().flowchart.htmlLabels)){const D=V.children[0],E=_t(V);N=D.getBoundingClientRect(),E.attr("width",N.width),E.attr("height",N.height)}N.width>u&&(u=N.width),f+=N.height+i,v.push(V)}),f+=s,y){let w=(u-b.width)/2;_t(x).attr("transform","translate( "+(-1*u/2+w)+", "+-1*f/2+")"),g=b.height+i}let A=(u-C.width)/2;return _t(S).attr("transform","translate( "+(-1*u/2+A)+", "+(-1*f/2+g)+")"),g+=C.height+i,h.attr("class","divider").attr("x1",-u/2-r).attr("x2",u/2+r).attr("y1",-f/2-r+s+g).attr("y2",-f/2-r+s+g),g+=s,k.forEach(w=>{_t(w).attr("transform","translate( "+-u/2+", "+(-1*f/2+g+s/2)+")");const R=w==null?void 0:w.getBBox();g+=((R==null?void 0:R.height)??0)+i}),g+=s,l.attr("class","divider").attr("x1",-u/2-r).attr("x2",u/2+r).attr("y1",-f/2-r+s+g).attr("y2",-f/2-r+s+g),g+=s,v.forEach(w=>{_t(w).attr("transform","translate( "+-u/2+", "+(-1*f/2+g)+")");const R=w==null?void 0:w.getBBox();g+=((R==null?void 0:R.height)??0)+i}),o.attr("style",t.style).attr("class","outer title-state").attr("x",-u/2-r).attr("y",-(f/2)-r).attr("width",u+t.padding).attr("height",f+t.padding),Be(t,o),t.intersect=function(w){return Le.rect(t,w)},a},"class_box"),o2={rhombus:n2,composite:Iq,question:n2,rect:Bq,labelRect:Nq,rectWithTitle:$q,choice:kq,circle:Fq,doublecircle:Pq,stadium:Mq,hexagon:wq,block_arrow:Tq,rect_left_inv_arrow:Sq,lean_right:Cq,lean_left:Eq,trapezoid:Aq,inv_trapezoid:Lq,rect_right_inv_arrow:Dq,cylinder:Rq,start:Vq,end:zq,note:_q,subroutine:Oq,fork:a2,join:a2,class_box:Wq},Ic={},P_=d(async(e,t,r)=>{let i,s;if(t.link){let n;it().securityLevel==="sandbox"?n="_top":t.linkTarget&&(n=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",n),s=await o2[t.shape](i,t,r)}else s=await o2[t.shape](e,t,r),i=s;return t.tooltip&&s.attr("title",t.tooltip),t.class&&s.attr("class","node default "+t.class),Ic[t.id]=i,t.haveCallback&&Ic[t.id].attr("class",Ic[t.id].attr("class")+" clickable"),i},"insertNode"),qq=d(e=>{const t=Ic[e.id];P.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode");function Mp(e,t,r=!1){var p,g,y;const i=e;let s="default";(((p=i==null?void 0:i.classes)==null?void 0:p.length)||0)>0&&(s=((i==null?void 0:i.classes)??[]).join(" ")),s=s+" flowchart-label";let n=0,a="",o;switch(i.type){case"round":n=5,a="rect";break;case"composite":n=0,a="composite",o=0;break;case"square":a="rect";break;case"diamond":a="question";break;case"hexagon":a="hexagon";break;case"block_arrow":a="block_arrow";break;case"odd":a="rect_left_inv_arrow";break;case"lean_right":a="lean_right";break;case"lean_left":a="lean_left";break;case"trapezoid":a="trapezoid";break;case"inv_trapezoid":a="inv_trapezoid";break;case"rect_left_inv_arrow":a="rect_left_inv_arrow";break;case"circle":a="circle";break;case"ellipse":a="ellipse";break;case"stadium":a="stadium";break;case"subroutine":a="subroutine";break;case"cylinder":a="cylinder";break;case"group":a="rect";break;case"doublecircle":a="doublecircle";break;default:a="rect"}const h=Mf((i==null?void 0:i.styles)??[]),l=i.label,u=i.size??{width:0,height:0,x:0,y:0};return{labelStyle:h.labelStyle,shape:a,labelText:l,rx:n,ry:n,class:s,style:h.style,id:i.id,directions:i.directions,width:u.width,height:u.height,x:u.x,y:u.y,positioned:r,intersect:void 0,type:i.type,padding:o??((y=(g=xe())==null?void 0:g.block)==null?void 0:y.padding)??0}}d(Mp,"getNodeFromBlock");async function O_(e,t,r){const i=Mp(t,r,!1);if(i.type==="group")return;const s=xe(),n=await P_(e,i,{config:s}),a=n.node().getBBox(),o=r.getBlock(i.id);o.size={width:a.width,height:a.height,x:0,y:0,node:n},r.setBlock(o),n.remove()}d(O_,"calculateBlockSize");async function V_(e,t,r){const i=Mp(t,r,!0);if(r.getBlock(i.id).type!=="space"){const n=xe();await P_(e,i,{config:n}),t.intersect=i==null?void 0:i.intersect,qq(i)}}d(V_,"insertBlockPositioned");async function wu(e,t,r,i){for(const s of t)await i(e,s,r),s.children&&await wu(e,s.children,r,i)}d(wu,"performOperations");async function z_(e,t,r){await wu(e,t,r,O_)}d(z_,"calculateBlockSizes");async function W_(e,t,r){await wu(e,t,r,V_)}d(W_,"insertBlocks");async function q_(e,t,r,i,s){const n=new Nr({multigraph:!0,compound:!0});n.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const a of r)a.size&&n.setNode(a.id,{width:a.size.width,height:a.size.height,intersect:a.intersect});for(const a of t)if(a.start&&a.end){const o=i.getBlock(a.start),h=i.getBlock(a.end);if(o!=null&&o.size&&(h!=null&&h.size)){const l=o.size,u=h.size,f=[{x:l.x,y:l.y},{x:l.x+(u.x-l.x)/2,y:l.y+(u.y-l.y)/2},{x:u.x,y:u.y}];uq(e,{v:a.start,w:a.end,name:a.id},{...a,arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",n,s),a.label&&(await oq(e,{...a,label:a.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:a.arrowTypeEnd,arrowTypeStart:a.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),lq({...a,x:f[1].x,y:f[1].y},{originalPath:f}))}}}d(q_,"insertEdges");var Yq=d(function(e,t){return t.db.getClasses()},"getClasses"),Gq=d(async function(e,t,r,i){const{securityLevel:s,block:n}=xe(),a=i.db;let o;s==="sandbox"&&(o=_t("#i"+t));const h=_t(s==="sandbox"?o.nodes()[0].contentDocument.body:"body"),l=s==="sandbox"?h.select(`[id="${t}"]`):_t(`[id="${t}"]`);rq(l,["point","circle","cross"],i.type,t);const f=a.getBlocks(),p=a.getBlocksFlat(),g=a.getEdges(),y=l.insert("g").attr("class","block");await z_(y,f,a);const m=D_(a);if(await W_(y,f,a),await q_(y,g,p,a,t),m){const x=m,b=Math.max(1,Math.round(.125*(x.width/x.height))),_=x.height+b+10,S=x.width+10,{useMaxWidth:C}=n;Er(l,_,S,!!C),P.debug("Here Bounds",m,x),l.attr("viewBox",`${x.x-5} ${x.y-5} ${x.width+10} ${x.height+10}`)}},"draw"),Hq={draw:Gq,getClasses:Yq},Uq={parser:wW,db:WW,renderer:Hq,styles:YW};const jq=Object.freeze(Object.defineProperty({__proto__:null,diagram:Uq},Symbol.toStringTag,{value:"Module"}));var l2={L:"left",R:"right",T:"top",B:"bottom"},c2={L:d(e=>`${e},${e/2} 0,${e} 0,0`,"L"),R:d(e=>`0,${e/2} ${e},0 ${e},${e}`,"R"),T:d(e=>`0,0 ${e},0 ${e/2},${e}`,"T"),B:d(e=>`${e/2},0 ${e},${e} 0,${e}`,"B")},gc={L:d((e,t)=>e-t+2,"L"),R:d((e,t)=>e-2,"R"),T:d((e,t)=>e-t+2,"T"),B:d((e,t)=>e-2,"B")},Xq=d(function(e){return _r(e)?e==="L"?"R":"L":e==="T"?"B":"T"},"getOppositeArchitectureDirection"),h2=d(function(e){const t=e;return t==="L"||t==="R"||t==="T"||t==="B"},"isArchitectureDirection"),_r=d(function(e){const t=e;return t==="L"||t==="R"},"isArchitectureDirectionX"),xs=d(function(e){const t=e;return t==="T"||t==="B"},"isArchitectureDirectionY"),Fp=d(function(e,t){const r=_r(e)&&xs(t),i=xs(e)&&_r(t);return r||i},"isArchitectureDirectionXY"),Kq=d(function(e){const t=e[0],r=e[1],i=_r(t)&&xs(r),s=xs(t)&&_r(r);return i||s},"isArchitecturePairXY"),Qq=d(function(e){return e!=="LL"&&e!=="RR"&&e!=="TT"&&e!=="BB"},"isValidArchitectureDirectionPair"),j1=d(function(e,t){const r=`${e}${t}`;return Qq(r)?r:void 0},"getArchitectureDirectionPair"),Zq=d(function([e,t],r){const i=r[0],s=r[1];return _r(i)?xs(s)?[e+(i==="L"?-1:1),t+(s==="T"?1:-1)]:[e+(i==="L"?-1:1),t]:_r(s)?[e+(s==="L"?1:-1),t+(i==="T"?1:-1)]:[e,t+(i==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),Jq=d(function(e){return e==="LT"||e==="TL"?[1,1]:e==="BL"||e==="LB"?[1,-1]:e==="BR"||e==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),tY=d(function(e,t){return Fp(e,t)?"bend":_r(e)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),eY=d(function(e){return e.type==="service"},"isArchitectureService"),rY=d(function(e){return e.type==="junction"},"isArchitectureJunction"),Y_=d(e=>e.data(),"edgeData"),Qn=d(e=>e.data(),"nodeData"),iY=ge.architecture,to,G_=(to=class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=We,this.getAccTitle=Ke,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getAccDescription=Ze,this.setAccDescription=Qe,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},qe()}addService({id:t,icon:r,in:i,title:s,iconText:n}){if(this.registeredIds[t]!==void 0)throw new Error(`The service id [${t}] is already in use by another ${this.registeredIds[t]}`);if(i!==void 0){if(t===i)throw new Error(`The service [${t}] cannot be placed within itself`);if(this.registeredIds[i]===void 0)throw new Error(`The service [${t}]'s parent does not exist. Please make sure the parent is created before this service`);if(this.registeredIds[i]==="node")throw new Error(`The service [${t}]'s parent is not a group`)}this.registeredIds[t]="node",this.nodes[t]={id:t,type:"service",icon:r,iconText:n,title:s,edges:[],in:i}}getServices(){return Object.values(this.nodes).filter(eY)}addJunction({id:t,in:r}){this.registeredIds[t]="node",this.nodes[t]={id:t,type:"junction",edges:[],in:r}}getJunctions(){return Object.values(this.nodes).filter(rY)}getNodes(){return Object.values(this.nodes)}getNode(t){return this.nodes[t]??null}addGroup({id:t,icon:r,in:i,title:s}){var n,a,o;if(((n=this.registeredIds)==null?void 0:n[t])!==void 0)throw new Error(`The group id [${t}] is already in use by another ${this.registeredIds[t]}`);if(i!==void 0){if(t===i)throw new Error(`The group [${t}] cannot be placed within itself`);if(((a=this.registeredIds)==null?void 0:a[i])===void 0)throw new Error(`The group [${t}]'s parent does not exist. Please make sure the parent is created before this group`);if(((o=this.registeredIds)==null?void 0:o[i])==="node")throw new Error(`The group [${t}]'s parent is not a group`)}this.registeredIds[t]="group",this.groups[t]={id:t,icon:r,title:s,in:i}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:t,rhsId:r,lhsDir:i,rhsDir:s,lhsInto:n,rhsInto:a,lhsGroup:o,rhsGroup:h,title:l}){if(!h2(i))throw new Error(`Invalid direction given for left hand side of edge ${t}--${r}. Expected (L,R,T,B) got ${String(i)}`);if(!h2(s))throw new Error(`Invalid direction given for right hand side of edge ${t}--${r}. Expected (L,R,T,B) got ${String(s)}`);if(this.nodes[t]===void 0&&this.groups[t]===void 0)throw new Error(`The left-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(this.nodes[r]===void 0&&this.groups[r]===void 0)throw new Error(`The right-hand id [${r}] does not yet exist. Please create the service/group before declaring an edge to it.`);const u=this.nodes[t].in,f=this.nodes[r].in;if(o&&u&&f&&u==f)throw new Error(`The left-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(h&&u&&f&&u==f)throw new Error(`The right-hand id [${r}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const p={lhsId:t,lhsDir:i,lhsInto:n,lhsGroup:o,rhsId:r,rhsDir:s,rhsInto:a,rhsGroup:h,title:l};this.edges.push(p),this.nodes[t]&&this.nodes[r]&&(this.nodes[t].edges.push(this.edges[this.edges.length-1]),this.nodes[r].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(this.dataStructures===void 0){const t={},r=Object.entries(this.nodes).reduce((h,[l,u])=>(h[l]=u.edges.reduce((f,p)=>{var m,x;const g=(m=this.getNode(p.lhsId))==null?void 0:m.in,y=(x=this.getNode(p.rhsId))==null?void 0:x.in;if(g&&y&&g!==y){const b=tY(p.lhsDir,p.rhsDir);b!=="bend"&&(t[g]??(t[g]={}),t[g][y]=b,t[y]??(t[y]={}),t[y][g]=b)}if(p.lhsId===l){const b=j1(p.lhsDir,p.rhsDir);b&&(f[b]=p.rhsId)}else{const b=j1(p.rhsDir,p.lhsDir);b&&(f[b]=p.lhsId)}return f},{}),h),{}),i=Object.keys(r)[0],s={[i]:1},n=Object.keys(r).reduce((h,l)=>l===i?h:{...h,[l]:1},{}),a=d(h=>{const l={[h]:[0,0]},u=[h];for(;u.length>0;){const f=u.shift();if(f){s[f]=1,delete n[f];const p=r[f],[g,y]=l[f];Object.entries(p).forEach(([m,x])=>{s[x]||(l[x]=Zq([g,y],m),u.push(x))})}}return l},"BFS"),o=[a(i)];for(;Object.keys(n).length>0;)o.push(a(Object.keys(n)[0]));this.dataStructures={adjList:r,spatialMaps:o,groupAlignments:t}}return this.dataStructures}setElementForId(t,r){this.elements[t]=r}getElementById(t){return this.elements[t]}getConfig(){return Cr({...iY,...xe().architecture})}getConfigField(t){return this.getConfig()[t]}},d(to,"ArchitectureDB"),to),sY=d((e,t)=>{wn(e,t),e.groups.map(r=>t.addGroup(r)),e.services.map(r=>t.addService({...r,type:"service"})),e.junctions.map(r=>t.addJunction({...r,type:"junction"})),e.edges.map(r=>t.addEdge(r))},"populateDb"),H_={parser:{yy:void 0},parse:d(async e=>{var i;const t=await Ts("architecture",e);P.debug(t);const r=(i=H_.parser)==null?void 0:i.yy;if(!(r instanceof G_))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");sY(t,r)},"parse")},nY=d(e=>`
  .edge {
    stroke-width: ${e.archEdgeWidth};
    stroke: ${e.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${e.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${e.archGroupBorderColor};
    stroke-width: ${e.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),aY=nY,Mn=d(e=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${e}</g>`,"wrapIcon"),Dl={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Mn('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Mn('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Mn('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Mn('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Mn('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Gx,blank:{body:Mn("")}}},oY=d(async function(e,t,r){const i=r.getConfigField("padding"),s=r.getConfigField("iconSize"),n=s/2,a=s/6,o=a/2;await Promise.all(t.edges().map(async h=>{var w,R;const{source:l,sourceDir:u,sourceArrow:f,sourceGroup:p,target:g,targetDir:y,targetArrow:m,targetGroup:x,label:b}=Y_(h);let{x:_,y:S}=h[0].sourceEndpoint();const{x:C,y:k}=h[0].midpoint();let{x:v,y:A}=h[0].targetEndpoint();const L=i+4;if(p&&(_r(u)?_+=u==="L"?-L:L:S+=u==="T"?-L:L+18),x&&(_r(y)?v+=y==="L"?-L:L:A+=y==="T"?-L:L+18),!p&&((w=r.getNode(l))==null?void 0:w.type)==="junction"&&(_r(u)?_+=u==="L"?n:-n:S+=u==="T"?n:-n),!x&&((R=r.getNode(g))==null?void 0:R.type)==="junction"&&(_r(y)?v+=y==="L"?n:-n:A+=y==="T"?n:-n),h[0]._private.rscratch){const T=e.insert("g");if(T.insert("path").attr("d",`M ${_},${S} L ${C},${k} L${v},${A} `).attr("class","edge").attr("id",ea(l,g,{prefix:"L"})),f){const V=_r(u)?gc[u](_,a):_-o,N=xs(u)?gc[u](S,a):S-o;T.insert("polygon").attr("points",c2[u](a)).attr("transform",`translate(${V},${N})`).attr("class","arrow")}if(m){const V=_r(y)?gc[y](v,a):v-o,N=xs(y)?gc[y](A,a):A-o;T.insert("polygon").attr("points",c2[y](a)).attr("transform",`translate(${V},${N})`).attr("class","arrow")}if(b){const V=Fp(u,y)?"XY":_r(u)?"X":"Y";let N=0;V==="X"?N=Math.abs(_-v):V==="Y"?N=Math.abs(S-A)/1.5:N=Math.abs(_-v)/2;const D=T.append("g");if(await Wr(D,b,{useHtmlLabels:!1,width:N,classes:"architecture-service-label"},it()),D.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),V==="X")D.attr("transform","translate("+C+", "+k+")");else if(V==="Y")D.attr("transform","translate("+C+", "+k+") rotate(-90)");else if(V==="XY"){const E=j1(u,y);if(E&&Kq(E)){const M=D.node().getBoundingClientRect(),[F,I]=Jq(E);D.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*F*I*45})`);const B=D.node().getBoundingClientRect();D.attr("transform",`
                translate(${C}, ${k-M.height/2})
                translate(${F*B.width/2}, ${I*B.height/2})
                rotate(${-1*F*I*45}, 0, ${M.height/2})
              `)}}}}}))},"drawEdges"),lY=d(async function(e,t,r){const s=r.getConfigField("padding")*.75,n=r.getConfigField("fontSize"),o=r.getConfigField("iconSize")/2;await Promise.all(t.nodes().map(async h=>{const l=Qn(h);if(l.type==="group"){const{h:u,w:f,x1:p,y1:g}=h.boundingBox(),y=e.append("rect");y.attr("id",`group-${l.id}`).attr("x",p+o).attr("y",g+o).attr("width",f).attr("height",u).attr("class","node-bkg");const m=e.append("g");let x=p,b=g;if(l.icon){const _=m.append("g");_.html(`<g>${await gs(l.icon,{height:s,width:s,fallbackPrefix:Dl.prefix})}</g>`),_.attr("transform","translate("+(x+o+1)+", "+(b+o+1)+")"),x+=s,b+=n/2-1-2}if(l.label){const _=m.append("g");await Wr(_,l.label,{useHtmlLabels:!1,width:f,classes:"architecture-service-label"},it()),_.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),_.attr("transform","translate("+(x+o+4)+", "+(b+o+2)+")")}r.setElementForId(l.id,y)}}))},"drawGroups"),cY=d(async function(e,t,r){const i=it();for(const s of r){const n=t.append("g"),a=e.getConfigField("iconSize");if(s.title){const u=n.append("g");await Wr(u,s.title,{useHtmlLabels:!1,width:a*1.5,classes:"architecture-service-label"},i),u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),u.attr("transform","translate("+a/2+", "+a+")")}const o=n.append("g");if(s.icon)o.html(`<g>${await gs(s.icon,{height:a,width:a,fallbackPrefix:Dl.prefix})}</g>`);else if(s.iconText){o.html(`<g>${await gs("blank",{height:a,width:a,fallbackPrefix:Dl.prefix})}</g>`);const p=o.append("g").append("foreignObject").attr("width",a).attr("height",a).append("div").attr("class","node-icon-text").attr("style",`height: ${a}px;`).append("div").html(me(s.iconText,i)),g=parseInt(window.getComputedStyle(p.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;p.attr("style",`-webkit-line-clamp: ${Math.floor((a-2)/g)};`)}else o.append("path").attr("class","node-bkg").attr("id","node-"+s.id).attr("d",`M0 ${a} v${-a} q0,-5 5,-5 h${a} q5,0 5,5 v${a} H0 Z`);n.attr("id",`service-${s.id}`).attr("class","architecture-service");const{width:h,height:l}=n.node().getBBox();s.width=h,s.height=l,e.setElementForId(s.id,n)}return 0},"drawServices"),hY=d(function(e,t,r){r.forEach(i=>{const s=t.append("g"),n=e.getConfigField("iconSize");s.append("g").append("rect").attr("id","node-"+i.id).attr("fill-opacity","0").attr("width",n).attr("height",n),s.attr("class","architecture-junction");const{width:o,height:h}=s._groups[0][0].getBBox();s.width=o,s.height=h,e.setElementForId(i.id,s)})},"drawJunctions");Ux([{name:Dl.prefix,icons:Dl}]);Fh.use(Lk);function U_(e,t,r){e.forEach(i=>{t.add({group:"nodes",data:{type:"service",id:i.id,icon:i.icon,label:i.title,parent:i.in,width:r.getConfigField("iconSize"),height:r.getConfigField("iconSize")},classes:"node-service"})})}d(U_,"addServices");function j_(e,t,r){e.forEach(i=>{t.add({group:"nodes",data:{type:"junction",id:i.id,parent:i.in,width:r.getConfigField("iconSize"),height:r.getConfigField("iconSize")},classes:"node-junction"})})}d(j_,"addJunctions");function X_(e,t){t.nodes().map(r=>{const i=Qn(r);if(i.type==="group")return;i.x=r.position().x,i.y=r.position().y,e.getElementById(i.id).attr("transform","translate("+(i.x||0)+","+(i.y||0)+")")})}d(X_,"positionNodes");function K_(e,t){e.forEach(r=>{t.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})})}d(K_,"addGroups");function Q_(e,t){e.forEach(r=>{const{lhsId:i,rhsId:s,lhsInto:n,lhsGroup:a,rhsInto:o,lhsDir:h,rhsDir:l,rhsGroup:u,title:f}=r,p=Fp(r.lhsDir,r.rhsDir)?"segments":"straight",g={id:`${i}-${s}`,label:f,source:i,sourceDir:h,sourceArrow:n,sourceGroup:a,sourceEndpoint:h==="L"?"0 50%":h==="R"?"100% 50%":h==="T"?"50% 0":"50% 100%",target:s,targetDir:l,targetArrow:o,targetGroup:u,targetEndpoint:l==="L"?"0 50%":l==="R"?"100% 50%":l==="T"?"50% 0":"50% 100%"};t.add({group:"edges",data:g,classes:p})})}d(Q_,"addEdges");function Z_(e,t,r){const i=d((o,h)=>Object.entries(o).reduce((l,[u,f])=>{var y;let p=0;const g=Object.entries(f);if(g.length===1)return l[u]=g[0][1],l;for(let m=0;m<g.length-1;m++)for(let x=m+1;x<g.length;x++){const[b,_]=g[m],[S,C]=g[x];if(((y=r[b])==null?void 0:y[S])===h)l[u]??(l[u]=[]),l[u]=[...l[u],..._,...C];else if(b==="default"||S==="default")l[u]??(l[u]=[]),l[u]=[...l[u],..._,...C];else{const v=`${u}-${p++}`;l[v]=_;const A=`${u}-${p++}`;l[A]=C}}return l},{}),"flattenAlignments"),s=t.map(o=>{const h={},l={};return Object.entries(o).forEach(([u,[f,p]])=>{var y,m,x;const g=((y=e.getNode(u))==null?void 0:y.in)??"default";h[p]??(h[p]={}),(m=h[p])[g]??(m[g]=[]),h[p][g].push(u),l[f]??(l[f]={}),(x=l[f])[g]??(x[g]=[]),l[f][g].push(u)}),{horiz:Object.values(i(h,"horizontal")).filter(u=>u.length>1),vert:Object.values(i(l,"vertical")).filter(u=>u.length>1)}}),[n,a]=s.reduce(([o,h],{horiz:l,vert:u})=>[[...o,...l],[...h,...u]],[[],[]]);return{horizontal:n,vertical:a}}d(Z_,"getAlignments");function J_(e,t){const r=[],i=d(n=>`${n[0]},${n[1]}`,"posToStr"),s=d(n=>n.split(",").map(a=>parseInt(a)),"strToPos");return e.forEach(n=>{const a=Object.fromEntries(Object.entries(n).map(([u,f])=>[i(f),u])),o=[i([0,0])],h={},l={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;o.length>0;){const u=o.shift();if(u){h[u]=1;const f=a[u];if(f){const p=s(u);Object.entries(l).forEach(([g,y])=>{const m=i([p[0]+y[0],p[1]+y[1]]),x=a[m];x&&!h[m]&&(o.push(m),r.push({[l2[g]]:x,[l2[Xq(g)]]:f,gap:1.5*t.getConfigField("iconSize")}))})}}}}),r}d(J_,"getRelativeConstraints");function tk(e,t,r,i,s,{spatialMaps:n,groupAlignments:a}){return new Promise(o=>{const h=_t("body").append("div").attr("id","cy").attr("style","display:none"),l=Fh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${s.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${s.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});h.remove(),K_(r,l),U_(e,l,s),j_(t,l,s),Q_(i,l);const u=Z_(s,n,a),f=J_(n,s),p=l.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(g){const[y,m]=g.connectedNodes(),{parent:x}=Qn(y),{parent:b}=Qn(m);return x===b?1.5*s.getConfigField("iconSize"):.5*s.getConfigField("iconSize")},edgeElasticity(g){const[y,m]=g.connectedNodes(),{parent:x}=Qn(y),{parent:b}=Qn(m);return x===b?.45:.001},alignmentConstraint:u,relativePlacementConstraint:f});p.one("layoutstop",()=>{var y;function g(m,x,b,_){let S,C;const{x:k,y:v}=m,{x:A,y:L}=x;C=(_-v+(k-b)*(v-L)/(k-A))/Math.sqrt(1+Math.pow((v-L)/(k-A),2)),S=Math.sqrt(Math.pow(_-v,2)+Math.pow(b-k,2)-Math.pow(C,2));const w=Math.sqrt(Math.pow(A-k,2)+Math.pow(L-v,2));S=S/w;let R=(A-k)*(_-v)-(L-v)*(b-k);switch(!0){case R>=0:R=1;break;case R<0:R=-1;break}let T=(A-k)*(b-k)+(L-v)*(_-v);switch(!0){case T>=0:T=1;break;case T<0:T=-1;break}return C=Math.abs(C)*R,S=S*T,{distances:C,weights:S}}d(g,"getSegmentWeights"),l.startBatch();for(const m of Object.values(l.edges()))if((y=m.data)!=null&&y.call(m)){const{x,y:b}=m.source().position(),{x:_,y:S}=m.target().position();if(x!==_&&b!==S){const C=m.sourceEndpoint(),k=m.targetEndpoint(),{sourceDir:v}=Y_(m),[A,L]=xs(v)?[C.x,k.y]:[k.x,C.y],{weights:w,distances:R}=g(C,k,A,L);m.style("segment-distances",R),m.style("segment-weights",w)}}l.endBatch(),p.run()}),p.run(),l.ready(g=>{P.info("Ready",g),o(l)})})}d(tk,"layoutArchitecture");var uY=d(async(e,t,r,i)=>{const s=i.db,n=s.getServices(),a=s.getJunctions(),o=s.getGroups(),h=s.getEdges(),l=s.getDataStructures(),u=es(t),f=u.append("g");f.attr("class","architecture-edges");const p=u.append("g");p.attr("class","architecture-services");const g=u.append("g");g.attr("class","architecture-groups"),await cY(s,p,n),hY(s,p,a);const y=await tk(n,a,o,h,s,l);await oY(f,y,s),await lY(g,y,s),X_(s,y),Ml(void 0,u,s.getConfigField("padding"),s.getConfigField("useMaxWidth"))},"draw"),dY={draw:uY},fY={parser:H_,get db(){return new G_},renderer:dY,styles:aY};const pY=Object.freeze(Object.defineProperty({__proto__:null,diagram:fY},Symbol.toStringTag,{value:"Module"}));var eo,ek=(eo=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=We,this.getAccTitle=Ke,this.setDiagramTitle=ir,this.getDiagramTitle=Ye,this.getAccDescription=Ze,this.setAccDescription=Qe}getNodes(){return this.nodes}getConfig(){const t=ge,r=xe();return Cr({...t.treemap,...r.treemap??{}})}addNode(t,r){this.nodes.push(t),this.levels.set(t,r),r===0&&(this.outerNodes.push(t),this.root??(this.root=t))}getRoot(){return{name:"",children:this.outerNodes}}addClass(t,r){const i=this.classes.get(t)??{id:t,styles:[],textStyles:[]},s=r.replace(/\\,/g,"").replace(/,/g,";").replace(//g,",").split(";");s&&s.forEach(n=>{Bf(n)&&(i!=null&&i.textStyles?i.textStyles.push(n):i.textStyles=[n]),i!=null&&i.styles?i.styles.push(n):i.styles=[n]}),this.classes.set(t,i)}getClasses(){return this.classes}getStylesForClass(t){var r;return((r=this.classes.get(t))==null?void 0:r.styles)??[]}clear(){qe(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}},d(eo,"TreeMapDB"),eo);function rk(e){if(!e.length)return[];const t=[],r=[];return e.forEach(i=>{const s={name:i.name,children:i.type==="Leaf"?void 0:[]};for(s.classSelector=i==null?void 0:i.classSelector,i!=null&&i.cssCompiledStyles&&(s.cssCompiledStyles=[i.cssCompiledStyles]),i.type==="Leaf"&&i.value!==void 0&&(s.value=i.value);r.length>0&&r[r.length-1].level>=i.level;)r.pop();if(r.length===0)t.push(s);else{const n=r[r.length-1].node;n.children?n.children.push(s):n.children=[s]}i.type!=="Leaf"&&r.push({node:s,level:i.level})}),t}d(rk,"buildHierarchy");var gY=d((e,t)=>{wn(e,t);const r=[];for(const n of e.TreemapRows??[])n.$type==="ClassDefStatement"&&t.addClass(n.className??"",n.styleText??"");for(const n of e.TreemapRows??[]){const a=n.item;if(!a)continue;const o=n.indent?parseInt(n.indent):0,h=yY(a),l=a.classSelector?t.getStylesForClass(a.classSelector):[],u=l.length>0?l.join(";"):void 0,f={level:o,name:h,type:a.$type,value:a.value,classSelector:a.classSelector,cssCompiledStyles:u};r.push(f)}const i=rk(r),s=d((n,a)=>{for(const o of n)t.addNode(o,a),o.children&&o.children.length>0&&s(o.children,a+1)},"addNodesRecursively");s(i,0)},"populate"),yY=d(e=>e.name?String(e.name):"","getItemName"),ik={parser:{yy:void 0},parse:d(async e=>{var t;try{const i=await Ts("treemap",e);P.debug("Treemap AST:",i);const s=(t=ik.parser)==null?void 0:t.yy;if(!(s instanceof ek))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");gY(i,s)}catch(r){throw P.error("Error parsing treemap:",r),r}},"parse")},mY=10,Fn=10,Mo=25,xY=d((e,t,r,i)=>{const s=i.db,n=s.getConfig(),a=n.padding??mY,o=s.getDiagramTitle(),h=s.getRoot(),{themeVariables:l}=xe();if(!h)return;const u=o?30:0,f=es(t),p=n.nodeWidth?n.nodeWidth*Fn:960,g=n.nodeHeight?n.nodeHeight*Fn:500,y=p,m=g+u;f.attr("viewBox",`0 0 ${y} ${m}`),Er(f,m,y,n.useMaxWidth);let x;try{const D=n.valueFormat||",";if(D==="$0,0")x=d(E=>"$"+Ps(",")(E),"valueFormat");else if(D.startsWith("$")&&D.includes(",")){const E=/\.\d+/.exec(D),M=E?E[0]:"";x=d(F=>"$"+Ps(","+M)(F),"valueFormat")}else if(D.startsWith("$")){const E=D.substring(1);x=d(M=>"$"+Ps(E||"")(M),"valueFormat")}else x=Ps(D)}catch(D){P.error("Error creating format function:",D),x=Ps(",")}const b=Ks().range(["transparent",l.cScale0,l.cScale1,l.cScale2,l.cScale3,l.cScale4,l.cScale5,l.cScale6,l.cScale7,l.cScale8,l.cScale9,l.cScale10,l.cScale11]),_=Ks().range(["transparent",l.cScalePeer0,l.cScalePeer1,l.cScalePeer2,l.cScalePeer3,l.cScalePeer4,l.cScalePeer5,l.cScalePeer6,l.cScalePeer7,l.cScalePeer8,l.cScalePeer9,l.cScalePeer10,l.cScalePeer11]),S=Ks().range([l.cScaleLabel0,l.cScaleLabel1,l.cScaleLabel2,l.cScaleLabel3,l.cScaleLabel4,l.cScaleLabel5,l.cScaleLabel6,l.cScaleLabel7,l.cScaleLabel8,l.cScaleLabel9,l.cScaleLabel10,l.cScaleLabel11]);o&&f.append("text").attr("x",y/2).attr("y",u/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(o);const C=f.append("g").attr("transform",`translate(0, ${u})`).attr("class","treemapContainer"),k=xf(h).sum(D=>D.value??0).sort((D,E)=>(E.value??0)-(D.value??0)),A=eE().size([p,g]).paddingTop(D=>D.children&&D.children.length>0?Mo+Fn:0).paddingInner(a).paddingLeft(D=>D.children&&D.children.length>0?Fn:0).paddingRight(D=>D.children&&D.children.length>0?Fn:0).paddingBottom(D=>D.children&&D.children.length>0?Fn:0).round(!0)(k),L=A.descendants().filter(D=>D.children&&D.children.length>0),w=C.selectAll(".treemapSection").data(L).enter().append("g").attr("class","treemapSection").attr("transform",D=>`translate(${D.x0},${D.y0})`);w.append("rect").attr("width",D=>D.x1-D.x0).attr("height",Mo).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",D=>D.depth===0?"display: none;":""),w.append("clipPath").attr("id",(D,E)=>`clip-section-${t}-${E}`).append("rect").attr("width",D=>Math.max(0,D.x1-D.x0-12)).attr("height",Mo),w.append("rect").attr("width",D=>D.x1-D.x0).attr("height",D=>D.y1-D.y0).attr("class",(D,E)=>`treemapSection section${E}`).attr("fill",D=>b(D.data.name)).attr("fill-opacity",.6).attr("stroke",D=>_(D.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",D=>{if(D.depth===0)return"display: none;";const E=$t({cssCompiledStyles:D.data.cssCompiledStyles});return E.nodeStyles+";"+E.borderStyles.join(";")}),w.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",Mo/2).attr("dominant-baseline","middle").text(D=>D.depth===0?"":D.data.name).attr("font-weight","bold").attr("style",D=>{if(D.depth===0)return"display: none;";const E="dominant-baseline: middle; font-size: 12px; fill:"+S(D.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",M=$t({cssCompiledStyles:D.data.cssCompiledStyles});return E+M.labelStyles.replace("color:","fill:")}).each(function(D){if(D.depth===0)return;const E=_t(this),M=D.data.name;E.text(M);const F=D.x1-D.x0,I=6;let B;n.showValues!==!1&&D.value?B=F-10-30-10-I:B=F-I-6;const $=Math.max(15,B),G=E.node();if(G.getComputedTextLength()>$){let tt=M;for(;tt.length>0;){if(tt=M.substring(0,tt.length-1),tt.length===0){E.text("..."),G.getComputedTextLength()>$&&E.text("");break}if(E.text(tt+"..."),G.getComputedTextLength()<=$)break}}}),n.showValues!==!1&&w.append("text").attr("class","treemapSectionValue").attr("x",D=>D.x1-D.x0-10).attr("y",Mo/2).attr("text-anchor","end").attr("dominant-baseline","middle").text(D=>D.value?x(D.value):"").attr("font-style","italic").attr("style",D=>{if(D.depth===0)return"display: none;";const E="text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+S(D.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",M=$t({cssCompiledStyles:D.data.cssCompiledStyles});return E+M.labelStyles.replace("color:","fill:")});const R=A.leaves(),T=C.selectAll(".treemapLeafGroup").data(R).enter().append("g").attr("class",(D,E)=>`treemapNode treemapLeafGroup leaf${E}${D.data.classSelector?` ${D.data.classSelector}`:""}x`).attr("transform",D=>`translate(${D.x0},${D.y0})`);T.append("rect").attr("width",D=>D.x1-D.x0).attr("height",D=>D.y1-D.y0).attr("class","treemapLeaf").attr("fill",D=>D.parent?b(D.parent.data.name):b(D.data.name)).attr("style",D=>$t({cssCompiledStyles:D.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",D=>D.parent?b(D.parent.data.name):b(D.data.name)).attr("stroke-width",3),T.append("clipPath").attr("id",(D,E)=>`clip-${t}-${E}`).append("rect").attr("width",D=>Math.max(0,D.x1-D.x0-4)).attr("height",D=>Math.max(0,D.y1-D.y0-4)),T.append("text").attr("class","treemapLabel").attr("x",D=>(D.x1-D.x0)/2).attr("y",D=>(D.y1-D.y0)/2).attr("style",D=>{const E="text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+S(D.data.name)+";",M=$t({cssCompiledStyles:D.data.cssCompiledStyles});return E+M.labelStyles.replace("color:","fill:")}).attr("clip-path",(D,E)=>`url(#clip-${t}-${E})`).text(D=>D.data.name).each(function(D){const E=_t(this),M=D.x1-D.x0,F=D.y1-D.y0,I=E.node(),B=4,X=M-2*B,$=F-2*B;if(X<10||$<10){E.style("display","none");return}let G=parseInt(E.style("font-size"),10);const nt=8,ht=28,tt=.6,dt=6,st=2;for(;I.getComputedTextLength()>X&&G>nt;)G--,E.style("font-size",`${G}px`);let ot=Math.max(dt,Math.min(ht,Math.round(G*tt))),K=G+st+ot;for(;K>$&&G>nt&&(G--,ot=Math.max(dt,Math.min(ht,Math.round(G*tt))),!(ot<dt&&G===nt));)E.style("font-size",`${G}px`),K=G+st+ot;E.style("font-size",`${G}px`),(I.getComputedTextLength()>X||G<nt||$<G)&&E.style("display","none")}),n.showValues!==!1&&T.append("text").attr("class","treemapValue").attr("x",E=>(E.x1-E.x0)/2).attr("y",function(E){return(E.y1-E.y0)/2}).attr("style",E=>{const M="text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+S(E.data.name)+";",F=$t({cssCompiledStyles:E.data.cssCompiledStyles});return M+F.labelStyles.replace("color:","fill:")}).attr("clip-path",(E,M)=>`url(#clip-${t}-${M})`).text(E=>E.value?x(E.value):"").each(function(E){const M=_t(this),F=this.parentNode;if(!F){M.style("display","none");return}const I=_t(F).select(".treemapLabel");if(I.empty()||I.style("display")==="none"){M.style("display","none");return}const B=parseFloat(I.style("font-size")),X=28,$=.6,G=6,nt=2,ht=Math.max(G,Math.min(X,Math.round(B*$)));M.style("font-size",`${ht}px`);const dt=(E.y1-E.y0)/2+B/2+nt;M.attr("y",dt);const st=E.x1-E.x0,lt=E.y1-E.y0-4,U=st-8;M.node().getComputedTextLength()>U||dt+ht>lt||ht<G?M.style("display","none"):M.style("display",null)});const N=n.diagramPadding??8;kn(f,N,"flowchart",(n==null?void 0:n.useMaxWidth)||!1)},"draw"),bY=d(function(e,t){return t.db.getClasses()},"getClasses"),vY={draw:xY,getClasses:bY},_Y={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},kY=d(({treemap:e}={})=>{const t=Cr(_Y,e);return`
  .treemapNode.section {
    stroke: ${t.sectionStrokeColor};
    stroke-width: ${t.sectionStrokeWidth};
    fill: ${t.sectionFillColor};
  }
  .treemapNode.leaf {
    stroke: ${t.leafStrokeColor};
    stroke-width: ${t.leafStrokeWidth};
    fill: ${t.leafFillColor};
  }
  .treemapLabel {
    fill: ${t.labelColor};
    font-size: ${t.labelFontSize};
  }
  .treemapValue {
    fill: ${t.valueColor};
    font-size: ${t.valueFontSize};
  }
  .treemapTitle {
    fill: ${t.titleColor};
    font-size: ${t.titleFontSize};
  }
  `},"getStyles"),wY=kY,TY={parser:ik,get db(){return new ek},renderer:vY,styles:wY};const SY=Object.freeze(Object.defineProperty({__proto__:null,diagram:TY},Symbol.toStringTag,{value:"Module"}));var u2=Pr((e,t,{parentById:r})=>{const i=new Set;let s=e;if(e===t)return r[e]||"root";for(;s;){if(i.add(s),s===t)return s;s=r[s]}for(s=t;s;){if(i.has(s))return s;s=r[s]}return"root"},"findCommonAncestor"),d2=1e-4;function X1(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}Pr(X1,"distance");var CY=Pr(async(e,t,{common:r,getConfig:i,insertCluster:s,insertEdge:n,insertEdgeLabel:a,insertMarkers:o,insertNode:h,interpolateToCurve:l,labelHelper:u,log:f,positionEdgeLabel:p},{algorithm:g})=>{var B,X,$,G,nt,ht,tt,dt,st;const y={},m={},x=Pr(async(ot,K,lt,U)=>{const j={width:0,height:0},Q=i();if(U.isGroup){const W={...U,children:[]};if(K.children.push(W),y[U.id]=W,await b(ot,lt,W,U.id),U.label){const{shapeSvg:et,bbox:z}=await u(ot,U,void 0,!0);j.width=z.width,j.wrappingWidth=Q.flowchart.wrappingWidth,j.height=z.height-2,j.labelNode=et.node(),et.remove()}else j.width=0,j.height=0;W.labelData=j,W.domId=ot}else{const W={id:U.id,width:U.width,height:U.height,label:U.label,isGroup:U.isGroup,shape:U.shape,padding:U.padding,cssClasses:U.cssClasses,cssStyles:U.cssStyles,look:U.look,parentId:U.parentId};K.children.push(W),y[U.id]=W;const et=await h(ot,U,{config:Q,dir:U.dir}),z=et.node().getBBox();W.domId=et,W.calcIntersect=U.calcIntersect,W.width=z.width,W.height=z.height}},"addVertex"),b=Pr(async function(ot,K,lt,U){const j=K.filter(Q=>(Q==null?void 0:Q.parentId)===U);return f.info("addVertices APA12",j,U),await Promise.all(j.map(async Q=>{await x(ot,lt,K,Q)})),lt},"addVertices"),_=Pr(async(ot,K,lt,U,j,Q)=>{await Promise.all(lt.map(async function(W){var et;if(W)if(y[W.id]=W,y[W.id].offset={posX:W.x+ot,posY:W.y+K,x:ot,y:K,depth:Q,width:Math.max(W.width,W.labels&&((et=W.labels[0])==null?void 0:et.width)||0),height:W.height},W.isGroup){f.debug("id abc88 subgraph = ",W.id,W.x,W.y,W.labelData);const z=j.insert("g").attr("class","subgraph"),vt=JSON.parse(JSON.stringify(W));vt.x=W.offset.posX+W.width/2,vt.y=W.offset.posY+W.height/2,vt.width=Math.max(vt.width,W.labelData.width),await s(z,vt),f.debug("id (UIO)= ",W.id,W.width,W.shape,W.labels)}else f.info("id NODE = ",W.id,W.x,W.y,ot,K,W.domId.node(),`translate(${W.x+ot+W.width/2}, ${W.y+K+W.height/2})`),W.domId.attr("transform",`translate(${W.x+ot+W.width/2}, ${W.y+K+W.height/2})`)})),await Promise.all(lt.map(async function(W){W!=null&&W.isGroup&&await _(ot+W.x,K+W.y,W.children,U,j,Q+1)}))},"drawNodes"),S=Pr(ot=>{const K={parentById:{},childrenById:{}},lt=ot.filter(U=>U.isGroup);return f.info("Subgraphs - ",lt),lt.forEach(U=>{ot.filter(Q=>Q.parentId===U.id).forEach(Q=>{K.parentById[Q.id]=U.id,K.childrenById[U.id]===void 0&&(K.childrenById[U.id]=[]),K.childrenById[U.id].push(Q)})}),lt.forEach(function(U){U.id,K.parentById[U.id]!==void 0&&K.parentById[U.id]}),K},"addSubGraphs"),C=Pr(ot=>{const K=ot.start,lt=ot.end,U=K,j=lt,Q=y[ot.start.id],W=y[ot.end.id];return!Q||!W?{source:K,target:lt}:{source:K,target:lt,sourceId:U,targetId:j}},"getEdgeStartEndPoint"),k=Pr(function(ot,K,lt){const U=u2(ot,K,lt);if(U===void 0||U==="root")return{x:0,y:0};const j=y[U].offset;return{x:j.posX,y:j.posY}},"calcOffset"),v=Pr(async function(ot,K,lt){f.info("abc78 DAGA edges = ",ot);const U=ot.edges,j=lt.insert("g").attr("class","edgeLabels"),Q={},W=ot.direction||"DOWN";return await Promise.all(U.map(async function(et){const z=et.id;Q[z]===void 0?(Q[z]=0,f.info("abc78 new entry",z,Q[z])):(Q[z]++,f.info("abc78 new entry",z,Q[z]));const vt=z+"_"+Q[z];et.id=vt,f.info("abc78 new link id to be used is",z,vt,Q[z]);const O="LS_"+et.start,Zt="LE_"+et.end,J={style:"",labelStyle:""};switch(J.minlen=et.length||1,et.text=et.label,et.type==="arrow_open"?J.arrowhead="none":J.arrowhead="normal",J.arrowTypeStart="arrow_open",J.arrowTypeEnd="arrow_open",et.type){case"double_arrow_cross":J.arrowTypeStart="arrow_cross";case"arrow_cross":J.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":J.arrowTypeStart="arrow_point";case"arrow_point":J.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":J.arrowTypeStart="arrow_circle";case"arrow_circle":J.arrowTypeEnd="arrow_circle";break}let Yt="",It="";switch(J.startLabelRight=et.startLabelRight,J.endLabelLeft=et.endLabelLeft,et.stroke){case"normal":Yt="fill:none;",J.thickness="normal",J.pattern="solid";break;case"dotted":J.thickness="normal",J.pattern="dotted",J.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":J.thickness="thick",J.pattern="solid",J.style="stroke-width: 3.5px;fill:none;";break}J.style=J.style+=Yt,J.labelStyle=J.labelStyle+=It;const se=i();et.interpolate!==void 0?J.curve=l(et.interpolate,Qs):U.defaultInterpolate!==void 0?J.curve=l(U.defaultInterpolate,Qs):J.curve=l(se.curve,Qs),et.text===void 0?et.style!==void 0&&(J.arrowheadStyle="fill: #333"):(J.arrowheadStyle="fill: #333",J.labelpos="c"),J.labelType=et.labelType,J.label=((et==null?void 0:et.text)||"").replace(r.lineBreakRegex,`
`),et.style===void 0&&(J.style=J.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),J.labelStyle=J.labelStyle.replace("color:","fill:"),J.id=vt,J.classes="flowchart-link "+O+" "+Zt;const gt=await a(j,J),{source:St,target:ut,sourceId:pt,targetId:wt}=C(et,W);f.debug("abc78 source and target",St,ut),K.edges.push({id:"e"+et.start+et.end,...et,sources:[St],targets:[ut],sourceId:pt,targetId:wt,labelEl:gt,labels:[{width:J.width,height:J.height,orgWidth:J.width,orgHeight:J.height,text:J.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:J})})),K},"addEdges");function A(ot){switch(ot){case"LR":return"RIGHT";case"RL":return"LEFT";case"TB":return"DOWN";case"BT":return"UP";default:return"DOWN"}}Pr(A,"dir2ElkDirection");function L(ot,K){const lt=y[ot];lt&&((lt==null?void 0:lt.layoutOptions)===void 0&&(lt.layoutOptions={}),lt.layoutOptions["elk.hierarchyHandling"]="INCLUDE_CHILDREN",lt.id!==K&&L(lt.parentId,K))}Pr(L,"setIncludeChildrenPolicy");const w=new Nk,R=t.select("g");o(R,e.markers,e.type,e.diagramId);let T={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","elk.layered.crossingMinimization.forceNodeModelOrder":(B=e.config.elk)==null?void 0:B.forceNodeModelOrder,"elk.layered.considerModelOrder.strategy":(X=e.config.elk)==null?void 0:X.considerModelOrder,"elk.algorithm":g,"nodePlacement.strategy":($=e.config.elk)==null?void 0:$.nodePlacementStrategy,"elk.layered.mergeEdges":(G=e.config.elk)==null?void 0:G.mergeEdges,"elk.direction":"DOWN","spacing.baseValue":35,"elk.layered.unnecessaryBendpoints":!0,"elk.layered.cycleBreaking.strategy":(nt=e.config.elk)==null?void 0:nt.cycleBreakingStrategy},children:[],edges:[]};f.info("Drawing flowchart using v4 renderer",w);const V=e.direction||"DOWN";T.layoutOptions["elk.direction"]=A(V);const N=S(e.nodes),D=t.insert("g").attr("class","subgraphs"),E=t.insert("g").attr("class","nodes");T=await b(E,e.nodes,T);const M=t.insert("g").attr("class","edges edgePaths");T=await v(e,T,t),e.nodes.forEach(ot=>{var lt,U,j,Q,W;const K=y[ot.id];N.childrenById[K.id]!==void 0&&(K.labels=[{text:K.label,width:((lt=K==null?void 0:K.labelData)==null?void 0:lt.width)||50,height:((U=K==null?void 0:K.labelData)==null?void 0:U.height)||50},K.width=K.width+2*K.padding,f.debug("UIO node label",(j=K==null?void 0:K.labelData)==null?void 0:j.width,K.padding)],K.layoutOptions={"spacing.baseValue":30,"nodeLabels.placement":"[H_CENTER V_TOP, INSIDE]"},K.dir&&(K.layoutOptions={...K.layoutOptions,"elk.algorithm":g,"elk.direction":A(K.dir),"nodePlacement.strategy":(Q=e.config.elk)==null?void 0:Q.nodePlacementStrategy,"elk.layered.mergeEdges":(W=e.config.elk)==null?void 0:W.mergeEdges,"elk.hierarchyHandling":"SEPARATE_CHILDREN"}),delete K.x,delete K.y,delete K.width,delete K.height)}),f.debug("APA01 processing edges, count:",T.edges.length),T.edges.forEach((ot,K)=>{f.debug("APA01 processing edge",K,":",ot);const lt=ot.sources[0],U=ot.targets[0];if(f.debug("APA01 source:",lt,"target:",U),f.debug("APA01 nodeDb[source]:",y[lt]),f.debug("APA01 nodeDb[target]:",y[U]),y[lt]&&y[U]&&y[lt].parentId!==y[U].parentId){const j=u2(lt,U,N);L(lt,j),L(U,j)}}),f.debug("APA01 before"),f.debug("APA01 elkGraph structure:",JSON.stringify(T,null,2)),f.debug("APA01 elkGraph.children length:",(ht=T.children)==null?void 0:ht.length),f.debug("APA01 elkGraph.edges length:",(tt=T.edges)==null?void 0:tt.length),(dt=T.edges)==null||dt.forEach((ot,K)=>{f.debug(`APA01 validating edge ${K}:`,ot),ot.sources&&ot.sources.forEach(lt=>{var j;const U=(j=T.children)==null?void 0:j.some(Q=>Q.id===lt);f.debug(`APA01 source ${lt} exists:`,U)}),ot.targets&&ot.targets.forEach(lt=>{var j;const U=(j=T.children)==null?void 0:j.some(Q=>Q.id===lt);f.debug(`APA01 target ${lt} exists:`,U)})});let I;try{I=await w.layout(T),f.debug("APA01 after - success"),f.debug("APA01 layout result:",JSON.stringify(I,null,2))}catch(ot){throw f.error("APA01 ELK layout error:",ot),ot}await _(0,0,I.children,t,D,0),(st=I.edges)==null||st.map(ot=>{const K=y[ot.sources[0]],lt=N[ot.sources[0]],U=y[ot.targets[0]],j=ot.start,Q=ot.end,W=k(j,Q,N);if(f.debug("APA18 offset",W,j," ==> ",Q,"edge:",ot,"cluster:",lt,K),ot.sections){const et=ot.sections[0].startPoint,z=ot.sections[0].endPoint,O=(ot.sections[0].bendPoints?ot.sections[0].bendPoints:[]).map(It=>({x:It.x+W.x,y:It.y+W.y}));ot.points=[{x:et.x+W.x,y:et.y+W.y},...O,{x:z.x+W.x,y:z.y+W.y}];let Zt=K.width,J=U.width;if(K.isGroup){const It=K.domId.node().getBBox();Zt=Math.max(K.width,K.labels[0].width+K.padding),f.debug("UIO width",K.id,K.with,"bbox.width=",It.width,"lw=",K.labels[0].width,"node:",K.width,"SW = ",Zt)}if(U.isGroup){const It=U.domId.node().getBBox();J=Math.max(U.width,U.labels[0].width+U.padding),f.debug("UIO width",K.id,K.with,It.width,"EW = ",J,"HTML:",K.innerHTML)}if(K.calcIntersect){const It=K.calcIntersect({x:K.offset.posX+K.width/2,y:K.offset.posY+K.height/2,width:K.width,height:K.height},ot.points[0]);X1(It,ot.points[0])>d2&&ot.points.unshift(It)}if(U.calcIntersect){const It=U.calcIntersect({x:U.offset.posX+U.width/2,y:U.offset.posY+U.height/2,width:U.width,height:U.height},ot.points[ot.points.length-1]);X1(It,ot.points[ot.points.length-1])>d2&&ot.points.push(It)}const Yt=n(M,ot,m,e.type,K,U,e.diagramId);ot.x=ot.labels[0].x+W.x+ot.labels[0].width/2,ot.y=ot.labels[0].y+W.y+ot.labels[0].height/2,p(ot,Yt)}})},"render");const EY=Object.freeze(Object.defineProperty({__proto__:null,render:CY},Symbol.toStringTag,{value:"Module"})),AY=Object.freeze(Object.defineProperty({__proto__:null,InfoModule:d5,createInfoServices:f5},Symbol.toStringTag,{value:"Module"})),LY=Object.freeze(Object.defineProperty({__proto__:null,PacketModule:p5,createPacketServices:g5},Symbol.toStringTag,{value:"Module"})),DY=Object.freeze(Object.defineProperty({__proto__:null,PieModule:y5,createPieServices:m5},Symbol.toStringTag,{value:"Module"})),RY=Object.freeze(Object.defineProperty({__proto__:null,ArchitectureModule:x5,createArchitectureServices:b5},Symbol.toStringTag,{value:"Module"})),BY=Object.freeze(Object.defineProperty({__proto__:null,GitGraphModule:h5,createGitGraphServices:u5},Symbol.toStringTag,{value:"Module"})),IY=Object.freeze(Object.defineProperty({__proto__:null,RadarModule:v5,createRadarServices:_5},Symbol.toStringTag,{value:"Module"})),NY=Object.freeze(Object.defineProperty({__proto__:null,TreemapModule:w5,createTreemapServices:T5},Symbol.toStringTag,{value:"Module"}));export{WY as l,zY as m};
