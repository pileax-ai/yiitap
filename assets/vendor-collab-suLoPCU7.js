import{$ as Re}from"./vendor-utils-DXokjbgX.js";import{ax as sr,ay as ki,az as ir,aA as fo,aB as zt,aC as go,aD as Si,aE as po,aF as Vt,aG as yt,aH as bi,aI as is,aJ as Ci,aK as rs,aL as gt,aM as zn,aN as Pt,aO as Ft,aP as Ae,aQ as mo,aR as As,aS as xe,aT as wo,aU as os,aV as on,aW as cn,aX as yo,aY as ko,aZ as F,a_ as cs,a$ as dt,b0 as ls,b1 as Ei,b2 as vs,b3 as So,b4 as _s,b5 as le,b6 as rr,b7 as bo,b8 as Co,b9 as Ts,ba as as,bb as Eo,bc as j,bd as hs,be as us,bf as Di,bg as Ls,bh as Do,bi as ft,bj as Nt,bk as or,bl as Os,bm as Ao,bn as vo,bo as ds,bp as fs,bq as _o,br as Js,bs as Gn,bt as To,bu as gs,bv as Lo,bw as Oo,bx as Io,by as Mo,bz as $o,bA as Uo,bB as Ro,bC as xo}from"./vendor-Cm_H1C-X.js";class Qs{constructor(t,e){this.clock=t,this.len=e}}class ae{constructor(){this.clients=new Map}}const ne=(n,t,e)=>t.clients.forEach((s,i)=>{const r=n.doc.store.clients.get(i);if(r!=null){const o=r[r.length-1],c=o.id.clock+o.length;for(let l=0,a=s[l];l<s.length&&a.clock<c;a=s[++l])br(n,r,a.clock,a.len,e)}}),No=(n,t)=>{let e=0,s=n.length-1;for(;e<=s;){const i=As((e+s)/2),r=n[i],o=r.clock;if(o<=t){if(t<o+r.len)return i;e=i+1}else s=i-1}return null},Ne=(n,t)=>{const e=n.clients.get(t.client);return e!==void 0&&No(e,t.clock)!==null},qs=n=>{n.clients.forEach(t=>{t.sort((i,r)=>i.clock-r.clock);let e,s;for(e=1,s=1;e<t.length;e++){const i=t[s-1],r=t[e];i.clock+i.len>=r.clock?i.len=xe(i.len,r.clock+r.len-i.clock):(s<e&&(t[s]=r),s++)}t.length=s})},Is=n=>{const t=new ae;for(let e=0;e<n.length;e++)n[e].clients.forEach((s,i)=>{if(!t.clients.has(i)){const r=s.slice();for(let o=e+1;o<n.length;o++)go(r,n[o].clients.get(i)||[]);t.clients.set(i,r)}});return qs(t),t},ve=(n,t,e,s)=>{zt(n.clients,t,()=>[]).push(new Qs(e,s))},Ho=()=>new ae,cr=n=>{const t=Ho();return n.clients.forEach((e,s)=>{const i=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.deleted){const c=o.id.clock;let l=o.length;if(r+1<e.length)for(let a=e[r+1];r+1<e.length&&a.deleted;a=e[++r+1])l+=a.length;i.push(new Qs(c,l))}}i.length>0&&t.clients.set(s,i)}),t},he=(n,t)=>{j(n.restEncoder,t.clients.size),Vt(t.clients.entries()).sort((e,s)=>s[0]-e[0]).forEach(([e,s])=>{n.resetDsCurVal(),j(n.restEncoder,e);const i=s.length;j(n.restEncoder,i);for(let r=0;r<i;r++){const o=s[r];n.writeDsClock(o.clock),n.writeDsLen(o.len)}})},Xs=n=>{const t=new ae,e=F(n.restDecoder);for(let s=0;s<e;s++){n.resetDsCurVal();const i=F(n.restDecoder),r=F(n.restDecoder);if(r>0){const o=zt(t.clients,i,()=>[]);for(let c=0;c<r;c++)o.push(new Qs(n.readDsClock(),n.readDsLen()))}}return t},Ai=(n,t,e)=>{const s=new ae,i=F(n.restDecoder);for(let r=0;r<i;r++){n.resetDsCurVal();const o=F(n.restDecoder),c=F(n.restDecoder),l=e.clients.get(o)||[],a=K(e,o);for(let h=0;h<c;h++){const u=n.readDsClock(),d=u+n.readDsLen();if(u<a){a<d&&ve(s,o,a,d-a);let f=kt(l,u),g=l[f];for(!g.deleted&&g.id.clock<u&&(l.splice(f+1,0,pn(t,g,u-g.id.clock)),f++);f<l.length&&(g=l[f++],g.id.clock<d);)g.deleted||(d<g.id.clock+g.length&&l.splice(f,0,pn(t,g,d-g.id.clock)),g.delete(t))}else ve(s,o,u,d-u)}}if(s.clients.size>0){const r=new Yt;return j(r.restEncoder,0),he(r,s),r.toUint8Array()}return null},lr=wo;class Gt extends sr{constructor({guid:t=po(),collectionid:e=null,gc:s=!0,gcFilter:i=()=>!0,meta:r=null,autoLoad:o=!1,shouldLoad:c=!0}={}){super(),this.gc=s,this.gcFilter=i,this.clientID=lr(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new kr,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=c,this.autoLoad=o,this.meta=r,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Si(a=>{this.on("load",()=>{this.isLoaded=!0,a(this)})});const l=()=>Si(a=>{const h=u=>{(u===void 0||u===!0)&&(this.off("sync",h),a())};this.on("sync",h)});this.on("sync",a=>{a===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=a===void 0||a===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const t=this._item;t!==null&&!this.shouldLoad&&V(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Vt(this.subdocs).map(t=>t.guid))}transact(t,e=null){return V(this,t,e)}get(t,e=q){const s=zt(this.share,t,()=>{const r=new e;return r._integrate(this,null),r}),i=s.constructor;if(e!==q&&i!==e)if(i===q){const r=new e;r._map=s._map,s._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=r}),r._start=s._start;for(let o=r._start;o!==null;o=o.right)o.parent=r;return r._length=s._length,this.share.set(t,r),r._integrate(this,null),r}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return s}getArray(t=""){return this.get(t,te)}getText(t=""){return this.get(t,re)}getMap(t=""){return this.get(t,ie)}getXmlElement(t=""){return this.get(t,oe)}getXmlFragment(t=""){return this.get(t,Wt)}toJSON(){const t={};return this.share.forEach((e,s)=>{t[s]=e.toJSON()}),t}destroy(){this.isDestroyed=!0,Vt(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new Gt({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,V(t.parent.doc,s=>{const i=e.doc;t.deleted||s.subdocsAdded.add(i),s.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class ar{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return F(this.restDecoder)}readDsLen(){return F(this.restDecoder)}}class hr extends ar{readLeftID(){return M(F(this.restDecoder),F(this.restDecoder))}readRightID(){return M(F(this.restDecoder),F(this.restDecoder))}readClient(){return F(this.restDecoder)}readInfo(){return vs(this.restDecoder)}readString(){return gs(this.restDecoder)}readParentInfo(){return F(this.restDecoder)===1}readTypeRef(){return F(this.restDecoder)}readLen(){return F(this.restDecoder)}readAny(){return _s(this.restDecoder)}readBuf(){return Lo(dt(this.restDecoder))}readJSON(){return JSON.parse(gs(this.restDecoder))}readKey(){return gs(this.restDecoder)}}class Po{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=F(this.restDecoder),this.dsCurrVal}readDsLen(){const t=F(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class se extends Po{constructor(t){super(t),this.keys=[],F(t),this.keyClockDecoder=new cs(dt(t)),this.clientDecoder=new ls(dt(t)),this.leftClockDecoder=new cs(dt(t)),this.rightClockDecoder=new cs(dt(t)),this.infoDecoder=new Ei(dt(t),vs),this.stringDecoder=new So(dt(t)),this.parentInfoDecoder=new Ei(dt(t),vs),this.typeRefDecoder=new ls(dt(t)),this.lenDecoder=new ls(dt(t))}readLeftID(){return new Xt(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Xt(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return _s(this.restDecoder)}readBuf(){return dt(this.restDecoder)}readJSON(){return _s(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class ur{constructor(){this.restEncoder=Gn()}toUint8Array(){return Nt(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){j(this.restEncoder,t)}writeDsLen(t){j(this.restEncoder,t)}}class He extends ur{writeLeftID(t){j(this.restEncoder,t.client),j(this.restEncoder,t.clock)}writeRightID(t){j(this.restEncoder,t.client),j(this.restEncoder,t.clock)}writeClient(t){j(this.restEncoder,t)}writeInfo(t){Ls(this.restEncoder,t)}writeString(t){ds(this.restEncoder,t)}writeParentInfo(t){j(this.restEncoder,t?1:0)}writeTypeRef(t){j(this.restEncoder,t)}writeLen(t){j(this.restEncoder,t)}writeAny(t){Os(this.restEncoder,t)}writeBuf(t){ft(this.restEncoder,t)}writeJSON(t){ds(this.restEncoder,JSON.stringify(t))}writeKey(t){ds(this.restEncoder,t)}}class dr{constructor(){this.restEncoder=Gn(),this.dsCurrVal=0}toUint8Array(){return Nt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,j(this.restEncoder,e)}writeDsLen(t){t===0&&gt(),j(this.restEncoder,t-1),this.dsCurrVal+=t}}class Yt extends dr{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new hs,this.clientEncoder=new us,this.leftClockEncoder=new hs,this.rightClockEncoder=new hs,this.infoEncoder=new Di(Ls),this.stringEncoder=new Do,this.parentInfoEncoder=new Di(Ls),this.typeRefEncoder=new us,this.lenEncoder=new us}toUint8Array(){const t=Gn();return j(t,0),ft(t,this.keyClockEncoder.toUint8Array()),ft(t,this.clientEncoder.toUint8Array()),ft(t,this.leftClockEncoder.toUint8Array()),ft(t,this.rightClockEncoder.toUint8Array()),ft(t,Nt(this.infoEncoder)),ft(t,this.stringEncoder.toUint8Array()),ft(t,Nt(this.parentInfoEncoder)),ft(t,this.typeRefEncoder.toUint8Array()),ft(t,this.lenEncoder.toUint8Array()),or(t,Nt(this.restEncoder)),Nt(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){Os(this.restEncoder,t)}writeBuf(t){ft(this.restEncoder,t)}writeJSON(t){Os(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const Fo=(n,t,e,s)=>{s=xe(s,t[0].id.clock);const i=kt(t,s);j(n.restEncoder,t.length-i),n.writeClient(e),j(n.restEncoder,s);const r=t[i];r.write(n,s-r.id.clock);for(let o=i+1;o<t.length;o++)t[o].write(n,0)},Zs=(n,t,e)=>{const s=new Map;e.forEach((i,r)=>{K(t,r)>i&&s.set(r,i)}),Pe(t).forEach((i,r)=>{e.has(r)||s.set(r,0)}),j(n.restEncoder,s.size),Vt(s.entries()).sort((i,r)=>r[0]-i[0]).forEach(([i,r])=>{Fo(n,t.clients.get(i),i,r)})},jo=(n,t)=>{const e=Js(),s=F(n.restDecoder);for(let i=0;i<s;i++){const r=F(n.restDecoder),o=new Array(r),c=n.readClient();let l=F(n.restDecoder);e.set(c,{i:0,refs:o});for(let a=0;a<r;a++){const h=n.readInfo();switch(zn&h){case 0:{const u=n.readLen();o[a]=new ht(M(c,l),u),l+=u;break}case 10:{const u=F(n.restDecoder);o[a]=new ut(M(c,l),u),l+=u;break}default:{const u=(h&(Ft|Pt))===0,d=new Y(M(c,l),null,(h&Pt)===Pt?n.readLeftID():null,null,(h&Ft)===Ft?n.readRightID():null,u?n.readParentInfo()?t.get(n.readString()):n.readLeftID():null,u&&(h&Ae)===Ae?n.readString():null,jr(n,h));o[a]=d,l+=d.length}}}}return e},Vo=(n,t,e)=>{const s=[];let i=Vt(e.keys()).sort((f,g)=>f-g);if(i.length===0)return null;const r=()=>{if(i.length===0)return null;let f=e.get(i[i.length-1]);for(;f.refs.length===f.i;)if(i.pop(),i.length>0)f=e.get(i[i.length-1]);else return null;return f};let o=r();if(o===null)return null;const c=new kr,l=new Map,a=(f,g)=>{const b=l.get(f);(b==null||b>g)&&l.set(f,g)};let h=o.refs[o.i++];const u=new Map,d=()=>{for(const f of s){const g=f.id.client,b=e.get(g);b?(b.i--,c.clients.set(g,b.refs.slice(b.i)),e.delete(g),b.i=0,b.refs=[]):c.clients.set(g,[f]),i=i.filter(m=>m!==g)}s.length=0};for(;;){if(h.constructor!==ut){const g=zt(u,h.id.client,()=>K(t,h.id.client))-h.id.clock;if(g<0)s.push(h),a(h.id.client,h.id.clock-1),d();else{const b=h.getMissing(n,t);if(b!==null){s.push(h);const m=e.get(b)||{refs:[],i:0};if(m.refs.length===m.i)a(b,K(t,b)),d();else{h=m.refs[m.i++];continue}}else(g===0||g<h.length)&&(h.integrate(n,g),u.set(h.id.client,h.id.clock+h.length))}}if(s.length>0)h=s.pop();else if(o!==null&&o.i<o.refs.length)h=o.refs[o.i++];else{if(o=r(),o===null)break;h=o.refs[o.i++]}}if(c.clients.size>0){const f=new Yt;return Zs(f,c,new Map),j(f.restEncoder,0),{missing:l,update:f.toUint8Array()}}return null},Yo=(n,t)=>Zs(n,t.doc.store,t.beforeState),Wo=(n,t,e,s=new se(n))=>V(t,i=>{i.local=!1;let r=!1;const o=i.doc,c=o.store,l=jo(s,o),a=Vo(i,c,l),h=c.pendingStructs;if(h){for(const[d,f]of h.missing)if(f<K(c,d)){r=!0;break}if(a){for(const[d,f]of a.missing){const g=h.missing.get(d);(g==null||g>f)&&h.missing.set(d,f)}h.update=an([h.update,a.update])}}else c.pendingStructs=a;const u=Ai(s,i,c);if(c.pendingDs){const d=new se(le(c.pendingDs));F(d.restDecoder);const f=Ai(d,i,c);u&&f?c.pendingDs=an([u,f]):c.pendingDs=u||f}else c.pendingDs=u;if(r){const d=c.pendingStructs.update;c.pendingStructs=null,fr(i.doc,d)}},e,!1),fr=(n,t,e,s=se)=>{const i=le(t);Wo(i,n,e,new s(i))},Bo=(n,t,e)=>fr(n,t,e,hr),zo=(n,t,e=new Map)=>{Zs(n,t.store,e),he(n,cr(t.store))},Go=(n,t=new Uint8Array([0]),e=new Yt)=>{const s=gr(t);zo(e,n,s);const i=[e.toUint8Array()];if(n.store.pendingDs&&i.push(n.store.pendingDs),n.store.pendingStructs&&i.push(gc(n.store.pendingStructs.update,t)),i.length>1){if(e.constructor===He)return dc(i.map((r,o)=>o===0?r:mc(r)));if(e.constructor===Yt)return an(i)}return i[0]},Ko=(n,t)=>Go(n,t,new He),Jo=n=>{const t=new Map,e=F(n.restDecoder);for(let s=0;s<e;s++){const i=F(n.restDecoder),r=F(n.restDecoder);t.set(i,r)}return t},gr=n=>Jo(new ar(le(n))),pr=(n,t)=>(j(n.restEncoder,t.size),Vt(t.entries()).sort((e,s)=>s[0]-e[0]).forEach(([e,s])=>{j(n.restEncoder,e),j(n.restEncoder,s)}),n),Qo=(n,t)=>pr(n,Pe(t.store)),qo=(n,t=new dr)=>(n instanceof Map?pr(t,n):Qo(t,n),t.toUint8Array()),Xo=n=>qo(n,new ur);class Zo{constructor(){this.l=[]}}const vi=()=>new Zo,_i=(n,t)=>n.l.push(t),Ti=(n,t)=>{const e=n.l,s=e.length;n.l=e.filter(i=>t!==i),s===n.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},mr=(n,t,e)=>rr(n.l,[t,e]);class Xt{constructor(t,e){this.client=t,this.clock=e}}const qt=(n,t)=>n===t||n!==null&&t!==null&&n.client===t.client&&n.clock===t.clock,M=(n,t)=>new Xt(n,t),wr=n=>{for(const[t,e]of n.doc.share.entries())if(e===n)return t;throw gt()},ln=(n,t)=>{for(;t!==null;){if(t.parent===n)return!0;t=t.parent._item}return!1};class yr{constructor(t,e,s,i=0){this.type=t,this.tname=e,this.item=s,this.assoc=i}}const Ga=n=>new yr(n.type==null?null:M(n.type.client,n.type.clock),n.tname??null,n.item==null?null:M(n.item.client,n.item.clock),n.assoc==null?0:n.assoc);class tc{constructor(t,e,s=0){this.type=t,this.index=e,this.assoc=s}}const ec=(n,t,e=0)=>new tc(n,t,e),We=(n,t,e)=>{let s=null,i=null;return n._item===null?i=wr(n):s=M(n._item.id.client,n._item.id.clock),new yr(s,i,t,e)},Ka=(n,t,e=0)=>{let s=n._start;if(e<0){if(t===0)return We(n,null,e);t--}for(;s!==null;){if(!s.deleted&&s.countable){if(s.length>t)return We(n,M(s.id.client,s.id.clock+t),e);t-=s.length}if(s.right===null&&e<0)return We(n,s.lastId,e);s=s.right}return We(n,null,e)},nc=(n,t)=>{const e=Zt(n,t),s=t.clock-e.id.clock;return{item:e,diff:s}},Ja=(n,t,e=!0)=>{const s=t.store,i=n.item,r=n.type,o=n.tname,c=n.assoc;let l=null,a=0;if(i!==null){if(K(s,i.client)<=i.clock)return null;const h=e?Rs(s,i):nc(s,i),u=h.item;if(!(u instanceof Y))return null;if(l=u.parent,l._item===null||!l._item.deleted){a=u.deleted||!u.countable?0:h.diff+(c>=0?0:1);let d=u.left;for(;d!==null;)!d.deleted&&d.countable&&(a+=d.length),d=d.left}}else{if(o!==null)l=t.get(o);else if(r!==null){if(K(s,r.client)<=r.clock)return null;const{item:h}=e?Rs(s,r):{item:Zt(s,r)};if(h instanceof Y&&h.content instanceof bt)l=h.content.type;else return null}else throw gt();c>=0?a=l._length:a=0}return ec(l,a,n.assoc)},Qa=(n,t)=>n===t||n!==null&&t!==null&&n.tname===t.tname&&qt(n.item,t.item)&&qt(n.type,t.type)&&n.assoc===t.assoc;class sc{constructor(t,e){this.ds=t,this.sv=e}}const ic=(n,t)=>new sc(n,t),qa=n=>ic(cr(n.store),Pe(n.store)),xt=(n,t)=>t===void 0?!n.deleted:t.sv.has(n.id.client)&&(t.sv.get(n.id.client)||0)>n.id.clock&&!Ne(t.ds,n.id),Ms=(n,t)=>{const e=zt(n.meta,Ms,cn),s=n.doc.store;e.has(t)||(t.sv.forEach((i,r)=>{i<K(s,r)&&ot(n,M(r,i))}),ne(n,t.ds,i=>{}),e.add(t))};class kr{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Pe=n=>{const t=new Map;return n.clients.forEach((e,s)=>{const i=e[e.length-1];t.set(s,i.id.clock+i.length)}),t},K=(n,t)=>{const e=n.clients.get(t);if(e===void 0)return 0;const s=e[e.length-1];return s.id.clock+s.length},Sr=(n,t)=>{let e=n.clients.get(t.id.client);if(e===void 0)e=[],n.clients.set(t.id.client,e);else{const s=e[e.length-1];if(s.id.clock+s.length!==t.id.clock)throw gt()}e.push(t)},kt=(n,t)=>{let e=0,s=n.length-1,i=n[s],r=i.id.clock;if(r===t)return s;let o=As(t/(r+i.length-1)*s);for(;e<=s;){if(i=n[o],r=i.id.clock,r<=t){if(t<r+i.length)return o;e=o+1}else s=o-1;o=As((e+s)/2)}throw gt()},rc=(n,t)=>{const e=n.clients.get(t.client);return e[kt(e,t.clock)]},Zt=rc,$s=(n,t,e)=>{const s=kt(t,e),i=t[s];return i.id.clock<e&&i instanceof Y?(t.splice(s+1,0,pn(n,i,e-i.id.clock)),s+1):s},ot=(n,t)=>{const e=n.doc.store.clients.get(t.client);return e[$s(n,e,t.clock)]},Li=(n,t,e)=>{const s=t.clients.get(e.client),i=kt(s,e.clock),r=s[i];return e.clock!==r.id.clock+r.length-1&&r.constructor!==ht&&s.splice(i+1,0,pn(n,r,e.clock-r.id.clock+1)),r},oc=(n,t,e)=>{const s=n.clients.get(t.id.client);s[kt(s,t.id.clock)]=e},br=(n,t,e,s,i)=>{if(s===0)return;const r=e+s;let o=$s(n,t,e),c;do c=t[o++],r<c.id.clock+c.length&&$s(n,t,r),i(c);while(o<t.length&&t[o].id.clock<r)};class cc{constructor(t,e,s){this.doc=t,this.deleteSet=new ae,this.beforeState=Pe(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=s,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Oi=(n,t)=>t.deleteSet.clients.size===0&&!vo(t.afterState,(e,s)=>t.beforeState.get(s)!==e)?!1:(qs(t.deleteSet),Yo(n,t),he(n,t.deleteSet),!0),Ii=(n,t,e)=>{const s=t._item;(s===null||s.id.clock<(n.beforeState.get(s.id.client)||0)&&!s.deleted)&&zt(n.changed,t,cn).add(e)},Qe=(n,t)=>{let e=n[t],s=n[t-1],i=t;for(;i>0;e=s,s=n[--i-1]){if(s.deleted===e.deleted&&s.constructor===e.constructor&&s.mergeWith(e)){e instanceof Y&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,s);continue}break}const r=t-i;return r&&n.splice(t+1-r,r),r},lc=(n,t,e)=>{for(const[s,i]of n.clients.entries()){const r=t.clients.get(s);for(let o=i.length-1;o>=0;o--){const c=i[o],l=c.clock+c.len;for(let a=kt(r,c.clock),h=r[a];a<r.length&&h.id.clock<l;h=r[++a]){const u=r[a];if(c.clock+c.len<=u.id.clock)break;u instanceof Y&&u.deleted&&!u.keep&&e(u)&&u.gc(t,!1)}}}},ac=(n,t)=>{n.clients.forEach((e,s)=>{const i=t.clients.get(s);for(let r=e.length-1;r>=0;r--){const o=e[r],c=Ao(i.length-1,1+kt(i,o.clock+o.len-1));for(let l=c,a=i[l];l>0&&a.id.clock>=o.clock;a=i[l])l-=1+Qe(i,l)}})},Cr=(n,t)=>{if(t<n.length){const e=n[t],s=e.doc,i=s.store,r=e.deleteSet,o=e._mergeStructs;try{qs(r),e.afterState=Pe(e.doc.store),s.emit("beforeObserverCalls",[e,s]);const c=[];e.changed.forEach((l,a)=>c.push(()=>{(a._item===null||!a._item.deleted)&&a._callObserver(e,l)})),c.push(()=>{e.changedParentTypes.forEach((l,a)=>{a._dEH.l.length>0&&(a._item===null||!a._item.deleted)&&(l=l.filter(h=>h.target._item===null||!h.target._item.deleted),l.forEach(h=>{h.currentTarget=a,h._path=null}),l.sort((h,u)=>h.path.length-u.path.length),c.push(()=>{mr(a._dEH,l,e)}))}),c.push(()=>s.emit("afterTransaction",[e,s])),c.push(()=>{e._needFormattingCleanup&&Oc(e)})}),rr(c,[])}finally{s.gc&&lc(r,i,s.gcFilter),ac(r,i),e.afterState.forEach((h,u)=>{const d=e.beforeState.get(u)||0;if(d!==h){const f=i.clients.get(u),g=xe(kt(f,d),1);for(let b=f.length-1;b>=g;)b-=1+Qe(f,b)}});for(let h=o.length-1;h>=0;h--){const{client:u,clock:d}=o[h].id,f=i.clients.get(u),g=kt(f,d);g+1<f.length&&Qe(f,g+1)>1||g>0&&Qe(f,g)}if(!e.local&&e.afterState.get(s.clientID)!==e.beforeState.get(s.clientID)&&(bo($o,Mo,"[yjs] ",Io,Oo,"Changed the client-id because another client seems to be using it."),s.clientID=lr()),s.emit("afterTransactionCleanup",[e,s]),s._observers.has("update")){const h=new He;Oi(h,e)&&s.emit("update",[h.toUint8Array(),e.origin,s,e])}if(s._observers.has("updateV2")){const h=new Yt;Oi(h,e)&&s.emit("updateV2",[h.toUint8Array(),e.origin,s,e])}const{subdocsAdded:c,subdocsLoaded:l,subdocsRemoved:a}=e;(c.size>0||a.size>0||l.size>0)&&(c.forEach(h=>{h.clientID=s.clientID,h.collectionid==null&&(h.collectionid=s.collectionid),s.subdocs.add(h)}),a.forEach(h=>s.subdocs.delete(h)),s.emit("subdocs",[{loaded:l,added:c,removed:a},s,e]),a.forEach(h=>h.destroy())),n.length<=t+1?(s._transactionCleanups=[],s.emit("afterAllTransactions",[s,n])):Cr(n,t+1)}}},V=(n,t,e=null,s=!0)=>{const i=n._transactionCleanups;let r=!1,o=null;n._transaction===null&&(r=!0,n._transaction=new cc(n,e,s),i.push(n._transaction),i.length===1&&n.emit("beforeAllTransactions",[n]),n.emit("beforeTransaction",[n._transaction,n]));try{o=t(n._transaction)}finally{if(r){const c=n._transaction===i[0];n._transaction=null,c&&Cr(i,0)}}return o};class hc{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Mi=(n,t,e)=>{ne(n,e.deletions,s=>{s instanceof Y&&t.scope.some(i=>i===n.doc||ln(i,s))&&ci(s,!1)})},$i=(n,t,e)=>{let s=null;const i=n.doc,r=n.scope;V(i,c=>{for(;t.length>0&&n.currStackItem===null;){const l=i.store,a=t.pop(),h=new Set,u=[];let d=!1;ne(c,a.insertions,f=>{if(f instanceof Y){if(f.redone!==null){let{item:g,diff:b}=Rs(l,f.id);b>0&&(g=ot(c,M(g.id.client,g.id.clock+b))),f=g}!f.deleted&&r.some(g=>g===c.doc||ln(g,f))&&u.push(f)}}),ne(c,a.deletions,f=>{f instanceof Y&&r.some(g=>g===c.doc||ln(g,f))&&!Ne(a.insertions,f.id)&&h.add(f)}),h.forEach(f=>{d=Fr(c,f,h,a.insertions,n.ignoreRemoteMapChanges,n)!==null||d});for(let f=u.length-1;f>=0;f--){const g=u[f];n.deleteFilter(g)&&(g.delete(c),d=!0)}n.currStackItem=d?a:null}c.changed.forEach((l,a)=>{l.has(null)&&a._searchMarker&&(a._searchMarker.length=0)}),s=c},n);const o=n.currStackItem;if(o!=null){const c=s.changedParentTypes;n.emit("stack-item-popped",[{stackItem:o,type:e,changedParentTypes:c,origin:n},n]),n.currStackItem=null}return o};class Xa extends sr{constructor(t,{captureTimeout:e=500,captureTransaction:s=l=>!0,deleteFilter:i=()=>!0,trackedOrigins:r=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:c=ki(t)?t[0].doc:t instanceof Gt?t:t.doc}={}){super(),this.scope=[],this.doc=c,this.addToScope(t),this.deleteFilter=i,r.add(this),this.trackedOrigins=r,this.captureTransaction=s,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=e,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(m=>l.changedParentTypes.has(m)||m===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const a=this.undoing,h=this.redoing,u=a?this.redoStack:this.undoStack;a?this.stopCapturing():h||this.clear(!1,!0);const d=new ae;l.afterState.forEach((m,C)=>{const L=l.beforeState.get(C)||0,x=m-L;x>0&&ve(d,C,L,x)});const f=fo();let g=!1;if(this.lastChange>0&&f-this.lastChange<this.captureTimeout&&u.length>0&&!a&&!h){const m=u[u.length-1];m.deletions=Is([m.deletions,l.deleteSet]),m.insertions=Is([m.insertions,d])}else u.push(new hc(l.deleteSet,d)),g=!0;!a&&!h&&(this.lastChange=f),ne(l,l.deleteSet,m=>{m instanceof Y&&this.scope.some(C=>C===l.doc||ln(C,m))&&ci(m,!0)});const b=[{stackItem:u[u.length-1],origin:l.origin,type:a?"redo":"undo",changedParentTypes:l.changedParentTypes},this];g?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){const e=new Set(this.scope);t=ki(t)?t:[t],t.forEach(s=>{e.has(s)||(e.add(s),(s instanceof q?s.doc!==this.doc:s!==this.doc)&&ir("[yjs#509] Not same Y.Doc"),this.scope.push(s))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact(s=>{t&&(this.undoStack.forEach(i=>Mi(s,this,i)),this.undoStack=[]),e&&(this.redoStack.forEach(i=>Mi(s,this,i)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=$i(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=$i(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*uc(n){const t=F(n.restDecoder);for(let e=0;e<t;e++){const s=F(n.restDecoder),i=n.readClient();let r=F(n.restDecoder);for(let o=0;o<s;o++){const c=n.readInfo();if(c===10){const l=F(n.restDecoder);yield new ut(M(i,r),l),r+=l}else if((zn&c)!==0){const l=(c&(Ft|Pt))===0,a=new Y(M(i,r),null,(c&Pt)===Pt?n.readLeftID():null,null,(c&Ft)===Ft?n.readRightID():null,l?n.readParentInfo()?n.readString():n.readLeftID():null,l&&(c&Ae)===Ae?n.readString():null,jr(n,c));yield a,r+=a.length}else{const l=n.readLen();yield new ht(M(i,r),l),r+=l}}}}class ti{constructor(t,e){this.gen=uc(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ut);return this.curr}}class ei{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const dc=n=>an(n,hr,He),fc=(n,t)=>{if(n.constructor===ht){const{client:e,clock:s}=n.id;return new ht(M(e,s+t),n.length-t)}else if(n.constructor===ut){const{client:e,clock:s}=n.id;return new ut(M(e,s+t),n.length-t)}else{const e=n,{client:s,clock:i}=e.id;return new Y(M(s,i+t),null,M(s,i+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},an=(n,t=se,e=Yt)=>{if(n.length===1)return n[0];const s=n.map(h=>new t(le(h)));let i=s.map(h=>new ti(h,!0)),r=null;const o=new e,c=new ei(o);for(;i=i.filter(d=>d.curr!==null),i.sort((d,f)=>{if(d.curr.id.client===f.curr.id.client){const g=d.curr.id.clock-f.curr.id.clock;return g===0?d.curr.constructor===f.curr.constructor?0:d.curr.constructor===ut?1:-1:g}else return f.curr.id.client-d.curr.id.client}),i.length!==0;){const h=i[0],u=h.curr.id.client;if(r!==null){let d=h.curr,f=!1;for(;d!==null&&d.id.clock+d.length<=r.struct.id.clock+r.struct.length&&d.id.client>=r.struct.id.client;)d=h.next(),f=!0;if(d===null||d.id.client!==u||f&&d.id.clock>r.struct.id.clock+r.struct.length)continue;if(u!==r.struct.id.client)Mt(c,r.struct,r.offset),r={struct:d,offset:0},h.next();else if(r.struct.id.clock+r.struct.length<d.id.clock)if(r.struct.constructor===ut)r.struct.length=d.id.clock+d.length-r.struct.id.clock;else{Mt(c,r.struct,r.offset);const g=d.id.clock-r.struct.id.clock-r.struct.length;r={struct:new ut(M(u,r.struct.id.clock+r.struct.length),g),offset:0}}else{const g=r.struct.id.clock+r.struct.length-d.id.clock;g>0&&(r.struct.constructor===ut?r.struct.length-=g:d=fc(d,g)),r.struct.mergeWith(d)||(Mt(c,r.struct,r.offset),r={struct:d,offset:0},h.next())}}else r={struct:h.curr,offset:0},h.next();for(let d=h.curr;d!==null&&d.id.client===u&&d.id.clock===r.struct.id.clock+r.struct.length&&d.constructor!==ut;d=h.next())Mt(c,r.struct,r.offset),r={struct:d,offset:0}}r!==null&&(Mt(c,r.struct,r.offset),r=null),ni(c);const l=s.map(h=>Xs(h)),a=Is(l);return he(o,a),o.toUint8Array()},gc=(n,t,e=se,s=Yt)=>{const i=gr(t),r=new s,o=new ei(r),c=new e(le(n)),l=new ti(c,!1);for(;l.curr;){const h=l.curr,u=h.id.client,d=i.get(u)||0;if(l.curr.constructor===ut){l.next();continue}if(h.id.clock+h.length>d)for(Mt(o,h,xe(d-h.id.clock,0)),l.next();l.curr&&l.curr.id.client===u;)Mt(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===u&&l.curr.id.clock+l.curr.length<=d;)l.next()}ni(o);const a=Xs(c);return he(r,a),r.toUint8Array()},Er=n=>{n.written>0&&(n.clientStructs.push({written:n.written,restEncoder:Nt(n.encoder.restEncoder)}),n.encoder.restEncoder=Gn(),n.written=0)},Mt=(n,t,e)=>{n.written>0&&n.currClient!==t.id.client&&Er(n),n.written===0&&(n.currClient=t.id.client,n.encoder.writeClient(t.id.client),j(n.encoder.restEncoder,t.id.clock+e)),t.write(n.encoder,e),n.written++},ni=n=>{Er(n);const t=n.encoder.restEncoder;j(t,n.clientStructs.length);for(let e=0;e<n.clientStructs.length;e++){const s=n.clientStructs[e];j(t,s.written),or(t,s.restEncoder)}},pc=(n,t,e,s)=>{const i=new e(le(n)),r=new ti(i,!1),o=new s,c=new ei(o);for(let a=r.curr;a!==null;a=r.next())Mt(c,t(a),0);ni(c);const l=Xs(i);return he(o,l),o.toUint8Array()},mc=n=>pc(n,Uo,se,He),Ui="You must not compute changes after the event-handler fired.";class Kn{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=wc(this.currentTarget,this.target))}deletes(t){return Ne(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw on(Ui);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(i=>{if(i!==null){const r=e._map.get(i);let o,c;if(this.adds(r)){let l=r.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(r))if(l!==null&&this.deletes(l))o="delete",c=as(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",c=as(l.content.getContent())):(o="add",c=void 0)}else if(this.deletes(r))o="delete",c=as(r.content.getContent());else return;t.set(i,{action:o,oldValue:c})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw on(Ui);const e=this.target,s=cn(),i=cn(),r=[];if(t={added:s,deleted:i,delta:r,keys:this.keys},this.transaction.changed.get(e).has(null)){let c=null;const l=()=>{c&&r.push(c)};for(let a=e._start;a!==null;a=a.right)a.deleted?this.deletes(a)&&!this.adds(a)&&((c===null||c.delete===void 0)&&(l(),c={delete:0}),c.delete+=a.length,i.add(a)):this.adds(a)?((c===null||c.insert===void 0)&&(l(),c={insert:[]}),c.insert=c.insert.concat(a.content.getContent()),s.add(a)):((c===null||c.retain===void 0)&&(l(),c={retain:0}),c.retain+=a.length);c!==null&&c.retain===void 0&&l()}this._changes=t}return t}}const wc=(n,t)=>{const e=[];for(;t._item!==null&&t!==n;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let s=0,i=t._item.parent._start;for(;i!==t._item&&i!==null;)!i.deleted&&i.countable&&(s+=i.length),i=i.right;e.unshift(s)}t=t._item.parent}return e},et=()=>{ir("Invalid access: Add Yjs type to a document before reading data.")},Dr=80;let si=0;class yc{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=si++}}const kc=n=>{n.timestamp=si++},Ar=(n,t,e)=>{n.p.marker=!1,n.p=t,t.marker=!0,n.index=e,n.timestamp=si++},Sc=(n,t,e)=>{if(n.length>=Dr){const s=n.reduce((i,r)=>i.timestamp<r.timestamp?i:r);return Ar(s,t,e),s}else{const s=new yc(t,e);return n.push(s),s}},Jn=(n,t)=>{if(n._start===null||t===0||n._searchMarker===null)return null;const e=n._searchMarker.length===0?null:n._searchMarker.reduce((r,o)=>fs(t-r.index)<fs(t-o.index)?r:o);let s=n._start,i=0;for(e!==null&&(s=e.p,i=e.index,kc(e));s.right!==null&&i<t;){if(!s.deleted&&s.countable){if(t<i+s.length)break;i+=s.length}s=s.right}for(;s.left!==null&&i>t;)s=s.left,!s.deleted&&s.countable&&(i-=s.length);for(;s.left!==null&&s.left.id.client===s.id.client&&s.left.id.clock+s.left.length===s.id.clock;)s=s.left,!s.deleted&&s.countable&&(i-=s.length);return e!==null&&fs(e.index-i)<s.parent.length/Dr?(Ar(e,s,i),e):Sc(n._searchMarker,s,i)},_e=(n,t,e)=>{for(let s=n.length-1;s>=0;s--){const i=n[s];if(e>0){let r=i.p;for(r.marker=!1;r&&(r.deleted||!r.countable);)r=r.left,r&&!r.deleted&&r.countable&&(i.index-=r.length);if(r===null||r.marker===!0){n.splice(s,1);continue}i.p=r,r.marker=!0}(t<i.index||e>0&&t===i.index)&&(i.index=xe(t,i.index+e))}},Qn=(n,t,e)=>{const s=n,i=t.changedParentTypes;for(;zt(i,n,()=>[]).push(e),n._item!==null;)n=n._item.parent;mr(s._eH,e,t)};class q{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=vi(),this._dEH=vi(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw yt()}clone(){throw yt()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){_i(this._eH,t)}observeDeep(t){_i(this._dEH,t)}unobserve(t){Ti(this._eH,t)}unobserveDeep(t){Ti(this._dEH,t)}toJSON(){}}const vr=(n,t,e)=>{n.doc??et(),t<0&&(t=n._length+t),e<0&&(e=n._length+e);let s=e-t;const i=[];let r=n._start;for(;r!==null&&s>0;){if(r.countable&&!r.deleted){const o=r.content.getContent();if(o.length<=t)t-=o.length;else{for(let c=t;c<o.length&&s>0;c++)i.push(o[c]),s--;t=0}}r=r.right}return i},_r=n=>{n.doc??et();const t=[];let e=n._start;for(;e!==null;){if(e.countable&&!e.deleted){const s=e.content.getContent();for(let i=0;i<s.length;i++)t.push(s[i])}e=e.right}return t},Za=(n,t)=>{const e=[];let s=n._start;for(;s!==null;){if(s.countable&&xt(s,t)){const i=s.content.getContent();for(let r=0;r<i.length;r++)e.push(i[r])}s=s.right}return e},Te=(n,t)=>{let e=0,s=n._start;for(n.doc??et();s!==null;){if(s.countable&&!s.deleted){const i=s.content.getContent();for(let r=0;r<i.length;r++)t(i[r],e++,n)}s=s.right}},Tr=(n,t)=>{const e=[];return Te(n,(s,i)=>{e.push(t(s,i,n))}),e},bc=n=>{let t=n._start,e=null,s=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),s=0,t=t.right}const i=e[s++];return e.length<=s&&(e=null),{done:!1,value:i}}}},Lr=(n,t)=>{n.doc??et();const e=Jn(n,t);let s=n._start;for(e!==null&&(s=e.p,t-=e.index);s!==null;s=s.right)if(!s.deleted&&s.countable){if(t<s.length)return s.content.getContent()[t];t-=s.length}},hn=(n,t,e,s)=>{let i=e;const r=n.doc,o=r.clientID,c=r.store,l=e===null?t._start:e.right;let a=[];const h=()=>{a.length>0&&(i=new Y(M(o,K(c,o)),i,i&&i.lastId,l,l&&l.id,t,null,new Bt(a)),i.integrate(n,0),a=[])};s.forEach(u=>{if(u===null)a.push(u);else switch(u.constructor){case Number:case Object:case Boolean:case Array:case String:a.push(u);break;default:switch(h(),u.constructor){case Uint8Array:case ArrayBuffer:i=new Y(M(o,K(c,o)),i,i&&i.lastId,l,l&&l.id,t,null,new Fe(new Uint8Array(u))),i.integrate(n,0);break;case Gt:i=new Y(M(o,K(c,o)),i,i&&i.lastId,l,l&&l.id,t,null,new je(u)),i.integrate(n,0);break;default:if(u instanceof q)i=new Y(M(o,K(c,o)),i,i&&i.lastId,l,l&&l.id,t,null,new bt(u)),i.integrate(n,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},Or=()=>on("Length exceeded!"),Ir=(n,t,e,s)=>{if(e>t._length)throw Or();if(e===0)return t._searchMarker&&_e(t._searchMarker,e,s.length),hn(n,t,null,s);const i=e,r=Jn(t,e);let o=t._start;for(r!==null&&(o=r.p,e-=r.index,e===0&&(o=o.prev,e+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(e<=o.length){e<o.length&&ot(n,M(o.id.client,o.id.clock+e));break}e-=o.length}return t._searchMarker&&_e(t._searchMarker,i,s.length),hn(n,t,o,s)},Cc=(n,t,e)=>{let i=(t._searchMarker||[]).reduce((r,o)=>o.index>r.index?o:r,{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;return hn(n,t,i,e)},Mr=(n,t,e,s)=>{if(s===0)return;const i=e,r=s,o=Jn(t,e);let c=t._start;for(o!==null&&(c=o.p,e-=o.index);c!==null&&e>0;c=c.right)!c.deleted&&c.countable&&(e<c.length&&ot(n,M(c.id.client,c.id.clock+e)),e-=c.length);for(;s>0&&c!==null;)c.deleted||(s<c.length&&ot(n,M(c.id.client,c.id.clock+s)),c.delete(n),s-=c.length),c=c.right;if(s>0)throw Or();t._searchMarker&&_e(t._searchMarker,i,-r+s)},un=(n,t,e)=>{const s=t._map.get(e);s!==void 0&&s.delete(n)},ii=(n,t,e,s)=>{const i=t._map.get(e)||null,r=n.doc,o=r.clientID;let c;if(s==null)c=new Bt([s]);else switch(s.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:c=new Bt([s]);break;case Uint8Array:c=new Fe(s);break;case Gt:c=new je(s);break;default:if(s instanceof q)c=new bt(s);else throw new Error("Unexpected content type")}new Y(M(o,K(r.store,o)),i,i&&i.lastId,null,null,t,e,c).integrate(n,0)},ri=(n,t)=>{n.doc??et();const e=n._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},$r=n=>{const t={};return n.doc??et(),n._map.forEach((e,s)=>{e.deleted||(t[s]=e.content.getContent()[e.length-1])}),t},Ur=(n,t)=>{n.doc??et();const e=n._map.get(t);return e!==void 0&&!e.deleted},Ec=(n,t)=>{const e={};return n._map.forEach((s,i)=>{let r=s;for(;r!==null&&(!t.sv.has(r.id.client)||r.id.clock>=(t.sv.get(r.id.client)||0));)r=r.left;r!==null&&xt(r,t)&&(e[i]=r.content.getContent()[r.length-1])}),e},Be=n=>(n.doc??et(),Co(n._map.entries(),t=>!t[1].deleted));class Dc extends Kn{}class te extends q{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new te;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new te}clone(){const t=new te;return t.insert(0,this.toArray().map(e=>e instanceof q?e.clone():e)),t}get length(){return this.doc??et(),this._length}_callObserver(t,e){super._callObserver(t,e),Qn(this,t,new Dc(this,t))}insert(t,e){this.doc!==null?V(this.doc,s=>{Ir(s,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?V(this.doc,e=>{Cc(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?V(this.doc,s=>{Mr(s,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return Lr(this,t)}toArray(){return _r(this)}slice(t=0,e=this.length){return vr(this,t,e)}toJSON(){return this.map(t=>t instanceof q?t.toJSON():t)}map(t){return Tr(this,t)}forEach(t){Te(this,t)}[Symbol.iterator](){return bc(this)}_write(t){t.writeTypeRef(Jc)}}const Ac=n=>new te;class vc extends Kn{constructor(t,e,s){super(t,e),this.keysChanged=s}}class ie extends q{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((s,i)=>{this.set(i,s)}),this._prelimContent=null}_copy(){return new ie}clone(){const t=new ie;return this.forEach((e,s)=>{t.set(s,e instanceof q?e.clone():e)}),t}_callObserver(t,e){Qn(this,t,new vc(this,t,e))}toJSON(){this.doc??et();const t={};return this._map.forEach((e,s)=>{if(!e.deleted){const i=e.content.getContent()[e.length-1];t[s]=i instanceof q?i.toJSON():i}}),t}get size(){return[...Be(this)].length}keys(){return os(Be(this),t=>t[0])}values(){return os(Be(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return os(Be(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??et(),this._map.forEach((e,s)=>{e.deleted||t(e.content.getContent()[e.length-1],s,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?V(this.doc,e=>{un(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?V(this.doc,s=>{ii(s,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return ri(this,t)}has(t){return Ur(this,t)}clear(){this.doc!==null?V(this.doc,t=>{this.forEach(function(e,s,i){un(t,i,s)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Qc)}}const _c=n=>new ie,Ut=(n,t)=>n===t||typeof n=="object"&&typeof t=="object"&&n&&t&&Eo(n,t);class Us{constructor(t,e,s,i){this.left=t,this.right=e,this.index=s,this.currentAttributes=i}forward(){switch(this.right===null&&gt(),this.right.content.constructor){case J:this.right.deleted||ue(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Ri=(n,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case J:t.right.deleted||ue(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&ot(n,M(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},ze=(n,t,e,s)=>{const i=new Map,r=s?Jn(t,e):null;if(r){const o=new Us(r.p.left,r.p,r.index,i);return Ri(n,o,e-r.index)}else{const o=new Us(null,t._start,0,i);return Ri(n,o,e)}},Rr=(n,t,e,s)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===J&&Ut(s.get(e.right.content.key),e.right.content.value));)e.right.deleted||s.delete(e.right.content.key),e.forward();const i=n.doc,r=i.clientID;s.forEach((o,c)=>{const l=e.left,a=e.right,h=new Y(M(r,K(i.store,r)),l,l&&l.lastId,a,a&&a.id,t,null,new J(c,o));h.integrate(n,0),e.right=h,e.forward()})},ue=(n,t)=>{const{key:e,value:s}=t;s===null?n.delete(e):n.set(e,s)},xr=(n,t)=>{for(;n.right!==null;){if(!(n.right.deleted||n.right.content.constructor===J&&Ut(t[n.right.content.key]??null,n.right.content.value)))break;n.forward()}},Nr=(n,t,e,s)=>{const i=n.doc,r=i.clientID,o=new Map;for(const c in s){const l=s[c],a=e.currentAttributes.get(c)??null;if(!Ut(a,l)){o.set(c,a);const{left:h,right:u}=e;e.right=new Y(M(r,K(i.store,r)),h,h&&h.lastId,u,u&&u.id,t,null,new J(c,l)),e.right.integrate(n,0),e.forward()}}return o},ps=(n,t,e,s,i)=>{e.currentAttributes.forEach((d,f)=>{i[f]===void 0&&(i[f]=null)});const r=n.doc,o=r.clientID;xr(e,i);const c=Nr(n,t,e,i),l=s.constructor===String?new St(s):s instanceof q?new bt(s):new Kt(s);let{left:a,right:h,index:u}=e;t._searchMarker&&_e(t._searchMarker,e.index,l.getLength()),h=new Y(M(o,K(r.store,o)),a,a&&a.lastId,h,h&&h.id,t,null,l),h.integrate(n,0),e.right=h,e.index=u,e.forward(),Rr(n,t,e,c)},xi=(n,t,e,s,i)=>{const r=n.doc,o=r.clientID;xr(e,i);const c=Nr(n,t,e,i);t:for(;e.right!==null&&(s>0||c.size>0&&(e.right.deleted||e.right.content.constructor===J));){if(!e.right.deleted)switch(e.right.content.constructor){case J:{const{key:l,value:a}=e.right.content,h=i[l];if(h!==void 0){if(Ut(h,a))c.delete(l);else{if(s===0)break t;c.set(l,a)}e.right.delete(n)}else e.currentAttributes.set(l,a);break}default:s<e.right.length&&ot(n,M(e.right.id.client,e.right.id.clock+s)),s-=e.right.length;break}e.forward()}if(s>0){let l="";for(;s>0;s--)l+=`
`;e.right=new Y(M(o,K(r.store,o)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new St(l)),e.right.integrate(n,0),e.forward()}Rr(n,t,e,c)},Hr=(n,t,e,s,i)=>{let r=t;const o=Js();for(;r&&(!r.countable||r.deleted);){if(!r.deleted&&r.content.constructor===J){const a=r.content;o.set(a.key,a)}r=r.right}let c=0,l=!1;for(;t!==r;){if(e===t&&(l=!0),!t.deleted){const a=t.content;switch(a.constructor){case J:{const{key:h,value:u}=a,d=s.get(h)??null;(o.get(h)!==a||d===u)&&(t.delete(n),c++,!l&&(i.get(h)??null)===u&&d!==u&&(d===null?i.delete(h):i.set(h,d))),!l&&!t.deleted&&ue(i,a);break}}}t=t.right}return c},Tc=(n,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===J){const s=t.content.key;e.has(s)?t.delete(n):e.add(s)}t=t.left}},Lc=n=>{let t=0;return V(n.doc,e=>{let s=n._start,i=n._start,r=Js();const o=Ts(r);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case J:ue(o,i.content);break;default:t+=Hr(e,s,i,r,o),r=Ts(o),s=i;break}i=i.right}}),t},Oc=n=>{const t=new Set,e=n.doc;for(const[s,i]of n.afterState.entries()){const r=n.beforeState.get(s)||0;i!==r&&br(n,e.store.clients.get(s),r,i,o=>{!o.deleted&&o.content.constructor===J&&o.constructor!==ht&&t.add(o.parent)})}V(e,s=>{ne(n,n.deleteSet,i=>{if(i instanceof ht||!i.parent._hasFormatting||t.has(i.parent))return;const r=i.parent;i.content.constructor===J?t.add(r):Tc(s,i)});for(const i of t)Lc(i)})},Ni=(n,t,e)=>{const s=e,i=Ts(t.currentAttributes),r=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case bt:case Kt:case St:e<t.right.length&&ot(n,M(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(n);break}t.forward()}r&&Hr(n,r,t.right,i,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&_e(o._searchMarker,t.index,-s+e),t};class Ic extends Kn{constructor(t,e,s){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,s.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];V(t,s=>{const i=new Map,r=new Map;let o=this.target._start,c=null;const l={};let a="",h=0,u=0;const d=()=>{if(c!==null){let f=null;switch(c){case"delete":u>0&&(f={delete:u}),u=0;break;case"insert":(typeof a=="object"||a.length>0)&&(f={insert:a},i.size>0&&(f.attributes={},i.forEach((g,b)=>{g!==null&&(f.attributes[b]=g)}))),a="";break;case"retain":h>0&&(f={retain:h},yo(l)||(f.attributes=ko({},l))),h=0;break}f&&e.push(f),c=null}};for(;o!==null;){switch(o.content.constructor){case bt:case Kt:this.adds(o)?this.deletes(o)||(d(),c="insert",a=o.content.getContent()[0],d()):this.deletes(o)?(c!=="delete"&&(d(),c="delete"),u+=1):o.deleted||(c!=="retain"&&(d(),c="retain"),h+=1);break;case St:this.adds(o)?this.deletes(o)||(c!=="insert"&&(d(),c="insert"),a+=o.content.str):this.deletes(o)?(c!=="delete"&&(d(),c="delete"),u+=o.length):o.deleted||(c!=="retain"&&(d(),c="retain"),h+=o.length);break;case J:{const{key:f,value:g}=o.content;if(this.adds(o)){if(!this.deletes(o)){const b=i.get(f)??null;Ut(b,g)?g!==null&&o.delete(s):(c==="retain"&&d(),Ut(g,r.get(f)??null)?delete l[f]:l[f]=g)}}else if(this.deletes(o)){r.set(f,g);const b=i.get(f)??null;Ut(b,g)||(c==="retain"&&d(),l[f]=b)}else if(!o.deleted){r.set(f,g);const b=l[f];b!==void 0&&(Ut(b,g)?b!==null&&o.delete(s):(c==="retain"&&d(),g===null?delete l[f]:l[f]=g))}o.deleted||(c==="insert"&&d(),ue(i,o.content));break}}o=o.right}for(d();e.length>0;){const f=e[e.length-1];if(f.retain!==void 0&&f.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class re extends q{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??et(),this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(s=>s())}catch(s){console.error(s)}this._pending=null}_copy(){return new re}clone(){const t=new re;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const s=new Ic(this,t,e);Qn(this,t,s),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??et();let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===St&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?V(this.doc,s=>{const i=new Us(null,this._start,0,new Map);for(let r=0;r<t.length;r++){const o=t[r];if(o.insert!==void 0){const c=!e&&typeof o.insert=="string"&&r===t.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof c!="string"||c.length>0)&&ps(s,this,i,c,o.attributes||{})}else o.retain!==void 0?xi(s,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&Ni(s,i,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,s){this.doc??et();const i=[],r=new Map,o=this.doc;let c="",l=this._start;function a(){if(c.length>0){const u={};let d=!1;r.forEach((g,b)=>{d=!0,u[b]=g});const f={insert:c};d&&(f.attributes=u),i.push(f),c=""}}const h=()=>{for(;l!==null;){if(xt(l,t)||e!==void 0&&xt(l,e))switch(l.content.constructor){case St:{const u=r.get("ychange");t!==void 0&&!xt(l,t)?(u===void 0||u.user!==l.id.client||u.type!=="removed")&&(a(),r.set("ychange",s?s("removed",l.id):{type:"removed"})):e!==void 0&&!xt(l,e)?(u===void 0||u.user!==l.id.client||u.type!=="added")&&(a(),r.set("ychange",s?s("added",l.id):{type:"added"})):u!==void 0&&(a(),r.delete("ychange")),c+=l.content.str;break}case bt:case Kt:{a();const u={insert:l.content.getContent()[0]};if(r.size>0){const d={};u.attributes=d,r.forEach((f,g)=>{d[g]=f})}i.push(u);break}case J:xt(l,t)&&(a(),ue(r,l.content));break}l=l.right}a()};return t||e?V(o,u=>{t&&Ms(u,t),e&&Ms(u,e),h()},"cleanup"):h(),i}insert(t,e,s){if(e.length<=0)return;const i=this.doc;i!==null?V(i,r=>{const o=ze(r,this,t,!s);s||(s={},o.currentAttributes.forEach((c,l)=>{s[l]=c})),ps(r,this,o,e,s)}):this._pending.push(()=>this.insert(t,e,s))}insertEmbed(t,e,s){const i=this.doc;i!==null?V(i,r=>{const o=ze(r,this,t,!s);ps(r,this,o,e,s||{})}):this._pending.push(()=>this.insertEmbed(t,e,s||{}))}delete(t,e){if(e===0)return;const s=this.doc;s!==null?V(s,i=>{Ni(i,ze(i,this,t,!0),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,s){if(e===0)return;const i=this.doc;i!==null?V(i,r=>{const o=ze(r,this,t,!1);o.right!==null&&xi(r,this,o,e,s)}):this._pending.push(()=>this.format(t,e,s))}removeAttribute(t){this.doc!==null?V(this.doc,e=>{un(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?V(this.doc,s=>{ii(s,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return ri(this,t)}getAttributes(){return $r(this)}_write(t){t.writeTypeRef(qc)}}const Mc=n=>new re;class ms{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??et()}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===oe||e.constructor===Wt)&&e._start!==null)t=e._start;else for(;t!==null;){const s=t.next;if(s!==null){t=s;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Wt extends q{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Wt}clone(){const t=new Wt;return t.insert(0,this.toArray().map(e=>e instanceof q?e.clone():e)),t}get length(){return this.doc??et(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new ms(this,t)}querySelector(t){t=t.toUpperCase();const s=new ms(this,i=>i.nodeName&&i.nodeName.toUpperCase()===t).next();return s.done?null:s.value}querySelectorAll(t){return t=t.toUpperCase(),Vt(new ms(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){Qn(this,t,new Rc(this,e,t))}toString(){return Tr(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},s){const i=t.createDocumentFragment();return s!==void 0&&s._createAssociation(i,this),Te(this,r=>{i.insertBefore(r.toDOM(t,e,s),null)}),i}insert(t,e){this.doc!==null?V(this.doc,s=>{Ir(s,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)V(this.doc,s=>{const i=t&&t instanceof q?t._item:t;hn(s,this,i,e)});else{const s=this._prelimContent,i=t===null?0:s.findIndex(r=>r===t)+1;if(i===0&&t!==null)throw on("Reference item not found");s.splice(i,0,...e)}}delete(t,e=1){this.doc!==null?V(this.doc,s=>{Mr(s,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return _r(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Lr(this,t)}slice(t=0,e=this.length){return vr(this,t,e)}forEach(t){Te(this,t)}_write(t){t.writeTypeRef(Zc)}}const $c=n=>new Wt;class oe extends Wt{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((s,i)=>{this.setAttribute(i,s)}),this._prelimAttrs=null}_copy(){return new oe(this.nodeName)}clone(){const t=new oe(this.nodeName),e=this.getAttributes();return mo(e,(s,i)=>{t.setAttribute(i,s)}),t.insert(0,this.toArray().map(s=>s instanceof q?s.clone():s)),t}toString(){const t=this.getAttributes(),e=[],s=[];for(const c in t)s.push(c);s.sort();const i=s.length;for(let c=0;c<i;c++){const l=s[c];e.push(l+'="'+t[l]+'"')}const r=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${r}${o}>${super.toString()}</${r}>`}removeAttribute(t){this.doc!==null?V(this.doc,e=>{un(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?V(this.doc,s=>{ii(s,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return ri(this,t)}hasAttribute(t){return Ur(this,t)}getAttributes(t){return t?Ec(this,t):$r(this)}toDOM(t=document,e={},s){const i=t.createElement(this.nodeName),r=this.getAttributes();for(const o in r){const c=r[o];typeof c=="string"&&i.setAttribute(o,c)}return Te(this,o=>{i.appendChild(o.toDOM(t,e,s))}),s!==void 0&&s._createAssociation(i,this),i}_write(t){t.writeTypeRef(Xc),t.writeKey(this.nodeName)}}const Uc=n=>new oe(n.readKey());class Rc extends Kn{constructor(t,e,s){super(t,s),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class dn extends ie{constructor(t){super(),this.hookName=t}_copy(){return new dn(this.hookName)}clone(){const t=new dn(this.hookName);return this.forEach((e,s)=>{t.set(s,e)}),t}toDOM(t=document,e={},s){const i=e[this.hookName];let r;return i!==void 0?r=i.createDom(this):r=document.createElement(this.hookName),r.setAttribute("data-yjs-hook",this.hookName),s!==void 0&&s._createAssociation(r,this),r}_write(t){t.writeTypeRef(tl),t.writeKey(this.hookName)}}const xc=n=>new dn(n.readKey());class fn extends re{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new fn}clone(){const t=new fn;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,s){const i=t.createTextNode(this.toString());return s!==void 0&&s._createAssociation(i,this),i}toString(){return this.toDelta().map(t=>{const e=[];for(const i in t.attributes){const r=[];for(const o in t.attributes[i])r.push({key:o,value:t.attributes[i][o]});r.sort((o,c)=>o.key<c.key?-1:1),e.push({nodeName:i,attrs:r})}e.sort((i,r)=>i.nodeName<r.nodeName?-1:1);let s="";for(let i=0;i<e.length;i++){const r=e[i];s+=`<${r.nodeName}`;for(let o=0;o<r.attrs.length;o++){const c=r.attrs[o];s+=` ${c.key}="${c.value}"`}s+=">"}s+=t.insert;for(let i=e.length-1;i>=0;i--)s+=`</${e[i].nodeName}>`;return s}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(el)}}const Nc=n=>new fn;class oi{constructor(t,e){this.id=t,this.length=e}get deleted(){throw yt()}mergeWith(t){return!1}write(t,e,s){throw yt()}integrate(t,e){throw yt()}}const Hc=0;class ht extends oi{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),Sr(t.doc.store,this)}write(t,e){t.writeInfo(Hc),t.writeLen(this.length-e)}getMissing(t,e){return null}}class Fe{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Fe(this.content)}splice(t){throw yt()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const Pc=n=>new Fe(n.readBuf());class Le{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Le(this.len)}splice(t){const e=new Le(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){ve(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const Fc=n=>new Le(n.readLen()),Pr=(n,t)=>new Gt({guid:n,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class je{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new je(Pr(this.doc.guid,this.opts))}splice(t){throw yt()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const jc=n=>new je(Pr(n.readString(),n.readAny()));class Kt{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Kt(this.embed)}splice(t){throw yt()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const Vc=n=>new Kt(n.readJSON());class J{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new J(this.key,this.value)}splice(t){throw yt()}mergeWith(t){return!1}integrate(t,e){const s=e.parent;s._searchMarker=null,s._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Yc=n=>new J(n.readKey(),n.readJSON());class gn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gn(this.arr)}splice(t){const e=new gn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const s=this.arr.length;t.writeLen(s-e);for(let i=e;i<s;i++){const r=this.arr[i];t.writeString(r===void 0?"undefined":JSON.stringify(r))}}getRef(){return 2}}const Wc=n=>{const t=n.readLen(),e=[];for(let s=0;s<t;s++){const i=n.readString();i==="undefined"?e.push(void 0):e.push(JSON.parse(i))}return new gn(e)},Bc=To("node_env")==="development";class Bt{constructor(t){this.arr=t,Bc&&_o(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Bt(this.arr)}splice(t){const e=new Bt(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const s=this.arr.length;t.writeLen(s-e);for(let i=e;i<s;i++){const r=this.arr[i];t.writeAny(r)}}getRef(){return 8}}const zc=n=>{const t=n.readLen(),e=[];for(let s=0;s<t;s++)e.push(n.readAny());return new Bt(e)};class St{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new St(this.str)}splice(t){const e=new St(this.str.slice(t));this.str=this.str.slice(0,t);const s=this.str.charCodeAt(t-1);return s>=55296&&s<=56319&&(this.str=this.str.slice(0,t-1)+"",e.str=""+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const Gc=n=>new St(n.readString()),Kc=[Ac,_c,Mc,Uc,$c,xc,Nc],Jc=0,Qc=1,qc=2,Xc=3,Zc=4,tl=5,el=6;class bt{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new bt(this.type._copy())}splice(t){throw yt()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(s=>{s.deleted?s.id.clock<(t.beforeState.get(s.id.client)||0)&&t._mergeStructs.push(s):s.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(s=>{for(;s!==null;)s.gc(t,!0),s=s.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const nl=n=>new bt(Kc[n.readTypeRef()](n)),Rs=(n,t)=>{let e=t,s=0,i;do s>0&&(e=M(e.client,e.clock+s)),i=Zt(n,e),s=e.clock-i.id.clock,e=i.redone;while(e!==null&&i instanceof Y);return{item:i,diff:s}},ci=(n,t)=>{for(;n!==null&&n.keep!==t;)n.keep=t,n=n.parent._item},pn=(n,t,e)=>{const{client:s,clock:i}=t.id,r=new Y(M(s,i+e),t,M(s,i+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&r.markDeleted(),t.keep&&(r.keep=!0),t.redone!==null&&(r.redone=M(t.redone.client,t.redone.clock+e)),t.right=r,r.right!==null&&(r.right.left=r),n._mergeStructs.push(r),r.parentSub!==null&&r.right===null&&r.parent._map.set(r.parentSub,r),t.length=e,r},Hi=(n,t)=>Ro(n,e=>Ne(e.deletions,t)),Fr=(n,t,e,s,i,r)=>{const o=n.doc,c=o.store,l=o.clientID,a=t.redone;if(a!==null)return ot(n,a);let h=t.parent._item,u=null,d;if(h!==null&&h.deleted===!0){if(h.redone===null&&(!e.has(h)||Fr(n,h,e,s,i,r)===null))return null;for(;h.redone!==null;)h=ot(n,h.redone)}const f=h===null?t.parent:h.content.type;if(t.parentSub===null){for(u=t.left,d=t;u!==null;){let C=u;for(;C!==null&&C.parent._item!==h;)C=C.redone===null?null:ot(n,C.redone);if(C!==null&&C.parent._item===h){u=C;break}u=u.left}for(;d!==null;){let C=d;for(;C!==null&&C.parent._item!==h;)C=C.redone===null?null:ot(n,C.redone);if(C!==null&&C.parent._item===h){d=C;break}d=d.right}}else if(d=null,t.right&&!i){for(u=t;u!==null&&u.right!==null&&(u.right.redone||Ne(s,u.right.id)||Hi(r.undoStack,u.right.id)||Hi(r.redoStack,u.right.id));)for(u=u.right;u.redone;)u=ot(n,u.redone);if(u&&u.right!==null)return null}else u=f._map.get(t.parentSub)||null;const g=K(c,l),b=M(l,g),m=new Y(b,u,u&&u.lastId,d,d&&d.id,f,t.parentSub,t.content.copy());return t.redone=b,ci(m,!0),m.integrate(n,0),m};class Y extends oi{constructor(t,e,s,i,r,o,c,l){super(t,l.getLength()),this.origin=s,this.left=e,this.right=i,this.rightOrigin=r,this.parent=o,this.parentSub=c,this.redone=null,this.content=l,this.info=this.content.isCountable()?bi:0}set marker(t){(this.info&is)>0!==t&&(this.info^=is)}get marker(){return(this.info&is)>0}get keep(){return(this.info&Ci)>0}set keep(t){this.keep!==t&&(this.info^=Ci)}get countable(){return(this.info&bi)>0}get deleted(){return(this.info&rs)>0}set deleted(t){this.deleted!==t&&(this.info^=rs)}markDeleted(){this.info|=rs}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=K(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=K(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Xt&&this.id.client!==this.parent.client&&this.parent.clock>=K(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Li(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ot(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ht||this.right&&this.right.constructor===ht)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Y?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Y&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Xt){const s=Zt(e,this.parent);s.constructor===ht?this.parent=null:this.parent=s.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Li(t,t.doc.store,M(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let s=this.left,i;if(s!==null)i=s.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const r=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),r.add(i),qt(this.origin,i.origin)){if(i.id.client<this.id.client)s=i,r.clear();else if(qt(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(Zt(t.doc.store,i.origin)))r.has(Zt(t.doc.store,i.origin))||(s=i,r.clear());else break;i=i.right}this.left=s}if(this.left!==null){const s=this.left.right;this.right=s,this.left.right=this}else{let s;if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Sr(t.doc.store,this),this.content.integrate(t,this),Ii(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new ht(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:M(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&qt(t.origin,this.lastId)&&this.right===t&&qt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(s=>{s.p===t&&(s.p=this,!this.deleted&&this.countable&&(s.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),ve(t.deleteSet,this.id.client,this.id.clock,this.length),Ii(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw gt();this.content.gc(t),e?oc(t,this,new ht(this.id,this.length)):this.content=new Le(this.length)}write(t,e){const s=e>0?M(this.id.client,this.id.clock+e-1):this.origin,i=this.rightOrigin,r=this.parentSub,o=this.content.getRef()&zn|(s===null?0:Pt)|(i===null?0:Ft)|(r===null?0:Ae);if(t.writeInfo(o),s!==null&&t.writeLeftID(s),i!==null&&t.writeRightID(i),s===null&&i===null){const c=this.parent;if(c._item!==void 0){const l=c._item;if(l===null){const a=wr(c);t.writeParentInfo(!0),t.writeString(a)}else t.writeParentInfo(!1),t.writeLeftID(l.id)}else c.constructor===String?(t.writeParentInfo(!0),t.writeString(c)):c.constructor===Xt?(t.writeParentInfo(!1),t.writeLeftID(c)):gt();r!==null&&t.writeString(r)}this.content.write(t,e)}}const jr=(n,t)=>sl[t&zn](n),sl=[()=>{gt()},Fc,Wc,Pc,Gc,Vc,Yc,nl,zc,jc,()=>{gt()}],il=10;class ut extends oi{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){gt()}write(t,e){t.writeInfo(il),j(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Yr="__ $YJS$ __";Vr[Yr]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Vr[Yr]=!0;var qe={exports:{}},rl=qe.exports,Pi;function ol(){return Pi||(Pi=1,(function(n,t){(function(e,s){n.exports=s()})(rl,(function(){var e=1e3,s=6e4,i=36e5,r="millisecond",o="second",c="minute",l="hour",a="day",h="week",u="month",d="quarter",f="year",g="date",b="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var y=["th","st","nd","rd"],w=E%100;return"["+E+(y[(w-20)%10]||y[w]||y[0])+"]"}},x=function(E,y,w){var D=String(E);return!D||D.length>=y?E:""+Array(y+1-D.length).join(w)+E},X={s:x,z:function(E){var y=-E.utcOffset(),w=Math.abs(y),D=Math.floor(w/60),S=w%60;return(y<=0?"+":"-")+x(D,2,"0")+":"+x(S,2,"0")},m:function E(y,w){if(y.date()<w.date())return-E(w,y);var D=12*(w.year()-y.year())+(w.month()-y.month()),S=y.clone().add(D,u),T=w-S<0,O=y.clone().add(D+(T?-1:1),u);return+(-(D+(w-S)/(T?S-O:O-S))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:u,y:f,w:h,d:a,D:g,h:l,m:c,s:o,ms:r,Q:d}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},N="en",I={};I[N]=L;var A="$isDayjsObject",k=function(E){return E instanceof H||!(!E||!E[A])},$=function E(y,w,D){var S;if(!y)return N;if(typeof y=="string"){var T=y.toLowerCase();I[T]&&(S=T),w&&(I[T]=w,S=T);var O=y.split("-");if(!S&&O.length>1)return E(O[0])}else{var R=y.name;I[R]=y,S=R}return!D&&S&&(N=S),S||!D&&N},_=function(E,y){if(k(E))return E.clone();var w=typeof y=="object"?y:{};return w.date=E,w.args=arguments,new H(w)},v=X;v.l=$,v.i=k,v.w=function(E,y){return _(E,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var H=(function(){function E(w){this.$L=$(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[A]=!0}var y=E.prototype;return y.parse=function(w){this.$d=(function(D){var S=D.date,T=D.utc;if(S===null)return new Date(NaN);if(v.u(S))return new Date;if(S instanceof Date)return new Date(S);if(typeof S=="string"&&!/Z$/i.test(S)){var O=S.match(m);if(O){var R=O[2]-1||0,W=(O[7]||"0").substring(0,3);return T?new Date(Date.UTC(O[1],R,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)):new Date(O[1],R,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)}}return new Date(S)})(w),this.init()},y.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},y.$utils=function(){return v},y.isValid=function(){return this.$d.toString()!==b},y.isSame=function(w,D){var S=_(w);return this.startOf(D)<=S&&S<=this.endOf(D)},y.isAfter=function(w,D){return _(w)<this.startOf(D)},y.isBefore=function(w,D){return this.endOf(D)<_(w)},y.$g=function(w,D,S){return v.u(w)?this[D]:this.set(S,w)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(w,D){var S=this,T=!!v.u(D)||D,O=v.p(w),R=function(pt,Z){var ct=v.w(S.$u?Date.UTC(S.$y,Z,pt):new Date(S.$y,Z,pt),S);return T?ct:ct.endOf(a)},W=function(pt,Z){return v.w(S.toDate()[pt].apply(S.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(Z)),S)},z=this.$W,Q=this.$M,it=this.$D,Tt="set"+(this.$u?"UTC":"");switch(O){case f:return T?R(1,0):R(31,11);case u:return T?R(1,Q):R(0,Q+1);case h:var Ct=this.$locale().weekStart||0,Rt=(z<Ct?z+7:z)-Ct;return R(T?it-Rt:it+(6-Rt),Q);case a:case g:return W(Tt+"Hours",0);case l:return W(Tt+"Minutes",1);case c:return W(Tt+"Seconds",2);case o:return W(Tt+"Milliseconds",3);default:return this.clone()}},y.endOf=function(w){return this.startOf(w,!1)},y.$set=function(w,D){var S,T=v.p(w),O="set"+(this.$u?"UTC":""),R=(S={},S[a]=O+"Date",S[g]=O+"Date",S[u]=O+"Month",S[f]=O+"FullYear",S[l]=O+"Hours",S[c]=O+"Minutes",S[o]=O+"Seconds",S[r]=O+"Milliseconds",S)[T],W=T===a?this.$D+(D-this.$W):D;if(T===u||T===f){var z=this.clone().set(g,1);z.$d[R](W),z.init(),this.$d=z.set(g,Math.min(this.$D,z.daysInMonth())).$d}else R&&this.$d[R](W);return this.init(),this},y.set=function(w,D){return this.clone().$set(w,D)},y.get=function(w){return this[v.p(w)]()},y.add=function(w,D){var S,T=this;w=Number(w);var O=v.p(D),R=function(Q){var it=_(T);return v.w(it.date(it.date()+Math.round(Q*w)),T)};if(O===u)return this.set(u,this.$M+w);if(O===f)return this.set(f,this.$y+w);if(O===a)return R(1);if(O===h)return R(7);var W=(S={},S[c]=s,S[l]=i,S[o]=e,S)[O]||1,z=this.$d.getTime()+w*W;return v.w(z,this)},y.subtract=function(w,D){return this.add(-1*w,D)},y.format=function(w){var D=this,S=this.$locale();if(!this.isValid())return S.invalidDate||b;var T=w||"YYYY-MM-DDTHH:mm:ssZ",O=v.z(this),R=this.$H,W=this.$m,z=this.$M,Q=S.weekdays,it=S.months,Tt=S.meridiem,Ct=function(Z,ct,Et,Lt){return Z&&(Z[ct]||Z(D,T))||Et[ct].slice(0,Lt)},Rt=function(Z){return v.s(R%12||12,Z,"0")},pt=Tt||function(Z,ct,Et){var Lt=Z<12?"AM":"PM";return Et?Lt.toLowerCase():Lt};return T.replace(C,(function(Z,ct){return ct||(function(Et){switch(Et){case"YY":return String(D.$y).slice(-2);case"YYYY":return v.s(D.$y,4,"0");case"M":return z+1;case"MM":return v.s(z+1,2,"0");case"MMM":return Ct(S.monthsShort,z,it,3);case"MMMM":return Ct(it,z);case"D":return D.$D;case"DD":return v.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return Ct(S.weekdaysMin,D.$W,Q,2);case"ddd":return Ct(S.weekdaysShort,D.$W,Q,3);case"dddd":return Q[D.$W];case"H":return String(R);case"HH":return v.s(R,2,"0");case"h":return Rt(1);case"hh":return Rt(2);case"a":return pt(R,W,!0);case"A":return pt(R,W,!1);case"m":return String(W);case"mm":return v.s(W,2,"0");case"s":return String(D.$s);case"ss":return v.s(D.$s,2,"0");case"SSS":return v.s(D.$ms,3,"0");case"Z":return O}return null})(Z)||O.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(w,D,S){var T,O=this,R=v.p(D),W=_(w),z=(W.utcOffset()-this.utcOffset())*s,Q=this-W,it=function(){return v.m(O,W)};switch(R){case f:T=it()/12;break;case u:T=it();break;case d:T=it()/3;break;case h:T=(Q-z)/6048e5;break;case a:T=(Q-z)/864e5;break;case l:T=Q/i;break;case c:T=Q/s;break;case o:T=Q/e;break;default:T=Q}return S?T:v.a(T)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return I[this.$L]},y.locale=function(w,D){if(!w)return this.$L;var S=this.clone(),T=$(w,D,!0);return T&&(S.$L=T),S},y.clone=function(){return v.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},E})(),P=H.prototype;return _.prototype=P,[["$ms",r],["$s",o],["$m",c],["$H",l],["$W",a],["$M",u],["$y",f],["$D",g]].forEach((function(E){P[E[1]]=function(y){return this.$g(y,E[0],E[1])}})),_.extend=function(E,y){return E.$i||(E(y,H,_),E.$i=!0),_},_.locale=$,_.isDayjs=k,_.unix=function(E){return _(1e3*E)},_.en=I[N],_.Ls=I,_.p={},_}))})(qe)),qe.exports}var cl=ol();const th=Re(cl),ll=Math.floor,al=(n,t)=>n<t?n:t,hl=(n,t)=>n>t?n:t,Wr=128,Xe=127,ul=Number.MAX_SAFE_INTEGER,dl=n=>{const t=unescape(encodeURIComponent(n)),e=t.length,s=new Uint8Array(e);for(let i=0;i<e;i++)s[i]=t.codePointAt(i);return s},Oe=typeof TextEncoder<"u"?new TextEncoder:null,fl=n=>Oe.encode(n),gl=Oe?fl:dl;let pe=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});pe&&pe.decode(new Uint8Array).length===1&&(pe=null);const mn=(n,t)=>{const e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(e*2),n.cpos=0),n.cbuf[n.cpos++]=t},qn=(n,t)=>{for(;t>Xe;)mn(n,Wr|Xe&t),t=ll(t/128);mn(n,Xe&t)},xs=new Uint8Array(3e4),pl=xs.length/3,ml=(n,t)=>{if(t.length<pl){const e=Oe.encodeInto(t,xs).written||0;qn(n,e);for(let s=0;s<e;s++)mn(n,xs[s])}else Sl(n,gl(t))},wl=(n,t)=>{const e=unescape(encodeURIComponent(t)),s=e.length;qn(n,s);for(let i=0;i<s;i++)mn(n,e.codePointAt(i))},yl=Oe&&Oe.encodeInto?ml:wl,kl=(n,t)=>{const e=n.cbuf.length,s=n.cpos,i=al(e-s,t.length),r=t.length-i;n.cbuf.set(t.subarray(0,i),s),n.cpos+=i,r>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(hl(e*2,r)),n.cbuf.set(t.subarray(i)),n.cpos=r)},Sl=(n,t)=>{qn(n,t.byteLength),kl(n,t)},Br=n=>new Error(n),bl=Br("Unexpected end of array"),Cl=Br("Integer out of Range"),El=(n,t)=>{const e=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e},Dl=n=>El(n,li(n)),Fi=n=>n.arr[n.pos++],li=n=>{let t=0,e=1;const s=n.arr.length;for(;n.pos<s;){const i=n.arr[n.pos++];if(t=t+(i&Xe)*e,e*=128,i<Wr)return t;if(t>ul)throw Cl}throw bl},Al=n=>{let t=li(n);if(t===0)return"";{let e=String.fromCodePoint(Fi(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(Fi(n));else for(;t>0;){const s=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+s);n.pos+=s,e+=String.fromCodePoint.apply(null,i),t-=s}return decodeURIComponent(escape(e))}},vl=n=>pe.decode(Dl(n)),ji=pe?vl:Al;var ee;(function(n){n[n.Token=0]="Token",n[n.PermissionDenied=1]="PermissionDenied",n[n.Authenticated=2]="Authenticated"})(ee||(ee={}));const _l=(n,t)=>{qn(n,ee.Token),yl(n,t)},Tl=(n,t,e,s)=>{switch(li(n)){case ee.Token:{t();break}case ee.PermissionDenied:{e(ji(n));break}case ee.Authenticated:{s(ji(n));break}}},Vi=n=>Array.from(n.entries()).map(([t,e])=>({clientId:t,...e}));var Ns;(function(n){n[n.Connecting=0]="Connecting",n[n.Open=1]="Open",n[n.Closing=2]="Closing",n[n.Closed=3]="Closed"})(Ns||(Ns={}));const zr=Math.floor,Ll=(n,t)=>n<t?n:t,Ol=(n,t)=>n>t?n:t,Il=64,wn=128,Ml=63,me=127,Gr=Number.MAX_SAFE_INTEGER,$l=()=>new Set,Ul=Array.from,Rl=n=>{const t=unescape(encodeURIComponent(n)),e=t.length,s=new Uint8Array(e);for(let i=0;i<e;i++)s[i]=t.codePointAt(i);return s},Ie=typeof TextEncoder<"u"?new TextEncoder:null,xl=n=>Ie.encode(n),Nl=Ie?xl:Rl;let we=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});we&&we.decode(new Uint8Array).length===1&&(we=null);class Hl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ai=()=>new Hl,Kr=n=>{let t=n.cpos;for(let e=0;e<n.bufs.length;e++)t+=n.bufs[e].length;return t},hi=n=>{const t=new Uint8Array(Kr(n));let e=0;for(let s=0;s<n.bufs.length;s++){const i=n.bufs[s];t.set(i,e),e+=i.length}return t.set(new Uint8Array(n.cbuf.buffer,0,n.cpos),e),t},yn=(n,t)=>{const e=n.cbuf.length;n.cpos===e&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(e*2),n.cpos=0),n.cbuf[n.cpos++]=t},nt=(n,t)=>{for(;t>me;)yn(n,wn|me&t),t=zr(t/128);yn(n,me&t)},Hs=new Uint8Array(3e4),Pl=Hs.length/3,Fl=(n,t)=>{if(t.length<Pl){const e=Ie.encodeInto(t,Hs).written||0;nt(n,e);for(let s=0;s<e;s++)yn(n,Hs[s])}else de(n,Nl(t))},jl=(n,t)=>{const e=unescape(encodeURIComponent(t)),s=e.length;nt(n,s);for(let i=0;i<s;i++)yn(n,e.codePointAt(i))},_t=Ie&&Ie.encodeInto?Fl:jl,Vl=(n,t)=>{const e=n.cbuf.length,s=n.cpos,i=Ll(e-s,t.length),r=t.length-i;n.cbuf.set(t.subarray(0,i),s),n.cpos+=i,r>0&&(n.bufs.push(n.cbuf),n.cbuf=new Uint8Array(Ol(e*2,r)),n.cbuf.set(t.subarray(i)),n.cpos=r)},de=(n,t)=>{nt(n,t.byteLength),Vl(n,t)},Jr=n=>new Error(n),Qr=Jr("Unexpected end of array"),qr=Jr("Integer out of Range");class Yl{constructor(t){this.arr=t,this.pos=0}}const Xr=n=>new Yl(n),Wl=(n,t)=>{const e=new Uint8Array(n.arr.buffer,n.pos+n.arr.byteOffset,t);return n.pos+=t,e},Xn=n=>Wl(n,jt(n)),Yi=n=>n.arr[n.pos++],jt=n=>{let t=0,e=1;const s=n.arr.length;for(;n.pos<s;){const i=n.arr[n.pos++];if(t=t+(i&me)*e,e*=128,i<wn)return t;if(t>Gr)throw qr}throw Qr},Bl=n=>{let t=n.arr[n.pos++],e=t&Ml,s=64;const i=(t&Il)>0?-1:1;if((t&wn)===0)return i*e;const r=n.arr.length;for(;n.pos<r;){if(t=n.arr[n.pos++],e=e+(t&me)*s,s*=128,t<wn)return i*e;if(e>Gr)throw qr}throw Qr},zl=n=>{let t=jt(n);if(t===0)return"";{let e=String.fromCodePoint(Yi(n));if(--t<100)for(;t--;)e+=String.fromCodePoint(Yi(n));else for(;t>0;){const s=t<1e4?t:1e4,i=n.arr.subarray(n.pos,n.pos+s);n.pos+=s,e+=String.fromCodePoint.apply(null,i),t-=s}return decodeURIComponent(escape(e))}},Gl=n=>we.decode(Xn(n)),Me=we?Gl:zl,Kl=n=>{const t=n.pos,e=Me(n);return n.pos=t,e},ce=Date.now,ws=()=>new Map,Jl=(n,t,e)=>{let s=n.get(t);return s===void 0&&n.set(t,s=e()),s};class Ql{constructor(){this._observers=ws()}on(t,e){Jl(this._observers,t,$l).add(e)}once(t,e){const s=(...i)=>{this.off(t,s),e(...i)};this.on(t,s)}off(t,e){const s=this._observers.get(t);s!==void 0&&(s.delete(e),s.size===0&&this._observers.delete(t))}emit(t,e){return Ul((this._observers.get(t)||ws()).values()).forEach(s=>s(...e))}destroy(){this._observers=ws()}}const ql=Object.keys,Wi=n=>ql(n).length,Xl=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),Zl=(n,t)=>n===t,ye=(n,t)=>{if(n==null||t==null)return Zl(n,t);if(n.constructor!==t.constructor)return!1;if(n===t)return!0;switch(n.constructor){case ArrayBuffer:n=new Uint8Array(n),t=new Uint8Array(t);case Uint8Array:{if(n.byteLength!==t.byteLength)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;break}case Set:{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;break}case Map:{if(n.size!==t.size)return!1;for(const e of n.keys())if(!t.has(e)||!ye(n.get(e),t.get(e)))return!1;break}case Object:if(Wi(n)!==Wi(t))return!1;for(const e in n)if(!Xl(n,e)||!ye(n[e],t[e]))return!1;break;case Array:if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(!ye(n[e],t[e]))return!1;break;default:return!1}return!0},ys=3e4;class ta extends Ql{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=ce();this.getLocalState()!==null&&ys/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const s=[];this.meta.forEach((i,r)=>{r!==this.clientID&&ys<=e-i.lastUpdated&&this.states.has(r)&&s.push(r)}),s.length>0&&Ze(this,s,"timeout")},zr(ys/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,s=this.meta.get(e),i=s===void 0?0:s.clock+1,r=this.states.get(e);t===null?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:i,lastUpdated:ce()});const o=[],c=[],l=[],a=[];t===null?a.push(e):r==null?t!=null&&o.push(e):(c.push(e),ye(r,t)||l.push(e)),(o.length>0||l.length>0||a.length>0)&&this.emit("change",[{added:o,updated:l,removed:a},"local"]),this.emit("update",[{added:o,updated:c,removed:a},"local"])}setLocalStateField(t,e){const s=this.getLocalState();s!==null&&this.setLocalState({...s,[t]:e})}getStates(){return this.states}}const Ze=(n,t,e)=>{const s=[];for(let i=0;i<t.length;i++){const r=t[i];if(n.states.has(r)){if(n.states.delete(r),r===n.clientID){const o=n.meta.get(r);n.meta.set(r,{clock:o.clock+1,lastUpdated:ce()})}s.push(r)}}s.length>0&&(n.emit("change",[{added:[],updated:[],removed:s},e]),n.emit("update",[{added:[],updated:[],removed:s},e]))},Ps=(n,t,e=n.states)=>{const s=t.length,i=ai();nt(i,s);for(let r=0;r<s;r++){const o=t[r],c=e.get(o)||null,l=n.meta.get(o).clock;nt(i,o),nt(i,l),_t(i,JSON.stringify(c))}return hi(i)},ea=(n,t,e)=>{const s=Xr(t),i=ce(),r=[],o=[],c=[],l=[],a=jt(s);for(let h=0;h<a;h++){const u=jt(s);let d=jt(s);const f=JSON.parse(Me(s)),g=n.meta.get(u),b=n.states.get(u),m=g===void 0?0:g.clock;(m<d||m===d&&f===null&&n.states.has(u))&&(f===null?u===n.clientID&&n.getLocalState()!=null?d++:n.states.delete(u):n.states.set(u,f),n.meta.set(u,{clock:d,lastUpdated:i}),g===void 0&&f!==null?r.push(u):g!==void 0&&f===null?l.push(u):f!==null&&(ye(f,b)||c.push(u),o.push(u)))}(r.length>0||c.length>0||l.length>0)&&n.emit("change",[{added:r,updated:c,removed:l},e]),(r.length>0||o.length>0||l.length>0)&&n.emit("update",[{added:r,updated:o,removed:l},e])};class Zr{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const s=this.callbacks[t];return s&&s.forEach(i=>i.apply(this,e)),this}off(t,e){const s=this.callbacks[t];return s&&(e?this.callbacks[t]=s.filter(i=>i!==e):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}class Fs{constructor(t){this.data=t,this.encoder=ai(),this.decoder=Xr(new Uint8Array(this.data))}peekVarString(){return Kl(this.decoder)}readVarUint(){return jt(this.decoder)}readVarString(){return Me(this.decoder)}readVarUint8Array(){return Xn(this.decoder)}writeVarUint(t){return nt(this.encoder,t)}writeVarString(t){return _t(this.encoder,t)}writeVarUint8Array(t){return de(this.encoder,t)}length(){return Kr(this.encoder)}}var tt;(function(n){n[n.Sync=0]="Sync",n[n.Awareness=1]="Awareness",n[n.Auth=2]="Auth",n[n.QueryAwareness=3]="QueryAwareness",n[n.Stateless=5]="Stateless",n[n.CLOSE=7]="CLOSE",n[n.SyncStatus=8]="SyncStatus"})(tt||(tt={}));var st;(function(n){n.Connecting="connecting",n.Connected="connected",n.Disconnected="disconnected"})(st||(st={}));class Jt{constructor(){this.encoder=ai()}get(t){return t.encoder}toUint8Array(){return hi(this.encoder)}}class na extends Jt{constructor(){super(...arguments),this.type=tt.CLOSE,this.description="Ask the server to close the connection"}get(t){return _t(this.encoder,t.documentName),nt(this.encoder,this.type),this.encoder}}class sa extends Zr{constructor(t){super(),this.messageQueue=[],this.configuration={url:"",autoConnect:!0,preserveTrailingSlash:!1,document:void 0,WebSocketPolyfill:void 0,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,handleTimeout:null,providerMap:new Map},this.webSocket=null,this.webSocketHandlers={},this.shouldConnect=!0,this.status=st.Disconnected,this.lastMessageReceived=0,this.identifier=0,this.intervals={connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.closeTries=0,this.setConfiguration(t),this.configuration.WebSocketPolyfill=t.WebSocketPolyfill?t.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),this.shouldConnect&&this.connect()}async onOpen(t){this.status=st.Connected,this.emit("status",{status:st.Connected}),this.cancelWebsocketRetry=void 0,this.receivedOnOpenPayload=t}attach(t){this.configuration.providerMap.set(t.configuration.name,t),this.status===st.Disconnected&&this.shouldConnect&&this.connect(),this.receivedOnOpenPayload&&this.status===st.Connected&&t.onOpen(this.receivedOnOpenPayload)}detach(t){this.configuration.providerMap.has(t.configuration.name)&&(t.send(na,{documentName:t.configuration.name}),this.configuration.providerMap.delete(t.configuration.name))}setConfiguration(t={}){this.configuration={...this.configuration,...t},this.configuration.autoConnect||(this.shouldConnect=!1)}async connect(){if(this.status===st.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.shouldConnect=!0;const t=()=>{let i=!1;return{retryPromise:xo(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,handleTimeout:this.configuration.handleTimeout,beforeAttempt:o=>{(!this.shouldConnect||i)&&o.abort()}}).catch(o=>{if(o&&o.code!=="ATTEMPT_ABORTED")throw o}),cancelFunc:()=>{i=!0}}},{retryPromise:e,cancelFunc:s}=t();return this.cancelWebsocketRetry=s,e}attachWebSocketListeners(t,e){const{identifier:s}=t,i=a=>this.emit("message",a),r=a=>this.emit("close",{event:a}),o=a=>this.emit("open",a),c=a=>{e(a)};this.webSocketHandlers[s]={message:i,close:r,open:o,error:c};const l=this.webSocketHandlers[t.identifier];Object.keys(l).forEach(a=>{t.addEventListener(a,l[a])})}cleanupWebSocket(){if(!this.webSocket)return;const{identifier:t}=this.webSocket,e=this.webSocketHandlers[t];Object.keys(e).forEach(s=>{var i;(i=this.webSocket)===null||i===void 0||i.removeEventListener(s,e[s]),delete this.webSocketHandlers[t]}),this.webSocket.close(),this.webSocket=null}createWebSocketConnection(){return new Promise((t,e)=>{this.webSocket&&(this.messageQueue=[],this.cleanupWebSocket()),this.lastMessageReceived=0,this.identifier+=1;const s=new this.configuration.WebSocketPolyfill(this.url);s.binaryType="arraybuffer",s.identifier=this.identifier,this.attachWebSocketListeners(s,e),this.webSocket=s,this.status=st.Connecting,this.emit("status",{status:st.Connecting}),this.connectionAttempt={resolve:t,reject:e}})}onMessage(t){var e;this.resolveConnectionAttempt(),this.lastMessageReceived=ce();const i=new Fs(t.data).peekVarString();(e=this.configuration.providerMap.get(i))===null||e===void 0||e.onMessage(t)}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=st.Connected,this.emit("status",{status:st.Connected}),this.emit("connect"),this.messageQueue.forEach(t=>this.send(t)),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var t;(t=this.connectionAttempt)===null||t===void 0||t.reject(),this.connectionAttempt=null}checkConnection(){var t;this.status===st.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=ce()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):((t=this.webSocket)===null||t===void 0||t.close(),this.messageQueue=[])))}get serverUrl(){if(this.configuration.preserveTrailingSlash)return this.configuration.url;let t=this.configuration.url;for(;t[t.length-1]==="/";)t=t.slice(0,t.length-1);return t}get url(){return this.serverUrl}disconnect(){if(this.shouldConnect=!1,this.webSocket!==null)try{this.webSocket.close(),this.messageQueue=[]}catch(t){console.error(t)}}send(t){var e;((e=this.webSocket)===null||e===void 0?void 0:e.readyState)===Ns.Open?this.webSocket.send(t):this.messageQueue.push(t)}onClose({event:t}){this.closeTries=0,this.cleanupWebSocket(),this.connectionAttempt&&this.rejectConnectionAttempt(),this.status=st.Disconnected,this.emit("status",{status:st.Disconnected}),this.emit("disconnect",{event:t}),!this.cancelWebsocketRetry&&this.shouldConnect&&setTimeout(()=>{this.connect()},this.configuration.delay)}destroy(){this.emit("destroy"),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),this.cleanupWebSocket()}}const to=0,ui=1,eo=2,ia=(n,t)=>{nt(n,to);const e=Xo(t);de(n,e)},ra=(n,t,e)=>{nt(n,ui),de(n,Ko(t,e))},oa=(n,t,e)=>ra(t,e,Xn(n)),no=(n,t,e)=>{try{Bo(t,Xn(n),e)}catch(s){console.error("Caught error while handling a Yjs update",s)}},ca=(n,t)=>{nt(n,eo),de(n,t)},la=no,aa=(n,t,e,s)=>{const i=jt(n);switch(i){case to:oa(n,t,e);break;case ui:no(n,e,s);break;case eo:la(n,e,s);break;default:throw new Error("Unknown message type")}return i};class ha{constructor(t){this.message=t}apply(t,e){const{message:s}=this,i=s.readVarUint(),r=s.length();switch(i){case tt.Sync:this.applySyncMessage(t,e);break;case tt.Awareness:this.applyAwarenessMessage(t);break;case tt.Auth:this.applyAuthMessage(t);break;case tt.QueryAwareness:this.applyQueryAwarenessMessage(t);break;case tt.Stateless:t.receiveStateless(Me(s.decoder));break;case tt.SyncStatus:this.applySyncStatusMessage(t,Bl(s.decoder)===1);break;case tt.CLOSE:const o={code:1e3,reason:Me(s.decoder),target:t.configuration.websocketProvider.webSocket,type:"close"};t.onClose(),t.configuration.onClose({event:o}),t.forwardClose({event:o});break;default:throw new Error(`Cant apply message of unknown type: ${i}`)}s.length()>r+1&&t.send(Jt,{encoder:s.encoder})}applySyncMessage(t,e){const{message:s}=this;s.writeVarUint(tt.Sync);const i=aa(s.decoder,s.encoder,t.document,t);e&&i===ui&&(t.synced=!0)}applySyncStatusMessage(t,e){e&&t.decrementUnsyncedChanges()}applyAwarenessMessage(t){if(!t.awareness)return;const{message:e}=this;ea(t.awareness,e.readVarUint8Array(),t)}applyAuthMessage(t){const{message:e}=this;Tl(e.decoder,t.sendToken.bind(t),t.permissionDeniedHandler.bind(t),t.authenticatedHandler.bind(t))}applyQueryAwarenessMessage(t){if(!t.awareness)return;const{message:e}=this;e.writeVarUint(tt.Awareness),e.writeVarUint8Array(Ps(t.awareness,Array.from(t.awareness.getStates().keys())))}}class ua{constructor(t,e={}){this.message=new t,this.encoder=this.message.get(e)}create(){return hi(this.encoder)}send(t){t==null||t.send(this.create())}}class da extends Jt{constructor(){super(...arguments),this.type=tt.Auth,this.description="Authentication"}get(t){if(typeof t.token>"u")throw new Error("The authentication message requires `token` as an argument.");return _t(this.encoder,t.documentName),nt(this.encoder,this.type),_l(this.encoder,t.token),this.encoder}}class Bi extends Jt{constructor(){super(...arguments),this.type=tt.Awareness,this.description="Awareness states update"}get(t){if(typeof t.awareness>"u")throw new Error("The awareness message requires awareness as an argument");if(typeof t.clients>"u")throw new Error("The awareness message requires clients as an argument");_t(this.encoder,t.documentName),nt(this.encoder,this.type);let e;return t.states===void 0?e=Ps(t.awareness,t.clients):e=Ps(t.awareness,t.clients,t.states),de(this.encoder,e),this.encoder}}class fa extends Jt{constructor(){super(...arguments),this.type=tt.Stateless,this.description="A stateless message"}get(t){var e;return _t(this.encoder,t.documentName),nt(this.encoder,this.type),_t(this.encoder,(e=t.payload)!==null&&e!==void 0?e:""),this.encoder}}class zi extends Jt{constructor(){super(...arguments),this.type=tt.Sync,this.description="First sync step"}get(t){if(typeof t.document>"u")throw new Error("The sync step one message requires document as an argument");return _t(this.encoder,t.documentName),nt(this.encoder,this.type),ia(this.encoder,t.document),this.encoder}}class ga extends Jt{constructor(){super(...arguments),this.type=tt.Sync,this.description="A document update"}get(t){return _t(this.encoder,t.documentName),nt(this.encoder,this.type),ca(this.encoder,t.update),this.encoder}}class pa extends Error{constructor(){super(...arguments),this.code=1001}}class eh extends Zr{constructor(t){var e,s,i;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onSynced:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,onUnsyncedChanges:()=>null},this.isSynced=!1,this.unsyncedChanges=0,this.isAuthenticated=!1,this.authorizedScope=void 0,this.manageSocket=!1,this._isAttached=!1,this.intervals={forceSync:null},this.boundDocumentUpdateHandler=this.documentUpdateHandler.bind(this),this.boundAwarenessUpdateHandler=this.awarenessUpdateHandler.bind(this),this.boundPageHide=this.pageHide.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnClose=this.onClose.bind(this),this.forwardConnect=()=>this.emit("connect"),this.forwardStatus=r=>this.emit("status",r),this.forwardClose=r=>this.emit("close",r),this.forwardDisconnect=r=>this.emit("disconnect",r),this.forwardDestroy=()=>this.emit("destroy"),this.setConfiguration(t),this.configuration.document=t.document?t.document:new Gt,this.configuration.awareness=t.awareness!==void 0?t.awareness:new ta(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("unsyncedChanges",this.configuration.onUnsyncedChanges),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),(e=this.awareness)===null||e===void 0||e.on("update",()=>{this.emit("awarenessUpdate",{states:Vi(this.awareness.getStates())})}),(s=this.awareness)===null||s===void 0||s.on("change",()=>{this.emit("awarenessChange",{states:Vi(this.awareness.getStates())})}),this.document.on("update",this.boundDocumentUpdateHandler),(i=this.awareness)===null||i===void 0||i.on("update",this.boundAwarenessUpdateHandler),this.registerEventListeners(),this.configuration.forceSyncInterval&&typeof this.configuration.forceSyncInterval=="number"&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.manageSocket&&this.attach()}setConfiguration(t={}){t.websocketProvider||(this.manageSocket=!0,this.configuration.websocketProvider=new sa(t)),this.configuration={...this.configuration,...t}}get document(){return this.configuration.document}get isAttached(){return this._isAttached}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}resetUnsyncedChanges(){this.unsyncedChanges=1,this.emit("unsyncedChanges",{number:this.unsyncedChanges})}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",{number:this.unsyncedChanges})}decrementUnsyncedChanges(){this.unsyncedChanges>0&&(this.unsyncedChanges-=1),this.unsyncedChanges===0&&(this.synced=!0),this.emit("unsyncedChanges",{number:this.unsyncedChanges})}forceSync(){this.resetUnsyncedChanges(),this.send(zi,{document:this.document,documentName:this.configuration.name})}pageHide(){this.awareness&&Ze(this.awareness,[this.document.clientID],"page hide")}registerEventListeners(){typeof window>"u"||!("addEventListener"in window)||window.addEventListener("pagehide",this.boundPageHide)}sendStateless(t){this.send(fa,{documentName:this.configuration.name,payload:t})}async sendToken(){let t;try{t=await this.getToken()}catch(e){this.permissionDeniedHandler(`Failed to get token during sendToken(): ${e}`);return}this.send(da,{token:t??"",documentName:this.configuration.name})}documentUpdateHandler(t,e){e!==this&&(this.incrementUnsyncedChanges(),this.send(ga,{update:t,documentName:this.configuration.name}))}awarenessUpdateHandler({added:t,updated:e,removed:s},i){const r=t.concat(e).concat(s);this.send(Bi,{awareness:this.awareness,clients:r,documentName:this.configuration.name})}get synced(){return this.isSynced}set synced(t){this.isSynced!==t&&(this.isSynced=t,t&&this.emit("synced",{state:t}))}receiveStateless(t){this.emit("stateless",{payload:t})}async connect(){if(this.manageSocket)return this.configuration.websocketProvider.connect();console.warn("HocuspocusProvider::connect() is deprecated and does not do anything. Please connect/disconnect on the websocketProvider, or attach/deattach providers.")}disconnect(){if(this.manageSocket)return this.configuration.websocketProvider.disconnect();console.warn("HocuspocusProvider::disconnect() is deprecated and does not do anything. Please connect/disconnect on the websocketProvider, or attach/deattach providers.")}async onOpen(t){this.isAuthenticated=!1,this.emit("open",{event:t}),await this.sendToken(),this.startSync()}async getToken(){return typeof this.configuration.token=="function"?await this.configuration.token():this.configuration.token}startSync(){this.resetUnsyncedChanges(),this.send(zi,{document:this.document,documentName:this.configuration.name}),this.awareness&&this.awareness.getLocalState()!==null&&this.send(Bi,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(t,e){if(!this._isAttached)return;const s=new ua(t,e);this.emit("outgoingMessage",{message:s.message}),s.send(this.configuration.websocketProvider)}onMessage(t){const e=new Fs(t.data),s=e.readVarString();e.writeVarString(s),this.emit("message",{event:t,message:new Fs(t.data)}),new ha(e).apply(this,!0)}onClose(){this.isAuthenticated=!1,this.synced=!1,this.awareness&&Ze(this.awareness,Array.from(this.awareness.getStates().keys()).filter(t=>t!==this.document.clientID),this)}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&(Ze(this.awareness,[this.document.clientID],"provider destroy"),this.awareness.off("update",this.boundAwarenessUpdateHandler),this.awareness.destroy()),this.document.off("update",this.boundDocumentUpdateHandler),this.removeAllListeners(),this.detach(),this.manageSocket&&this.configuration.websocketProvider.destroy(),!(typeof window>"u"||!("removeEventListener"in window))&&window.removeEventListener("pagehide",this.boundPageHide)}detach(){this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("status",this.forwardStatus),this.configuration.websocketProvider.off("status",this.configuration.onStatus),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.configuration.websocketProvider.detach(this),this._isAttached=!1}attach(){this._isAttached||(this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("status",this.configuration.onStatus),this.configuration.websocketProvider.on("status",this.forwardStatus),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),this.configuration.websocketProvider.attach(this),this._isAttached=!0)}permissionDeniedHandler(t){this.emit("authenticationFailed",{reason:t}),this.isAuthenticated=!1}authenticatedHandler(t){this.isAuthenticated=!0,this.authorizedScope=t,this.emit("authenticated",{scope:t})}setAwarenessField(t,e){if(!this.awareness)throw new pa(`Cannot set awareness field "${t}" to ${JSON.stringify(e)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(t,e)}}const ma="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",wa="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",js="numeric",Vs="ascii",Ys="alpha",ke="asciinumeric",ge="alphanumeric",Ws="domain",so="emoji",ya="scheme",ka="slashscheme",ks="whitespace";function Sa(n,t){return n in t||(t[n]=[]),t[n]}function Ht(n,t,e){t[js]&&(t[ke]=!0,t[ge]=!0),t[Vs]&&(t[ke]=!0,t[Ys]=!0),t[ke]&&(t[ge]=!0),t[Ys]&&(t[ge]=!0),t[ge]&&(t[Ws]=!0),t[so]&&(t[Ws]=!0);for(const s in t){const i=Sa(s,e);i.indexOf(n)<0&&i.push(n)}}function ba(n,t){const e={};for(const s in t)t[s].indexOf(n)>=0&&(e[s]=!0);return e}function rt(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}rt.groups={};rt.prototype={accepts(){return!!this.t},go(n){const t=this,e=t.j[n];if(e)return e;for(let s=0;s<t.jr.length;s++){const i=t.jr[s][0],r=t.jr[s][1];if(r&&i.test(n))return r}return t.jd},has(n,t=!1){return t?n in this.j:!!this.go(n)},ta(n,t,e,s){for(let i=0;i<n.length;i++)this.tt(n[i],t,e,s)},tr(n,t,e,s){s=s||rt.groups;let i;return t&&t.j?i=t:(i=new rt(t),e&&s&&Ht(t,e,s)),this.jr.push([n,i]),i},ts(n,t,e,s){let i=this;const r=n.length;if(!r)return i;for(let o=0;o<r-1;o++)i=i.tt(n[o]);return i.tt(n[r-1],t,e,s)},tt(n,t,e,s){s=s||rt.groups;const i=this;if(t&&t.j)return i.j[n]=t,t;const r=t;let o,c=i.go(n);if(c?(o=new rt,Object.assign(o.j,c.j),o.jr.push.apply(o.jr,c.jr),o.jd=c.jd,o.t=c.t):o=new rt,r){if(s)if(o.t&&typeof o.t=="string"){const l=Object.assign(ba(o.t,s),e);Ht(r,l,s)}else e&&Ht(r,e,s);o.t=r}return i.j[n]=o,o}};const U=(n,t,e,s,i)=>n.ta(t,e,s,i),G=(n,t,e,s,i)=>n.tr(t,e,s,i),Gi=(n,t,e,s,i)=>n.ts(t,e,s,i),p=(n,t,e,s,i)=>n.tt(t,e,s,i),vt="WORD",Bs="UWORD",io="ASCIINUMERICAL",ro="ALPHANUMERICAL",$e="LOCALHOST",zs="TLD",Gs="UTLD",tn="SCHEME",Qt="SLASH_SCHEME",di="NUM",Ks="WS",fi="NL",Se="OPENBRACE",be="CLOSEBRACE",kn="OPENBRACKET",Sn="CLOSEBRACKET",bn="OPENPAREN",Cn="CLOSEPAREN",En="OPENANGLEBRACKET",Dn="CLOSEANGLEBRACKET",An="FULLWIDTHLEFTPAREN",vn="FULLWIDTHRIGHTPAREN",_n="LEFTCORNERBRACKET",Tn="RIGHTCORNERBRACKET",Ln="LEFTWHITECORNERBRACKET",On="RIGHTWHITECORNERBRACKET",In="FULLWIDTHLESSTHAN",Mn="FULLWIDTHGREATERTHAN",$n="AMPERSAND",Un="APOSTROPHE",Rn="ASTERISK",It="AT",xn="BACKSLASH",Nn="BACKTICK",Hn="CARET",$t="COLON",gi="COMMA",Pn="DOLLAR",mt="DOT",Fn="EQUALS",pi="EXCLAMATION",at="HYPHEN",Ce="PERCENT",jn="PIPE",Vn="PLUS",Yn="POUND",Ee="QUERY",mi="QUOTE",oo="FULLWIDTHMIDDLEDOT",wi="SEMI",wt="SLASH",De="TILDE",Wn="UNDERSCORE",co="EMOJI",Bn="SYM";var lo=Object.freeze({__proto__:null,ALPHANUMERICAL:ro,AMPERSAND:$n,APOSTROPHE:Un,ASCIINUMERICAL:io,ASTERISK:Rn,AT:It,BACKSLASH:xn,BACKTICK:Nn,CARET:Hn,CLOSEANGLEBRACKET:Dn,CLOSEBRACE:be,CLOSEBRACKET:Sn,CLOSEPAREN:Cn,COLON:$t,COMMA:gi,DOLLAR:Pn,DOT:mt,EMOJI:co,EQUALS:Fn,EXCLAMATION:pi,FULLWIDTHGREATERTHAN:Mn,FULLWIDTHLEFTPAREN:An,FULLWIDTHLESSTHAN:In,FULLWIDTHMIDDLEDOT:oo,FULLWIDTHRIGHTPAREN:vn,HYPHEN:at,LEFTCORNERBRACKET:_n,LEFTWHITECORNERBRACKET:Ln,LOCALHOST:$e,NL:fi,NUM:di,OPENANGLEBRACKET:En,OPENBRACE:Se,OPENBRACKET:kn,OPENPAREN:bn,PERCENT:Ce,PIPE:jn,PLUS:Vn,POUND:Yn,QUERY:Ee,QUOTE:mi,RIGHTCORNERBRACKET:Tn,RIGHTWHITECORNERBRACKET:On,SCHEME:tn,SEMI:wi,SLASH:wt,SLASH_SCHEME:Qt,SYM:Bn,TILDE:De,TLD:zs,UNDERSCORE:Wn,UTLD:Gs,UWORD:Bs,WORD:vt,WS:Ks});const Dt=/[a-z]/,fe=new RegExp("\\p{L}","u"),Ss=new RegExp("\\p{Emoji}","u"),At=/\d/,bs=/\s/,Ki="\r",Cs=`
`,Ca="",Ea="",Es="";let Ge=null,Ke=null;function Da(n=[]){const t={};rt.groups=t;const e=new rt;Ge==null&&(Ge=Ji(ma)),Ke==null&&(Ke=Ji(wa)),p(e,"'",Un),p(e,"{",Se),p(e,"}",be),p(e,"[",kn),p(e,"]",Sn),p(e,"(",bn),p(e,")",Cn),p(e,"<",En),p(e,">",Dn),p(e,"",An),p(e,"",vn),p(e,"",_n),p(e,"",Tn),p(e,"",Ln),p(e,"",On),p(e,"",In),p(e,"",Mn),p(e,"&",$n),p(e,"*",Rn),p(e,"@",It),p(e,"`",Nn),p(e,"^",Hn),p(e,":",$t),p(e,",",gi),p(e,"$",Pn),p(e,".",mt),p(e,"=",Fn),p(e,"!",pi),p(e,"-",at),p(e,"%",Ce),p(e,"|",jn),p(e,"+",Vn),p(e,"#",Yn),p(e,"?",Ee),p(e,'"',mi),p(e,"/",wt),p(e,";",wi),p(e,"~",De),p(e,"_",Wn),p(e,"\\",xn),p(e,"",oo);const s=G(e,At,di,{[js]:!0});G(s,At,s);const i=G(s,Dt,io,{[ke]:!0}),r=G(s,fe,ro,{[ge]:!0}),o=G(e,Dt,vt,{[Vs]:!0});G(o,At,i),G(o,Dt,o),G(i,At,i),G(i,Dt,i);const c=G(e,fe,Bs,{[Ys]:!0});G(c,Dt),G(c,At,r),G(c,fe,c),G(r,At,r),G(r,Dt),G(r,fe,r);const l=p(e,Cs,fi,{[ks]:!0}),a=p(e,Ki,Ks,{[ks]:!0}),h=G(e,bs,Ks,{[ks]:!0});p(e,Es,h),p(a,Cs,l),p(a,Es,h),G(a,bs,h),p(h,Ki),p(h,Cs),G(h,bs,h),p(h,Es,h);const u=G(e,Ss,co,{[so]:!0});p(u,"#"),G(u,Ss,u),p(u,Ca,u);const d=p(u,Ea);p(d,"#"),G(d,Ss,u);const f=[[Dt,o],[At,i]],g=[[Dt,null],[fe,c],[At,r]];for(let b=0;b<Ge.length;b++)Ot(e,Ge[b],zs,vt,f);for(let b=0;b<Ke.length;b++)Ot(e,Ke[b],Gs,Bs,g);Ht(zs,{tld:!0,ascii:!0},t),Ht(Gs,{utld:!0,alpha:!0},t),Ot(e,"file",tn,vt,f),Ot(e,"mailto",tn,vt,f),Ot(e,"http",Qt,vt,f),Ot(e,"https",Qt,vt,f),Ot(e,"ftp",Qt,vt,f),Ot(e,"ftps",Qt,vt,f),Ht(tn,{scheme:!0,ascii:!0},t),Ht(Qt,{slashscheme:!0,ascii:!0},t),n=n.sort((b,m)=>b[0]>m[0]?1:-1);for(let b=0;b<n.length;b++){const m=n[b][0],L=n[b][1]?{[ya]:!0}:{[ka]:!0};m.indexOf("-")>=0?L[Ws]=!0:Dt.test(m)?At.test(m)?L[ke]=!0:L[Vs]=!0:L[js]=!0,Gi(e,m,m,L)}return Gi(e,"localhost",$e,{ascii:!0}),e.jd=new rt(Bn),{start:e,tokens:Object.assign({groups:t},lo)}}function ao(n,t){const e=Aa(t.replace(/[A-Z]/g,c=>c.toLowerCase())),s=e.length,i=[];let r=0,o=0;for(;o<s;){let c=n,l=null,a=0,h=null,u=-1,d=-1;for(;o<s&&(l=c.go(e[o]));)c=l,c.accepts()?(u=0,d=0,h=c):u>=0&&(u+=e[o].length,d++),a+=e[o].length,r+=e[o].length,o++;r-=u,o-=d,a-=u,i.push({t:h.t,v:t.slice(r-a,r),s:r-a,e:r})}return i}function Aa(n){const t=[],e=n.length;let s=0;for(;s<e;){let i=n.charCodeAt(s),r,o=i<55296||i>56319||s+1===e||(r=n.charCodeAt(s+1))<56320||r>57343?n[s]:n.slice(s,s+2);t.push(o),s+=o.length}return t}function Ot(n,t,e,s,i){let r;const o=t.length;for(let c=0;c<o-1;c++){const l=t[c];n.j[l]?r=n.j[l]:(r=new rt(s),r.jr=i.slice(),n.j[l]=r),n=r}return r=new rt(e),r.jr=i.slice(),n.j[t[o-1]]=r,r}function Ji(n){const t=[],e=[];let s=0,i="0123456789";for(;s<n.length;){let r=0;for(;i.indexOf(n[s+r])>=0;)r++;if(r>0){t.push(e.join(""));for(let o=parseInt(n.substring(s,s+r),10);o>0;o--)e.pop();s+=r}else e.push(n[s]),s++}return t}const Ue={defaultProtocol:"http",events:null,format:Qi,formatHref:Qi,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function yi(n,t=null){let e=Object.assign({},Ue);n&&(e=Object.assign(e,n instanceof yi?n.o:n));const s=e.ignoreTags,i=[];for(let r=0;r<s.length;r++)i.push(s[r].toUpperCase());this.o=e,t&&(this.defaultRender=t),this.ignoreTags=i}yi.prototype={o:Ue,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,t,e){const s=t!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=e.t in i?i[e.t]:Ue[n],typeof i=="function"&&s&&(i=i(t,e))):typeof i=="function"&&s&&(i=i(t,e.t,e)),i)},getObj(n,t,e){let s=this.o[n];return typeof s=="function"&&t!=null&&(s=s(t,e.t,e)),s},render(n){const t=n.render(this);return(this.get("render",null,n)||this.defaultRender)(t,n.t,n)}};function Qi(n){return n}function ho(n,t){this.t="token",this.v=n,this.tk=t}ho.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const t=this.toString(),e=n.get("truncate",t,this),s=n.get("format",t,this);return e&&s.length>e?s.substring(0,e)+"":s},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=Ue.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const t=this,e=this.toHref(n.get("defaultProtocol")),s=n.get("formatHref",e,this),i=n.get("tagName",e,t),r=this.toFormattedString(n),o={},c=n.get("className",e,t),l=n.get("target",e,t),a=n.get("rel",e,t),h=n.getObj("attributes",e,t),u=n.getObj("events",e,t);return o.href=s,c&&(o.class=c),l&&(o.target=l),a&&(o.rel=a),h&&Object.assign(o,h),{tagName:i,attributes:o,content:r,eventListeners:u}}};function Zn(n,t){class e extends ho{constructor(i,r){super(i,r),this.t=n}}for(const s in t)e.prototype[s]=t[s];return e.t=n,e}const qi=Zn("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Xi=Zn("text"),va=Zn("nl"),Je=Zn("url",{isLink:!0,toHref(n=Ue.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==$e&&n[1].t===$t}}),lt=n=>new rt(n);function _a({groups:n}){const t=n.domain.concat([$n,Rn,It,xn,Nn,Hn,Pn,Fn,at,di,Ce,jn,Vn,Yn,wt,Bn,De,Wn]),e=[Un,$t,gi,mt,pi,Ce,Ee,mi,wi,En,Dn,Se,be,Sn,kn,bn,Cn,An,vn,_n,Tn,Ln,On,In,Mn],s=[$n,Un,Rn,xn,Nn,Hn,Pn,Fn,at,Se,be,Ce,jn,Vn,Yn,Ee,wt,Bn,De,Wn],i=lt(),r=p(i,De);U(r,s,r),U(r,n.domain,r);const o=lt(),c=lt(),l=lt();U(i,n.domain,o),U(i,n.scheme,c),U(i,n.slashscheme,l),U(o,s,r),U(o,n.domain,o);const a=p(o,It);p(r,It,a),p(c,It,a),p(l,It,a);const h=p(r,mt);U(h,s,r),U(h,n.domain,r);const u=lt();U(a,n.domain,u),U(u,n.domain,u);const d=p(u,mt);U(d,n.domain,u);const f=lt(qi);U(d,n.tld,f),U(d,n.utld,f),p(a,$e,f);const g=p(u,at);p(g,at,g),U(g,n.domain,u),U(f,n.domain,u),p(f,mt,d),p(f,at,g);const b=p(f,$t);U(b,n.numeric,qi);const m=p(o,at),C=p(o,mt);p(m,at,m),U(m,n.domain,o),U(C,s,r),U(C,n.domain,o);const L=lt(Je);U(C,n.tld,L),U(C,n.utld,L),U(L,n.domain,o),U(L,s,r),p(L,mt,C),p(L,at,m),p(L,It,a);const x=p(L,$t),X=lt(Je);U(x,n.numeric,X);const N=lt(Je),I=lt();U(N,t,N),U(N,e,I),U(I,t,N),U(I,e,I),p(L,wt,N),p(X,wt,N);const A=p(c,$t),k=p(l,$t),$=p(k,wt),_=p($,wt);U(c,n.domain,o),p(c,mt,C),p(c,at,m),U(l,n.domain,o),p(l,mt,C),p(l,at,m),U(A,n.domain,N),p(A,wt,N),p(A,Ee,N),U(_,n.domain,N),U(_,t,N),p(_,wt,N);const v=[[Se,be],[kn,Sn],[bn,Cn],[En,Dn],[An,vn],[_n,Tn],[Ln,On],[In,Mn]];for(let H=0;H<v.length;H++){const[P,E]=v[H],y=p(N,P);p(I,P,y),p(y,E,N);const w=lt(Je);U(y,t,w);const D=lt();U(y,e),U(w,t,w),U(w,e,D),U(D,t,w),U(D,e,D),p(w,E,N),p(D,E,N)}return p(i,$e,L),p(i,fi,va),{start:i,tokens:lo}}function Ta(n,t,e){let s=e.length,i=0,r=[],o=[];for(;i<s;){let c=n,l=null,a=null,h=0,u=null,d=-1;for(;i<s&&!(l=c.go(e[i].t));)o.push(e[i++]);for(;i<s&&(a=l||c.go(e[i].t));)l=null,c=a,c.accepts()?(d=0,u=c):d>=0&&d++,i++,h++;if(d<0)i-=h,i<s&&(o.push(e[i]),i++);else{o.length>0&&(r.push(Ds(Xi,t,o)),o=[]),i-=d,h-=d;const f=u.t,g=e.slice(i-h,i);r.push(Ds(f,t,g))}}return o.length>0&&r.push(Ds(Xi,t,o)),r}function Ds(n,t,e){const s=e[0].s,i=e[e.length-1].e,r=t.slice(s,i);return new n(r,e)}const La=typeof console<"u"&&console&&console.warn||(()=>{}),Oa="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",B={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function nh(){return rt.groups={},B.scanner=null,B.parser=null,B.tokenQueue=[],B.pluginQueue=[],B.customSchemes=[],B.initialized=!1,B}function sh(n,t=!1){if(B.initialized&&La(`linkifyjs: already initialized - will not register custom scheme "${n}" ${Oa}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);B.customSchemes.push([n,t])}function Ia(){B.scanner=Da(B.customSchemes);for(let n=0;n<B.tokenQueue.length;n++)B.tokenQueue[n][1]({scanner:B.scanner});B.parser=_a(B.scanner.tokens);for(let n=0;n<B.pluginQueue.length;n++)B.pluginQueue[n][1]({scanner:B.scanner,parser:B.parser});return B.initialized=!0,B}function uo(n){return B.initialized||Ia(),Ta(B.parser.start,n,ao(B.scanner.start,n))}uo.scan=ao;function ih(n,t=null,e=null){if(t&&typeof t=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);e=t,t=null}const s=new yi(e),i=uo(n),r=[];for(let o=0;o<i.length;o++){const c=i[o];c.isLink&&(!t||c.t===t)&&s.check(c)&&r.push(c.toFormattedObject(s))}return r}var en={exports:{}},Ma=en.exports,Zi;function $a(){return Zi||(Zi=1,(function(n,t){(function(e,s){n.exports=s()})(Ma,(function(){var e="day";return function(s,i,r){var o=function(a){return a.add(4-a.isoWeekday(),e)},c=i.prototype;c.isoWeekYear=function(){return o(this).year()},c.isoWeek=function(a){if(!this.$utils().u(a))return this.add(7*(a-this.isoWeek()),e);var h,u,d,f,g=o(this),b=(h=this.isoWeekYear(),u=this.$u,d=(u?r.utc:r)().year(h).startOf("year"),f=4-d.isoWeekday(),d.isoWeekday()>4&&(f+=7),d.add(f,e));return g.diff(b,"week")+1},c.isoWeekday=function(a){return this.$utils().u(a)?this.day()||7:this.day(this.day()%7?a:a-7)};var l=c.startOf;c.startOf=function(a,h){var u=this.$utils(),d=!!u.u(h)||h;return u.p(a)==="isoweek"?d?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(a,h)}}}))})(en)),en.exports}var Ua=$a();const rh=Re(Ua);var nn={exports:{}},Ra=nn.exports,tr;function xa(){return tr||(tr=1,(function(n,t){(function(e,s){n.exports=s()})(Ra,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,r=/\d\d/,o=/\d\d?/,c=/\d*[^-_:/,()\s\d]+/,l={},a=function(m){return(m=+m)+(m>68?1900:2e3)},h=function(m){return function(C){this[m]=+C}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=(function(C){if(!C||C==="Z")return 0;var L=C.match(/([+-]|\d\d)/g),x=60*L[1]+(+L[2]||0);return x===0?0:L[0]==="+"?-x:x})(m)}],d=function(m){var C=l[m];return C&&(C.indexOf?C:C.s.concat(C.f))},f=function(m,C){var L,x=l.meridiem;if(x){for(var X=1;X<=24;X+=1)if(m.indexOf(x(X,0,C))>-1){L=X>12;break}}else L=m===(C?"pm":"PM");return L},g={A:[c,function(m){this.afternoon=f(m,!1)}],a:[c,function(m){this.afternoon=f(m,!0)}],Q:[i,function(m){this.month=3*(m-1)+1}],S:[i,function(m){this.milliseconds=100*+m}],SS:[r,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[o,h("seconds")],ss:[o,h("seconds")],m:[o,h("minutes")],mm:[o,h("minutes")],H:[o,h("hours")],h:[o,h("hours")],HH:[o,h("hours")],hh:[o,h("hours")],D:[o,h("day")],DD:[r,h("day")],Do:[c,function(m){var C=l.ordinal,L=m.match(/\d+/);if(this.day=L[0],C)for(var x=1;x<=31;x+=1)C(x).replace(/\[|\]/g,"")===m&&(this.day=x)}],w:[o,h("week")],ww:[r,h("week")],M:[o,h("month")],MM:[r,h("month")],MMM:[c,function(m){var C=d("months"),L=(d("monthsShort")||C.map((function(x){return x.slice(0,3)}))).indexOf(m)+1;if(L<1)throw new Error;this.month=L%12||L}],MMMM:[c,function(m){var C=d("months").indexOf(m)+1;if(C<1)throw new Error;this.month=C%12||C}],Y:[/[+-]?\d+/,h("year")],YY:[r,function(m){this.year=a(m)}],YYYY:[/\d{4}/,h("year")],Z:u,ZZ:u};function b(m){var C,L;C=m,L=l&&l.formats;for(var x=(m=C.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(_,v,H){var P=H&&H.toUpperCase();return v||L[H]||e[H]||L[P].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(E,y,w){return y||w.slice(1)}))}))).match(s),X=x.length,N=0;N<X;N+=1){var I=x[N],A=g[I],k=A&&A[0],$=A&&A[1];x[N]=$?{regex:k,parser:$}:I.replace(/^\[|\]$/g,"")}return function(_){for(var v={},H=0,P=0;H<X;H+=1){var E=x[H];if(typeof E=="string")P+=E.length;else{var y=E.regex,w=E.parser,D=_.slice(P),S=y.exec(D)[0];w.call(v,S),_=_.replace(S,"")}}return(function(T){var O=T.afternoon;if(O!==void 0){var R=T.hours;O?R<12&&(T.hours+=12):R===12&&(T.hours=0),delete T.afternoon}})(v),v}}return function(m,C,L){L.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(a=m.parseTwoDigitYear);var x=C.prototype,X=x.parse;x.parse=function(N){var I=N.date,A=N.utc,k=N.args;this.$u=A;var $=k[1];if(typeof $=="string"){var _=k[2]===!0,v=k[3]===!0,H=_||v,P=k[2];v&&(P=k[2]),l=this.$locale(),!_&&P&&(l=L.Ls[P]),this.$d=(function(D,S,T,O){try{if(["x","X"].indexOf(S)>-1)return new Date((S==="X"?1e3:1)*D);var R=b(S)(D),W=R.year,z=R.month,Q=R.day,it=R.hours,Tt=R.minutes,Ct=R.seconds,Rt=R.milliseconds,pt=R.zone,Z=R.week,ct=new Date,Et=Q||(W||z?1:ct.getDate()),Lt=W||ct.getFullYear(),Ve=0;W&&!z||(Ve=z>0?z-1:ct.getMonth());var Ye,ts=it||0,es=Tt||0,ns=Ct||0,ss=Rt||0;return pt?new Date(Date.UTC(Lt,Ve,Et,ts,es,ns,ss+60*pt.offset*1e3)):T?new Date(Date.UTC(Lt,Ve,Et,ts,es,ns,ss)):(Ye=new Date(Lt,Ve,Et,ts,es,ns,ss),Z&&(Ye=O(Ye).week(Z).toDate()),Ye)}catch{return new Date("")}})(I,$,A,L),this.init(),P&&P!==!0&&(this.$L=this.locale(P).$L),H&&I!=this.format($)&&(this.$d=new Date("")),l={}}else if($ instanceof Array)for(var E=$.length,y=1;y<=E;y+=1){k[1]=$[y-1];var w=L.apply(this,k);if(w.isValid()){this.$d=w.$d,this.$L=w.$L,this.init();break}y===E&&(this.$d=new Date(""))}else X.call(this,N)}}}))})(nn)),nn.exports}var Na=xa();const oh=Re(Na);var sn={exports:{}},Ha=sn.exports,er;function Pa(){return er||(er=1,(function(n,t){(function(e,s){n.exports=s()})(Ha,(function(){return function(e,s){var i=s.prototype,r=i.format;i.format=function(o){var c=this,l=this.$locale();if(!this.isValid())return r.bind(this)(o);var a=this.$utils(),h=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(u){switch(u){case"Q":return Math.ceil((c.$M+1)/3);case"Do":return l.ordinal(c.$D);case"gggg":return c.weekYear();case"GGGG":return c.isoWeekYear();case"wo":return l.ordinal(c.week(),"W");case"w":case"ww":return a.s(c.week(),u==="w"?1:2,"0");case"W":case"WW":return a.s(c.isoWeek(),u==="W"?1:2,"0");case"k":case"kk":return a.s(String(c.$H===0?24:c.$H),u==="k"?1:2,"0");case"X":return Math.floor(c.$d.getTime()/1e3);case"x":return c.$d.getTime();case"z":return"["+c.offsetName()+"]";case"zzz":return"["+c.offsetName("long")+"]";default:return u}}));return r.bind(this)(h)}}}))})(sn)),sn.exports}var Fa=Pa();const ch=Re(Fa);var rn={exports:{}},ja=rn.exports,nr;function Va(){return nr||(nr=1,(function(n,t){(function(e,s){n.exports=s()})(ja,(function(){var e,s,i=1e3,r=6e4,o=36e5,c=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=31536e6,h=2628e6,u=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,d={years:a,months:h,days:c,hours:o,minutes:r,seconds:i,milliseconds:1,weeks:6048e5},f=function(I){return I instanceof X},g=function(I,A,k){return new X(I,k,A.$l)},b=function(I){return s.p(I)+"s"},m=function(I){return I<0},C=function(I){return m(I)?Math.ceil(I):Math.floor(I)},L=function(I){return Math.abs(I)},x=function(I,A){return I?m(I)?{negative:!0,format:""+L(I)+A}:{negative:!1,format:""+I+A}:{negative:!1,format:""}},X=(function(){function I(k,$,_){var v=this;if(this.$d={},this.$l=_,k===void 0&&(this.$ms=0,this.parseFromMilliseconds()),$)return g(k*d[b($)],this);if(typeof k=="number")return this.$ms=k,this.parseFromMilliseconds(),this;if(typeof k=="object")return Object.keys(k).forEach((function(E){v.$d[b(E)]=k[E]})),this.calMilliseconds(),this;if(typeof k=="string"){var H=k.match(u);if(H){var P=H.slice(2).map((function(E){return E!=null?Number(E):0}));return this.$d.years=P[0],this.$d.months=P[1],this.$d.weeks=P[2],this.$d.days=P[3],this.$d.hours=P[4],this.$d.minutes=P[5],this.$d.seconds=P[6],this.calMilliseconds(),this}}return this}var A=I.prototype;return A.calMilliseconds=function(){var k=this;this.$ms=Object.keys(this.$d).reduce((function($,_){return $+(k.$d[_]||0)*d[_]}),0)},A.parseFromMilliseconds=function(){var k=this.$ms;this.$d.years=C(k/a),k%=a,this.$d.months=C(k/h),k%=h,this.$d.days=C(k/c),k%=c,this.$d.hours=C(k/o),k%=o,this.$d.minutes=C(k/r),k%=r,this.$d.seconds=C(k/i),k%=i,this.$d.milliseconds=k},A.toISOString=function(){var k=x(this.$d.years,"Y"),$=x(this.$d.months,"M"),_=+this.$d.days||0;this.$d.weeks&&(_+=7*this.$d.weeks);var v=x(_,"D"),H=x(this.$d.hours,"H"),P=x(this.$d.minutes,"M"),E=this.$d.seconds||0;this.$d.milliseconds&&(E+=this.$d.milliseconds/1e3,E=Math.round(1e3*E)/1e3);var y=x(E,"S"),w=k.negative||$.negative||v.negative||H.negative||P.negative||y.negative,D=H.format||P.format||y.format?"T":"",S=(w?"-":"")+"P"+k.format+$.format+v.format+D+H.format+P.format+y.format;return S==="P"||S==="-P"?"P0D":S},A.toJSON=function(){return this.toISOString()},A.format=function(k){var $=k||"YYYY-MM-DDTHH:mm:ss",_={Y:this.$d.years,YY:s.s(this.$d.years,2,"0"),YYYY:s.s(this.$d.years,4,"0"),M:this.$d.months,MM:s.s(this.$d.months,2,"0"),D:this.$d.days,DD:s.s(this.$d.days,2,"0"),H:this.$d.hours,HH:s.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:s.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:s.s(this.$d.seconds,2,"0"),SSS:s.s(this.$d.milliseconds,3,"0")};return $.replace(l,(function(v,H){return H||String(_[v])}))},A.as=function(k){return this.$ms/d[b(k)]},A.get=function(k){var $=this.$ms,_=b(k);return _==="milliseconds"?$%=1e3:$=_==="weeks"?C($/d[_]):this.$d[_],$||0},A.add=function(k,$,_){var v;return v=$?k*d[b($)]:f(k)?k.$ms:g(k,this).$ms,g(this.$ms+v*(_?-1:1),this)},A.subtract=function(k,$){return this.add(k,$,!0)},A.locale=function(k){var $=this.clone();return $.$l=k,$},A.clone=function(){return g(this.$ms,this)},A.humanize=function(k){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!k)},A.valueOf=function(){return this.asMilliseconds()},A.milliseconds=function(){return this.get("milliseconds")},A.asMilliseconds=function(){return this.as("milliseconds")},A.seconds=function(){return this.get("seconds")},A.asSeconds=function(){return this.as("seconds")},A.minutes=function(){return this.get("minutes")},A.asMinutes=function(){return this.as("minutes")},A.hours=function(){return this.get("hours")},A.asHours=function(){return this.as("hours")},A.days=function(){return this.get("days")},A.asDays=function(){return this.as("days")},A.weeks=function(){return this.get("weeks")},A.asWeeks=function(){return this.as("weeks")},A.months=function(){return this.get("months")},A.asMonths=function(){return this.as("months")},A.years=function(){return this.get("years")},A.asYears=function(){return this.as("years")},I})(),N=function(I,A,k){return I.add(A.years()*k,"y").add(A.months()*k,"M").add(A.days()*k,"d").add(A.hours()*k,"h").add(A.minutes()*k,"m").add(A.seconds()*k,"s").add(A.milliseconds()*k,"ms")};return function(I,A,k){e=k,s=k().$utils(),k.duration=function(v,H){var P=k.locale();return g(v,{$l:P},H)},k.isDuration=f;var $=A.prototype.add,_=A.prototype.subtract;A.prototype.add=function(v,H){return f(v)?N(this,v,1):$.bind(this)(v,H)},A.prototype.subtract=function(v,H){return f(v)?N(this,v,-1):_.bind(this)(v,H)}}}))})(rn)),rn.exports}var Ya=Va();const lh=Re(Ya);export{J as A,Ho as B,bt as C,Gt as D,eh as H,Y as I,yr as R,sc as S,Xa as U,re as Y,nh as a,rh as b,oh as c,th as d,ch as e,ih as f,lh as g,oe as h,fr as i,kt as j,ne as k,Za as l,fn as m,Qa as n,Ga as o,Ka as p,wr as q,sh as r,qa as s,uo as t,ic as u,Ne as v,Ja as w,ln as x,M as y,St as z};
